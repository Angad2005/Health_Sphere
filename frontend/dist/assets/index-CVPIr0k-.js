var tA=Object.defineProperty;var nA=(t,e,n)=>e in t?tA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>nA(t,typeof e!="symbol"?e+"":e,n);function rA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function sA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zx={exports:{}},Gh={},eb={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=Symbol.for("react.element"),iA=Symbol.for("react.portal"),oA=Symbol.for("react.fragment"),aA=Symbol.for("react.strict_mode"),lA=Symbol.for("react.profiler"),cA=Symbol.for("react.provider"),uA=Symbol.for("react.context"),hA=Symbol.for("react.forward_ref"),dA=Symbol.for("react.suspense"),fA=Symbol.for("react.memo"),pA=Symbol.for("react.lazy"),K0=Symbol.iterator;function mA(t){return t===null||typeof t!="object"?null:(t=K0&&t[K0]||t["@@iterator"],typeof t=="function"?t:null)}var tb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nb=Object.assign,rb={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=rb,this.updater=n||tb}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sb(){}sb.prototype=Qo.prototype;function jm(t,e,n){this.props=t,this.context=e,this.refs=rb,this.updater=n||tb}var Vm=jm.prototype=new sb;Vm.constructor=jm;nb(Vm,Qo.prototype);Vm.isPureReactComponent=!0;var G0=Array.isArray,ib=Object.prototype.hasOwnProperty,Fm={current:null},ob={key:!0,ref:!0,__self:!0,__source:!0};function ab(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ib.call(e,r)&&!ob.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:oc,type:t,key:i,ref:o,props:s,_owner:Fm.current}}function gA(t,e){return{$$typeof:oc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Um(t){return typeof t=="object"&&t!==null&&t.$$typeof===oc}function yA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Q0=/\/+/g;function tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yA(""+t.key):e.toString(36)}function Eu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case oc:case iA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+tf(o,0):r,G0(s)?(n="",t!=null&&(n=t.replace(Q0,"$&/")+"/"),Eu(s,e,n,"",function(c){return c})):s!=null&&(Um(s)&&(s=gA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Q0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",G0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+tf(i,a);o+=Eu(i,e,n,l,s)}else if(l=mA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+tf(i,a++),o+=Eu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vc(t,e,n){if(t==null)return t;var r=[],s=0;return Eu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _A(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Tu={transition:null},vA={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Tu,ReactCurrentOwner:Fm};function lb(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Vc,forEach:function(t,e,n){Vc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!Um(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Qo;me.Fragment=oA;me.Profiler=lA;me.PureComponent=jm;me.StrictMode=aA;me.Suspense=dA;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vA;me.act=lb;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Fm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ib.call(e,l)&&!ob.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:oc,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:uA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cA,_context:t},t.Consumer=t};me.createElement=ab;me.createFactory=function(t){var e=ab.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:hA,render:t}};me.isValidElement=Um;me.lazy=function(t){return{$$typeof:pA,_payload:{_status:-1,_result:t},_init:_A}};me.memo=function(t,e){return{$$typeof:fA,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Tu.transition;Tu.transition={};try{t()}finally{Tu.transition=e}};me.unstable_act=lb;me.useCallback=function(t,e){return Gt.current.useCallback(t,e)};me.useContext=function(t){return Gt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Gt.current.useEffect(t,e)};me.useId=function(){return Gt.current.useId()};me.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Gt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};me.useRef=function(t){return Gt.current.useRef(t)};me.useState=function(t){return Gt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Gt.current.useTransition()};me.version="18.3.1";eb.exports=me;var D=eb.exports;const Qh=sA(D),wA=rA({__proto__:null,default:Qh},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA=D,bA=Symbol.for("react.element"),EA=Symbol.for("react.fragment"),TA=Object.prototype.hasOwnProperty,kA=xA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IA={key:!0,ref:!0,__self:!0,__source:!0};function cb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)TA.call(e,r)&&!IA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:bA,type:t,key:i,ref:o,props:s,_owner:kA.current}}Gh.Fragment=EA;Gh.jsx=cb;Gh.jsxs=cb;Zx.exports=Gh;var f=Zx.exports,ub={exports:{}},Tn={},hb={exports:{}},db={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var q=B.length;B.push(Q);e:for(;0<q;){var fe=q-1>>>1,se=B[fe];if(0<s(se,Q))B[fe]=Q,B[q]=se,q=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],q=B.pop();if(q!==Q){B[0]=q;e:for(var fe=0,se=B.length,j=se>>>1;fe<j;){var ee=2*(fe+1)-1,oe=B[ee],we=ee+1,Oe=B[we];if(0>s(oe,q))we<se&&0>s(Oe,oe)?(B[fe]=Oe,B[we]=q,fe=we):(B[fe]=oe,B[ee]=q,fe=ee);else if(we<se&&0>s(Oe,q))B[fe]=Oe,B[we]=q,fe=we;else break e}}return Q}function s(B,Q){var q=B.sortIndex-Q.sortIndex;return q!==0?q:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,m=3,y=!1,x=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=B)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function R(B){if(E=!1,b(B),!x)if(n(l)!==null)x=!0,re(N);else{var Q=n(c);Q!==null&&he(R,Q.startTime-B)}}function N(B,Q){x=!1,E&&(E=!1,_(w),w=-1),y=!0;var q=m;try{for(b(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||B&&!P());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,m=d.priorityLevel;var se=fe(d.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),b(Q)}else r(l);d=n(l)}if(d!==null)var j=!0;else{var ee=n(c);ee!==null&&he(R,ee.startTime-Q),j=!1}return j}finally{d=null,m=q,y=!1}}var M=!1,k=null,w=-1,A=5,C=-1;function P(){return!(t.unstable_now()-C<A)}function O(){if(k!==null){var B=t.unstable_now();C=B;var Q=!0;try{Q=k(!0,B)}finally{Q?I():(M=!1,k=null)}}else M=!1}var I;if(typeof v=="function")I=function(){v(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,H=W.port2;W.port1.onmessage=O,I=function(){H.postMessage(null)}}else I=function(){T(O,0)};function re(B){k=B,M||(M=!0,I())}function he(B,Q){w=T(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,re(N))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var q=m;m=Q;try{return B()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=m;m=B;try{return Q()}finally{m=q}},t.unstable_scheduleCallback=function(B,Q,q){var fe=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?fe+q:fe):q=fe,B){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,B={id:h++,callback:Q,priorityLevel:B,startTime:q,expirationTime:se,sortIndex:-1},q>fe?(B.sortIndex=q,e(c,B),n(l)===null&&B===n(c)&&(E?(_(w),w=-1):E=!0,he(R,q-fe))):(B.sortIndex=se,e(l,B),x||y||(x=!0,re(N))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var Q=m;return function(){var q=m;m=Q;try{return B.apply(this,arguments)}finally{m=q}}}})(db);hb.exports=db;var SA=hb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA=D,En=SA;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fb=new Set,Tl={};function Fi(t,e){Ro(t,e),Ro(t+"Capture",e)}function Ro(t,e){for(Tl[t]=e,t=0;t<e.length;t++)fb.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tp=Object.prototype.hasOwnProperty,CA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y0={},X0={};function RA(t){return tp.call(X0,t)?!0:tp.call(Y0,t)?!1:CA.test(t)?X0[t]=!0:(Y0[t]=!0,!1)}function PA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NA(t,e,n,r){if(e===null||typeof e>"u"||PA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bm=/[\-:]([a-z])/g;function zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bm,zm);St[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bm,zm);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bm,zm);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function $m(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NA(e,n,s,r)&&(n=null),r||s===null?RA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=AA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),so=Symbol.for("react.portal"),io=Symbol.for("react.fragment"),Hm=Symbol.for("react.strict_mode"),np=Symbol.for("react.profiler"),pb=Symbol.for("react.provider"),mb=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),rp=Symbol.for("react.suspense"),sp=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),gb=Symbol.for("react.offscreen"),J0=Symbol.iterator;function Ea(t){return t===null||typeof t!="object"?null:(t=J0&&t[J0]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,nf;function Va(t){if(nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nf=e&&e[1]||""}return`
`+nf+t}var rf=!1;function sf(t,e){if(!t||rf)return"";rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{rf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Va(t):""}function DA(t){switch(t.tag){case 5:return Va(t.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 2:case 15:return t=sf(t.type,!1),t;case 11:return t=sf(t.type.render,!1),t;case 1:return t=sf(t.type,!0),t;default:return""}}function ip(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case io:return"Fragment";case so:return"Portal";case np:return"Profiler";case Hm:return"StrictMode";case rp:return"Suspense";case sp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mb:return(t.displayName||"Context")+".Consumer";case pb:return(t._context.displayName||"Context")+".Provider";case Wm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qm:return e=t.displayName||null,e!==null?e:ip(t.type)||"Memo";case os:e=t._payload,t=t._init;try{return ip(t(e))}catch{}}return null}function OA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ip(e);case 8:return e===Hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MA(t){var e=yb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=MA(t))}function _b(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function op(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Z0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vb(t,e){e=e.checked,e!=null&&$m(t,"checked",e,!1)}function ap(t,e){vb(t,e);var n=Ms(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lp(t,e.type,n):e.hasOwnProperty("defaultValue")&&lp(t,e.type,Ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function e_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lp(t,e,n){(e!=="number"||Gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function yo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ms(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function t_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Fa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ms(n)}}function wb(t,e){var n=Ms(e.value),r=Ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function n_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function up(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,bb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var el={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LA=["Webkit","ms","Moz","O"];Object.keys(el).forEach(function(t){LA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),el[e]=el[t]})});function Eb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||el.hasOwnProperty(t)&&el[t]?(""+e).trim():e+"px"}function Tb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Eb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var jA=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hp(t,e){if(e){if(jA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function dp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fp=null;function Km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pp=null,_o=null,vo=null;function r_(t){if(t=cc(t)){if(typeof pp!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ed(e),pp(t.stateNode,t.type,e))}}function kb(t){_o?vo?vo.push(t):vo=[t]:_o=t}function Ib(){if(_o){var t=_o,e=vo;if(vo=_o=null,r_(t),e)for(t=0;t<e.length;t++)r_(e[t])}}function Sb(t,e){return t(e)}function Ab(){}var of=!1;function Cb(t,e,n){if(of)return t(e,n);of=!0;try{return Sb(t,e,n)}finally{of=!1,(_o!==null||vo!==null)&&(Ab(),Ib())}}function Il(t,e){var n=t.stateNode;if(n===null)return null;var r=ed(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var mp=!1;if(Lr)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){mp=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{mp=!1}function VA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var tl=!1,Qu=null,Yu=!1,gp=null,FA={onError:function(t){tl=!0,Qu=t}};function UA(t,e,n,r,s,i,o,a,l){tl=!1,Qu=null,VA.apply(FA,arguments)}function BA(t,e,n,r,s,i,o,a,l){if(UA.apply(this,arguments),tl){if(tl){var c=Qu;tl=!1,Qu=null}else throw Error(z(198));Yu||(Yu=!0,gp=c)}}function Ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function s_(t){if(Ui(t)!==t)throw Error(z(188))}function zA(t){var e=t.alternate;if(!e){if(e=Ui(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return s_(s),t;if(i===r)return s_(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Pb(t){return t=zA(t),t!==null?Nb(t):null}function Nb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nb(t);if(e!==null)return e;t=t.sibling}return null}var Db=En.unstable_scheduleCallback,i_=En.unstable_cancelCallback,$A=En.unstable_shouldYield,HA=En.unstable_requestPaint,it=En.unstable_now,WA=En.unstable_getCurrentPriorityLevel,Gm=En.unstable_ImmediatePriority,Ob=En.unstable_UserBlockingPriority,Xu=En.unstable_NormalPriority,qA=En.unstable_LowPriority,Mb=En.unstable_IdlePriority,Yh=null,fr=null;function KA(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Yh,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:YA,GA=Math.log,QA=Math.LN2;function YA(t){return t>>>=0,t===0?32:31-(GA(t)/QA|0)|0}var zc=64,$c=4194304;function Ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ju(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ua(a):(i&=o,i!==0&&(r=Ua(i)))}else o=n&~s,o!==0?r=Ua(o):i!==0&&(r=Ua(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),s=1<<n,r|=t[n],e&=~s;return r}function XA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Xn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=XA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function yp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lb(){var t=zc;return zc<<=1,!(zc&4194240)&&(zc=64),t}function af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ac(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function ZA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Qm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ce=0;function jb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vb,Ym,Fb,Ub,Bb,_p=!1,Hc=[],ws=null,xs=null,bs=null,Sl=new Map,Al=new Map,ls=[],eC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o_(t,e){switch(t){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Sl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(e.pointerId)}}function ka(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=cc(e),e!==null&&Ym(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function tC(t,e,n,r,s){switch(e){case"focusin":return ws=ka(ws,t,e,n,r,s),!0;case"dragenter":return xs=ka(xs,t,e,n,r,s),!0;case"mouseover":return bs=ka(bs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sl.set(i,ka(Sl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Al.set(i,ka(Al.get(i)||null,t,e,n,r,s)),!0}return!1}function zb(t){var e=hi(t.target);if(e!==null){var n=Ui(e);if(n!==null){if(e=n.tag,e===13){if(e=Rb(n),e!==null){t.blockedOn=e,Bb(t.priority,function(){Fb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ku(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fp=r,n.target.dispatchEvent(r),fp=null}else return e=cc(n),e!==null&&Ym(e),t.blockedOn=n,!1;e.shift()}return!0}function a_(t,e,n){ku(t)&&n.delete(e)}function nC(){_p=!1,ws!==null&&ku(ws)&&(ws=null),xs!==null&&ku(xs)&&(xs=null),bs!==null&&ku(bs)&&(bs=null),Sl.forEach(a_),Al.forEach(a_)}function Ia(t,e){t.blockedOn===e&&(t.blockedOn=null,_p||(_p=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,nC)))}function Cl(t){function e(s){return Ia(s,t)}if(0<Hc.length){Ia(Hc[0],t);for(var n=1;n<Hc.length;n++){var r=Hc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ws!==null&&Ia(ws,t),xs!==null&&Ia(xs,t),bs!==null&&Ia(bs,t),Sl.forEach(e),Al.forEach(e),n=0;n<ls.length;n++)r=ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ls.length&&(n=ls[0],n.blockedOn===null);)zb(n),n.blockedOn===null&&ls.shift()}var wo=Hr.ReactCurrentBatchConfig,Zu=!0;function rC(t,e,n,r){var s=Ce,i=wo.transition;wo.transition=null;try{Ce=1,Xm(t,e,n,r)}finally{Ce=s,wo.transition=i}}function sC(t,e,n,r){var s=Ce,i=wo.transition;wo.transition=null;try{Ce=4,Xm(t,e,n,r)}finally{Ce=s,wo.transition=i}}function Xm(t,e,n,r){if(Zu){var s=vp(t,e,n,r);if(s===null)yf(t,e,r,eh,n),o_(t,r);else if(tC(s,t,e,n,r))r.stopPropagation();else if(o_(t,r),e&4&&-1<eC.indexOf(t)){for(;s!==null;){var i=cc(s);if(i!==null&&Vb(i),i=vp(t,e,n,r),i===null&&yf(t,e,r,eh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yf(t,e,r,null,n)}}var eh=null;function vp(t,e,n,r){if(eh=null,t=Km(r),t=hi(t),t!==null)if(e=Ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eh=t,null}function $b(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WA()){case Gm:return 1;case Ob:return 4;case Xu:case qA:return 16;case Mb:return 536870912;default:return 16}default:return 16}}var ps=null,Jm=null,Iu=null;function Hb(){if(Iu)return Iu;var t,e=Jm,n=e.length,r,s="value"in ps?ps.value:ps.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Iu=s.slice(t,1<r?1-r:void 0)}function Su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function l_(){return!1}function kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wc:l_,this.isPropagationStopped=l_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zm=kn(Yo),lc=Ge({},Yo,{view:0,detail:0}),iC=kn(lc),lf,cf,Sa,Xh=Ge({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sa&&(Sa&&t.type==="mousemove"?(lf=t.screenX-Sa.screenX,cf=t.screenY-Sa.screenY):cf=lf=0,Sa=t),lf)},movementY:function(t){return"movementY"in t?t.movementY:cf}}),c_=kn(Xh),oC=Ge({},Xh,{dataTransfer:0}),aC=kn(oC),lC=Ge({},lc,{relatedTarget:0}),uf=kn(lC),cC=Ge({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),uC=kn(cC),hC=Ge({},Yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dC=kn(hC),fC=Ge({},Yo,{data:0}),u_=kn(fC),pC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gC[t])?!!e[t]:!1}function eg(){return yC}var _C=Ge({},lc,{key:function(t){if(t.key){var e=pC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eg,charCode:function(t){return t.type==="keypress"?Su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vC=kn(_C),wC=Ge({},Xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h_=kn(wC),xC=Ge({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eg}),bC=kn(xC),EC=Ge({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),TC=kn(EC),kC=Ge({},Xh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IC=kn(kC),SC=[9,13,27,32],tg=Lr&&"CompositionEvent"in window,nl=null;Lr&&"documentMode"in document&&(nl=document.documentMode);var AC=Lr&&"TextEvent"in window&&!nl,Wb=Lr&&(!tg||nl&&8<nl&&11>=nl),d_=" ",f_=!1;function qb(t,e){switch(t){case"keyup":return SC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function CC(t,e){switch(t){case"compositionend":return Kb(e);case"keypress":return e.which!==32?null:(f_=!0,d_);case"textInput":return t=e.data,t===d_&&f_?null:t;default:return null}}function RC(t,e){if(oo)return t==="compositionend"||!tg&&qb(t,e)?(t=Hb(),Iu=Jm=ps=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wb&&e.locale!=="ko"?null:e.data;default:return null}}var PC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PC[t.type]:e==="textarea"}function Gb(t,e,n,r){kb(r),e=th(e,"onChange"),0<e.length&&(n=new Zm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rl=null,Rl=null;function NC(t){iE(t,0)}function Jh(t){var e=co(t);if(_b(e))return t}function DC(t,e){if(t==="change")return e}var Qb=!1;if(Lr){var hf;if(Lr){var df="oninput"in document;if(!df){var m_=document.createElement("div");m_.setAttribute("oninput","return;"),df=typeof m_.oninput=="function"}hf=df}else hf=!1;Qb=hf&&(!document.documentMode||9<document.documentMode)}function g_(){rl&&(rl.detachEvent("onpropertychange",Yb),Rl=rl=null)}function Yb(t){if(t.propertyName==="value"&&Jh(Rl)){var e=[];Gb(e,Rl,t,Km(t)),Cb(NC,e)}}function OC(t,e,n){t==="focusin"?(g_(),rl=e,Rl=n,rl.attachEvent("onpropertychange",Yb)):t==="focusout"&&g_()}function MC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jh(Rl)}function LC(t,e){if(t==="click")return Jh(e)}function jC(t,e){if(t==="input"||t==="change")return Jh(e)}function VC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:VC;function Pl(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!tp.call(e,s)||!er(t[s],e[s]))return!1}return!0}function y_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function __(t,e){var n=y_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y_(n)}}function Xb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jb(){for(var t=window,e=Gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gu(t.document)}return e}function ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FC(t){var e=Jb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xb(n.ownerDocument.documentElement,n)){if(r!==null&&ng(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=__(n,i);var o=__(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UC=Lr&&"documentMode"in document&&11>=document.documentMode,ao=null,wp=null,sl=null,xp=!1;function v_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xp||ao==null||ao!==Gu(r)||(r=ao,"selectionStart"in r&&ng(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&Pl(sl,r)||(sl=r,r=th(wp,"onSelect"),0<r.length&&(e=new Zm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ao)))}function qc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lo={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},ff={},Zb={};Lr&&(Zb=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function Zh(t){if(ff[t])return ff[t];if(!lo[t])return t;var e=lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zb)return ff[t]=e[n];return t}var eE=Zh("animationend"),tE=Zh("animationiteration"),nE=Zh("animationstart"),rE=Zh("transitionend"),sE=new Map,w_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(t,e){sE.set(t,e),Fi(e,[t])}for(var pf=0;pf<w_.length;pf++){var mf=w_[pf],BC=mf.toLowerCase(),zC=mf[0].toUpperCase()+mf.slice(1);$s(BC,"on"+zC)}$s(eE,"onAnimationEnd");$s(tE,"onAnimationIteration");$s(nE,"onAnimationStart");$s("dblclick","onDoubleClick");$s("focusin","onFocus");$s("focusout","onBlur");$s(rE,"onTransitionEnd");Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$C=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function x_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,BA(r,e,void 0,t),t.currentTarget=null}function iE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;x_(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;x_(s,a,c),i=l}}}if(Yu)throw t=gp,Yu=!1,gp=null,t}function Fe(t,e){var n=e[Ip];n===void 0&&(n=e[Ip]=new Set);var r=t+"__bubble";n.has(r)||(oE(e,t,2,!1),n.add(r))}function gf(t,e,n){var r=0;e&&(r|=4),oE(n,t,r,e)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Nl(t){if(!t[Kc]){t[Kc]=!0,fb.forEach(function(n){n!=="selectionchange"&&($C.has(n)||gf(n,!1,t),gf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kc]||(e[Kc]=!0,gf("selectionchange",!1,e))}}function oE(t,e,n,r){switch($b(e)){case 1:var s=rC;break;case 4:s=sC;break;default:s=Xm}n=s.bind(null,e,n,t),s=void 0,!mp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=hi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Cb(function(){var c=i,h=Km(n),d=[];e:{var m=sE.get(t);if(m!==void 0){var y=Zm,x=t;switch(t){case"keypress":if(Su(n)===0)break e;case"keydown":case"keyup":y=vC;break;case"focusin":x="focus",y=uf;break;case"focusout":x="blur",y=uf;break;case"beforeblur":case"afterblur":y=uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=c_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=aC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=bC;break;case eE:case tE:case nE:y=uC;break;case rE:y=TC;break;case"scroll":y=iC;break;case"wheel":y=IC;break;case"copy":case"cut":case"paste":y=dC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=h_}var E=(e&4)!==0,T=!E&&t==="scroll",_=E?m!==null?m+"Capture":null:m;E=[];for(var v=c,b;v!==null;){b=v;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,_!==null&&(R=Il(v,_),R!=null&&E.push(Dl(v,R,b)))),T)break;v=v.return}0<E.length&&(m=new y(m,x,null,n,h),d.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==fp&&(x=n.relatedTarget||n.fromElement)&&(hi(x)||x[jr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=c,x=x?hi(x):null,x!==null&&(T=Ui(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(E=c_,R="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=h_,R="onPointerLeave",_="onPointerEnter",v="pointer"),T=y==null?m:co(y),b=x==null?m:co(x),m=new E(R,v+"leave",y,n,h),m.target=T,m.relatedTarget=b,R=null,hi(h)===c&&(E=new E(_,v+"enter",x,n,h),E.target=b,E.relatedTarget=T,R=E),T=R,y&&x)t:{for(E=y,_=x,v=0,b=E;b;b=Ji(b))v++;for(b=0,R=_;R;R=Ji(R))b++;for(;0<v-b;)E=Ji(E),v--;for(;0<b-v;)_=Ji(_),b--;for(;v--;){if(E===_||_!==null&&E===_.alternate)break t;E=Ji(E),_=Ji(_)}E=null}else E=null;y!==null&&b_(d,m,y,E,!1),x!==null&&T!==null&&b_(d,T,x,E,!0)}}e:{if(m=c?co(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var N=DC;else if(p_(m))if(Qb)N=jC;else{N=MC;var M=OC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=LC);if(N&&(N=N(t,c))){Gb(d,N,n,h);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&lp(m,"number",m.value)}switch(M=c?co(c):window,t){case"focusin":(p_(M)||M.contentEditable==="true")&&(ao=M,wp=c,sl=null);break;case"focusout":sl=wp=ao=null;break;case"mousedown":xp=!0;break;case"contextmenu":case"mouseup":case"dragend":xp=!1,v_(d,n,h);break;case"selectionchange":if(UC)break;case"keydown":case"keyup":v_(d,n,h)}var k;if(tg)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else oo?qb(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Wb&&n.locale!=="ko"&&(oo||w!=="onCompositionStart"?w==="onCompositionEnd"&&oo&&(k=Hb()):(ps=h,Jm="value"in ps?ps.value:ps.textContent,oo=!0)),M=th(c,w),0<M.length&&(w=new u_(w,t,null,n,h),d.push({event:w,listeners:M}),k?w.data=k:(k=Kb(n),k!==null&&(w.data=k)))),(k=AC?CC(t,n):RC(t,n))&&(c=th(c,"onBeforeInput"),0<c.length&&(h=new u_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=k))}iE(d,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function th(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Il(t,n),i!=null&&r.unshift(Dl(t,i,s)),i=Il(t,e),i!=null&&r.push(Dl(t,i,s))),t=t.return}return r}function Ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Il(n,i),l!=null&&o.unshift(Dl(n,l,a))):s||(l=Il(n,i),l!=null&&o.push(Dl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HC=/\r\n?/g,WC=/\u0000|\uFFFD/g;function E_(t){return(typeof t=="string"?t:""+t).replace(HC,`
`).replace(WC,"")}function Gc(t,e,n){if(e=E_(e),E_(t)!==e&&n)throw Error(z(425))}function nh(){}var bp=null,Ep=null;function Tp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kp=typeof setTimeout=="function"?setTimeout:void 0,qC=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(t){return T_.resolve(null).then(t).catch(GC)}:kp;function GC(t){setTimeout(function(){throw t})}function _f(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cl(e)}function Es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),hr="__reactFiber$"+Xo,Ol="__reactProps$"+Xo,jr="__reactContainer$"+Xo,Ip="__reactEvents$"+Xo,QC="__reactListeners$"+Xo,YC="__reactHandles$"+Xo;function hi(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k_(t);t!==null;){if(n=t[hr])return n;t=k_(t)}return e}t=n,n=t.parentNode}return null}function cc(t){return t=t[hr]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ed(t){return t[Ol]||null}var Sp=[],uo=-1;function Hs(t){return{current:t}}function ze(t){0>uo||(t.current=Sp[uo],Sp[uo]=null,uo--)}function Me(t,e){uo++,Sp[uo]=t.current,t.current=e}var Ls={},Ft=Hs(Ls),rn=Hs(!1),ki=Ls;function Po(t,e){var n=t.type.contextTypes;if(!n)return Ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function sn(t){return t=t.childContextTypes,t!=null}function rh(){ze(rn),ze(Ft)}function I_(t,e,n){if(Ft.current!==Ls)throw Error(z(168));Me(Ft,e),Me(rn,n)}function aE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,OA(t)||"Unknown",s));return Ge({},n,r)}function sh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,ki=Ft.current,Me(Ft,t),Me(rn,rn.current),!0}function S_(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=aE(t,e,ki),r.__reactInternalMemoizedMergedChildContext=t,ze(rn),ze(Ft),Me(Ft,t)):ze(rn),Me(rn,n)}var Ir=null,td=!1,vf=!1;function lE(t){Ir===null?Ir=[t]:Ir.push(t)}function XC(t){td=!0,lE(t)}function Ws(){if(!vf&&Ir!==null){vf=!0;var t=0,e=Ce;try{var n=Ir;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,td=!1}catch(s){throw Ir!==null&&(Ir=Ir.slice(t+1)),Db(Gm,Ws),s}finally{Ce=e,vf=!1}}return null}var ho=[],fo=0,ih=null,oh=0,Cn=[],Rn=0,Ii=null,Cr=1,Rr="";function oi(t,e){ho[fo++]=oh,ho[fo++]=ih,ih=t,oh=e}function cE(t,e,n){Cn[Rn++]=Cr,Cn[Rn++]=Rr,Cn[Rn++]=Ii,Ii=t;var r=Cr;t=Rr;var s=32-Xn(r)-1;r&=~(1<<s),n+=1;var i=32-Xn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Cr=1<<32-Xn(e)+s|n<<s|r,Rr=i+t}else Cr=1<<i|n<<s|r,Rr=t}function rg(t){t.return!==null&&(oi(t,1),cE(t,1,0))}function sg(t){for(;t===ih;)ih=ho[--fo],ho[fo]=null,oh=ho[--fo],ho[fo]=null;for(;t===Ii;)Ii=Cn[--Rn],Cn[Rn]=null,Rr=Cn[--Rn],Cn[Rn]=null,Cr=Cn[--Rn],Cn[Rn]=null}var vn=null,gn=null,$e=!1,Kn=null;function uE(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=Es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:Cr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function Ap(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cp(t){if($e){var e=gn;if(e){var n=e;if(!A_(t,e)){if(Ap(t))throw Error(z(418));e=Es(n.nextSibling);var r=vn;e&&A_(t,e)?uE(r,n):(t.flags=t.flags&-4097|2,$e=!1,vn=t)}}else{if(Ap(t))throw Error(z(418));t.flags=t.flags&-4097|2,$e=!1,vn=t}}}function C_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function Qc(t){if(t!==vn)return!1;if(!$e)return C_(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tp(t.type,t.memoizedProps)),e&&(e=gn)){if(Ap(t))throw hE(),Error(z(418));for(;e;)uE(t,e),e=Es(e.nextSibling)}if(C_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=Es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?Es(t.stateNode.nextSibling):null;return!0}function hE(){for(var t=gn;t;)t=Es(t.nextSibling)}function No(){gn=vn=null,$e=!1}function ig(t){Kn===null?Kn=[t]:Kn.push(t)}var JC=Hr.ReactCurrentBatchConfig;function Aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Yc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R_(t){var e=t._init;return e(t._payload)}function dE(t){function e(_,v){if(t){var b=_.deletions;b===null?(_.deletions=[v],_.flags|=16):b.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function s(_,v){return _=Ss(_,v),_.index=0,_.sibling=null,_}function i(_,v,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<v?(_.flags|=2,v):b):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,b,R){return v===null||v.tag!==6?(v=If(b,_.mode,R),v.return=_,v):(v=s(v,b),v.return=_,v)}function l(_,v,b,R){var N=b.type;return N===io?h(_,v,b.props.children,R,b.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===os&&R_(N)===v.type)?(R=s(v,b.props),R.ref=Aa(_,v,b),R.return=_,R):(R=Ou(b.type,b.key,b.props,null,_.mode,R),R.ref=Aa(_,v,b),R.return=_,R)}function c(_,v,b,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Sf(b,_.mode,R),v.return=_,v):(v=s(v,b.children||[]),v.return=_,v)}function h(_,v,b,R,N){return v===null||v.tag!==7?(v=xi(b,_.mode,R,N),v.return=_,v):(v=s(v,b),v.return=_,v)}function d(_,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=If(""+v,_.mode,b),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fc:return b=Ou(v.type,v.key,v.props,null,_.mode,b),b.ref=Aa(_,null,v),b.return=_,b;case so:return v=Sf(v,_.mode,b),v.return=_,v;case os:var R=v._init;return d(_,R(v._payload),b)}if(Fa(v)||Ea(v))return v=xi(v,_.mode,b,null),v.return=_,v;Yc(_,v)}return null}function m(_,v,b,R){var N=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:a(_,v,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:return b.key===N?l(_,v,b,R):null;case so:return b.key===N?c(_,v,b,R):null;case os:return N=b._init,m(_,v,N(b._payload),R)}if(Fa(b)||Ea(b))return N!==null?null:h(_,v,b,R,null);Yc(_,b)}return null}function y(_,v,b,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(b)||null,a(v,_,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Fc:return _=_.get(R.key===null?b:R.key)||null,l(v,_,R,N);case so:return _=_.get(R.key===null?b:R.key)||null,c(v,_,R,N);case os:var M=R._init;return y(_,v,b,M(R._payload),N)}if(Fa(R)||Ea(R))return _=_.get(b)||null,h(v,_,R,N,null);Yc(v,R)}return null}function x(_,v,b,R){for(var N=null,M=null,k=v,w=v=0,A=null;k!==null&&w<b.length;w++){k.index>w?(A=k,k=null):A=k.sibling;var C=m(_,k,b[w],R);if(C===null){k===null&&(k=A);break}t&&k&&C.alternate===null&&e(_,k),v=i(C,v,w),M===null?N=C:M.sibling=C,M=C,k=A}if(w===b.length)return n(_,k),$e&&oi(_,w),N;if(k===null){for(;w<b.length;w++)k=d(_,b[w],R),k!==null&&(v=i(k,v,w),M===null?N=k:M.sibling=k,M=k);return $e&&oi(_,w),N}for(k=r(_,k);w<b.length;w++)A=y(k,_,w,b[w],R),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?w:A.key),v=i(A,v,w),M===null?N=A:M.sibling=A,M=A);return t&&k.forEach(function(P){return e(_,P)}),$e&&oi(_,w),N}function E(_,v,b,R){var N=Ea(b);if(typeof N!="function")throw Error(z(150));if(b=N.call(b),b==null)throw Error(z(151));for(var M=N=null,k=v,w=v=0,A=null,C=b.next();k!==null&&!C.done;w++,C=b.next()){k.index>w?(A=k,k=null):A=k.sibling;var P=m(_,k,C.value,R);if(P===null){k===null&&(k=A);break}t&&k&&P.alternate===null&&e(_,k),v=i(P,v,w),M===null?N=P:M.sibling=P,M=P,k=A}if(C.done)return n(_,k),$e&&oi(_,w),N;if(k===null){for(;!C.done;w++,C=b.next())C=d(_,C.value,R),C!==null&&(v=i(C,v,w),M===null?N=C:M.sibling=C,M=C);return $e&&oi(_,w),N}for(k=r(_,k);!C.done;w++,C=b.next())C=y(k,_,w,C.value,R),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?w:C.key),v=i(C,v,w),M===null?N=C:M.sibling=C,M=C);return t&&k.forEach(function(O){return e(_,O)}),$e&&oi(_,w),N}function T(_,v,b,R){if(typeof b=="object"&&b!==null&&b.type===io&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:e:{for(var N=b.key,M=v;M!==null;){if(M.key===N){if(N=b.type,N===io){if(M.tag===7){n(_,M.sibling),v=s(M,b.props.children),v.return=_,_=v;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===os&&R_(N)===M.type){n(_,M.sibling),v=s(M,b.props),v.ref=Aa(_,M,b),v.return=_,_=v;break e}n(_,M);break}else e(_,M);M=M.sibling}b.type===io?(v=xi(b.props.children,_.mode,R,b.key),v.return=_,_=v):(R=Ou(b.type,b.key,b.props,null,_.mode,R),R.ref=Aa(_,v,b),R.return=_,_=R)}return o(_);case so:e:{for(M=b.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(_,v.sibling),v=s(v,b.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=Sf(b,_.mode,R),v.return=_,_=v}return o(_);case os:return M=b._init,T(_,v,M(b._payload),R)}if(Fa(b))return x(_,v,b,R);if(Ea(b))return E(_,v,b,R);Yc(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(_,v.sibling),v=s(v,b),v.return=_,_=v):(n(_,v),v=If(b,_.mode,R),v.return=_,_=v),o(_)):n(_,v)}return T}var Do=dE(!0),fE=dE(!1),ah=Hs(null),lh=null,po=null,og=null;function ag(){og=po=lh=null}function lg(t){var e=ah.current;ze(ah),t._currentValue=e}function Rp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){lh=t,og=po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(og!==t)if(t={context:t,memoizedValue:e,next:null},po===null){if(lh===null)throw Error(z(308));po=t,lh.dependencies={lanes:0,firstContext:t}}else po=po.next=t;return e}var di=null;function cg(t){di===null?di=[t]:di.push(t)}function pE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vr(t,r)}function Vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var as=!1;function ug(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ts(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vr(t,n)}return s=r.interleaved,s===null?(e.next=e,cg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vr(t,n)}function Au(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qm(t,n)}}function P_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ch(t,e,n,r){var s=t.updateQueue;as=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,E=a;switch(m=e,y=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){d=x.call(y,d,m);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,m=typeof x=="function"?x.call(y,d,m):x,m==null)break e;d=Ge({},d,m);break e;case 2:as=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=d):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ai|=o,t.lanes=o,t.memoizedState=d}}function N_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var uc={},pr=Hs(uc),Ml=Hs(uc),Ll=Hs(uc);function fi(t){if(t===uc)throw Error(z(174));return t}function hg(t,e){switch(Me(Ll,e),Me(Ml,t),Me(pr,uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:up(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=up(e,t)}ze(pr),Me(pr,e)}function Oo(){ze(pr),ze(Ml),ze(Ll)}function gE(t){fi(Ll.current);var e=fi(pr.current),n=up(e,t.type);e!==n&&(Me(Ml,t),Me(pr,n))}function dg(t){Ml.current===t&&(ze(pr),ze(Ml))}var We=Hs(0);function uh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function fg(){for(var t=0;t<wf.length;t++)wf[t]._workInProgressVersionPrimary=null;wf.length=0}var Cu=Hr.ReactCurrentDispatcher,xf=Hr.ReactCurrentBatchConfig,Si=0,qe=null,ft=null,gt=null,hh=!1,il=!1,jl=0,ZC=0;function Nt(){throw Error(z(321))}function pg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function mg(t,e,n,r,s,i){if(Si=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cu.current=t===null||t.memoizedState===null?rR:sR,t=n(r,s),il){i=0;do{if(il=!1,jl=0,25<=i)throw Error(z(301));i+=1,gt=ft=null,e.updateQueue=null,Cu.current=iR,t=n(r,s)}while(il)}if(Cu.current=dh,e=ft!==null&&ft.next!==null,Si=0,gt=ft=qe=null,hh=!1,e)throw Error(z(300));return t}function gg(){var t=jl!==0;return jl=0,t}function cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?qe.memoizedState=gt=t:gt=gt.next=t,gt}function Ln(){if(ft===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=gt===null?qe.memoizedState:gt.next;if(e!==null)gt=e,ft=t;else{if(t===null)throw Error(z(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},gt===null?qe.memoizedState=gt=t:gt=gt.next=t}return gt}function Vl(t,e){return typeof e=="function"?e(t):e}function bf(t){var e=Ln(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((Si&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,qe.lanes|=h,Ai|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,er(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,Ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ef(t){var e=Ln(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);er(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yE(){}function _E(t,e){var n=qe,r=Ln(),s=e(),i=!er(r.memoizedState,s);if(i&&(r.memoizedState=s,tn=!0),r=r.queue,yg(xE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Fl(9,wE.bind(null,n,r,s,e),void 0,null),yt===null)throw Error(z(349));Si&30||vE(n,e,s)}return s}function vE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wE(t,e,n,r){e.value=n,e.getSnapshot=r,bE(e)&&EE(t)}function xE(t,e,n){return n(function(){bE(e)&&EE(t)})}function bE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function EE(t){var e=Vr(t,1);e!==null&&Jn(e,t,1,-1)}function D_(t){var e=cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:t},e.queue=t,t=t.dispatch=nR.bind(null,qe,t),[e.memoizedState,t]}function Fl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function TE(){return Ln().memoizedState}function Ru(t,e,n,r){var s=cr();qe.flags|=t,s.memoizedState=Fl(1|e,n,void 0,r===void 0?null:r)}function nd(t,e,n,r){var s=Ln();r=r===void 0?null:r;var i=void 0;if(ft!==null){var o=ft.memoizedState;if(i=o.destroy,r!==null&&pg(r,o.deps)){s.memoizedState=Fl(e,n,i,r);return}}qe.flags|=t,s.memoizedState=Fl(1|e,n,i,r)}function O_(t,e){return Ru(8390656,8,t,e)}function yg(t,e){return nd(2048,8,t,e)}function kE(t,e){return nd(4,2,t,e)}function IE(t,e){return nd(4,4,t,e)}function SE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AE(t,e,n){return n=n!=null?n.concat([t]):null,nd(4,4,SE.bind(null,e,t),n)}function _g(){}function CE(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function RE(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function PE(t,e,n){return Si&21?(er(n,e)||(n=Lb(),qe.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function eR(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=xf.transition;xf.transition={};try{t(!1),e()}finally{Ce=n,xf.transition=r}}function NE(){return Ln().memoizedState}function tR(t,e,n){var r=Is(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DE(t))OE(e,n);else if(n=pE(t,e,n,r),n!==null){var s=Kt();Jn(n,t,r,s),ME(n,e,r)}}function nR(t,e,n){var r=Is(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DE(t))OE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,er(a,o)){var l=e.interleaved;l===null?(s.next=s,cg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=pE(t,e,s,r),n!==null&&(s=Kt(),Jn(n,t,r,s),ME(n,e,r))}}function DE(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function OE(t,e){il=hh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ME(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qm(t,n)}}var dh={readContext:Mn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},rR={readContext:Mn,useCallback:function(t,e){return cr().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:O_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ru(4194308,4,SE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ru(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ru(4,2,t,e)},useMemo:function(t,e){var n=cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tR.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=cr();return t={current:t},e.memoizedState=t},useState:D_,useDebugValue:_g,useDeferredValue:function(t){return cr().memoizedState=t},useTransition:function(){var t=D_(!1),e=t[0];return t=eR.bind(null,t[1]),cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,s=cr();if($e){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),yt===null)throw Error(z(349));Si&30||vE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,O_(xE.bind(null,r,i,t),[t]),r.flags|=2048,Fl(9,wE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cr(),e=yt.identifierPrefix;if($e){var n=Rr,r=Cr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sR={readContext:Mn,useCallback:CE,useContext:Mn,useEffect:yg,useImperativeHandle:AE,useInsertionEffect:kE,useLayoutEffect:IE,useMemo:RE,useReducer:bf,useRef:TE,useState:function(){return bf(Vl)},useDebugValue:_g,useDeferredValue:function(t){var e=Ln();return PE(e,ft.memoizedState,t)},useTransition:function(){var t=bf(Vl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:yE,useSyncExternalStore:_E,useId:NE,unstable_isNewReconciler:!1},iR={readContext:Mn,useCallback:CE,useContext:Mn,useEffect:yg,useImperativeHandle:AE,useInsertionEffect:kE,useLayoutEffect:IE,useMemo:RE,useReducer:Ef,useRef:TE,useState:function(){return Ef(Vl)},useDebugValue:_g,useDeferredValue:function(t){var e=Ln();return ft===null?e.memoizedState=t:PE(e,ft.memoizedState,t)},useTransition:function(){var t=Ef(Vl)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:yE,useSyncExternalStore:_E,useId:NE,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rd={isMounted:function(t){return(t=t._reactInternals)?Ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=Is(t),i=Or(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ts(t,i,s),e!==null&&(Jn(e,t,s,r),Au(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=Is(t),i=Or(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ts(t,i,s),e!==null&&(Jn(e,t,s,r),Au(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=Is(t),s=Or(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ts(t,s,r),e!==null&&(Jn(e,t,r,n),Au(e,t,r))}};function M_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Pl(n,r)||!Pl(s,i):!0}function LE(t,e,n){var r=!1,s=Ls,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=sn(e)?ki:Ft.current,r=e.contextTypes,i=(r=r!=null)?Po(t,s):Ls),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function L_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rd.enqueueReplaceState(e,e.state,null)}function Np(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ug(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=sn(e)?ki:Ft.current,s.context=Po(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Pp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rd.enqueueReplaceState(s,s.state,null),ch(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Mo(t,e){try{var n="",r=e;do n+=DA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oR=typeof WeakMap=="function"?WeakMap:Map;function jE(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ph||(ph=!0,$p=r),Dp(t,e)},n}function VE(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dp(t,e),typeof r!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function j_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=wR.bind(null,t,e,n),e.then(t,t))}function V_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function F_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,Ts(n,e,1))),n.lanes|=1),t)}var aR=Hr.ReactCurrentOwner,tn=!1;function qt(t,e,n,r){e.child=t===null?fE(e,null,n,r):Do(e,t.child,n,r)}function U_(t,e,n,r,s){n=n.render;var i=e.ref;return xo(e,s),r=mg(t,e,n,r,i,s),n=gg(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):($e&&n&&rg(e),e.flags|=1,qt(t,e,r,s),e.child)}function B_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ig(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,FE(t,e,i,r,s)):(t=Ou(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Pl,n(o,r)&&t.ref===e.ref)return Fr(t,e,s)}return e.flags|=1,t=Ss(i,r),t.ref=e.ref,t.return=e,e.child=t}function FE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Pl(i,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Fr(t,e,s)}return Op(t,e,n,r,s)}function UE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(go,mn),mn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(go,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Me(go,mn),mn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Me(go,mn),mn|=r;return qt(t,e,s,n),e.child}function BE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Op(t,e,n,r,s){var i=sn(n)?ki:Ft.current;return i=Po(e,i),xo(e,s),n=mg(t,e,n,r,i,s),r=gg(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):($e&&r&&rg(e),e.flags|=1,qt(t,e,n,s),e.child)}function z_(t,e,n,r,s){if(sn(n)){var i=!0;sh(e)}else i=!1;if(xo(e,s),e.stateNode===null)Pu(t,e),LE(e,n,r),Np(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mn(c):(c=sn(n)?ki:Ft.current,c=Po(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&L_(e,o,r,c),as=!1;var m=e.memoizedState;o.state=m,ch(e,r,o,s),l=e.memoizedState,a!==r||m!==l||rn.current||as?(typeof h=="function"&&(Pp(e,n,h,r),l=e.memoizedState),(a=as||M_(e,n,a,r,m,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Wn(e.type,a),o.props=c,d=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mn(l):(l=sn(n)?ki:Ft.current,l=Po(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==l)&&L_(e,o,r,l),as=!1,m=e.memoizedState,o.state=m,ch(e,r,o,s);var x=e.memoizedState;a!==d||m!==x||rn.current||as?(typeof y=="function"&&(Pp(e,n,y,r),x=e.memoizedState),(c=as||M_(e,n,c,r,m,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Mp(t,e,n,r,i,s)}function Mp(t,e,n,r,s,i){BE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&S_(e,n,!1),Fr(t,e,i);r=e.stateNode,aR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Do(e,t.child,null,i),e.child=Do(e,null,a,i)):qt(t,e,a,i),e.memoizedState=r.state,s&&S_(e,n,!0),e.child}function zE(t){var e=t.stateNode;e.pendingContext?I_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&I_(t,e.context,!1),hg(t,e.containerInfo)}function $_(t,e,n,r,s){return No(),ig(s),e.flags|=256,qt(t,e,n,r),e.child}var Lp={dehydrated:null,treeContext:null,retryLane:0};function jp(t){return{baseLanes:t,cachePool:null,transitions:null}}function $E(t,e,n){var r=e.pendingProps,s=We.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Me(We,s&1),t===null)return Cp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=od(o,r,0,null),t=xi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jp(n),e.memoizedState=Lp,t):vg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return lR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ss(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ss(a,i):(i=xi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lp,r}return i=t.child,t=i.sibling,r=Ss(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vg(t,e){return e=od({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xc(t,e,n,r){return r!==null&&ig(r),Do(e,t.child,null,n),t=vg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Tf(Error(z(422))),Xc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=od({mode:"visible",children:r.children},s,0,null),i=xi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Do(e,t.child,null,o),e.child.memoizedState=jp(o),e.memoizedState=Lp,i);if(!(e.mode&1))return Xc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=Tf(i,r,void 0),Xc(t,e,o,r)}if(a=(o&t.childLanes)!==0,tn||a){if(r=yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vr(t,s),Jn(r,t,s,-1))}return kg(),r=Tf(Error(z(421))),Xc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,gn=Es(s.nextSibling),vn=e,$e=!0,Kn=null,t!==null&&(Cn[Rn++]=Cr,Cn[Rn++]=Rr,Cn[Rn++]=Ii,Cr=t.id,Rr=t.overflow,Ii=e),e=vg(e,r.children),e.flags|=4096,e)}function H_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rp(t.return,e,n)}function kf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function HE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(qt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H_(t,n,e);else if(t.tag===19)H_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(We,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&uh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),kf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&uh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}kf(e,!0,n,null,i);break;case"together":kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cR(t,e,n){switch(e.tag){case 3:zE(e),No();break;case 5:gE(e);break;case 1:sn(e.type)&&sh(e);break;case 4:hg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Me(ah,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?$E(t,e,n):(Me(We,We.current&1),t=Fr(t,e,n),t!==null?t.sibling:null);Me(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,UE(t,e,n)}return Fr(t,e,n)}var WE,Vp,qE,KE;WE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vp=function(){};qE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fi(pr.current);var i=null;switch(n){case"input":s=op(t,s),r=op(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=cp(t,s),r=cp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nh)}hp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};KE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ca(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uR(t,e,n){var r=e.pendingProps;switch(sg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return sn(e.type)&&rh(),Dt(e),null;case 3:return r=e.stateNode,Oo(),ze(rn),ze(Ft),fg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(qp(Kn),Kn=null))),Vp(t,e),Dt(e),null;case 5:dg(e);var s=fi(Ll.current);if(n=e.type,t!==null&&e.stateNode!=null)qE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Dt(e),null}if(t=fi(pr.current),Qc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hr]=e,r[Ol]=i,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<Ba.length;s++)Fe(Ba[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Z0(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":t_(r,i),Fe("invalid",r)}hp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),s=["children",""+a]):Tl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Uc(r),e_(r,i,!0);break;case"textarea":Uc(r),n_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hr]=e,t[Ol]=r,WE(t,e,!1,!1),e.stateNode=t;e:{switch(o=dp(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),s=r;break;case"iframe":case"object":case"embed":Fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ba.length;s++)Fe(Ba[s],t);s=r;break;case"source":Fe("error",t),s=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=r;break;case"details":Fe("toggle",t),s=r;break;case"input":Z0(t,r),s=op(t,r),Fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":t_(t,r),s=cp(t,r),Fe("invalid",t);break;default:s=r}hp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Tb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&kl(t,l):typeof l=="number"&&kl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Fe("scroll",t):l!=null&&$m(t,i,l,o))}switch(n){case"input":Uc(t),e_(t,r,!1);break;case"textarea":Uc(t),n_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ms(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?yo(t,!!r.multiple,i,!1):r.defaultValue!=null&&yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)KE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=fi(Ll.current),fi(pr.current),Qc(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(i=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:Gc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Dt(e),null;case 13:if(ze(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&gn!==null&&e.mode&1&&!(e.flags&128))hE(),No(),e.flags|=98560,i=!1;else if(i=Qc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[hr]=e}else No(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Kn!==null&&(qp(Kn),Kn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?pt===0&&(pt=3):kg())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Oo(),Vp(t,e),t===null&&Nl(e.stateNode.containerInfo),Dt(e),null;case 10:return lg(e.type._context),Dt(e),null;case 17:return sn(e.type)&&rh(),Dt(e),null;case 19:if(ze(We),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ca(i,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=uh(t),o!==null){for(e.flags|=128,Ca(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(We,We.current&1|2),e.child}t=t.sibling}i.tail!==null&&it()>Lo&&(e.flags|=128,r=!0,Ca(i,!1),e.lanes=4194304)}else{if(!r)if(t=uh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ca(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return Dt(e),null}else 2*it()-i.renderingStartTime>Lo&&n!==1073741824&&(e.flags|=128,r=!0,Ca(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=it(),e.sibling=null,n=We.current,Me(We,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Tg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function hR(t,e){switch(sg(e),e.tag){case 1:return sn(e.type)&&rh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oo(),ze(rn),ze(Ft),fg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dg(e),null;case 13:if(ze(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));No()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(We),null;case 4:return Oo(),null;case 10:return lg(e.type._context),null;case 22:case 23:return Tg(),null;case 24:return null;default:return null}}var Jc=!1,Lt=!1,dR=typeof WeakSet=="function"?WeakSet:Set,X=null;function mo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Fp(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var W_=!1;function fR(t,e){if(bp=Zu,t=Jb(),ng(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,m=null;t:for(;;){for(var y;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)m=d,d=y;for(;;){if(d===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(l=o),(y=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ep={focusedElem:t,selectionRange:n},Zu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,T=x.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:Wn(e.type,E),T);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){Ze(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return x=W_,W_=!1,x}function ol(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fp(e,n,i)}s=s.next}while(s!==r)}}function sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Up(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function GE(t){var e=t.alternate;e!==null&&(t.alternate=null,GE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[Ol],delete e[Ip],delete e[QC],delete e[YC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QE(t){return t.tag===5||t.tag===3||t.tag===4}function q_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nh));else if(r!==4&&(t=t.child,t!==null))for(Bp(t,e,n),t=t.sibling;t!==null;)Bp(t,e,n),t=t.sibling}function zp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zp(t,e,n),t=t.sibling;t!==null;)zp(t,e,n),t=t.sibling}var vt=null,qn=!1;function es(t,e,n){for(n=n.child;n!==null;)YE(t,e,n),n=n.sibling}function YE(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Yh,n)}catch{}switch(n.tag){case 5:Lt||mo(n,e);case 6:var r=vt,s=qn;vt=null,es(t,e,n),vt=r,qn=s,vt!==null&&(qn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(qn?(t=vt,n=n.stateNode,t.nodeType===8?_f(t.parentNode,n):t.nodeType===1&&_f(t,n),Cl(t)):_f(vt,n.stateNode));break;case 4:r=vt,s=qn,vt=n.stateNode.containerInfo,qn=!0,es(t,e,n),vt=r,qn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fp(n,e,o),s=s.next}while(s!==r)}es(t,e,n);break;case 1:if(!Lt&&(mo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}es(t,e,n);break;case 21:es(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,es(t,e,n),Lt=r):es(t,e,n);break;default:es(t,e,n)}}function K_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dR),e.forEach(function(r){var s=bR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,qn=!1;break e;case 3:vt=a.stateNode.containerInfo,qn=!0;break e;case 4:vt=a.stateNode.containerInfo,qn=!0;break e}a=a.return}if(vt===null)throw Error(z(160));YE(i,o,s),vt=null,qn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ze(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XE(e,t),e=e.sibling}function XE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),ir(t),r&4){try{ol(3,t,t.return),sd(3,t)}catch(E){Ze(t,t.return,E)}try{ol(5,t,t.return)}catch(E){Ze(t,t.return,E)}}break;case 1:Hn(e,t),ir(t),r&512&&n!==null&&mo(n,n.return);break;case 5:if(Hn(e,t),ir(t),r&512&&n!==null&&mo(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(E){Ze(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&vb(s,i),dp(a,o);var c=dp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Tb(s,d):h==="dangerouslySetInnerHTML"?bb(s,d):h==="children"?kl(s,d):$m(s,h,d,c)}switch(a){case"input":ap(s,i);break;case"textarea":wb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?yo(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?yo(s,!!i.multiple,i.defaultValue,!0):yo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ol]=i}catch(E){Ze(t,t.return,E)}}break;case 6:if(Hn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){Ze(t,t.return,E)}}break;case 3:if(Hn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(E){Ze(t,t.return,E)}break;case 4:Hn(e,t),ir(t);break;case 13:Hn(e,t),ir(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bg=it())),r&4&&K_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||h,Hn(e,t),Lt=c):Hn(e,t),ir(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(d=X=h;X!==null;){switch(m=X,y=m.child,m.tag){case 0:case 11:case 14:case 15:ol(4,m,m.return);break;case 1:mo(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){Ze(r,n,E)}}break;case 5:mo(m,m.return);break;case 22:if(m.memoizedState!==null){Q_(d);continue}}y!==null?(y.return=m,X=y):Q_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Eb("display",o))}catch(E){Ze(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){Ze(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Hn(e,t),ir(t),r&4&&K_(t);break;case 21:break;default:Hn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var i=q_(t);zp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=q_(t);Bp(t,a,o);break;default:throw Error(z(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pR(t,e,n){X=t,JE(t)}function JE(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Jc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Lt;a=Jc;var c=Lt;if(Jc=o,(Lt=l)&&!c)for(X=s;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?Y_(s):l!==null?(l.return=o,X=l):Y_(s);for(;i!==null;)X=i,JE(i),i=i.sibling;X=s,Jc=a,Lt=c}G_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):G_(t)}}function G_(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||sd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&N_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Cl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Lt||e.flags&512&&Up(e)}catch(m){Ze(e,e.return,m)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Q_(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Y_(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sd(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ze(e,s,l)}}var i=e.return;try{Up(e)}catch(l){Ze(e,i,l)}break;case 5:var o=e.return;try{Up(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var mR=Math.ceil,fh=Hr.ReactCurrentDispatcher,wg=Hr.ReactCurrentOwner,On=Hr.ReactCurrentBatchConfig,xe=0,yt=null,ht=null,kt=0,mn=0,go=Hs(0),pt=0,Ul=null,Ai=0,id=0,xg=0,al=null,Zt=null,bg=0,Lo=1/0,kr=null,ph=!1,$p=null,ks=null,Zc=!1,ms=null,mh=0,ll=0,Hp=null,Nu=-1,Du=0;function Kt(){return xe&6?it():Nu!==-1?Nu:Nu=it()}function Is(t){return t.mode&1?xe&2&&kt!==0?kt&-kt:JC.transition!==null?(Du===0&&(Du=Lb()),Du):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:$b(t.type)),t):1}function Jn(t,e,n,r){if(50<ll)throw ll=0,Hp=null,Error(z(185));ac(t,n,r),(!(xe&2)||t!==yt)&&(t===yt&&(!(xe&2)&&(id|=n),pt===4&&cs(t,kt)),on(t,r),n===1&&xe===0&&!(e.mode&1)&&(Lo=it()+500,td&&Ws()))}function on(t,e){var n=t.callbackNode;JA(t,e);var r=Ju(t,t===yt?kt:0);if(r===0)n!==null&&i_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&i_(n),e===1)t.tag===0?XC(X_.bind(null,t)):lE(X_.bind(null,t)),KC(function(){!(xe&6)&&Ws()}),n=null;else{switch(jb(r)){case 1:n=Gm;break;case 4:n=Ob;break;case 16:n=Xu;break;case 536870912:n=Mb;break;default:n=Xu}n=oT(n,ZE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZE(t,e){if(Nu=-1,Du=0,xe&6)throw Error(z(327));var n=t.callbackNode;if(bo()&&t.callbackNode!==n)return null;var r=Ju(t,t===yt?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gh(t,r);else{e=r;var s=xe;xe|=2;var i=tT();(yt!==t||kt!==e)&&(kr=null,Lo=it()+500,wi(t,e));do try{_R();break}catch(a){eT(t,a)}while(!0);ag(),fh.current=i,xe=s,ht!==null?e=0:(yt=null,kt=0,e=pt)}if(e!==0){if(e===2&&(s=yp(t),s!==0&&(r=s,e=Wp(t,s))),e===1)throw n=Ul,wi(t,0),cs(t,r),on(t,it()),n;if(e===6)cs(t,r);else{if(s=t.current.alternate,!(r&30)&&!gR(s)&&(e=gh(t,r),e===2&&(i=yp(t),i!==0&&(r=i,e=Wp(t,i))),e===1))throw n=Ul,wi(t,0),cs(t,r),on(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ai(t,Zt,kr);break;case 3:if(cs(t,r),(r&130023424)===r&&(e=bg+500-it(),10<e)){if(Ju(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kp(ai.bind(null,t,Zt,kr),e);break}ai(t,Zt,kr);break;case 4:if(cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Xn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mR(r/1960))-r,10<r){t.timeoutHandle=kp(ai.bind(null,t,Zt,kr),r);break}ai(t,Zt,kr);break;case 5:ai(t,Zt,kr);break;default:throw Error(z(329))}}}return on(t,it()),t.callbackNode===n?ZE.bind(null,t):null}function Wp(t,e){var n=al;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=gh(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&qp(e)),t}function qp(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function gR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!er(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cs(t,e){for(e&=~xg,e&=~id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function X_(t){if(xe&6)throw Error(z(327));bo();var e=Ju(t,0);if(!(e&1))return on(t,it()),null;var n=gh(t,e);if(t.tag!==0&&n===2){var r=yp(t);r!==0&&(e=r,n=Wp(t,r))}if(n===1)throw n=Ul,wi(t,0),cs(t,e),on(t,it()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ai(t,Zt,kr),on(t,it()),null}function Eg(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Lo=it()+500,td&&Ws())}}function Ci(t){ms!==null&&ms.tag===0&&!(xe&6)&&bo();var e=xe;xe|=1;var n=On.transition,r=Ce;try{if(On.transition=null,Ce=1,t)return t()}finally{Ce=r,On.transition=n,xe=e,!(xe&6)&&Ws()}}function Tg(){mn=go.current,ze(go)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qC(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(sg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rh();break;case 3:Oo(),ze(rn),ze(Ft),fg();break;case 5:dg(r);break;case 4:Oo();break;case 13:ze(We);break;case 19:ze(We);break;case 10:lg(r.type._context);break;case 22:case 23:Tg()}n=n.return}if(yt=t,ht=t=Ss(t.current,null),kt=mn=e,pt=0,Ul=null,xg=id=Ai=0,Zt=al=null,di!==null){for(e=0;e<di.length;e++)if(n=di[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}di=null}return t}function eT(t,e){do{var n=ht;try{if(ag(),Cu.current=dh,hh){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hh=!1}if(Si=0,gt=ft=qe=null,il=!1,jl=0,wg.current=null,n===null||n.return===null){pt=1,Ul=e,ht=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=V_(o);if(y!==null){y.flags&=-257,F_(y,o,a,i,e),y.mode&1&&j_(i,c,e),e=y,l=c;var x=e.updateQueue;if(x===null){var E=new Set;E.add(l),e.updateQueue=E}else x.add(l);break e}else{if(!(e&1)){j_(i,c,e),kg();break e}l=Error(z(426))}}else if($e&&a.mode&1){var T=V_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),F_(T,o,a,i,e),ig(Mo(l,a));break e}}i=l=Mo(l,a),pt!==4&&(pt=2),al===null?al=[i]:al.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=jE(i,l,e);P_(i,_);break e;case 1:a=l;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ks===null||!ks.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=VE(i,a,e);P_(i,R);break e}}i=i.return}while(i!==null)}rT(n)}catch(N){e=N,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function tT(){var t=fh.current;return fh.current=dh,t===null?dh:t}function kg(){(pt===0||pt===3||pt===2)&&(pt=4),yt===null||!(Ai&268435455)&&!(id&268435455)||cs(yt,kt)}function gh(t,e){var n=xe;xe|=2;var r=tT();(yt!==t||kt!==e)&&(kr=null,wi(t,e));do try{yR();break}catch(s){eT(t,s)}while(!0);if(ag(),xe=n,fh.current=r,ht!==null)throw Error(z(261));return yt=null,kt=0,pt}function yR(){for(;ht!==null;)nT(ht)}function _R(){for(;ht!==null&&!$A();)nT(ht)}function nT(t){var e=iT(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?rT(t):ht=e,wg.current=null}function rT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hR(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ht=null;return}}else if(n=uR(n,e,mn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);pt===0&&(pt=5)}function ai(t,e,n){var r=Ce,s=On.transition;try{On.transition=null,Ce=1,vR(t,e,n,r)}finally{On.transition=s,Ce=r}return null}function vR(t,e,n,r){do bo();while(ms!==null);if(xe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ZA(t,i),t===yt&&(ht=yt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zc||(Zc=!0,oT(Xu,function(){return bo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var o=Ce;Ce=1;var a=xe;xe|=4,wg.current=null,fR(t,n),XE(n,t),FC(Ep),Zu=!!bp,Ep=bp=null,t.current=n,pR(n),HA(),xe=a,Ce=o,On.transition=i}else t.current=n;if(Zc&&(Zc=!1,ms=t,mh=s),i=t.pendingLanes,i===0&&(ks=null),KA(n.stateNode),on(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ph)throw ph=!1,t=$p,$p=null,t;return mh&1&&t.tag!==0&&bo(),i=t.pendingLanes,i&1?t===Hp?ll++:(ll=0,Hp=t):ll=0,Ws(),null}function bo(){if(ms!==null){var t=jb(mh),e=On.transition,n=Ce;try{if(On.transition=null,Ce=16>t?16:t,ms===null)var r=!1;else{if(t=ms,ms=null,mh=0,xe&6)throw Error(z(331));var s=xe;for(xe|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:ol(8,h,i)}var d=h.child;if(d!==null)d.return=h,X=d;else for(;X!==null;){h=X;var m=h.sibling,y=h.return;if(GE(h),h===c){X=null;break}if(m!==null){m.return=y,X=m;break}X=y}}}var x=i.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ol(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,X=_;break e}X=i.return}}var v=t.current;for(X=v;X!==null;){o=X;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,X=b;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sd(9,a)}}catch(N){Ze(a,a.return,N)}if(a===o){X=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,X=R;break e}X=a.return}}if(xe=s,Ws(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Yh,t)}catch{}r=!0}return r}finally{Ce=n,On.transition=e}}return!1}function J_(t,e,n){e=Mo(n,e),e=jE(t,e,1),t=Ts(t,e,1),e=Kt(),t!==null&&(ac(t,1,e),on(t,e))}function Ze(t,e,n){if(t.tag===3)J_(t,t,n);else for(;e!==null;){if(e.tag===3){J_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ks===null||!ks.has(r))){t=Mo(n,t),t=VE(e,t,1),e=Ts(e,t,1),t=Kt(),e!==null&&(ac(e,1,t),on(e,t));break}}e=e.return}}function wR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(kt&n)===n&&(pt===4||pt===3&&(kt&130023424)===kt&&500>it()-bg?wi(t,0):xg|=n),on(t,e)}function sT(t,e){e===0&&(t.mode&1?(e=$c,$c<<=1,!($c&130023424)&&($c=4194304)):e=1);var n=Kt();t=Vr(t,e),t!==null&&(ac(t,e,n),on(t,n))}function xR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sT(t,n)}function bR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),sT(t,n)}var iT;iT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,cR(t,e,n);tn=!!(t.flags&131072)}else tn=!1,$e&&e.flags&1048576&&cE(e,oh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pu(t,e),t=e.pendingProps;var s=Po(e,Ft.current);xo(e,n),s=mg(null,e,r,t,s,n);var i=gg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(i=!0,sh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ug(e),s.updater=rd,e.stateNode=s,s._reactInternals=e,Np(e,r,t,n),e=Mp(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&rg(e),qt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=TR(r),t=Wn(r,t),s){case 0:e=Op(null,e,r,t,n);break e;case 1:e=z_(null,e,r,t,n);break e;case 11:e=U_(null,e,r,t,n);break e;case 14:e=B_(null,e,r,Wn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Op(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),z_(t,e,r,s,n);case 3:e:{if(zE(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mE(t,e),ch(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Mo(Error(z(423)),e),e=$_(t,e,r,n,s);break e}else if(r!==s){s=Mo(Error(z(424)),e),e=$_(t,e,r,n,s);break e}else for(gn=Es(e.stateNode.containerInfo.firstChild),vn=e,$e=!0,Kn=null,n=fE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(No(),r===s){e=Fr(t,e,n);break e}qt(t,e,r,n)}e=e.child}return e;case 5:return gE(e),t===null&&Cp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Tp(r,s)?o=null:i!==null&&Tp(r,i)&&(e.flags|=32),BE(t,e),qt(t,e,o,n),e.child;case 6:return t===null&&Cp(e),null;case 13:return $E(t,e,n);case 4:return hg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Do(e,null,r,n):qt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),U_(t,e,r,s,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Me(ah,r._currentValue),r._currentValue=o,i!==null)if(er(i.value,o)){if(i.children===s.children&&!rn.current){e=Fr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Or(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Rp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xo(e,n),s=Mn(s),r=r(s),e.flags|=1,qt(t,e,r,n),e.child;case 14:return r=e.type,s=Wn(r,e.pendingProps),s=Wn(r.type,s),B_(t,e,r,s,n);case 15:return FE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Pu(t,e),e.tag=1,sn(r)?(t=!0,sh(e)):t=!1,xo(e,n),LE(e,r,s),Np(e,r,s,n),Mp(null,e,r,!0,t,n);case 19:return HE(t,e,n);case 22:return UE(t,e,n)}throw Error(z(156,e.tag))};function oT(t,e){return Db(t,e)}function ER(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new ER(t,e,n,r)}function Ig(t){return t=t.prototype,!(!t||!t.isReactComponent)}function TR(t){if(typeof t=="function")return Ig(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wm)return 11;if(t===qm)return 14}return 2}function Ss(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ou(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ig(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case io:return xi(n.children,s,i,e);case Hm:o=8,s|=8;break;case np:return t=Nn(12,n,e,s|2),t.elementType=np,t.lanes=i,t;case rp:return t=Nn(13,n,e,s),t.elementType=rp,t.lanes=i,t;case sp:return t=Nn(19,n,e,s),t.elementType=sp,t.lanes=i,t;case gb:return od(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pb:o=10;break e;case mb:o=9;break e;case Wm:o=11;break e;case qm:o=14;break e;case os:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xi(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function od(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=gb,t.lanes=n,t.stateNode={isHidden:!1},t}function If(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function Sf(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=af(0),this.expirationTimes=af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sg(t,e,n,r,s,i,o,a,l){return t=new kR(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ug(i),t}function IR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:so,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aT(t){if(!t)return Ls;t=t._reactInternals;e:{if(Ui(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(sn(n))return aE(t,n,e)}return e}function lT(t,e,n,r,s,i,o,a,l){return t=Sg(n,r,!0,t,s,i,o,a,l),t.context=aT(null),n=t.current,r=Kt(),s=Is(n),i=Or(r,s),i.callback=e??null,Ts(n,i,s),t.current.lanes=s,ac(t,s,r),on(t,r),t}function ad(t,e,n,r){var s=e.current,i=Kt(),o=Is(s);return n=aT(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ts(s,e,o),t!==null&&(Jn(t,s,o,i),Au(t,s,o)),o}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Z_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ag(t,e){Z_(t,e),(t=t.alternate)&&Z_(t,e)}function SR(){return null}var cT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cg(t){this._internalRoot=t}ld.prototype.render=Cg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));ad(t,e,null,null)};ld.prototype.unmount=Cg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ci(function(){ad(null,t,null,null)}),e[jr]=null}};function ld(t){this._internalRoot=t}ld.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ub();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ls.length&&e!==0&&e<ls[n].priority;n++);ls.splice(n,0,t),n===0&&zb(t)}};function Rg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ev(){}function AR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=yh(o);i.call(c)}}var o=lT(e,r,t,0,null,!1,!1,"",ev);return t._reactRootContainer=o,t[jr]=o.current,Nl(t.nodeType===8?t.parentNode:t),Ci(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=yh(l);a.call(c)}}var l=Sg(t,0,!1,null,null,!1,!1,"",ev);return t._reactRootContainer=l,t[jr]=l.current,Nl(t.nodeType===8?t.parentNode:t),Ci(function(){ad(e,l,n,r)}),l}function ud(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=yh(o);a.call(l)}}ad(e,o,t,s)}else o=AR(n,e,t,s,r);return yh(o)}Vb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ua(e.pendingLanes);n!==0&&(Qm(e,n|1),on(e,it()),!(xe&6)&&(Lo=it()+500,Ws()))}break;case 13:Ci(function(){var r=Vr(t,1);if(r!==null){var s=Kt();Jn(r,t,1,s)}}),Ag(t,1)}};Ym=function(t){if(t.tag===13){var e=Vr(t,134217728);if(e!==null){var n=Kt();Jn(e,t,134217728,n)}Ag(t,134217728)}};Fb=function(t){if(t.tag===13){var e=Is(t),n=Vr(t,e);if(n!==null){var r=Kt();Jn(n,t,e,r)}Ag(t,e)}};Ub=function(){return Ce};Bb=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};pp=function(t,e,n){switch(e){case"input":if(ap(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ed(r);if(!s)throw Error(z(90));_b(r),ap(r,s)}}}break;case"textarea":wb(t,n);break;case"select":e=n.value,e!=null&&yo(t,!!n.multiple,e,!1)}};Sb=Eg;Ab=Ci;var CR={usingClientEntryPoint:!1,Events:[cc,co,ed,kb,Ib,Eg]},Ra={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RR={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||SR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Yh=eu.inject(RR),fr=eu}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CR;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rg(e))throw Error(z(200));return IR(t,e,null,n)};Tn.createRoot=function(t,e){if(!Rg(t))throw Error(z(299));var n=!1,r="",s=cT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sg(t,1,!1,null,null,n,!1,r,s),t[jr]=e.current,Nl(t.nodeType===8?t.parentNode:t),new Cg(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Pb(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return Ci(t)};Tn.hydrate=function(t,e,n){if(!cd(e))throw Error(z(200));return ud(null,t,e,!0,n)};Tn.hydrateRoot=function(t,e,n){if(!Rg(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=cT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lT(e,null,t,1,n??null,s,!1,i,o),t[jr]=e.current,Nl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ld(e)};Tn.render=function(t,e,n){if(!cd(e))throw Error(z(200));return ud(null,t,e,!1,n)};Tn.unmountComponentAtNode=function(t){if(!cd(t))throw Error(z(40));return t._reactRootContainer?(Ci(function(){ud(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};Tn.unstable_batchedUpdates=Eg;Tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return ud(t,e,n,!1,r)};Tn.version="18.3.1-next-f1338f8080-20240426";function uT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uT)}catch(t){console.error(t)}}uT(),ub.exports=Tn;var PR=ub.exports,hT,tv=PR;hT=tv.createRoot,tv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bl.apply(this,arguments)}var gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gs||(gs={}));const nv="popstate";function NR(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Kp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_h(s)}return OR(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DR(){return Math.random().toString(36).substr(2,8)}function rv(t,e){return{usr:t.state,key:t.key,idx:e}}function Kp(t,e,n,r){return n===void 0&&(n=null),Bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jo(e):e,{state:n,key:e&&e.key||r||DR()})}function _h(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Jo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=gs.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Bl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=gs.Pop;let T=h(),_=T==null?null:T-c;c=T,l&&l({action:a,location:E.location,delta:_})}function m(T,_){a=gs.Push;let v=Kp(E.location,T,_);c=h()+1;let b=rv(v,c),R=E.createHref(v);try{o.pushState(b,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(R)}i&&l&&l({action:a,location:E.location,delta:1})}function y(T,_){a=gs.Replace;let v=Kp(E.location,T,_);c=h();let b=rv(v,c),R=E.createHref(v);o.replaceState(b,"",R),i&&l&&l({action:a,location:E.location,delta:0})}function x(T){let _=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof T=="string"?T:_h(T);return v=v.replace(/ $/,"%20"),Ke(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let E={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(nv,d),l=T,()=>{s.removeEventListener(nv,d),l=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let _=x(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(T){return o.go(T)}};return E}var sv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sv||(sv={}));function MR(t,e,n){return n===void 0&&(n="/"),LR(t,e,n)}function LR(t,e,n,r){let s=typeof e=="string"?Jo(e):e,i=jo(s.pathname||"/",n);if(i==null)return null;let o=fT(t);jR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=GR(i);a=qR(o[l],c)}return a}function fT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ke(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=As([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),fT(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:HR(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of pT(i.path))s(i,o,l)}),e}function pT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=pT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function jR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const VR=/^:[\w-]+$/,FR=3,UR=2,BR=1,zR=10,$R=-2,iv=t=>t==="*";function HR(t,e){let n=t.split("/"),r=n.length;return n.some(iv)&&(r+=$R),e&&(r+=UR),n.filter(s=>!iv(s)).reduce((s,i)=>s+(VR.test(i)?FR:i===""?BR:zR),r)}function WR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function qR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=Gp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:As([i,d.pathname]),pathnameBase:JR(As([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=As([i,d.pathnameBase]))}return o}function Gp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=KR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let E=a[d]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const x=a[d];return y&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function KR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function GR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function QR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Jo(t):t;return{pathname:n?n.startsWith("/")?n:YR(n,e):e,search:ZR(r),hash:eP(s)}}function YR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Af(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pg(t,e){let n=XR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ng(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Jo(t):(s=Bl({},t),Ke(!s.pathname||!s.pathname.includes("?"),Af("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),Af("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),Af("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}a=d>=0?e[d]:"/"}let l=QR(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const As=t=>t.join("/").replace(/\/\/+/g,"/"),JR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mT=["post","put","patch","delete"];new Set(mT);const nP=["get",...mT];new Set(nP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zl.apply(this,arguments)}const hd=D.createContext(null),gT=D.createContext(null),Wr=D.createContext(null),dd=D.createContext(null),qs=D.createContext({outlet:null,matches:[],isDataRoute:!1}),yT=D.createContext(null);function rP(t,e){let{relative:n}=e===void 0?{}:e;Zo()||Ke(!1);let{basename:r,navigator:s}=D.useContext(Wr),{hash:i,pathname:o,search:a}=fd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:As([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Zo(){return D.useContext(dd)!=null}function Ks(){return Zo()||Ke(!1),D.useContext(dd).location}function _T(t){D.useContext(Wr).static||D.useLayoutEffect(t)}function ea(){let{isDataRoute:t}=D.useContext(qs);return t?gP():sP()}function sP(){Zo()||Ke(!1);let t=D.useContext(hd),{basename:e,future:n,navigator:r}=D.useContext(Wr),{matches:s}=D.useContext(qs),{pathname:i}=Ks(),o=JSON.stringify(Pg(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return _T(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Ng(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:As([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}function fd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Wr),{matches:s}=D.useContext(qs),{pathname:i}=Ks(),o=JSON.stringify(Pg(s,r.v7_relativeSplatPath));return D.useMemo(()=>Ng(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function iP(t,e){return oP(t,e)}function oP(t,e,n,r){Zo()||Ke(!1);let{navigator:s}=D.useContext(Wr),{matches:i}=D.useContext(qs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ks(),h;if(e){var d;let T=typeof e=="string"?Jo(e):e;l==="/"||(d=T.pathname)!=null&&d.startsWith(l)||Ke(!1),h=T}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let T=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=MR(t,{pathname:y}),E=hP(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:As([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:As([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&E?D.createElement(dd.Provider,{value:{location:zl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:gs.Pop}},E):E}function aP(){let t=mP(),e=tP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const lP=D.createElement(aP,null);class cP extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(qs.Provider,{value:this.props.routeContext},D.createElement(yT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uP(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(hd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(qs.Provider,{value:e},r)}function hP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ke(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:m,errors:y}=n,x=d.route.loader&&m[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,m)=>{let y,x=!1,E=null,T=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||lP,l&&(c<0&&m===0?(yP("route-fallback"),x=!0,T=null):c===m&&(x=!0,T=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),v=()=>{let b;return y?b=E:x?b=T:d.route.Component?b=D.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,D.createElement(uP,{match:d,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?D.createElement(cP,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var vT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vT||{}),wT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wT||{});function dP(t){let e=D.useContext(hd);return e||Ke(!1),e}function fP(t){let e=D.useContext(gT);return e||Ke(!1),e}function pP(t){let e=D.useContext(qs);return e||Ke(!1),e}function xT(t){let e=pP(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function mP(){var t;let e=D.useContext(yT),n=fP(),r=xT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function gP(){let{router:t}=dP(vT.UseNavigateStable),e=xT(wT.UseNavigateStable),n=D.useRef(!1);return _T(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zl({fromRouteId:e},i)))},[t,e])}const ov={};function yP(t,e,n){ov[t]||(ov[t]=!0)}function _P(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vP(t){let{to:e,replace:n,state:r,relative:s}=t;Zo()||Ke(!1);let{future:i,static:o}=D.useContext(Wr),{matches:a}=D.useContext(qs),{pathname:l}=Ks(),c=ea(),h=Ng(e,Pg(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(h);return D.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function rs(t){Ke(!1)}function wP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gs.Pop,navigator:i,static:o=!1,future:a}=t;Zo()&&Ke(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:i,static:o,future:zl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Jo(r));let{pathname:h="/",search:d="",hash:m="",state:y=null,key:x="default"}=r,E=D.useMemo(()=>{let T=jo(h,l);return T==null?null:{location:{pathname:T,search:d,hash:m,state:y,key:x},navigationType:s}},[l,h,d,m,y,x,s]);return E==null?null:D.createElement(Wr.Provider,{value:c},D.createElement(dd.Provider,{children:n,value:E}))}function xP(t){let{children:e,location:n}=t;return iP(Qp(e),n)}new Promise(()=>{});function Qp(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Qp(r.props.children,i));return}r.type!==rs&&Ke(!1),!r.props.index||!r.props.children||Ke(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vh.apply(this,arguments)}function bT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function bP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EP(t,e){return t.button===0&&(!e||e==="_self")&&!bP(t)}const TP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],IP="6";try{window.__reactRouterVersion=IP}catch{}const SP=D.createContext({isTransitioning:!1}),AP="startTransition",av=wA[AP];function CP(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=NR({window:s,v5Compat:!0}));let o=i.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=D.useCallback(d=>{c&&av?av(()=>l(d)):l(d)},[l,c]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>_P(r),[r]),D.createElement(wP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const RP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dg=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,m=bT(e,TP),{basename:y}=D.useContext(Wr),x,E=!1;if(typeof c=="string"&&PP.test(c)&&(x=c,RP))try{let b=new URL(window.location.href),R=c.startsWith("//")?new URL(b.protocol+c):new URL(c),N=jo(R.pathname,y);R.origin===b.origin&&N!=null?c=N+R.search+R.hash:E=!0}catch{}let T=rP(c,{relative:s}),_=DP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d});function v(b){r&&r(b),b.defaultPrevented||_(b)}return D.createElement("a",vh({},m,{href:x||T,onClick:E||i?r:v,ref:n,target:l}))}),or=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=bT(e,kP),m=fd(l,{relative:d.relative}),y=Ks(),x=D.useContext(gT),{navigator:E,basename:T}=D.useContext(Wr),_=x!=null&&OP(m)&&c===!0,v=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,b=y.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(b=b.toLowerCase(),R=R?R.toLowerCase():null,v=v.toLowerCase()),R&&T&&(R=jo(R,T)||R);const N=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=b===v||!o&&b.startsWith(v)&&b.charAt(N)==="/",k=R!=null&&(R===v||!o&&R.startsWith(v)&&R.charAt(v.length)==="/"),w={isActive:M,isPending:k,isTransitioning:_},A=M?r:void 0,C;typeof i=="function"?C=i(w):C=[i,M?"active":null,k?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(w):a;return D.createElement(Dg,vh({},d,{"aria-current":A,className:C,ref:n,style:P,to:l,viewTransition:c}),typeof h=="function"?h(w):h)});var Yp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yp||(Yp={}));var lv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lv||(lv={}));function NP(t){let e=D.useContext(hd);return e||Ke(!1),e}function DP(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ea(),c=Ks(),h=fd(t,{relative:o});return D.useCallback(d=>{if(EP(d,n)){d.preventDefault();let m=r!==void 0?r:_h(c)===_h(h);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function OP(t,e){e===void 0&&(e={});let n=D.useContext(SP);n==null&&Ke(!1);let{basename:r}=NP(Yp.useViewTransitionState),s=fd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=jo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=jo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gp(s.pathname,o)!=null||Gp(s.pathname,i)!=null}const ET=D.createContext({theme:"light",toggleTheme:()=>{}});function MP({children:t}){const[e,n]=D.useState(()=>{const s=typeof window<"u"?localStorage.getItem("theme"):null;return s==="light"||s==="dark"?s:"light"});D.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=D.useMemo(()=>({theme:e,toggleTheme:()=>n(s=>s==="dark"?"light":"dark")}),[e]);return f.jsx(ET.Provider,{value:r,children:t})}function LP(){return D.useContext(ET)}var cv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[d],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new VP;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const x=c<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FP=function(t){const e=TT(t);return kT.encodeByteArray(e,!0)},wh=function(t){return FP(t).replace(/\./g,"")},IT=function(t){try{return kT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=()=>UP().__FIREBASE_DEFAULTS__,zP=()=>{if(typeof process>"u"||typeof cv>"u")return;const t=cv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$P=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IT(t[1]);return e&&JSON.parse(e)},pd=()=>{try{return BP()||zP()||$P()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ST=t=>{var e,n;return(n=(e=pd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AT=t=>{const e=ST(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CT=()=>{var t;return(t=pd())===null||t===void 0?void 0:t.config},RT=t=>{var e;return(e=pd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wh(JSON.stringify(n)),wh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function qP(){var t;const e=(t=pd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Og(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QP(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YP(){return!qP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mg(){try{return typeof indexedDB=="object"}catch{return!1}}function Lg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function NT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="FirebaseError";class Un extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XP,Object.setPrototypeOf(this,Un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bi.prototype.create)}}class Bi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?JP(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Un(s,a,r)}}function JP(t,e){return t.replace(ZP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ZP=/\{\$([^}]+)}/g;function eN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(uv(i)&&uv(o)){if(!$l(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function uv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function za(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $a(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tN(t,e){const n=new nN(t,e);return n.subscribe.bind(n)}class nN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cf),s.error===void 0&&(s.error=Cf),s.complete===void 0&&(s.complete=Cf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=1e3,iN=2,oN=4*60*60*1e3,aN=.5;function hv(t,e=sN,n=iN){const r=e*Math.pow(n,t),s=Math.round(aN*r*(Math.random()-.5)*2);return Math.min(oN,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class jn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uN(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cN(t){return t===li?void 0:t}function uN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const dN={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},fN=ye.INFO,pN={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},mN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=pN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class md{constructor(e){this.name=e,this._logLevel=fN,this._logHandler=mN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const gN=(t,e)=>e.some(n=>t instanceof n);let dv,fv;function yN(){return dv||(dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _N(){return fv||(fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DT=new WeakMap,Xp=new WeakMap,OT=new WeakMap,Rf=new WeakMap,jg=new WeakMap;function vN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Cs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DT.set(n,t)}).catch(()=>{}),jg.set(e,t),e}function wN(t){if(Xp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xp.set(t,e)}let Jp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xN(t){Jp=t(Jp)}function bN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pf(this),e,...n);return OT.set(r,e.sort?e.sort():[e]),Cs(r)}:_N().includes(t)?function(...e){return t.apply(Pf(this),e),Cs(DT.get(this))}:function(...e){return Cs(t.apply(Pf(this),e))}}function EN(t){return typeof t=="function"?bN(t):(t instanceof IDBTransaction&&wN(t),gN(t,yN())?new Proxy(t,Jp):t)}function Cs(t){if(t instanceof IDBRequest)return vN(t);if(Rf.has(t))return Rf.get(t);const e=EN(t);return e!==t&&(Rf.set(t,e),jg.set(e,t)),e}const Pf=t=>jg.get(t);function MT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Cs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Cs(o.result),l.oldVersion,l.newVersion,Cs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const TN=["get","getKey","getAll","getAllKeys","count"],kN=["put","add","delete","clear"],Nf=new Map;function pv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TN.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Nf.set(e,i),i}xN(t=>({...t,get:(e,n,r)=>pv(e,n)||t.get(e,n,r),has:(e,n)=>!!pv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zp="@firebase/app",mv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new md("@firebase/app"),AN="@firebase/app-compat",CN="@firebase/analytics-compat",RN="@firebase/analytics",PN="@firebase/app-check-compat",NN="@firebase/app-check",DN="@firebase/auth",ON="@firebase/auth-compat",MN="@firebase/database",LN="@firebase/data-connect",jN="@firebase/database-compat",VN="@firebase/functions",FN="@firebase/functions-compat",UN="@firebase/installations",BN="@firebase/installations-compat",zN="@firebase/messaging",$N="@firebase/messaging-compat",HN="@firebase/performance",WN="@firebase/performance-compat",qN="@firebase/remote-config",KN="@firebase/remote-config-compat",GN="@firebase/storage",QN="@firebase/storage-compat",YN="@firebase/firestore",XN="@firebase/vertexai-preview",JN="@firebase/firestore-compat",ZN="firebase",e2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="[DEFAULT]",t2={[Zp]:"fire-core",[AN]:"fire-core-compat",[RN]:"fire-analytics",[CN]:"fire-analytics-compat",[NN]:"fire-app-check",[PN]:"fire-app-check-compat",[DN]:"fire-auth",[ON]:"fire-auth-compat",[MN]:"fire-rtdb",[LN]:"fire-data-connect",[jN]:"fire-rtdb-compat",[VN]:"fire-fn",[FN]:"fire-fn-compat",[UN]:"fire-iid",[BN]:"fire-iid-compat",[zN]:"fire-fcm",[$N]:"fire-fcm-compat",[HN]:"fire-perf",[WN]:"fire-perf-compat",[qN]:"fire-rc",[KN]:"fire-rc-compat",[GN]:"fire-gcs",[QN]:"fire-gcs-compat",[YN]:"fire-fst",[JN]:"fire-fst-compat",[XN]:"fire-vertex","fire-js":"fire-js",[ZN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,n2=new Map,tm=new Map;function gv(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tr(t){const e=t.name;if(tm.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,t);for(const n of xh.values())gv(n,t);for(const n of n2.values())gv(n,t);return!0}function Gs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Bi("app","Firebase",r2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=e2;function LT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:em,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rs.create("bad-app-name",{appName:String(s)});if(n||(n=CT()),!n)throw Rs.create("no-options");const i=xh.get(s);if(i){if($l(n,i.options)&&$l(r,i.config))return i;throw Rs.create("duplicate-app",{appName:s})}const o=new hN(s);for(const l of tm.values())o.addComponent(l);const a=new s2(n,r,o);return xh.set(s,a),a}function gd(t=em){const e=xh.get(t);if(!e&&t===em&&CT())return LT();if(!e)throw Rs.create("no-app",{appName:t});return e}function an(t,e,n){var r;let s=(r=t2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(a.join(" "));return}tr(new jn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firebase-heartbeat-database",o2=1,Hl="firebase-heartbeat-store";let Df=null;function jT(){return Df||(Df=MT(i2,o2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rs.create("idb-open",{originalErrorMessage:t.message})})),Df}async function a2(t){try{const n=(await jT()).transaction(Hl),r=await n.objectStore(Hl).get(VT(t));return await n.done,r}catch(e){if(e instanceof Un)Ur.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(n.message)}}}async function yv(t,e){try{const r=(await jT()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,VT(t)),await r.done}catch(n){if(n instanceof Un)Ur.warn(n.message);else{const r=Rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ur.warn(r.message)}}}function VT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=1024,c2=30*24*60*60*1e3;class u2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_v();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=c2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_v(),{heartbeatsToSend:r,unsentEntries:s}=h2(this._heartbeatsCache.heartbeats),i=wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ur.warn(n),""}}}function _v(){return new Date().toISOString().substring(0,10)}function h2(t,e=l2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),vv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mg()?Lg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vv(t){return wh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){tr(new jn("platform-logger",e=>new IN(e),"PRIVATE")),tr(new jn("heartbeat",e=>new u2(e),"PRIVATE")),an(Zp,mv,t),an(Zp,mv,"esm2017"),an("fire-js","")}f2("");var p2="firebase",m2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an(p2,m2,"app");function Vg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function FT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g2=FT,UT=new Bi("auth","Firebase",FT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new md("@firebase/auth");function y2(t,...e){bh.logLevel<=ye.WARN&&bh.warn(`Auth (${zi}): ${t}`,...e)}function Mu(t,...e){bh.logLevel<=ye.ERROR&&bh.error(`Auth (${zi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,...e){throw Ug(t,...e)}function ln(t,...e){return Ug(t,...e)}function Fg(t,e,n){const r=Object.assign(Object.assign({},g2()),{[e]:n});return new Bi("auth","Firebase",r).create(e,{appName:t.name})}function Zn(t){return Fg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BT(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vn(t,"argument-error"),Fg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ug(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UT.create(t,...e)}function J(t,e,...n){if(!t)throw Ug(e,...n)}function Pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mu(e),new Error(e)}function Br(t,e){t||Pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zT(){return wv()==="http:"||wv()==="https:"}function wv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zT()||Og()||"connection"in navigator)?navigator.onLine:!0}function v2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=WP()||GP()}get(){return _2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new hc(3e4,6e4);function hn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function In(t,e,n,r,s={}){return HT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ta(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return KP()||(c.referrerPolicy="no-referrer"),$T.fetch()(WT(t,t.config.apiHost,n,a),c)})}async function HT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},w2),e);try{const s=new E2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ha(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ha(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ha(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ha(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Fg(t,h,c);Vn(t,h)}}catch(s){if(s instanceof Un)throw s;Vn(t,"network-request-failed",{message:String(s)})}}async function Qs(t,e,n,r,s={}){const i=await In(t,e,n,r,s);return"mfaPendingCredential"in i&&Vn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function WT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Bg(t.config,s):`${t.config.apiScheme}://${s}`}function b2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ln(this.auth,"network-request-failed")),x2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ha(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ln(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){return t!==void 0&&t.getResponse!==void 0}function bv(t){return t!==void 0&&t.enterprise!==void 0}class T2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return b2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t){return(await In(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function I2(t,e){return In(t,"GET","/v2/recaptchaConfig",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(t,e){return In(t,"POST","/v1/accounts:delete",e)}async function qT(t,e){return In(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A2(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=zg(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:cl(Of(s.auth_time)),issuedAtTime:cl(Of(s.iat)),expirationTime:cl(Of(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Of(t){return Number(t)*1e3}function zg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const s=IT(n);return s?JSON.parse(s):(Mu("Failed to decode base64 JWT payload"),null)}catch(s){return Mu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ev(t){const e=zg(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Un&&C2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function C2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vo(t,qT(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?KT(i.providerUserInfo):[],a=N2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new rm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function P2(t){const e=Qe(t);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function N2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function KT(t){return t.map(e=>{var{providerId:n}=e,r=Vg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e){const n=await HT(t,{},async()=>{const r=ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=WT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$T.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function O2(t,e){return In(t,"POST","/v2/accounts:revokeToken",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ev(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=Ev(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await D2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Eo;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Vg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A2(this,e)}reload(){return P2(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await Vo(this,S2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:R,isAnonymous:N,providerData:M,stsTokenManager:k}=n;J(b&&k,e,"internal-error");const w=Eo.fromJSON(this.name,k);J(typeof b=="string",e,"internal-error"),ts(d,e.name),ts(m,e.name),J(typeof R=="boolean",e,"internal-error"),J(typeof N=="boolean",e,"internal-error"),ts(y,e.name),ts(x,e.name),ts(E,e.name),ts(T,e.name),ts(_,e.name),ts(v,e.name);const A=new Nr({uid:b,auth:e,email:m,emailVerified:R,displayName:d,isAnonymous:N,photoURL:x,phoneNumber:y,tenantId:E,stsTokenManager:w,createdAt:_,lastLoginAt:v});return M&&Array.isArray(M)&&(A.providerData=M.map(C=>Object.assign({},C))),T&&(A._redirectEventId=T),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Eo;s.updateFromServerResponse(n);const i=new Nr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Eh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?KT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Eo;a.updateFromIdToken(r);const l=new Nr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function Dr(t){Br(t instanceof Function,"Expected a class definition");let e=Tv.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GT.type="NONE";const kv=GT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class To{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Lu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Lu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new To(Dr(kv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Dr(kv);const o=Lu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Nr._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new To(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new To(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ek(e))return"Blackberry";if(tk(e))return"Webos";if(YT(e))return"Safari";if((e.includes("chrome/")||XT(e))&&!e.includes("edge/"))return"Chrome";if(ZT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QT(t=Ut()){return/firefox\//i.test(t)}function YT(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XT(t=Ut()){return/crios\//i.test(t)}function JT(t=Ut()){return/iemobile/i.test(t)}function ZT(t=Ut()){return/android/i.test(t)}function ek(t=Ut()){return/blackberry/i.test(t)}function tk(t=Ut()){return/webos/i.test(t)}function $g(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M2(t=Ut()){var e;return $g(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function L2(){return QP()&&document.documentMode===10}function nk(t=Ut()){return $g(t)||ZT(t)||tk(t)||ek(t)||/windows phone/i.test(t)||JT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e=[]){let n;switch(t){case"Browser":n=Iv(Ut());break;case"Worker":n=`${Iv(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t,e={}){return In(t,"GET","/v2/passwordPolicy",hn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=6;class U2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:F2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sv(this),this.idTokenSubscription=new Sv(this),this.beforeStateQueue=new j2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qT(this,{idToken:e}),r=await Nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=v2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Zn(this));const n=e?Qe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V2(this),n=new U2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await O2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&y2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bn(t){return Qe(t)}class Sv{constructor(e){this.auth=e,this.observer=null,this.addObserver=tN(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z2(t){dc=t}function Hg(t){return dc.loadJS(t)}function $2(){return dc.recaptchaV2Script}function H2(){return dc.recaptchaEnterpriseScript}function W2(){return dc.gapiScript}function sk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const q2="recaptcha-enterprise",K2="NO_RECAPTCHA";class G2{constructor(e){this.type=q2,this.auth=Bn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{I2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new T2(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;bv(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(K2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&bv(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=H2();l.length!==0&&(l+=a),Hg(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Av(t,e,n,r=!1){const s=new G2(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function sm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Av(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Av(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e){const n=Gs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($l(i,e??{}))return s;Vn(s,"already-initialized")}return n.initialize({options:e})}function Y2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function X2(t,e,n){const r=Bn(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ik(e),{host:o,port:a}=J2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Z2()}function ik(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function J2(t){const e=ik(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Cv(o)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Z2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,n){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}async function eD(t,e){return In(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t,e){return Qs(t,"POST","/v1/accounts:signInWithPassword",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e){return Qs(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}async function rD(t,e){return Qs(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends yd{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,n,"signInWithPassword",tD);case"emailLink":return nD(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,r,"signUpPassword",eD);case"emailLink":return rD(e,{idToken:n,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e){return Qs(t,"POST","/v1/accounts:signInWithIdp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="http://localhost";class Ri extends yd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Vg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ri(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ko(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:sD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e){return In(t,"POST","/v1/accounts:sendVerificationCode",hn(t,e))}async function oD(t,e){return Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e))}async function aD(t,e){const n=await Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e));if(n.temporaryProof)throw Ha(t,"account-exists-with-different-credential",n);return n}const lD={USER_NOT_FOUND:"user-not-found"};async function cD(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,n),lD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends yd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ul({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ul({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return oD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return aD(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return cD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new ul({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hD(t){const e=za($a(t)).link,n=e?za($a(e)).deep_link_id:null,r=za($a(t)).deep_link_id;return(r?za($a(r)).link:null)||r||n||e||t}class Wg{constructor(e){var n,r,s,i,o,a;const l=za($a(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=uD((s=l.mode)!==null&&s!==void 0?s:null);J(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=hD(e);try{return new Wg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){this.providerId=na.PROVIDER_ID}static credential(e,n){return Wl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Wg.parseLink(n);return J(r,"argument-error"),Wl._fromEmailAndCode(e,r.code,r.tenantId)}}na.PROVIDER_ID="password";na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends _d{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends fc{constructor(){super("facebook.com")}static credential(e){return Ri._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ri._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends fc{constructor(){super("github.com")}static credential(e){return Ri._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends fc{constructor(){super("twitter.com")}static credential(e,n){return Ri._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ds.credential(n,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return Qs(t,"POST","/v1/accounts:signUp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Nr._fromIdTokenResponse(e,r,s),o=Rv(r);return new Pi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Rv(r);return new Pi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Rv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends Un{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Th.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Th(e,n,r,s)}}function ok(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(t,i,e,r):i})}async function fD(t,e,n=!1){const r=await Vo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t,e,n=!1){const{auth:r}=t;if(yn(r.app))return Promise.reject(Zn(r));const s="reauthenticate";try{const i=await Vo(t,ok(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=zg(i.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),Pi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Vn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e,n=!1){if(yn(t.app))return Promise.reject(Zn(t));const r="signIn",s=await ok(t,r,e),i=await Pi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function lk(t,e){return ak(Bn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t){const e=Bn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mD(t,e,n){if(yn(t.app))return Promise.reject(Zn(t));const r=Bn(t),o=await sm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ck(t),l}),a=await Pi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function gD(t,e,n){return yn(t.app)?Promise.reject(Zn(t)):lk(Qe(t),na.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ck(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return In(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Vo(r,yD(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function _D(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function vD(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function wD(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function xD(t){return Qe(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t,e){return In(t,"POST","/v2/accounts/mfaEnrollment:start",hn(t,e))}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=1e3,TD=10;class dk extends hk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);L2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ED)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dk.type="LOCAL";const kD=dk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends hk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fk.type="SESSION";const pk=fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await ID(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=qg("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function AD(t){ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function CD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PD(){return Kg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="firebaseLocalStorageDb",ND=1,Ih="firebaseLocalStorage",gk="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wd(t,e){return t.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function DD(){const t=indexedDB.deleteDatabase(mk);return new pc(t).toPromise()}function im(){const t=indexedDB.open(mk,ND);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ih,{keyPath:gk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ih)?e(r):(r.close(),await DD(),e(await im()))})})}async function Pv(t,e,n){const r=wd(t,!0).put({[gk]:e,value:n});return new pc(r).toPromise()}async function OD(t,e){const n=wd(t,!1).get(e),r=await new pc(n).toPromise();return r===void 0?null:r.value}function Nv(t,e){const n=wd(t,!0).delete(e);return new pc(n).toPromise()}const MD=800,LD=3;class yk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance(PD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CD(),!this.activeServiceWorker)return;this.sender=new SD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await im();return await Pv(e,kh,"1"),await Nv(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=wd(s,!1).getAll();return new pc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yk.type="LOCAL";const jD=yk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e){return In(t,"POST","/v2/accounts/mfaSignIn:start",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=500,UD=6e4,tu=1e12;class BD{constructor(e){this.auth=e,this.counter=tu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new zD(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||tu;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||tu;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||tu;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class zD{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;J(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=$D(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},UD)},FD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function $D(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=sk("rcb"),HD=new hc(3e4,6e4);class WD{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return J(qD(n),e,"argument-error"),this.shouldResolveImmediately(n)&&xv(ut().grecaptcha)?Promise.resolve(ut().grecaptcha):new Promise((r,s)=>{const i=ut().setTimeout(()=>{s(ln(e,"network-request-failed"))},HD.get());ut()[Mf]=()=>{ut().clearTimeout(i),delete ut()[Mf];const a=ut().grecaptcha;if(!a||!xv(a)){s(ln(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${$2()}?${ta({onload:Mf,render:"explicit",hl:n})}`;Hg(o).catch(()=>{clearTimeout(i),s(ln(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function qD(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class KD{async load(e){return new BD(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="recaptcha",GD={theme:"light",type:"image"};class QD{constructor(e,n,r=Object.assign({},GD)){this.parameters=r,this.type=_k,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bn(e),this.isInvisible=this.parameters.size==="invisible",J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;J(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new KD:new WD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){J(zT()&&!Kg(),this.auth,"internal-error"),await YD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await k2(this.auth);J(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function YD(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ul._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function JD(t,e,n){if(yn(t.app))return Promise.reject(Zn(t));const r=Bn(t),s=await ZD(r,e,Qe(n));return new XD(s,i=>lk(r,i))}async function ZD(t,e,n){var r;const s=await n.verify();try{J(typeof s=="string",t,"argument-error"),J(n.type===_k,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return J(o.type==="enroll",t,"internal-error"),(await bD(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{J(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return J(a,t,"missing-multi-factor-info"),(await VD(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await iD(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t,e){return e?Dr(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends yd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eO(t){return ak(t.auth,new Qg(t),t.bypassAuthState)}function tO(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),pD(n,new Qg(t),t.bypassAuthState)}async function nO(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),fD(n,new Qg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eO;case"linkViaPopup":case"linkViaRedirect":return nO;case"reauthViaPopup":case"reauthViaRedirect":return tO;default:Vn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new hc(2e3,1e4);async function sO(t,e,n){if(yn(t.app))return Promise.reject(ln(t,"operation-not-supported-in-this-environment"));const r=Bn(t);BT(t,e,_d);const s=Gg(r,n);return new pi(r,"signInViaPopup",e,s).executeNotNull()}class pi extends vk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,pi.currentPopupAction&&pi.currentPopupAction.cancel(),pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rO.get())};e()}}pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="pendingRedirect",ju=new Map;class oO extends vk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ju.get(this.auth._key());if(!e){try{const r=await aO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ju.set(this.auth._key(),e)}return this.bypassAuthState||ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aO(t,e){const n=xk(e),r=wk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function lO(t,e){return wk(t)._set(xk(e),"true")}function cO(t,e){ju.set(t._key(),e)}function wk(t){return Dr(t._redirectPersistence)}function xk(t){return Lu(iO,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t,e,n){return uO(t,e,n)}async function uO(t,e,n){if(yn(t.app))return Promise.reject(Zn(t));const r=Bn(t);BT(t,e,_d),await r._initializationPromise;const s=Gg(r,n);return await lO(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function hO(t,e){return await Bn(t)._initializationPromise,bk(t,e,!1)}async function bk(t,e,n=!1){if(yn(t.app))return Promise.reject(Zn(t));const r=Bn(t),s=Gg(r,e),o=await new oO(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=10*60*1e3;class fO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ek(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ov(e))}saveEventToCache(e){this.cachedEventUids.add(Ov(e)),this.lastProcessedEventTime=Date.now()}}function Ov(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ek({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ek(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(t,e={}){return In(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yO=/^https?/;async function _O(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mO(t);for(const n of e)try{if(vO(n))return}catch{}Vn(t,"unauthorized-domain")}function vO(t){const e=nm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!yO.test(n))return!1;if(gO.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new hc(3e4,6e4);function Mv(){const t=ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xO(t){return new Promise((e,n)=>{var r,s,i;function o(){Mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mv(),n(ln(t,"network-request-failed"))},timeout:wO.get()})}if(!((s=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ut().gapi)===null||i===void 0)&&i.load)o();else{const a=sk("iframefcb");return ut()[a]=()=>{gapi.load?o():n(ln(t,"network-request-failed"))},Hg(`${W2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function bO(t){return Vu=Vu||xO(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new hc(5e3,15e3),TO="__/auth/iframe",kO="emulator/auth/iframe",IO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AO(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bg(e,kO):`https://${t.config.authDomain}/${TO}`,r={apiKey:e.apiKey,appName:t.name,v:zi},s=SO.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ta(r).slice(1)}`}async function CO(t){const e=await bO(t),n=ut().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:AO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IO,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ln(t,"network-request-failed"),a=ut().setTimeout(()=>{i(o)},EO.get());function l(){ut().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PO=500,NO=600,DO="_blank",OO="http://localhost";class Lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MO(t,e,n,r=PO,s=NO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},RO),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ut().toLowerCase();n&&(a=XT(c)?DO:n),QT(c)&&(e=e||OO,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(M2(c)&&a!=="_self")return LO(e||"",a),new Lv(null);const d=window.open(e||"",a,h);J(d,t,"popup-blocked");try{d.focus()}catch{}return new Lv(d)}function LO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="__/auth/handler",VO="emulator/auth/handler",FO=encodeURIComponent("fac");async function jv(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zi,eventId:s};if(e instanceof _d){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",eN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof fc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${FO}=${encodeURIComponent(l)}`:"";return`${UO(t)}?${ta(a).slice(1)}${c}`}function UO({config:t}){return t.emulator?Bg(t,VO):`https://${t.authDomain}/${jO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="webStorageSupport";class BO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pk,this._completeRedirectFn=bk,this._overrideRedirectResult=cO}async _openPopup(e,n,r,s){var i;Br((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await jv(e,n,r,nm(),s);return MO(e,o,qg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await jv(e,n,r,nm(),s);return AD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Br(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CO(e),r=new fO(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lf,{type:Lf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Lf];o!==void 0&&n(!!o),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_O(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nk()||YT()||$g()}}const zO=BO;var Vv="@firebase/auth",Fv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WO(t){tr(new jn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rk(t)},c=new B2(r,s,i,l);return Y2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),tr(new jn("auth-internal",e=>{const n=Bn(e.getProvider("auth").getImmediate());return(r=>new $O(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),an(Vv,Fv,HO(t)),an(Vv,Fv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=5*60,KO=RT("authIdTokenMaxAge")||qO;let Uv=null;const GO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>KO)return;const s=n==null?void 0:n.token;Uv!==s&&(Uv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function QO(t=gd()){const e=Gs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q2(t,{popupRedirectResolver:zO,persistence:[jD,kD,pk]}),r=RT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=GO(i.toString());vD(n,o,()=>o(n.currentUser)),_D(n,a=>o(a))}}const s=ST("auth");return s&&X2(n,`http://${s}`),n}function YO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}z2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ln("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",YO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WO("Browser");const Tk="@firebase/installations",Yg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=1e4,Ik=`w:${Yg}`,Sk="FIS_v2",XO="https://firebaseinstallations.googleapis.com/v1",JO=60*60*1e3,ZO="installations",eM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ni=new Bi(ZO,eM,tM);function Ak(t){return t instanceof Un&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck({projectId:t}){return`${XO}/projects/${t}/installations`}function Rk(t){return{token:t.token,requestStatus:2,expiresIn:rM(t.expiresIn),creationTime:Date.now()}}async function Pk(t,e){const r=(await e.json()).error;return Ni.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Nk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nM(t,{refreshToken:e}){const n=Nk(t);return n.append("Authorization",sM(e)),n}async function Dk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rM(t){return Number(t.replace("s","000"))}function sM(t){return`${Sk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Ck(t),s=Nk(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:Sk,appId:t.appId,sdkVersion:Ik},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Dk(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Rk(c.authToken)}}else throw await Pk("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=/^[cdef][\w-]{21}$/,om="";function lM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=cM(t);return aM.test(n)?n:om}catch{return om}}function cM(t){return oM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Map;function Lk(t,e){const n=xd(t);jk(n,e),uM(n,e)}function jk(t,e){const n=Mk.get(t);if(n)for(const r of n)r(e)}function uM(t,e){const n=hM();n&&n.postMessage({key:t,fid:e}),dM()}let mi=null;function hM(){return!mi&&"BroadcastChannel"in self&&(mi=new BroadcastChannel("[Firebase] FID Change"),mi.onmessage=t=>{jk(t.data.key,t.data.fid)}),mi}function dM(){Mk.size===0&&mi&&(mi.close(),mi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="firebase-installations-database",pM=1,Di="firebase-installations-store";let jf=null;function Xg(){return jf||(jf=MT(fM,pM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Di)}}})),jf}async function Sh(t,e){const n=xd(t),s=(await Xg()).transaction(Di,"readwrite"),i=s.objectStore(Di),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Lk(t,e.fid),e}async function Vk(t){const e=xd(t),r=(await Xg()).transaction(Di,"readwrite");await r.objectStore(Di).delete(e),await r.done}async function bd(t,e){const n=xd(t),s=(await Xg()).transaction(Di,"readwrite"),i=s.objectStore(Di),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Lk(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jg(t){let e;const n=await bd(t.appConfig,r=>{const s=mM(r),i=gM(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===om?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mM(t){const e=t||{fid:lM(),registrationStatus:0};return Fk(e)}function gM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ni.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:_M(t)}:{installationEntry:e}}async function yM(t,e){try{const n=await iM(t,e);return Sh(t.appConfig,n)}catch(n){throw Ak(n)&&n.customData.serverCode===409?await Vk(t.appConfig):await Sh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function _M(t){let e=await Bv(t.appConfig);for(;e.registrationStatus===1;)await Ok(100),e=await Bv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Jg(t);return r||n}return e}function Bv(t){return bd(t,e=>{if(!e)throw Ni.create("installation-not-found");return Fk(e)})}function Fk(t){return vM(t)?{fid:t.fid,registrationStatus:0}:t}function vM(t){return t.registrationStatus===1&&t.registrationTime+kk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM({appConfig:t,heartbeatServiceProvider:e},n){const r=xM(t,n),s=nM(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:Ik,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Dk(()=>fetch(r,a));if(l.ok){const c=await l.json();return Rk(c)}else throw await Pk("Generate Auth Token",l)}function xM(t,{fid:e}){return`${Ck(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zg(t,e=!1){let n;const r=await bd(t.appConfig,i=>{if(!Uk(i))throw Ni.create("not-registered");const o=i.authToken;if(!e&&TM(o))return i;if(o.requestStatus===1)return n=bM(t,e),i;{if(!navigator.onLine)throw Ni.create("app-offline");const a=IM(i);return n=EM(t,a),a}});return n?await n:r.authToken}async function bM(t,e){let n=await zv(t.appConfig);for(;n.authToken.requestStatus===1;)await Ok(100),n=await zv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Zg(t,e):r}function zv(t){return bd(t,e=>{if(!Uk(e))throw Ni.create("not-registered");const n=e.authToken;return SM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function EM(t,e){try{const n=await wM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Sh(t.appConfig,r),n}catch(n){if(Ak(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Vk(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sh(t.appConfig,r)}throw n}}function Uk(t){return t!==void 0&&t.registrationStatus===2}function TM(t){return t.requestStatus===2&&!kM(t)}function kM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JO}function IM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function SM(t){return t.requestStatus===1&&t.requestTime+kk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(t){const e=t,{installationEntry:n,registrationPromise:r}=await Jg(e);return r?r.catch(console.error):Zg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e=!1){const n=t;return await RM(n),(await Zg(n,e)).token}async function RM(t){const{registrationPromise:e}=await Jg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){if(!t||!t.options)throw Vf("App Configuration");if(!t.name)throw Vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Vf(t){return Ni.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="installations",NM="installations-internal",DM=t=>{const e=t.getProvider("app").getImmediate(),n=PM(e),r=Gs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},OM=t=>{const e=t.getProvider("app").getImmediate(),n=Gs(e,Bk).getImmediate();return{getId:()=>AM(n),getToken:s=>CM(n,s)}};function MM(){tr(new jn(Bk,DM,"PUBLIC")),tr(new jn(NM,OM,"PRIVATE"))}MM();an(Tk,Yg);an(Tk,Yg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="analytics",LM="firebase_id",jM="origin",VM=60*1e3,FM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ey="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=new md("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},wn=new Bi("analytics","Analytics",UM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t){if(!t.startsWith(ey)){const e=wn.create("invalid-gtag-resource",{gtagURL:t});return cn.warn(e.message),""}return t}function zk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function $M(t,e){const n=zM("firebase-js-sdk-policy",{createScriptURL:BM}),r=document.createElement("script"),s=`${ey}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WM(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await zk(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){cn.error(a)}t("config",s,i)}async function qM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await zk(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){cn.error(i)}}function KM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await qM(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await WM(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){cn.error(a)}}return s}function GM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=KM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ey)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=30,XM=1e3;class JM{constructor(e={},n=XM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const $k=new JM;function ZM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eL(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:ZM(r)},i=FM.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw wn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function tL(t,e=$k,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw wn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw wn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new sL;return setTimeout(async()=>{a.abort()},VM),Hk({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Hk(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=$k){var i;const{appId:o,measurementId:a}=t;try{await nL(r,e)}catch(l){if(a)return cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await eL(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!rL(c)){if(s.deleteThrottleMetadata(o),a)return cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?hv(n,s.intervalMillis,YM):hv(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,d),cn.debug(`Calling attemptFetch again in ${h} millis`),Hk(t,d,r,s)}}function nL(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(wn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rL(t){if(!(t instanceof Un)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(){if(Mg())try{await Lg()}catch(t){return cn.warn(wn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return cn.warn(wn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function aL(t,e,n,r,s,i,o){var a;const l=tL(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&cn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>cn.error(y)),e.push(l);const c=oL().then(y=>{if(y)return r.getId()}),[h,d]=await Promise.all([l,c]);QM(i)||$M(i,h.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[jM]="firebase",m.update=!0,d!=null&&(m[LM]=d),s("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.app=e}_delete(){return delete hl[this.app.options.appId],Promise.resolve()}}let hl={},$v=[];const Hv={};let Ff="dataLayer",cL="gtag",Wv,Wk,qv=!1;function uL(){const t=[];if(Og()&&t.push("This is a browser extension environment."),NT()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=wn.create("invalid-analytics-context",{errorInfo:e});cn.warn(n.message)}}function hL(t,e,n){uL();const r=t.options.appId;if(!r)throw wn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw wn.create("no-api-key");if(hl[r]!=null)throw wn.create("already-exists",{id:r});if(!qv){HM(Ff);const{wrappedGtag:i,gtagCore:o}=GM(hl,$v,Hv,Ff,cL);Wk=i,Wv=o,qv=!0}return hl[r]=aL(t,$v,Hv,e,Wv,Ff,n),new lL(t)}function dL(t=gd()){t=Qe(t);const e=Gs(t,Ah);return e.isInitialized()?e.getImmediate():fL(t)}function fL(t,e={}){const n=Gs(t,Ah);if(n.isInitialized()){const s=n.getImmediate();if($l(e,n.getOptions()))return s;throw wn.create("already-initialized")}return n.initialize({options:e})}async function pL(){if(Og()||!NT()||!Mg())return!1;try{return await Lg()}catch{return!1}}function mL(t,e,n,r){t=Qe(t),iL(Wk,hl[t.app.options.appId],e,n,r).catch(s=>cn.error(s))}const Kv="@firebase/analytics",Gv="0.10.8";function gL(){tr(new jn(Ah,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return hL(r,s,n)},"PUBLIC")),tr(new jn("analytics-internal",t,"PRIVATE")),an(Kv,Gv),an(Kv,Gv,"esm2017");function t(e){try{const n=e.getProvider(Ah).getImmediate();return{logEvent:(r,s,i)=>mL(n,r,s,i)}}catch(n){throw wn.create("interop-component-reg-failed",{reason:n})}}}gL();var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,qk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function A(){}A.prototype=w.prototype,k.D=w.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(C,P,O){for(var I=Array(arguments.length-2),W=2;W<arguments.length;W++)I[W-2]=arguments[W];return w.prototype[P].apply(C,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,A){A||(A=0);var C=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)C[P]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(P=0;16>P;++P)C[P]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=k.g[0],A=k.g[1],P=k.g[2];var O=k.g[3],I=w+(O^A&(P^O))+C[0]+3614090360&4294967295;w=A+(I<<7&4294967295|I>>>25),I=O+(P^w&(A^P))+C[1]+3905402710&4294967295,O=w+(I<<12&4294967295|I>>>20),I=P+(A^O&(w^A))+C[2]+606105819&4294967295,P=O+(I<<17&4294967295|I>>>15),I=A+(w^P&(O^w))+C[3]+3250441966&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(O^A&(P^O))+C[4]+4118548399&4294967295,w=A+(I<<7&4294967295|I>>>25),I=O+(P^w&(A^P))+C[5]+1200080426&4294967295,O=w+(I<<12&4294967295|I>>>20),I=P+(A^O&(w^A))+C[6]+2821735955&4294967295,P=O+(I<<17&4294967295|I>>>15),I=A+(w^P&(O^w))+C[7]+4249261313&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(O^A&(P^O))+C[8]+1770035416&4294967295,w=A+(I<<7&4294967295|I>>>25),I=O+(P^w&(A^P))+C[9]+2336552879&4294967295,O=w+(I<<12&4294967295|I>>>20),I=P+(A^O&(w^A))+C[10]+4294925233&4294967295,P=O+(I<<17&4294967295|I>>>15),I=A+(w^P&(O^w))+C[11]+2304563134&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(O^A&(P^O))+C[12]+1804603682&4294967295,w=A+(I<<7&4294967295|I>>>25),I=O+(P^w&(A^P))+C[13]+4254626195&4294967295,O=w+(I<<12&4294967295|I>>>20),I=P+(A^O&(w^A))+C[14]+2792965006&4294967295,P=O+(I<<17&4294967295|I>>>15),I=A+(w^P&(O^w))+C[15]+1236535329&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(P^O&(A^P))+C[1]+4129170786&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^P&(w^A))+C[6]+3225465664&4294967295,O=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(O^w))+C[11]+643717713&4294967295,P=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(P^O))+C[0]+3921069994&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(P^O&(A^P))+C[5]+3593408605&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^P&(w^A))+C[10]+38016083&4294967295,O=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(O^w))+C[15]+3634488961&4294967295,P=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(P^O))+C[4]+3889429448&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(P^O&(A^P))+C[9]+568446438&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^P&(w^A))+C[14]+3275163606&4294967295,O=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(O^w))+C[3]+4107603335&4294967295,P=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(P^O))+C[8]+1163531501&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(P^O&(A^P))+C[13]+2850285829&4294967295,w=A+(I<<5&4294967295|I>>>27),I=O+(A^P&(w^A))+C[2]+4243563512&4294967295,O=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(O^w))+C[7]+1735328473&4294967295,P=O+(I<<14&4294967295|I>>>18),I=A+(O^w&(P^O))+C[12]+2368359562&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(A^P^O)+C[5]+4294588738&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^P)+C[8]+2272392833&4294967295,O=w+(I<<11&4294967295|I>>>21),I=P+(O^w^A)+C[11]+1839030562&4294967295,P=O+(I<<16&4294967295|I>>>16),I=A+(P^O^w)+C[14]+4259657740&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(A^P^O)+C[1]+2763975236&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^P)+C[4]+1272893353&4294967295,O=w+(I<<11&4294967295|I>>>21),I=P+(O^w^A)+C[7]+4139469664&4294967295,P=O+(I<<16&4294967295|I>>>16),I=A+(P^O^w)+C[10]+3200236656&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(A^P^O)+C[13]+681279174&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^P)+C[0]+3936430074&4294967295,O=w+(I<<11&4294967295|I>>>21),I=P+(O^w^A)+C[3]+3572445317&4294967295,P=O+(I<<16&4294967295|I>>>16),I=A+(P^O^w)+C[6]+76029189&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(A^P^O)+C[9]+3654602809&4294967295,w=A+(I<<4&4294967295|I>>>28),I=O+(w^A^P)+C[12]+3873151461&4294967295,O=w+(I<<11&4294967295|I>>>21),I=P+(O^w^A)+C[15]+530742520&4294967295,P=O+(I<<16&4294967295|I>>>16),I=A+(P^O^w)+C[2]+3299628645&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(P^(A|~O))+C[0]+4096336452&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~P))+C[7]+1126891415&4294967295,O=w+(I<<10&4294967295|I>>>22),I=P+(w^(O|~A))+C[14]+2878612391&4294967295,P=O+(I<<15&4294967295|I>>>17),I=A+(O^(P|~w))+C[5]+4237533241&4294967295,A=P+(I<<21&4294967295|I>>>11),I=w+(P^(A|~O))+C[12]+1700485571&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~P))+C[3]+2399980690&4294967295,O=w+(I<<10&4294967295|I>>>22),I=P+(w^(O|~A))+C[10]+4293915773&4294967295,P=O+(I<<15&4294967295|I>>>17),I=A+(O^(P|~w))+C[1]+2240044497&4294967295,A=P+(I<<21&4294967295|I>>>11),I=w+(P^(A|~O))+C[8]+1873313359&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~P))+C[15]+4264355552&4294967295,O=w+(I<<10&4294967295|I>>>22),I=P+(w^(O|~A))+C[6]+2734768916&4294967295,P=O+(I<<15&4294967295|I>>>17),I=A+(O^(P|~w))+C[13]+1309151649&4294967295,A=P+(I<<21&4294967295|I>>>11),I=w+(P^(A|~O))+C[4]+4149444226&4294967295,w=A+(I<<6&4294967295|I>>>26),I=O+(A^(w|~P))+C[11]+3174756917&4294967295,O=w+(I<<10&4294967295|I>>>22),I=P+(w^(O|~A))+C[2]+718787259&4294967295,P=O+(I<<15&4294967295|I>>>17),I=A+(O^(P|~w))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+O&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var A=w-this.blockSize,C=this.B,P=this.h,O=0;O<w;){if(P==0)for(;O<=A;)s(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<w;)if(C[P++]=k.charCodeAt(O++),P==this.blockSize){s(this,C),P=0;break}}else for(;O<w;)if(C[P++]=k[O++],P==this.blockSize){s(this,C),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var A=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=A&255,A/=256;for(this.u(k),k=Array(16),w=A=0;4>w;++w)for(var C=0;32>C;C+=8)k[A++]=this.g[w]>>>C&255;return k};function i(k,w){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=w(k)}function o(k,w){this.h=w;for(var A=[],C=!0,P=k.length-1;0<=P;P--){var O=k[P]|0;C&&O==w||(A[P]=O,C=!1)}this.g=A}var a={};function l(k){return-128<=k&&128>k?i(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return d;if(0>k)return T(c(-k));for(var w=[],A=1,C=0;k>=A;C++)w[C]=k/A|0,A*=4294967296;return new o(w,0)}function h(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return T(h(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(w,8)),C=d,P=0;P<k.length;P+=8){var O=Math.min(8,k.length-P),I=parseInt(k.substring(P,P+O),w);8>O?(O=c(Math.pow(w,O)),C=C.j(O).add(c(I))):(C=C.j(A),C=C.add(c(I)))}return C}var d=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-T(this).m();for(var k=0,w=1,A=0;A<this.g.length;A++){var C=this.i(A);k+=(0<=C?C:4294967296+C)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(E(this))return"-"+T(this).toString(k);for(var w=c(Math.pow(k,6)),A=this,C="";;){var P=R(A,w).g;A=_(A,P.j(w));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=P,x(A))return O+C;for(;6>O.length;)O="0"+O;C=O+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function E(k){return k.h==-1}t.l=function(k){return k=_(this,k),E(k)?-1:x(k)?0:1};function T(k){for(var w=k.g.length,A=[],C=0;C<w;C++)A[C]=~k.g[C];return new o(A,~k.h).add(m)}t.abs=function(){return E(this)?T(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0,P=0;P<=w;P++){var O=C+(this.i(P)&65535)+(k.i(P)&65535),I=(O>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);C=I>>>16,O&=65535,I&=65535,A[P]=I<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function _(k,w){return k.add(T(w))}t.j=function(k){if(x(this)||x(k))return d;if(E(this))return E(k)?T(this).j(T(k)):T(T(this).j(k));if(E(k))return T(this.j(T(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var w=this.g.length+k.g.length,A=[],C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<k.g.length;P++){var O=this.i(C)>>>16,I=this.i(C)&65535,W=k.i(P)>>>16,H=k.i(P)&65535;A[2*C+2*P]+=I*H,v(A,2*C+2*P),A[2*C+2*P+1]+=O*H,v(A,2*C+2*P+1),A[2*C+2*P+1]+=I*W,v(A,2*C+2*P+1),A[2*C+2*P+2]+=O*W,v(A,2*C+2*P+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new o(A,0)};function v(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function b(k,w){this.g=k,this.h=w}function R(k,w){if(x(w))throw Error("division by zero");if(x(k))return new b(d,d);if(E(k))return w=R(T(k),w),new b(T(w.g),T(w.h));if(E(w))return w=R(k,T(w)),new b(T(w.g),w.h);if(30<k.g.length){if(E(k)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var A=m,C=w;0>=C.l(k);)A=N(A),C=N(C);var P=M(A,1),O=M(C,1);for(C=M(C,2),A=M(A,2);!x(C);){var I=O.add(C);0>=I.l(k)&&(P=P.add(A),O=I),C=M(C,1),A=M(A,1)}return w=_(k,P.j(w)),new b(P,w)}for(P=d;0<=k.l(w);){for(A=Math.max(1,Math.floor(k.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),O=c(A),I=O.j(w);E(I)||0<I.l(k);)A-=C,O=c(A),I=O.j(w);x(O)&&(O=m),P=P.add(O),k=_(k,I)}return new b(P,k)}t.A=function(k){return R(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)&k.i(C);return new o(A,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)|k.i(C);return new o(A,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)^k.i(C);return new o(A,this.h^k.h)};function N(k){for(var w=k.g.length+1,A=[],C=0;C<w;C++)A[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(A,k.h)}function M(k,w){var A=w>>5;w%=32;for(var C=k.g.length-A,P=[],O=0;O<C;O++)P[O]=0<w?k.i(O+A)>>>w|k.i(O+A+1)<<32-w:k.i(O+A);return new o(P,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,bi=o}).apply(typeof Qv<"u"?Qv:typeof self<"u"?self:typeof window<"u"?window:{});var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kk,Wa,Gk,Fu,am,Qk,Yk,Xk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nu=="object"&&nu];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in g))break e;g=g[L]}u=u[u.length-1],S=g[u],p=p(S),p!=S&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,S=!1,L={next:function(){if(!S&&g<u.length){var V=g++;return{value:p(V,u[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function x(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,L,V){for(var K=Array(arguments.length-2),De=2;De<arguments.length;De++)K[De-2]=arguments[De];return p.prototype[L].apply(S,K)}}function E(u){const p=u.length;if(0<p){const g=Array(p);for(let S=0;S<p;S++)g[S]=u[S];return g}return[]}function T(u,p){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=u.length||0,V=S.length||0;u.length=L+V;for(let K=0;K<V;K++)u[L+K]=S[K]}else u.push(S)}}class _{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var N=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(u,p,g){for(const S in u)p.call(g,u[S],S,u)}function k(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function w(u){const p={};for(const g in u)p[g]=u[g];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)u[g]=S[g];for(let V=0;V<A.length;V++)g=A[V],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function P(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function O(u){a.setTimeout(()=>{throw u},0)}function I(){var u=Q;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,g){const S=H.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var H=new _(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let he,B=!1,Q=new W,q=()=>{const u=a.Promise.resolve(void 0);he=()=>{u.then(fe)}};var fe=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(g){O(g)}var p=H;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function oe(u,p){if(j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(N){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:we[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&oe.aa.h.call(this)}}x(oe,j);var we={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),He=0;function Bt(u,p,g,S,L){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=L,this.key=++He,this.da=this.fa=!1}function Xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zt(u){this.src=u,this.g={},this.h=0}zt.prototype.add=function(u,p,g,S,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var K=sr(u,p,S,L);return-1<K?(p=u[K],g||(p.fa=!1)):(p=new Bt(p,this.src,V,!!S,L),p.fa=g,u.push(p)),p};function Yt(u,p){var g=p.type;if(g in u.g){var S=u.g[g],L=Array.prototype.indexOf.call(S,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(S,L,1),V&&(Xe(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function sr(u,p,g,S){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==S)return L}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),dn={};function zn(u,p,g,S,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)zn(u,p[V],g,S,L);return null}return g=ae(g),u&&u[Oe]?u.K(p,g,c(S)?!!S.capture:!1,L):Kr(u,p,g,!1,S,L)}function Kr(u,p,g,S,L,V){if(!p)throw Error("Invalid event type");var K=c(L)?!!L.capture:!!L,De=te(u);if(De||(u[Se]=De=new zt(u)),g=De.add(p,g,S,K,V),g.proxy)return g;if(S=Gr(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)ee||(L=K),L===void 0&&(L=!1),u.addEventListener(p.toString(),S,L);else if(u.attachEvent)u.attachEvent(ha(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Gr(){function u(g){return p.call(u.src,u.listener,g)}const p=$;return u}function ua(u,p,g,S,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)ua(u,p[V],g,S,L);else S=c(S)?!!S.capture:!!S,g=ae(g),u&&u[Oe]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],g=sr(V,g,S,L),-1<g&&(Xe(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=te(u))&&(p=u.g[p.toString()],u=-1,p&&(u=sr(p,g,S,L)),(g=-1<u?p[u]:null)&&qi(g))}function qi(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Oe])Yt(p.i,u);else{var g=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(g,S,u.capture):p.detachEvent?p.detachEvent(ha(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=te(p))?(Yt(g,u),g.h==0&&(g.src=null,p[Se]=null)):Xe(u)}}}function ha(u){return u in dn?dn[u]:dn[u]="on"+u}function $(u,p){if(u.da)u=!0;else{p=new oe(p,this);var g=u.listener,S=u.ha||u.src;u.fa&&qi(u),u=g.call(S,p)}return u}function te(u){return u=u[Se],u instanceof zt?u:null}var G="__closure_events_fn_"+(1e9*Math.random()>>>0);function ae(u){return typeof u=="function"?u:(u[G]||(u[G]=function(p){return u.handleEvent(p)}),u[G])}function ie(){se.call(this),this.i=new zt(this),this.M=this,this.F=null}x(ie,se),ie.prototype[Oe]=!0,ie.prototype.removeEventListener=function(u,p,g,S){ua(this,u,p,g,S)};function Ie(u,p){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new j(p,u);else if(p instanceof j)p.target=p.target||u;else{var L=p;p=new j(S,u),C(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var K=p.g=g[V];L=Pe(K,S,!0,p)&&L}if(K=p.g=u,L=Pe(K,S,!0,p)&&L,L=Pe(K,S,!1,p)&&L,g)for(V=0;V<g.length;V++)K=p.g=g[V],L=Pe(K,S,!1,p)&&L}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],S=0;S<g.length;S++)Xe(g[S]);delete u.g[p],u.h--}}this.F=null},ie.prototype.K=function(u,p,g,S){return this.i.add(String(u),p,!1,g,S)},ie.prototype.L=function(u,p,g,S){return this.i.add(String(u),p,!0,g,S)};function Pe(u,p,g,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var K=p[V];if(K&&!K.da&&K.capture==g){var De=K.listener,_t=K.ha||K.src;K.fa&&Yt(u.i,K),L=De.call(_t,S)!==!1&&L}}return L&&!S.defaultPrevented}function Ct(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function $t(u){u.g=Ct(()=>{u.g=null,u.i&&(u.i=!1,$t(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ne extends se{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:$t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(u){se.call(this),this.h=u,this.g={}}x(je,se);var Sn=[];function Qr(u){M(u.g,function(p,g){this.g.hasOwnProperty(g)&&qi(p)},u),u.g={}}je.prototype.N=function(){je.aa.N.call(this),Qr(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yr=a.JSON.stringify,at=a.JSON.parse,Xt=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ki(){}Ki.prototype.h=null;function de(u){return u.h||(u.h=u.i())}function lt(){}var rt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bd(){j.call(this,"d")}x(Bd,j);function zd(){j.call(this,"c")}x(zd,j);var Js={},s0=null;function Ec(){return s0=s0||new ie}Js.La="serverreachability";function i0(u){j.call(this,Js.La,u)}x(i0,j);function da(u){const p=Ec();Ie(p,new i0(p))}Js.STAT_EVENT="statevent";function o0(u,p){j.call(this,Js.STAT_EVENT,u),this.stat=p}x(o0,j);function Ht(u){const p=Ec();Ie(p,new o0(p,u))}Js.Ma="timingevent";function a0(u,p){j.call(this,Js.Ma,u),this.size=p}x(a0,j);function fa(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function pa(){this.g=!0}pa.prototype.xa=function(){this.g=!1};function N1(u,p,g,S,L,V){u.info(function(){if(u.g)if(V)for(var K="",De=V.split("&"),_t=0;_t<De.length;_t++){var be=De[_t].split("=");if(1<be.length){var Rt=be[0];be=be[1];var Pt=Rt.split("_");K=2<=Pt.length&&Pt[1]=="type"?K+(Rt+"="+be+"&"):K+(Rt+"=redacted&")}}else K=null;else K=V;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+p+`
`+g+`
`+K})}function D1(u,p,g,S,L,V,K){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+K})}function Gi(u,p,g,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+M1(u,g)+(S?" "+S:"")})}function O1(u,p){u.info(function(){return"TIMEOUT: "+p})}pa.prototype.info=function(){};function M1(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return Yr(g)}catch{return p}}var Tc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},l0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$d;function kc(){}x(kc,Ki),kc.prototype.g=function(){return new XMLHttpRequest},kc.prototype.i=function(){return{}},$d=new kc;function Xr(u,p,g,S){this.j=u,this.i=p,this.l=g,this.R=S||1,this.U=new je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new c0}function c0(){this.i=null,this.g="",this.h=!1}var u0={},Hd={};function Wd(u,p,g){u.L=1,u.v=Cc(wr(p)),u.m=g,u.P=!0,h0(u,null)}function h0(u,p){u.F=Date.now(),Ic(u),u.A=wr(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),k0(g.i,"t",S),u.C=0,g=u.j.J,u.h=new c0,u.g=$0(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Ne(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Sn[0]=L.toString()),L=Sn);for(var V=0;V<L.length;V++){var K=zn(g,L[V],S||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),da(),N1(u.i,u.u,u.A,u.l,u.R,u.m)}Xr.prototype.ca=function(u){u=u.target;const p=this.M;p&&xr(u)==3?p.j():this.Y(u)},Xr.prototype.Y=function(u){try{if(u==this.g)e:{const Pt=xr(this.g);var p=this.g.Ba();const Xi=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||N0(this.g)))){this.J||Pt!=4||p==7||(p==8||0>=Xi?da(3):da(2)),qd(this);var g=this.g.Z();this.X=g;t:if(d0(this)){var S=N0(this.g);u="";var L=S.length,V=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zs(this),ma(this);var K="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(S[p],{stream:!(V&&p==L-1)});S.length=0,this.h.g+=u,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=g==200,D1(this.i,this.u,this.A,this.l,this.R,Pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var De,_t=this.g;if((De=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(De)){var be=De;break t}}be=null}if(g=be)Gi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kd(this,g);else{this.o=!1,this.s=3,Ht(12),Zs(this),ma(this);break e}}if(this.P){g=!0;let $n;for(;!this.J&&this.C<K.length;)if($n=L1(this,K),$n==Hd){Pt==4&&(this.s=4,Ht(14),g=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if($n==u0){this.s=4,Ht(15),Gi(this.i,this.l,K,"[Invalid Chunk]"),g=!1;break}else Gi(this.i,this.l,$n,null),Kd(this,$n);if(d0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||K.length!=0||this.h.h||(this.s=1,Ht(16),g=!1),this.o=this.o&&g,!g)Gi(this.i,this.l,K,"[Invalid Chunked Response]"),Zs(this),ma(this);else if(0<K.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Zd(Rt),Rt.M=!0,Ht(11))}}else Gi(this.i,this.l,K,null),Kd(this,K);Pt==4&&Zs(this),this.o&&!this.J&&(Pt==4?F0(this.j,this):(this.o=!1,Ic(this)))}else Z1(this.g),g==400&&0<K.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),Zs(this),ma(this)}}}catch{}finally{}};function d0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function L1(u,p){var g=u.C,S=p.indexOf(`
`,g);return S==-1?Hd:(g=Number(p.substring(g,S)),isNaN(g)?u0:(S+=1,S+g>p.length?Hd:(p=p.slice(S,S+g),u.C=S+g,p)))}Xr.prototype.cancel=function(){this.J=!0,Zs(this)};function Ic(u){u.S=Date.now()+u.I,f0(u,u.I)}function f0(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=fa(m(u.ba,u),p)}function qd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Xr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(O1(this.i,this.A),this.L!=2&&(da(),Ht(17)),Zs(this),this.s=2,ma(this)):f0(this,this.S-u)};function ma(u){u.j.G==0||u.J||F0(u.j,u)}function Zs(u){qd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Qr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Kd(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Gd(g.h,u))){if(!u.K&&Gd(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Mc(g),Dc(g);else break e;Jd(g),Ht(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=fa(m(g.Za,g),6e3));if(1>=g0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ti(g,11)}else if((u.K||g.g==u)&&Mc(g),!v(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let be=L[p];if(g.T=be[0],be=be[1],g.G==2)if(be[0]=="c"){g.K=be[1],g.ia=be[2];const Rt=be[3];Rt!=null&&(g.la=Rt,g.j.info("VER="+g.la));const Pt=be[4];Pt!=null&&(g.Aa=Pt,g.j.info("SVER="+g.Aa));const Xi=be[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(S=1.5*Xi,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const $n=u.g;if($n){const jc=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jc){var V=S.h;V.g||jc.indexOf("spdy")==-1&&jc.indexOf("quic")==-1&&jc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Qd(V,V.h),V.h=null))}if(S.D){const ef=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;ef&&(S.ya=ef,Ve(S.I,S.D,ef))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var K=u;if(S.qa=z0(S,S.J?S.ia:null,S.W),K.K){y0(S.h,K);var De=K,_t=S.L;_t&&(De.I=_t),De.B&&(qd(De),Ic(De)),S.g=K}else j0(S);0<g.i.length&&Oc(g)}else be[0]!="stop"&&be[0]!="close"||ti(g,7);else g.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?ti(g,7):Xd(g):be[0]!="noop"&&g.l&&g.l.ta(be),g.v=0)}}da(4)}catch{}}var j1=class{constructor(u,p){this.g=u,this.map=p}};function p0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function m0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function g0(u){return u.h?1:u.g?u.g.size:0}function Gd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Qd(u,p){u.g?u.g.add(p):u.h=p}function y0(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}p0.prototype.cancel=function(){if(this.i=_0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return E(u.i)}function V1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,S=0;S<g;S++)p.push(u[S]);return p}p=[],g=0;for(S in u)p[g++]=u[S];return p}function F1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const S in u)p[g++]=S;return p}}}function v0(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=F1(u),S=V1(u),L=S.length,V=0;V<L;V++)p.call(void 0,S[V],g&&g[V],u)}var w0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function U1(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),L=null;if(0<=S){var V=u[g].substring(0,S);L=u[g].substring(S+1)}else V=u[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ei(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ei){this.h=u.h,Sc(this,u.j),this.o=u.o,this.g=u.g,Ac(this,u.s),this.l=u.l;var p=u.i,g=new _a;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),x0(this,g),this.m=u.m}else u&&(p=String(u).match(w0))?(this.h=!1,Sc(this,p[1]||"",!0),this.o=ga(p[2]||""),this.g=ga(p[3]||"",!0),Ac(this,p[4]),this.l=ga(p[5]||"",!0),x0(this,p[6]||"",!0),this.m=ga(p[7]||"")):(this.h=!1,this.i=new _a(null,this.h))}ei.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ya(p,b0,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ya(p,b0,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ya(g,g.charAt(0)=="/"?$1:z1,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ya(g,W1)),u.join("")};function wr(u){return new ei(u)}function Sc(u,p,g){u.j=g?ga(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ac(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function x0(u,p,g){p instanceof _a?(u.i=p,q1(u.i,u.h)):(g||(p=ya(p,H1)),u.i=new _a(p,u.h))}function Ve(u,p,g){u.i.set(p,g)}function Cc(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ga(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ya(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,B1),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function B1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var b0=/[#\/\?@]/g,z1=/[#\?:]/g,$1=/[#\?]/g,H1=/[#\?@]/g,W1=/#/g;function _a(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Jr(u){u.g||(u.g=new Map,u.h=0,u.i&&U1(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=_a.prototype,t.add=function(u,p){Jr(this),this.i=null,u=Qi(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function E0(u,p){Jr(u),p=Qi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function T0(u,p){return Jr(u),p=Qi(u,p),u.g.has(p)}t.forEach=function(u,p){Jr(this),this.g.forEach(function(g,S){g.forEach(function(L){u.call(p,L,S,this)},this)},this)},t.na=function(){Jr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let S=0;S<p.length;S++){const L=u[S];for(let V=0;V<L.length;V++)g.push(p[S])}return g},t.V=function(u){Jr(this);let p=[];if(typeof u=="string")T0(this,u)&&(p=p.concat(this.g.get(Qi(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return Jr(this),this.i=null,u=Qi(this,u),T0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function k0(u,p,g){E0(u,p),0<g.length&&(u.i=null,u.g.set(Qi(u,p),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var S=p[g];const V=encodeURIComponent(String(S)),K=this.V(S);for(S=0;S<K.length;S++){var L=V;K[S]!==""&&(L+="="+encodeURIComponent(String(K[S]))),u.push(L)}}return this.i=u.join("&")};function Qi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function q1(u,p){p&&!u.j&&(Jr(u),u.i=null,u.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(E0(this,S),k0(this,L,g))},u)),u.j=p}function K1(u,p){const g=new pa;if(a.Image){const S=new Image;S.onload=y(Zr,g,"TestLoadImage: loaded",!0,p,S),S.onerror=y(Zr,g,"TestLoadImage: error",!1,p,S),S.onabort=y(Zr,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=y(Zr,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function G1(u,p){const g=new pa,S=new AbortController,L=setTimeout(()=>{S.abort(),Zr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(V=>{clearTimeout(L),V.ok?Zr(g,"TestPingServer: ok",!0,p):Zr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Zr(g,"TestPingServer: error",!1,p)})}function Zr(u,p,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function Q1(){this.g=new Xt}function Y1(u,p,g){const S=g||"";try{v0(u,function(L,V){let K=L;c(L)&&(K=Yr(L)),p.push(S+V+"="+encodeURIComponent(K))})}catch(L){throw p.push(S+"type="+encodeURIComponent("_badmap")),L}}function Rc(u){this.l=u.Ub||null,this.j=u.eb||!1}x(Rc,Ki),Rc.prototype.g=function(){return new Pc(this.l,this.j)},Rc.prototype.i=function(u){return function(){return u}}({});function Pc(u,p){ie.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Pc,ie),t=Pc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,wa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,va(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;I0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function I0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?va(this):wa(this),this.readyState==3&&I0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,va(this))},t.Qa=function(u){this.g&&(this.response=u,va(this))},t.ga=function(){this.g&&va(this)};function va(u){u.readyState=4,u.l=null,u.j=null,u.v=null,wa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function wa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function S0(u){let p="";return M(u,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function Yd(u,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=S0(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ve(u,p,g))}function Je(u){ie.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Je,ie);var X1=/^https?$/i,J1=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$d.g(),this.v=this.o?de(this.o):de($d),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){A0(this,V);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(J1,p,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,K]of g)this.g.setRequestHeader(V,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{P0(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){A0(this,V)}};function A0(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,C0(u),Nc(u)}function C0(u){u.A||(u.A=!0,Ie(u,"complete"),Ie(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ie(this,"complete"),Ie(this,"abort"),Nc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?R0(this):this.bb())},t.bb=function(){R0(this)};function R0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||xr(u)!=4||u.Z()!=2)){if(u.u&&xr(u)==4)Ct(u.Ea,0,u);else if(Ie(u,"readystatechange"),xr(u)==4){u.h=!1;try{const K=u.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=K===0){var L=String(u.D).match(w0)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!X1.test(L?L.toLowerCase():"")}g=S}if(g)Ie(u,"complete"),Ie(u,"success");else{u.m=6;try{var V=2<xr(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",C0(u)}}finally{Nc(u)}}}}function Nc(u,p){if(u.g){P0(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ie(u,"ready");try{g.onreadystatechange=S}catch{}}}function P0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),at(p)}};function N0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Z1(u){const p={};u=(u.g&&2<=xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(v(u[S]))continue;var g=P(u[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}k(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function D0(u){this.Aa=0,this.i=[],this.j=new pa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,u),this.cb=xa("retryDelaySeedMs",1e4,u),this.Wa=xa("forwardChannelMaxRetries",2,u),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new p0(u&&u.concurrentRequestLimit),this.Da=new Q1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=D0.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,S){Ht(0),this.W=u,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=z0(this,null,this.W),Oc(this)};function Xd(u){if(O0(u),u.G==3){var p=u.U++,g=wr(u.I);if(Ve(g,"SID",u.K),Ve(g,"RID",p),Ve(g,"TYPE","terminate"),ba(u,g),p=new Xr(u,u.j,p),p.L=2,p.v=Cc(wr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=$0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ic(p)}B0(u)}function Dc(u){u.g&&(Zd(u),u.g.cancel(),u.g=null)}function O0(u){Dc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Mc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Oc(u){if(!m0(u.h)&&!u.s){u.s=!0;var p=u.Ga;he||q(),B||(he(),B=!0),Q.add(p,u),u.B=0}}function eA(u,p){return g0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=fa(m(u.Ga,u,p),U0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Xr(this,this.j,u);let V=this.o;if(this.S&&(V?(V=w(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=L0(this,L,p),g=wr(this.I),Ve(g,"RID",u),Ve(g,"CVER",22),this.D&&Ve(g,"X-HTTP-Session-Id",this.D),ba(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(S0(V)))+"&"+p:this.m&&Yd(g,this.m,V)),Qd(this.h,L),this.Ua&&Ve(g,"TYPE","init"),this.P?(Ve(g,"$req",p),Ve(g,"SID","null"),L.T=!0,Wd(L,g,null)):Wd(L,g,p),this.G=2}}else this.G==3&&(u?M0(this,u):this.i.length==0||m0(this.h)||M0(this))};function M0(u,p){var g;p?g=p.l:g=u.U++;const S=wr(u.I);Ve(S,"SID",u.K),Ve(S,"RID",g),Ve(S,"AID",u.T),ba(u,S),u.m&&u.o&&Yd(S,u.m,u.o),g=new Xr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=L0(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Qd(u.h,g),Wd(g,S,p)}function ba(u,p){u.H&&M(u.H,function(g,S){Ve(p,S,g)}),u.l&&v0({},function(g,S){Ve(p,S,g)})}function L0(u,p,g){g=Math.min(u.i.length,g);var S=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const K=["count="+g];V==-1?0<g?(V=L[0].g,K.push("ofs="+V)):V=0:K.push("ofs="+V);let De=!0;for(let _t=0;_t<g;_t++){let be=L[_t].g;const Rt=L[_t].map;if(be-=V,0>be)V=Math.max(0,L[_t].g-100),De=!1;else try{Y1(Rt,K,"req"+be+"_")}catch{S&&S(Rt)}}if(De){S=K.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,S}function j0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;he||q(),B||(he(),B=!0),Q.add(p,u),u.v=0}}function Jd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=fa(m(u.Fa,u),U0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,V0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=fa(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Dc(this),V0(this))};function Zd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function V0(u){u.g=new Xr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=wr(u.qa);Ve(p,"RID","rpc"),Ve(p,"SID",u.K),Ve(p,"AID",u.T),Ve(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(p,"TO",u.ja),Ve(p,"TYPE","xmlhttp"),ba(u,p),u.m&&u.o&&Yd(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Cc(wr(p)),g.m=null,g.P=!0,h0(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Dc(this),Jd(this),Ht(19))};function Mc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function F0(u,p){var g=null;if(u.g==p){Mc(u),Zd(u),u.g=null;var S=2}else if(Gd(u.h,p))g=p.D,y0(u.h,p),S=1;else return;if(u.G!=0){if(p.o)if(S==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;S=Ec(),Ie(S,new a0(S,g)),Oc(u)}else j0(u);else if(L=p.s,L==3||L==0&&0<p.X||!(S==1&&eA(u,p)||S==2&&Jd(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),L){case 1:ti(u,5);break;case 4:ti(u,10);break;case 3:ti(u,6);break;default:ti(u,2)}}}function U0(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function ti(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),S=u.Xa;const L=!S;S=new ei(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sc(S,"https"),Cc(S),L?K1(S.toString(),g):G1(S.toString(),g)}else Ht(2);u.G=0,u.l&&u.l.sa(p),B0(u),O0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function B0(u){if(u.G=0,u.ka=[],u.l){const p=_0(u.h);(p.length!=0||u.i.length!=0)&&(T(u.ka,p),T(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function z0(u,p,g){var S=g instanceof ei?wr(g):new ei(g);if(S.g!="")p&&(S.g=p+"."+S.g),Ac(S,S.s);else{var L=a.location;S=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new ei(null);S&&Sc(V,S),p&&(V.g=p),L&&Ac(V,L),g&&(V.l=g),S=V}return g=u.D,p=u.ya,g&&p&&Ve(S,g,p),Ve(S,"VER",u.la),ba(u,S),S}function $0(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Je(new Rc({eb:g})):new Je(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function H0(){}t=H0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(u,p){return new fn(u,p)};function fn(u,p){ie.call(this),this.g=new D0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!v(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Yi(this)}x(fn,ie),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Xd(this.g)},fn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Yr(u),u=g);p.i.push(new j1(p.Ya++,u)),p.G==3&&Oc(p)},fn.prototype.N=function(){this.g.l=null,delete this.j,Xd(this.g),delete this.g,fn.aa.N.call(this)};function W0(u){Bd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}x(W0,Bd);function q0(){zd.call(this),this.status=1}x(q0,zd);function Yi(u){this.g=u}x(Yi,H0),Yi.prototype.ua=function(){Ie(this.g,"a")},Yi.prototype.ta=function(u){Ie(this.g,new W0(u))},Yi.prototype.sa=function(u){Ie(this.g,new q0)},Yi.prototype.ra=function(){Ie(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Xk=function(){return new Lc},Yk=function(){return Ec()},Qk=Js,am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tc.NO_ERROR=0,Tc.TIMEOUT=8,Tc.HTTP_ERROR=6,Fu=Tc,l0.COMPLETE="complete",Gk=l0,lt.EventType=rt,rt.OPEN="a",rt.CLOSE="b",rt.ERROR="c",rt.MESSAGE="d",ie.prototype.listen=ie.prototype.K,Wa=lt,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Kk=Je}).apply(typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new md("@firebase/firestore");function Pa(){return Oi.logLevel}function Z(t,...e){if(Oi.logLevel<=ye.DEBUG){const n=e.map(ty);Oi.debug(`Firestore (${ra}): ${t}`,...n)}}function zr(t,...e){if(Oi.logLevel<=ye.ERROR){const n=e.map(ty);Oi.error(`Firestore (${ra}): ${t}`,...n)}}function Fo(t,...e){if(Oi.logLevel<=ye.WARN){const n=e.map(ty);Oi.warn(`Firestore (${ra}): ${t}`,...n)}}function ty(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+t;throw zr(e),new Error(e)}function Re(t,e){t||le()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Un{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class _L{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vL{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new Jk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Mt(e)}}class wL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new bL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=TL(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Uo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new et(0,0))}static max(){return new ce(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ql.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ql?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends ql{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const kL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends ql{construct(e,n,r){return new Et(e,n,r)}static isValidIdentifier(e){return kL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Be.fromString(e))}static fromName(e){return new ne(Be.fromString(e).popFirst(5))}static empty(){return new ne(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Be(e.slice()))}}function IL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new js(s,ne.empty(),e)}function SL(t){return new js(t.readTime,t.key,-1)}class js{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new js(ce.min(),ne.empty(),-1)}static max(){return new js(ce.max(),ne.empty(),-1)}}function AL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==CL)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function PL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ny.oe=-1;function Ed(t){return t==null}function Ch(t){return t===0&&1/t==-1/0}function NL(t){return typeof t=="number"&&Number.isInteger(t)&&!Ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ru(this.root,e,this.comparator,!0)}}class ru{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xt.RED,this.left=s??xt.EMPTY,this.right=i??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,s,i){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new It(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new tI("Invalid base64 string: "+i):i}}(e);return new At(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const DL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(t){if(Re(!!t),typeof t=="string"){let e=0;const n=DL.exec(t);if(Re(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mi(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sy(t){const e=t.mapValue.fields.__previous_value__;return ry(e)?sy(e):e}function Kl(t){const e=Vs(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Gl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su={mapValue:{}};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ry(t)?4:LL(t)?9007199254740991:ML(t)?10:11:le()}function vr(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Vs(s.timestampValue),a=Vs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Mi(s.bytesValue).isEqual(Mi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return st(s.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return st(s.integerValue)===st(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=st(s.doubleValue),a=st(i.doubleValue);return o===a?Ch(o)===Ch(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Xv(o)!==Xv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function Ql(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function Bo(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=st(i.integerValue||i.doubleValue),l=st(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Zv(t.timestampValue,e.timestampValue);case 4:return Zv(Kl(t),Kl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Mi(i),l=Mi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ee(a[c],l[c]);if(h!==0)return h}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(st(i.latitude),st(o.latitude));return a!==0?a:Ee(st(i.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ew(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const d=i.fields||{},m=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,E=Ee(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:ew(y,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===su.mapValue&&o===su.mapValue)return 0;if(i===su.mapValue)return 1;if(o===su.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=Ee(l[d],h[d]);if(m!==0)return m;const y=Bo(a[l[d]],c[h[d]]);if(y!==0)return y}return Ee(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function Zv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Vs(t),r=Vs(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function ew(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bo(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function zo(t){return lm(t)}function lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=lm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${lm(n.fields[o])}`;return s+"}"}(t.mapValue):le()}function tw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cm(t){return!!t&&"integerValue"in t}function iy(t){return!!t&&"arrayValue"in t}function nw(t){return!!t&&"nullValue"in t}function rw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function ML(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=Et.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=dl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Uu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){sa(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Pn(dl(this.value))}}function nI(t){const e=[];return sa(t.fields,(n,r)=>{const s=new Et([n]);if(Uu(r)){const i=nI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,ce.min(),ce.min(),ce.min(),Pn.empty(),0)}static newFoundDocument(e,n,r,s){return new jt(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new jt(e,2,n,ce.min(),ce.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,ce.min(),ce.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function sw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=Bo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function jL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{}class dt extends rI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FL(e,n,r):n==="array-contains"?new zL(e,r):n==="in"?new $L(e,r):n==="not-in"?new HL(e,r):n==="array-contains-any"?new WL(e,r):new dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UL(e,r):new BL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bo(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends rI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nr(e,n)}matches(e){return sI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sI(t){return t.op==="and"}function iI(t){return VL(t)&&sI(t)}function VL(t){for(const e of t.filters)if(e instanceof nr)return!1;return!0}function um(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+zo(t.value);if(iI(t))return t.filters.map(e=>um(e)).join(",");{const e=t.filters.map(n=>um(n)).join(",");return`${t.op}(${e})`}}function oI(t,e){return t instanceof dt?function(r,s){return s instanceof dt&&r.op===s.op&&r.field.isEqual(s.field)&&vr(r.value,s.value)}(t,e):t instanceof nr?function(r,s){return s instanceof nr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&oI(o,s.filters[a]),!0):!1}(t,e):void le()}function aI(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${zo(n.value)}`}(t):t instanceof nr?function(n){return n.op.toString()+" {"+n.getFilters().map(aI).join(" ,")+"}"}(t):"Filter"}class FL extends dt{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class UL extends dt{constructor(e,n){super(e,"in",n),this.keys=lI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BL extends dt{constructor(e,n){super(e,"not-in",n),this.keys=lI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class zL extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return iy(n)&&Ql(n.arrayValue,this.value)}}class $L extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class HL extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ql(this.value.arrayValue,n)}}class WL extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!iy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ql(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function ow(t,e=null,n=[],r=[],s=null,i=null,o=null){return new qL(t,e,n,r,s,i,o)}function oy(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>um(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ed(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zo(r)).join(",")),e.ue=n}return e.ue}function ay(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iw(t.startAt,e.startAt)&&iw(t.endAt,e.endAt)}function hm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function KL(t,e,n,r,s,i,o,a){return new ia(t,e,n,r,s,i,o,a)}function ly(t){return new ia(t)}function aw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cI(t){return t.collectionGroup!==null}function fl(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(Et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Yl(i,r))}),n.has(Et.keyField().canonicalString())||e.ce.push(new Yl(Et.keyField(),r))}return e.ce}function mr(t){const e=ue(t);return e.le||(e.le=GL(e,fl(t))),e.le}function GL(t,e){if(t.limitType==="F")return ow(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yl(s.field,i)});const n=t.endAt?new Rh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rh(t.startAt.position,t.startAt.inclusive):null;return ow(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dm(t,e){const n=t.filters.concat([e]);return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ph(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Td(t,e){return ay(mr(t),mr(e))&&t.limitType===e.limitType}function uI(t){return`${oy(mr(t))}|lt:${t.limitType}`}function to(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>aI(s)).join(", ")}]`),Ed(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zo(s)).join(",")),`Target(${r})`}(mr(t))}; limitType=${t.limitType})`}function kd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=sw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,fl(r),s)||r.endAt&&!function(o,a,l){const c=sw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,fl(r),s))}(t,e)}function QL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hI(t){return(e,n)=>{let r=!1;for(const s of fl(t)){const i=YL(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function YL(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Bo(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return eI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=new Ye(ne.comparator);function $r(){return XL}const dI=new Ye(ne.comparator);function qa(...t){let e=dI;for(const n of t)e=e.insert(n.key,n);return e}function fI(t){let e=dI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gi(){return pl()}function pI(){return pl()}function pl(){return new oa(t=>t.toString(),(t,e)=>t.isEqual(e))}const JL=new Ye(ne.comparator),ZL=new It(ne.comparator);function ge(...t){let e=ZL;for(const n of t)e=e.add(n);return e}const ej=new It(Ee);function tj(){return ej}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function mI(t){return{integerValue:""+t}}function nj(t,e){return NL(e)?mI(e):cy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this._=void 0}}function rj(t,e,n){return t instanceof Xl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ry(i)&&(i=sy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Jl?yI(t,e):t instanceof Zl?_I(t,e):function(s,i){const o=gI(s,i),a=lw(o)+lw(s.Pe);return cm(o)&&cm(s.Pe)?mI(a):cy(s.serializer,a)}(t,e)}function sj(t,e,n){return t instanceof Jl?yI(t,e):t instanceof Zl?_I(t,e):n}function gI(t,e){return t instanceof Nh?function(r){return cm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xl extends Id{}class Jl extends Id{constructor(e){super(),this.elements=e}}function yI(t,e){const n=vI(e);for(const r of t.elements)n.some(s=>vr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zl extends Id{constructor(e){super(),this.elements=e}}function _I(t,e){let n=vI(e);for(const r of t.elements)n=n.filter(s=>!vr(s,r));return{arrayValue:{values:n}}}class Nh extends Id{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function lw(t){return st(t.integerValue||t.doubleValue)}function vI(t){return iy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n){this.field=e,this.transform=n}}function oj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Jl&&s instanceof Jl||r instanceof Zl&&s instanceof Zl?Uo(r.elements,s.elements,vr):r instanceof Nh&&s instanceof Nh?vr(r.Pe,s.Pe):r instanceof Xl&&s instanceof Xl}(t.transform,e.transform)}class aj{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sd{}function wI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bI(t.key,gr.none()):new yc(t.key,t.data,gr.none());{const n=t.data,r=Pn.empty();let s=new It(Et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new $i(t.key,r,new Qn(s.toArray()),gr.none())}}function lj(t,e,n){t instanceof yc?function(s,i,o){const a=s.value.clone(),l=uw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(s,i,o){if(!Bu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=uw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(xI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ml(t,e,n,r){return t instanceof yc?function(i,o,a,l){if(!Bu(i.precondition,o))return a;const c=i.value.clone(),h=hw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof $i?function(i,o,a,l){if(!Bu(i.precondition,o))return a;const c=hw(i.fieldTransforms,l,o),h=o.data;return h.setAll(xI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Bu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function cj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=gI(r.transform,s||null);i!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,i))}return n||null}function cw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Uo(r,s,(i,o)=>oj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yc extends Sd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $i extends Sd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function uw(t,e,n){const r=new Map;Re(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,sj(o,a,n[s]))}return r}function hw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,rj(i,o,e))}return r}class bI extends Sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uj extends Sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&lj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ml(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ml(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=wI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,r)=>cw(n,r))&&Uo(this.baseMutations,e.baseMutations,(n,r)=>cw(n,r))}}class uy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length);let s=function(){return JL}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new uy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,_e;function pj(t){switch(t){default:return le();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function EI(t){if(t===void 0)return zr("GRPC error has no .code"),F.UNKNOWN;switch(t){case ct.OK:return F.OK;case ct.CANCELLED:return F.CANCELLED;case ct.UNKNOWN:return F.UNKNOWN;case ct.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ct.INTERNAL:return F.INTERNAL;case ct.UNAVAILABLE:return F.UNAVAILABLE;case ct.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ct.NOT_FOUND:return F.NOT_FOUND;case ct.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ct.ABORTED:return F.ABORTED;case ct.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ct.DATA_LOSS:return F.DATA_LOSS;default:return le()}}(_e=ct||(ct={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new bi([4294967295,4294967295],0);function dw(t){const e=mj().encode(t),n=new qk;return n.update(e),new Uint8Array(n.digest())}function fw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bi([n,r],0),new bi([s,i],0)]}class hy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ka(`Invalid padding: ${n}`);if(r<0)throw new Ka(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=bi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(bi.fromNumber(r)));return s.compare(gj)===1&&(s=new bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=dw(e),[r,s]=fw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hy(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=dw(e),[r,s]=fw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ad(ce.min(),s,new Ye(Ee),$r(),ge())}}class _c{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _c(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class TI{constructor(e,n){this.targetId=e,this.me=n}}class kI{constructor(e,n,r=At.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class pw{constructor(){this.fe=0,this.ge=gw(),this.pe=At.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le()}}),new _c(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=gw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yj{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=mw(),this.Qe=new Ye(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(hm(i))if(r===0){const o=new ne(i.path);this.Ue(n,o,jt.newNoDocument(o,ce.min()))}else Re(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Mi(r).toUint8Array()}catch(l){if(l instanceof tI)return Fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hy(o,s,i)}catch(l){return Fo(l instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&hm(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,jt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ge();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ad(e,n,this.Qe,this.ke,r);return this.ke=$r(),this.qe=mw(),this.Qe=new Ye(Ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new pw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function mw(){return new Ye(ne.comparator)}function gw(){return new Ye(ne.comparator)}const _j={asc:"ASCENDING",desc:"DESCENDING"},vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wj={and:"AND",or:"OR"};class xj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fm(t,e){return t.useProto3Json||Ed(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function II(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bj(t,e){return Dh(t,e.toTimestamp())}function yr(t){return Re(!!t),ce.fromTimestamp(function(n){const r=Vs(n);return new et(r.seconds,r.nanos)}(t))}function dy(t,e){return pm(t,e).canonicalString()}function pm(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SI(t){const e=Be.fromString(t);return Re(NI(e)),e}function mm(t,e){return dy(t.databaseId,e.path)}function Uf(t,e){const n=SI(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(CI(n))}function AI(t,e){return dy(t.databaseId,e)}function Ej(t){const e=SI(t);return e.length===4?Be.emptyPath():CI(e)}function gm(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CI(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yw(t,e,n){return{name:mm(t,e),fields:n.value.mapValue.fields}}function Tj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(Re(h===void 0||typeof h=="string"),At.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array),At.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:EI(c.code);return new Y(h,c.message||"")}(o);n=new kI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Uf(t,r.document.name),i=yr(r.document.updateTime),o=r.document.createTime?yr(r.document.createTime):ce.min(),a=new Pn({mapValue:{fields:r.document.fields}}),l=jt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new zu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Uf(t,r.document),i=r.readTime?yr(r.readTime):ce.min(),o=jt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new zu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Uf(t,r.document),i=r.removedTargetIds||[];n=new zu([],i,s,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new fj(s,i),a=r.targetId;n=new TI(a,o)}}return n}function kj(t,e){let n;if(e instanceof yc)n={update:yw(t,e.key,e.value)};else if(e instanceof bI)n={delete:mm(t,e.key)};else if(e instanceof $i)n={update:yw(t,e.key,e.data),updateMask:Oj(e.fieldMask)};else{if(!(e instanceof uj))return le();n={verify:mm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le()}(t,e.precondition)),n}function Ij(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?yr(s.updateTime):yr(i);return o.isEqual(ce.min())&&(o=yr(i)),new aj(o,s.transformResults||[])}(n,e))):[]}function Sj(t,e){return{documents:[AI(t,e.path)]}}function Aj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AI(t,s);const i=function(c){if(c.length!==0)return PI(nr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:no(m.field),direction:Pj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function Cj(t){let e=Ej(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=RI(d);return m instanceof nr&&iI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(x){return new Yl(ro(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,Ed(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,y=d.values||[];return new Rh(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,y=d.values||[];return new Rh(y,m)}(n.endAt)),KL(e,s,o,i,a,"F",l,c)}function Rj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ro(n.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ro(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ro(n.unaryFilter.field);return dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ro(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return dt.create(ro(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nr.create(n.compositeFilter.filters.map(r=>RI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function Pj(t){return _j[t]}function Nj(t){return vj[t]}function Dj(t){return wj[t]}function no(t){return{fieldPath:t.canonicalString()}}function ro(t){return Et.fromServerFormat(t.fieldPath)}function PI(t){return t instanceof dt?function(n){if(n.op==="=="){if(rw(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(nw(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rw(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(nw(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:Nj(n.op),value:n.value}}}(t):t instanceof nr?function(n){const r=n.getFilters().map(s=>PI(s));return r.length===1?r[0]:{compositeFilter:{op:Dj(n.op),filters:r}}}(t):le()}function Oj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=At.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.ct=e}}function Lj(t){const e=Cj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.un=new Vj}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(js.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(js.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Vj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $o(0)}static kn(){return new $o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.changes=new oa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ml(r.mutation,s,Qn.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=gi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=$r();const o=pl(),a=function(){return pl()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof $i)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ml(h.mutation,c,h.mutation.getFieldMask(),et.now())):o.set(c.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new Uj(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pl();let s=new Ye((o,a)=>o-a),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Qn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||ge()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=pI();h.forEach(m=>{if(!i.has(m)){const y=wI(n.get(m),r.get(m));y!==null&&d.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(gi());let a=-1,l=i;return o.next(c=>U.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ge())).next(h=>({batchId:a,changes:fI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=qa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qa();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(d,m){return new ia(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,jt.newInvalidDocument(h)))});let a=qa();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&ml(h.mutation,c,Qn.empty(),et.now()),kd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:yr(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Lj(s.bundledQuery),readTime:yr(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.overlays=new Ye(ne.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gi();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=gi(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ye((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=gi(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=gi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dj(n,r));let i=this.Ir.get(n);i===void 0&&(i=ge(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.Tr=new It(mt.Er),this.dr=new It(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Be([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Be([])),r=new mt(n,e),s=new mt(n,e+1);let i=ge();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(mt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hj(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ee);return n.forEach(s=>{const i=new mt(s,0),o=new mt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new mt(new ne(i),0);let a=new It(Ee);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.Mr=e,this.docs=function(){return new Ye(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():jt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$r();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||AL(SL(h),r)<=0||(s.has(h.key)||kd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){le()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Kj(this)}getSize(e){return U.resolve(this.size)}}class Kj extends Fj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.persistence=e,this.Nr=new oa(n=>oy(n),ay),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fy,this.targetCount=0,this.kr=$o.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ny(0),this.Kr=!1,this.Kr=!0,this.$r=new Hj,this.referenceDelegate=e(this),this.Ur=new Gj(this),this.indexManager=new jj,this.remoteDocumentCache=function(s){return new qj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Mj(n),this.Gr=new zj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $j,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Wj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new Yj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Yj extends RL{constructor(e){super(),this.currentSequenceNumber=e}}class py{constructor(e){this.persistence=e,this.Jr=new fy,this.Yr=null}static Zr(e){return new py(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=ne.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new my(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return YP()?8:PL(Ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Xj;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Pa()<=ye.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Pa()<=ye.DEBUG&&Z("QueryEngine","Query:",to(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Pa()<=ye.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):U.resolve())}Yi(e,n){if(aw(n))return U.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ph(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Ph(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return aw(n)||s.isEqual(ce.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Pa()<=ye.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),to(n)),this.rs(e,o,n,IL(s,-1)).next(a=>a))})}ts(e,n){let r=new It(hI(e));return n.forEach((s,i)=>{kd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Pa()<=ye.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",to(n)),this.Ji.getDocumentsMatchingQuery(e,n,js.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ye(Ee),this._s=new oa(i=>oy(i),ay),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eV(t,e,n,r){return new Zj(t,e,n,r)}async function DI(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ge();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function tV(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,m=d.keys();let y=U.resolve();return m.forEach(x=>{y=y.next(()=>h.getEntry(l,x)).next(E=>{const T=c.docVersions.get(x);Re(T!==null),E.version.compareTo(T)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function OI(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nV(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,d)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(At.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(d,y),function(E,T,_){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=$r(),c=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(rV(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function rV(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=$r();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function sV(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iV(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ym(t,e,n){const r=ue(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!gc(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function _w(t,e,n){const r=ue(t);let s=ce.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ue(l),m=d._s.get(h);return m!==void 0?U.resolve(d.os.get(m)):d.Ur.getTargetData(c,h)}(r,o,mr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:ge())).next(a=>(oV(r,QL(e),a),{documents:a,Ts:i})))}function oV(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class vw{constructor(){this.activeTargetIds=tj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aV{constructor(){this.so=new vw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function Bf(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class hV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Bf(),l=this.xo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Fo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=cV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Bf();return new Promise((o,a)=>{const l=new Kk;l.setWithCredentials(!0),l.listenOnce(Gk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fu.NO_ERROR:const h=l.getResponseJson();Z(Ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Fu.TIMEOUT:Z(Ot,`RPC '${e}' ${i} timed out`),a(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const d=l.getStatus();if(Z(Ot,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const x=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(y.status);a(new Y(x,y.message))}else a(new Y(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(F.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Z(Ot,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Z(Ot,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Bf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xk(),a=Yk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");Z(Ot,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let m=!1,y=!1;const x=new uV({Io:T=>{y?Z(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(Z(Ot,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),Z(Ot,`RPC '${e}' stream ${s} sending:`,T),d.send(T))},To:()=>d.close()}),E=(T,_,v)=>{T.listen(_,b=>{try{v(b)}catch(R){setTimeout(()=>{throw R},0)}})};return E(d,Wa.EventType.OPEN,()=>{y||(Z(Ot,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),E(d,Wa.EventType.CLOSE,()=>{y||(y=!0,Z(Ot,`RPC '${e}' stream ${s} transport closed`),x.So())}),E(d,Wa.EventType.ERROR,T=>{y||(y=!0,Fo(Ot,`RPC '${e}' stream ${s} transport errored:`,T),x.So(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),E(d,Wa.EventType.MESSAGE,T=>{var _;if(!y){const v=T.data[0];Re(!!v);const b=v,R=b.error||((_=b[0])===null||_===void 0?void 0:_.error);if(R){Z(Ot,`RPC '${e}' stream ${s} received error:`,R);const N=R.status;let M=function(A){const C=ct[A];if(C!==void 0)return EI(C)}(N),k=R.message;M===void 0&&(M=F.INTERNAL,k="Unknown error status: "+N+" with message "+R.message),y=!0,x.So(new Y(M,k)),d.close()}else Z(Ot,`RPC '${e}' stream ${s} received:`,v),x.bo(v)}}),E(a,Qk.STAT_EVENT,T=>{T.stat===am.PROXY?Z(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===am.NOPROXY&&Z(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){return new xj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new MI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(zr(n.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dV extends LI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Tj(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?yr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=gm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=hm(l)?{documents:Sj(i,l)}:{query:Aj(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=II(i,o.resumeToken);const c=fm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Dh(i,o.snapshotVersion.toTimestamp());const c=fm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Rj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.a_(n)}}class fV extends LI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Ij(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,pm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,pm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zr(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Hi(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await vc(c),c.q_.set("Unknown"),c.L_.delete(4),await Rd(c)}(this))})}),this.q_=new mV(r,s)}}async function Rd(t){if(Hi(t))for(const e of t.B_)await e(!0)}async function vc(t){for(const e of t.B_)await e(!1)}function jI(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vy(n)?_y(n):aa(n).r_()&&yy(n,e))}function gy(t,e){const n=ue(t),r=aa(n);n.N_.delete(e),r.r_()&&VI(n,e),n.N_.size===0&&(r.r_()?r.o_():Hi(n)&&n.q_.set("Unknown"))}function yy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}aa(t).A_(e)}function VI(t,e){t.Q_.xe(e),aa(t).R_(e)}function _y(t){t.Q_=new yj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),aa(t).start(),t.q_.v_()}function vy(t){return Hi(t)&&!aa(t).n_()&&t.N_.size>0}function Hi(t){return ue(t).L_.size===0}function FI(t){t.Q_=void 0}async function yV(t){t.q_.set("Online")}async function _V(t){t.N_.forEach((e,n)=>{yy(t,e)})}async function vV(t,e){FI(t),vy(t)?(t.q_.M_(e),_y(t)):t.q_.set("Unknown")}async function wV(t,e,n){if(t.q_.set("Online"),e instanceof kI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Oh(t,r)}else if(e instanceof zu?t.Q_.Ke(e):e instanceof TI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await OI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(At.EMPTY_BYTE_STRING,h.snapshotVersion)),VI(i,l);const d=new ys(h.target,l,c,h.sequenceNumber);yy(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Oh(t,r)}}async function Oh(t,e,n){if(!gc(e))throw e;t.L_.add(1),await vc(t),t.q_.set("Offline"),n||(n=()=>OI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Rd(t)})}function UI(t,e){return e().catch(n=>Oh(t,n,e))}async function Pd(t){const e=ue(t),n=Fs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xV(e);)try{const s=await sV(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,bV(e,s)}catch(s){await Oh(e,s)}BI(e)&&zI(e)}function xV(t){return Hi(t)&&t.O_.length<10}function bV(t,e){t.O_.push(e);const n=Fs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function BI(t){return Hi(t)&&!Fs(t).n_()&&t.O_.length>0}function zI(t){Fs(t).start()}async function EV(t){Fs(t).p_()}async function TV(t){const e=Fs(t);for(const n of t.O_)e.m_(n.mutations)}async function kV(t,e,n){const r=t.O_.shift(),s=uy.from(r,e,n);await UI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Pd(t)}async function IV(t,e){e&&Fs(t).V_&&await async function(r,s){if(function(o){return pj(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Fs(r).s_(),await UI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Pd(r)}}(t,e),BI(t)&&zI(t)}async function xw(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=Hi(n);n.L_.add(3),await vc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Rd(n)}async function SV(t,e){const n=ue(t);e?(n.L_.delete(2),await Rd(n)):e||(n.L_.add(2),await vc(n),n.q_.set("Unknown"))}function aa(t){return t.K_||(t.K_=function(n,r,s){const i=ue(n);return i.w_(),new dV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:yV.bind(null,t),Ro:_V.bind(null,t),mo:vV.bind(null,t),d_:wV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vy(t)?_y(t):t.q_.set("Unknown")):(await t.K_.stop(),FI(t))})),t.K_}function Fs(t){return t.U_||(t.U_=function(n,r,s){const i=ue(n);return i.w_(),new fV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EV.bind(null,t),mo:IV.bind(null,t),f_:TV.bind(null,t),g_:kV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pd(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new wy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xy(t,e){if(zr("AsyncQueue",`${e}: ${t}`),gc(t))return new Y(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=qa(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.W_=new Ye(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ho{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ho(e,n,Io.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class CV{constructor(){this.queries=Ew(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),i=s.queries;s.queries=Ew(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Y(F.ABORTED,"Firestore shutting down"))}}function Ew(){return new oa(t=>uI(t),Td)}async function $I(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new AV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=xy(o,`Initialization of query '${to(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&by(n)}async function HI(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RV(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&by(n)}function PV(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function by(t){t.Y_.forEach(e=>{e.next()})}var _m,Tw;(Tw=_m||(_m={})).ea="default",Tw.Cache="cache";class WI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.key=e}}class KI{constructor(e){this.key=e}}class NV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=hI(e),this.Ra=new Io(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new bw,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),y=kd(this.query,d)?d:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;m&&y?m.data.isEqual(y.data)?x!==E&&(r.track({type:3,doc:y}),T=!0):this.ga(m,y)||(r.track({type:2,doc:y}),T=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),T=!0):m&&!y&&(r.track({type:1,doc:m}),T=!0,(l||c)&&(a=!0)),T&&(y?(o=o.add(y),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,x){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return E(y)-E(x)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ho(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new KI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new qI(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ho.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OV{constructor(e){this.key=e,this.va=!1}}class MV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new oa(a=>uI(a),Td),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(ne.comparator),this.Na=new Map,this.La=new fy,this.Ba={},this.ka=new Map,this.qa=$o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LV(t,e,n=!0){const r=ZI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await GI(r,e,n,!0),s}async function jV(t,e){const n=ZI(t);await GI(n,e,!0,!1)}async function GI(t,e,n,r){const s=await iV(t.localStore,mr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await VV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&jI(t.remoteStore,s),a}async function VV(t,e,n,r,s){t.Ka=(d,m,y)=>async function(E,T,_,v){let b=T.view.ma(_);b.ns&&(b=await _w(E.localStore,T.query,!1).then(({documents:k})=>T.view.ma(k,b)));const R=v&&v.targetChanges.get(T.targetId),N=v&&v.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(b,E.isPrimaryClient,R,N);return Iw(E,T.targetId,M.wa),M.snapshot}(t,d,m,y);const i=await _w(t.localStore,e,!0),o=new NV(e,i.Ts),a=o.ma(i.documents),l=_c.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Iw(t,n,c.wa);const h=new DV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function FV(t,e,n){const r=ue(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Td(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ym(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gy(r.remoteStore,s.targetId),vm(r,s.targetId)}).catch(mc)):(vm(r,s.targetId),await ym(r.localStore,s.targetId,!0))}async function UV(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gy(n.remoteStore,r.targetId))}async function BV(t,e,n){const r=GV(t);try{const s=await function(o,a){const l=ue(o),c=et.now(),h=a.reduce((y,x)=>y.add(x.key),ge());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=$r(),E=ge();return l.cs.getEntries(y,h).next(T=>{x=T,x.forEach((_,v)=>{v.isValidDocument()||(E=E.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(T=>{d=T;const _=[];for(const v of a){const b=cj(v,d.get(v.key).overlayedDocument);b!=null&&_.push(new $i(v.key,b,nI(b.value.mapValue),gr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,_,a)}).next(T=>{m=T;const _=T.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(y,T.batchId,_)})}).then(()=>({batchId:m.batchId,changes:fI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ye(Ee)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await wc(r,s.changes),await Pd(r.remoteStore)}catch(s){const i=xy(s,"Failed to persist write");n.reject(i)}}async function QI(t,e){const n=ue(t);try{const r=await nV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Re(o.va):s.removedDocuments.size>0&&(Re(o.va),o.va=!1))}),await wc(n,r,e)}catch(r){await mc(r)}}function kw(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const m of d.j_)m.Z_(a)&&(c=!0)}),c&&by(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zV(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ye(ne.comparator);o=o.insert(i,jt.newNoDocument(i,ce.min()));const a=ge().add(i),l=new Ad(ce.min(),new Map,new Ye(Ee),o,a);await QI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ey(r)}else await ym(r.localStore,e,!1).then(()=>vm(r,e,n)).catch(mc)}async function $V(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await tV(n.localStore,e);XI(n,r,null),YI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wc(n,s)}catch(s){await mc(s)}}async function HV(t,e,n){const r=ue(t);try{const s=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Re(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);XI(r,e,n),YI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wc(r,s)}catch(s){await mc(s)}}function YI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function XI(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function vm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||JI(t,r)})}function JI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ey(t))}function Iw(t,e,n){for(const r of n)r instanceof qI?(t.La.addReference(r.key,e),WV(t,r)):r instanceof KI?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||JI(t,r.key)):le()}function WV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ey(t))}function Ey(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new OV(n)),t.Oa=t.Oa.insert(n,r),jI(t.remoteStore,new ys(mr(ly(n.path)),r,"TargetPurposeLimboResolution",ny.oe))}}async function wc(t,e,n){const r=ue(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=my.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=ue(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,m=>U.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(d,m.targetId,y)).next(()=>U.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(d,m.targetId,y)))))}catch(d){if(!gc(d))throw d;Z("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const y=h.os.get(m),x=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(m,E)}}}(r.localStore,i))}async function qV(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await DI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wc(n,r.hs)}}function KV(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let s=ge();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function ZI(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zV.bind(null,e),e.Ca.d_=RV.bind(null,e.eventManager),e.Ca.$a=PV.bind(null,e.eventManager),e}function GV(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$V.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HV.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eV(this.persistence,new Jj,e.initialUser,this.serializer)}Ga(e){return new Qj(py.Zr,this.serializer)}Wa(e){return new aV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qV.bind(null,this.syncEngine),await SV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CV}()}createDatastore(e){const n=Cd(e.databaseInfo.databaseId),r=function(i){return new hV(i)}(e.databaseInfo);return function(i,o,a,l){return new pV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new gV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>kw(this.syncEngine,n,0),function(){return ww.D()?new ww:new lV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new MV(s,i,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ue(s);Z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await vc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=Zk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $f(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await DI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YV(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>xw(e.remoteStore,s)),t._onlineComponents=e}async function YV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await $f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await $f(t,new Mh)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await $f(t,new Mh);return t._offlineComponents}async function tS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Sw(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Sw(t,new wm))),t._onlineComponents}function XV(t){return tS(t).then(e=>e.syncEngine)}async function nS(t){const e=await tS(t),n=e.eventManager;return n.onListen=LV.bind(null,e.syncEngine),n.onUnlisten=FV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UV.bind(null,e.syncEngine),n}function JV(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new eS({next:m=>{h.Za(),o.enqueueAndForget(()=>HI(i,d));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new WI(ly(a.path),h,{includeMetadataChanges:!0,_a:!0});return $I(i,d)}(await nS(t),t.asyncQueue,e,n,r)),r.promise}function ZV(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new eS({next:m=>{h.Za(),o.enqueueAndForget(()=>HI(i,d)),m.fromCache&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new WI(a,h,{includeMetadataChanges:!0,_a:!0});return $I(i,d)}(await nS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e,n){if(!n)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eF(t,e,n,r){if(e===!0&&r===!0)throw new Y(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cw(t){if(!ne.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rw(t){if(ne.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function Us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nd(t);throw new Y(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yL;switch(r.type){case"firstParty":return new xL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Aw.get(n);r&&(Z("ComponentProvider","Removing Datastore"),Aw.delete(n),r.terminate())}(this),Promise.resolve()}}function tF(t,e,n,r={}){var s;const i=(t=Us(t,Dd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Mt.MOCK_USER;else{a=PT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mt(c)}t._authCredentials=new _L(new Jk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Ps extends Ys{constructor(e,n,r){super(e,n,ly(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new ne(e))}withConverter(e){return new Ps(this.firestore,e,this._path)}}function gl(t,e,...n){if(t=Qe(t),sS("collection","path",e),t instanceof Dd){const r=Be.fromString(e,...n);return Rw(r),new Ps(t,null,r)}{if(!(t instanceof un||t instanceof Ps))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Rw(r),new Ps(t.firestore,null,r)}}function Lh(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=Zk.newId()),sS("doc","path",e),t instanceof Dd){const r=Be.fromString(e,...n);return Cw(r),new un(t,null,new ne(r))}{if(!(t instanceof un||t instanceof Ps))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Cw(r),new un(t.firestore,t instanceof Ps?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new MI(this,"async_queue_retry"),this.Vu=()=>{const r=zf();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gc(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wy.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class xc extends Dd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Nw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nw(e),this._firestoreClient=void 0,await e}}}function nF(t,e){const n=typeof t=="object"?t:gd(),r=typeof t=="string"?t:"(default)",s=Gs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=AT("firestore");i&&tF(s,...i)}return s}function Ty(t){if(t._terminated)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rF(t),t._firestoreClient}function rF(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new OL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new QV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(At.fromBase64String(e))}catch(n){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wo(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=/^__.*__$/;class iF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new yc(e,this.data,n,this.fieldTransforms)}}function iS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Cy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(iS(this.Cu)&&sF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class oF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cd(e)}Qu(e,n,r,s=!1){return new Cy({Cu:e,methodName:n,qu:r,path:Et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ry(t){const e=t._freezeSettings(),n=Cd(t._databaseId);return new oF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oS(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);cS("Data must be an object, but it was:",o,r);const a=aS(r,o);let l,c;if(i.merge)l=new Qn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=lF(e,d,n);if(!o.contains(m))throw new Y(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);uF(h,m)||h.push(m)}l=new Qn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new iF(new Pn(a),l,c)}class Py extends Iy{_toFieldTransform(e){return new ij(e.path,new Xl)}isEqual(e){return e instanceof Py}}function aF(t,e,n,r=!1){return Ny(n,t.Qu(r?4:3,e))}function Ny(t,e){if(lS(t=Qe(t)))return cS("Unsupported field value:",e,t),aS(t,e);if(t instanceof Iy)return function(r,s){if(!iS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ny(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=et.fromDate(r);return{timestampValue:Dh(s.serializer,i)}}if(r instanceof et){const i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dh(s.serializer,i)}}if(r instanceof Sy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wo)return{bytesValue:II(s.serializer,r._byteString)};if(r instanceof un){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ay)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return cy(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Nd(r)}`)}(t,e)}function aS(t,e){const n={};return eI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(r,s)=>{const i=Ny(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function lS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Sy||t instanceof Wo||t instanceof un||t instanceof Iy||t instanceof Ay)}function cS(t,e,n){if(!lS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function lF(t,e,n){if((e=Qe(e))instanceof ky)return e._internalPath;if(typeof e=="string")return uS(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const cF=new RegExp("[~\\*/\\[\\]]");function uS(t,e,n){if(e.search(cF)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ky(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(F.INVALID_ARGUMENT,a+t+l)}function uF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Od("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hF extends hS{data(){return super.data()}}function Od(t,e){return typeof e=="string"?uS(t,e):e instanceof ky?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class Oy extends Dy{}function xm(t,e,...n){let r=[];e instanceof Dy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof My).length,a=i.filter(l=>l instanceof Md).length;if(o>1||o>0&&a>0)throw new Y(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Md extends Oy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Md(e,n,r)}_apply(e){const n=this._parse(e);return pS(e._query,n),new Ys(e.firestore,e.converter,dm(e._query,n))}_parse(e){const n=Ry(e.firestore);return function(i,o,a,l,c,h,d){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Mw(d,h);const y=[];for(const x of d)y.push(Ow(l,i,x));m={arrayValue:{values:y}}}else m=Ow(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Mw(d,h),m=aF(a,o,d,h==="in"||h==="not-in");return dt.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Dw(t,e,n){const r=e,s=Od("where",t);return Md._create(s,r,n)}class My extends Dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new My(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)pS(o,l),o=dm(o,l)}(e._query,n),new Ys(e.firestore,e.converter,dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ly extends Oy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ly(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(i,o)}(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ia(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function dS(t,e="asc"){const n=e,r=Od("orderBy",t);return Ly._create(r,n)}class jy extends Oy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jy(e,n,r)}_apply(e){return new Ys(e.firestore,e.converter,Ph(e._query,this._limit,this._limitType))}}function fS(t){return jy._create("limit",t,"F")}function Ow(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new Y(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cI(e)&&n.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!ne.isDocumentKey(r))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tw(t,new ne(r))}if(n instanceof un)return tw(t,n._key);throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nd(n)}.`)}function Mw(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fF{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return sa(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>st(o.doubleValue));return new Ay(i)}convertGeoPoint(e){return new Sy(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=Vs(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Re(NI(r));const s=new Gl(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||zr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gS extends hS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Od("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $u extends gS{data(e={}){return super.data(e)}}class pF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ga(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $u(this._firestore,this._userDataWriter,r.key,r,new Ga(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new $u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ga(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new $u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ga(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:mF(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function mF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t){t=Us(t,un);const e=Us(t.firestore,xc);return JV(Ty(e),t._key).then(n=>gF(e,t,n))}class _S extends fF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function bm(t){t=Us(t,Ys);const e=Us(t.firestore,xc),n=Ty(e),r=new _S(e);return dF(t._query),ZV(n,t._query).then(s=>new pF(e,r,t,s))}function Em(t,e,n){t=Us(t,un);const r=Us(t.firestore,xc),s=mS(t.converter,e,n);return wS(r,[oS(Ry(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gr.none())])}function vS(t,e){const n=Us(t.firestore,xc),r=Lh(t),s=mS(t.converter,e);return wS(n,[oS(Ry(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}function wS(t,e){return function(r,s){const i=new Mr;return r.asyncQueue.enqueueAndForget(async()=>BV(await XV(r),s,i)),i.promise}(Ty(t),e)}function gF(t,e,n){const r=n.docs.get(e._key),s=new _S(t);return new gS(t,s,e._key,r,new Ga(n.hasPendingWrites,n.fromCache),e.converter)}function ec(){return new Py("serverTimestamp")}(function(e,n=!0){(function(s){ra=s})(zi),tr(new jn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new xc(new vL(r.getProvider("auth-internal")),new EL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),an(Yv,"4.7.3",e),an(Yv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebasestorage.googleapis.com",bS="storageBucket",yF=2*60*1e3,_F=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt extends Un{constructor(e,n,r=0){super(Hf(e),`Firebase Storage: ${n} (${Hf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function Hf(t){return"storage/"+t}function Vy(){const t="An unknown error occurred, please check the error payload for server response.";return new nt(tt.UNKNOWN,t)}function vF(t){return new nt(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wF(t){return new nt(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nt(tt.UNAUTHENTICATED,t)}function bF(){return new nt(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EF(t){return new nt(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TF(){return new nt(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kF(){return new nt(tt.CANCELED,"User canceled the upload/download.")}function IF(t){return new nt(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function SF(t){return new nt(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function AF(){return new nt(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bS+"' property when initializing the app?")}function CF(){return new nt(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RF(){return new nt(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PF(t){return new nt(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tm(t){return new nt(tt.INVALID_ARGUMENT,t)}function ES(){return new nt(tt.APP_DELETED,"The Firebase app was deleted.")}function NF(t){return new nt(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yl(t,e){return new nt(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Na(t){throw new nt(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_n.makeFromUrl(e,n)}catch{return new _n(e,"")}if(r.path==="")return r;throw SF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${d}/${h}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},E=n===xS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",_=new RegExp(`^https?://${E}/${s}/${T}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:y,indices:x,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<b.length;R++){const N=b[R],M=N.regex.exec(e);if(M){const k=M[N.indices.bucket];let w=M[N.indices.path];w||(w=""),r=new _n(k,w),N.postModify(r);break}}if(r==null)throw IF(e);return r}}class DF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function d(T){s=setTimeout(()=>{s=null,t(y,l())},T)}function m(){i&&clearTimeout(i)}function y(T,..._){if(c){m();return}if(T){m(),h.call(null,T,..._);return}if(l()||o){m(),h.call(null,T,..._);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let x=!1;function E(T){x||(x=!0,m(),!c&&(s!==null?(T||(a=2),clearTimeout(s),d(0)):T||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function MF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){return t!==void 0}function jF(t){return typeof t=="object"&&!Array.isArray(t)}function Fy(t){return typeof t=="string"||t instanceof String}function Lw(t){return Uy()&&t instanceof Blob}function Uy(){return typeof Blob<"u"}function jw(t,e,n,r){if(r<e)throw Tm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Tm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function TS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ei;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ei||(Ei={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n,r,s,i,o,a,l,c,h,d,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,x)=>{this.resolve_=y,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ou(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ei.NO_ERROR,l=i.getStatus();if(!a||VF(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Ei.ABORT;r(!1,new ou(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ou(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());LF(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Vy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?ES():kF();o(l)}else{const l=TF();o(l)}};this.canceled_?n(!1,new ou(!1,null,!0)):this.backoffId_=OF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ou{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $F(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function HF(t,e,n,r,s,i,o=!0){const a=TS(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return zF(c,e),UF(c,n),BF(c,i),$F(c,r),new FF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qF(...t){const e=WF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Uy())return new Blob(t);throw new nt(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function KF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t){if(typeof atob>"u")throw PF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wf{constructor(e,n){this.data=e,this.contentType=n||null}}function QF(t,e){switch(t){case dr.RAW:return new Wf(kS(e));case dr.BASE64:case dr.BASE64URL:return new Wf(IS(t,e));case dr.DATA_URL:return new Wf(XF(e),JF(e))}throw Vy()}function kS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function YF(t){let e;try{e=decodeURIComponent(t)}catch{throw yl(dr.DATA_URL,"Malformed data URL.")}return kS(e)}function IS(t,e){switch(t){case dr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw yl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case dr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw yl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=GF(e)}catch(s){throw s.message.includes("polyfill")?s:yl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class SS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw yl(dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ZF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function XF(t){const e=new SS(t);return e.base64?IS(dr.BASE64,e.rest):YF(e.rest)}function JF(t){return new SS(t).contentType}function ZF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){let r=0,s="";Lw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Lw(this.data_)){const r=this.data_,s=KF(r,e,n);return s===null?null:new fs(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new fs(r,!0)}}static getBlob(...e){if(Uy()){const n=e.map(r=>r instanceof fs?r.data_:r);return new fs(qF.apply(null,n))}else{const n=e.map(o=>Fy(o)?QF(dr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new fs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){let e;try{e=JSON.parse(t)}catch{return null}return jF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function t4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function CS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t,e){return e}class Wt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||n4}}let au=null;function r4(t){return!Fy(t)||t.length<2?t:CS(t)}function RS(){if(au)return au;const t=[];t.push(new Wt("bucket")),t.push(new Wt("generation")),t.push(new Wt("metageneration")),t.push(new Wt("name","fullPath",!0));function e(i,o){return r4(o)}const n=new Wt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Wt("size");return s.xform=r,t.push(s),t.push(new Wt("timeCreated")),t.push(new Wt("updated")),t.push(new Wt("md5Hash",null,!0)),t.push(new Wt("cacheControl",null,!0)),t.push(new Wt("contentDisposition",null,!0)),t.push(new Wt("contentEncoding",null,!0)),t.push(new Wt("contentLanguage",null,!0)),t.push(new Wt("contentType",null,!0)),t.push(new Wt("metadata","customMetadata",!0)),au=t,au}function s4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new _n(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function i4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return s4(r,t),r}function PS(t,e,n){const r=AS(e);return r===null?null:i4(t,r,n)}function o4(t,e,n,r){const s=AS(e);if(s===null||!Fy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,d=t.fullPath,m="/b/"+o(h)+"/o/"+o(d),y=By(m,n,r),x=TS({alt:"media",token:c});return y+x})[0]}function a4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class NS{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){if(!t)throw Vy()}function l4(t,e){function n(r,s){const i=PS(t,s,e);return DS(i!==null),i}return n}function c4(t,e){function n(r,s){const i=PS(t,s,e);return DS(i!==null),o4(i,s,t.host,t._protocol)}return n}function OS(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=bF():s=xF():n.getStatus()===402?s=wF(t.bucket):n.getStatus()===403?s=EF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function u4(t){const e=OS(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=vF(t.path)),i.serverResponse=s.serverResponse,i}return n}function h4(t,e,n){const r=e.fullServerUrl(),s=By(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new NS(s,i,c4(t,n),o);return a.errorHandler=u4(e),a}function d4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function f4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=d4(null,e)),r}function p4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let R=0;R<2;R++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=f4(e,r,s),h=a4(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=fs.getBlob(d,r,m);if(y===null)throw CF();const x={name:c.fullPath},E=By(i,t.host,t._protocol),T="POST",_=t.maxUploadRetryTime,v=new NS(E,T,l4(t,n),_);return v.urlParams=x,v.headers=o,v.body=y.uploadData(),v.errorHandler=OS(e),v}class m4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ei.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ei.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ei.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Na("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Na("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Na("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Na("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Na("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class g4 extends m4{initXhr(){this.xhr_.responseType="text"}}function MS(){return new g4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this._service=e,n instanceof _n?this._location=n:this._location=_n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ji(e,n)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CS(this._location.path)}get storage(){return this._service}get parent(){const e=e4(this._location.path);if(e===null)return null;const n=new _n(this._location.bucket,e);return new ji(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw NF(e)}}function y4(t,e,n){t._throwIfRoot("uploadBytes");const r=p4(t.storage,t._location,RS(),new fs(e,!0),n);return t.storage.makeRequestWithTokens(r,MS).then(s=>({metadata:s,ref:t}))}function _4(t){t._throwIfRoot("getDownloadURL");const e=h4(t.storage,t._location,RS());return t.storage.makeRequestWithTokens(e,MS).then(n=>{if(n===null)throw RF();return n})}function v4(t,e){const n=t4(t._location.path,e),r=new _n(t._location.bucket,n);return new ji(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){return/^[A-Za-z]+:\/\//.test(t)}function x4(t,e){return new ji(t,e)}function LS(t,e){if(t instanceof zy){const n=t;if(n._bucket==null)throw AF();const r=new ji(n,n._bucket);return e!=null?LS(r,e):r}else return e!==void 0?v4(t,e):t}function b4(t,e){if(e&&w4(e)){if(t instanceof zy)return x4(t,e);throw Tm("To use ref(service, url), the first argument must be a Storage instance.")}else return LS(t,e)}function Vw(t,e){const n=e==null?void 0:e[bS];return n==null?null:_n.makeFromBucketSpec(n,t)}function E4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:PT(s,t.app.options.projectId))}class zy{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=xS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yF,this._maxUploadRetryTime=_F,this._requests=new Set,s!=null?this._bucket=_n.makeFromBucketSpec(s,this._host):this._bucket=Vw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=Vw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ji(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new DF(ES());{const o=HF(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Fw="@firebase/storage",Uw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="storage";function T4(t,e,n){return t=Qe(t),y4(t,e,n)}function k4(t){return t=Qe(t),_4(t)}function I4(t,e){return t=Qe(t),b4(t,e)}function Bw(t=gd(),e){t=Qe(t);const r=Gs(t,jS).getImmediate({identifier:e}),s=AT("storage");return s&&S4(r,...s),r}function S4(t,e,n,r={}){E4(t,e,n,r)}function A4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new zy(n,r,s,e,zi)}function C4(){tr(new jn(jS,A4,"PUBLIC").setMultipleInstances(!0)),an(Fw,Uw,""),an(Fw,Uw,"esm2017")}C4();let VS=null,FS=null;try{({initializeAppCheck:VS,ReCaptchaV3Provider:FS}=require("firebase/app-check"))}catch{}const Zi={apiKey:"AIzaSyAgRnS9ugijuxF1qMCfr-USXe5AkYAnLME",authDomain:"agentic-hackthon.firebaseapp.com",projectId:"agentic-hackthon",appId:"1:1063716672043:web:681fd771d31ad548f6106e",storageBucket:"agentic-hackthon.firebasestorage.app",messagingSenderId:"1063716672043",measurementId:"G-S3ZEB9M54W"};function R4(t){try{let e=String(t).trim();if(/^https?:\/\//i.test(e))try{e=new URL(e).hostname}catch{}return/\.firebasestorage\.app$/i.test(e)&&(e=e.replace(/\.firebasestorage\.app$/i,".appspot.com")),e=e.split("/")[0],e}catch{return t}}function P4(t){return!!(t&&t.apiKey&&t.authDomain&&t.projectId&&t.appId)}let ss,wt,N4,bt,Vh;try{if(!P4(Zi))throw new Error("Missing Firebase env configuration");const t=R4(Zi.storageBucket)||(Zi.projectId?`${Zi.projectId}.appspot.com`:void 0),e={...Zi,storageBucket:t};ss=LT(e),wt=QO(ss),bt=nF(ss),Vh=t?Bw(ss,`gs://${t}`):Bw(ss);try{}catch{}if(Zi.measurementId)try{pL().then(n=>{n&&(N4=dL(ss))}).catch(()=>{})}catch{}}catch(t){console.error("[Firebase] Initialization failed:",(t==null?void 0:t.message)||t),ss=null,wt={currentUser:null},bt=null,Vh=null}function D4(t){return ss&&wt?wD(wt,t):(t(null),()=>{})}function O4(){const[t,e]=D.useState(null),[n,r]=D.useState(!0),[s,i]=D.useState(null),o=D.useCallback(async _=>{try{if(!_||!bt)return;const v=Lh(bt,"users",_.uid),b=await yS(v),R={uid:_.uid,email:_.email||null,displayName:_.displayName||null,photoURL:_.photoURL||null,phoneNumber:_.phoneNumber||null,providerIds:(_.providerData||[]).map(N=>N.providerId),updatedAt:ec()};b.exists()?await Em(v,R,{merge:!0}):await Em(v,{...R,createdAt:ec(),role:"user"},{merge:!0})}catch{}},[]);D.useEffect(()=>{const _=D4(async v=>{e(v||null),r(!1)});return hO(wt).then(async v=>{v&&v.user&&(await o(v.user),e(v.user))}).catch(()=>{}).finally(()=>{}),()=>_&&_()},[o]);const a=D.useCallback(async({email:_,password:v})=>{const b=await gD(wt,_,v);return e(b.user),b.user},[]),l=D.useCallback(async({email:_,password:v,name:b})=>{const R=await mD(wt,_,v);if(b)try{await uk(R.user,{displayName:b})}catch{}return await o(R.user),e({...R.user}),R.user},[o]),c=D.useCallback(async()=>{await xD(wt),e(null)},[]),h=D.useCallback(async()=>wt.currentUser?wt.currentUser.getIdToken():null,[]),d=D.useCallback(async()=>{const _=new Ar;_.setCustomParameters({prompt:"select_account"});const v=typeof navigator<"u"&&navigator.userAgent||"",b=/iPad|iPhone|iPod/.test(v),R=/Android/.test(v),N=typeof window<"u"&&window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,M=/FBAN|FBAV|Instagram|Line|MicroMessenger|Twitter|FB_IAB|VKClient|Snapchat/.test(v);try{if(b||R||N||M)return await Dv(wt,_),null;const k=await sO(wt,_);return await o(k.user),e(k.user),k.user}catch(k){const w=k&&k.code?String(k.code):"";if(w==="auth/popup-closed-by-user"||w==="auth/popup-blocked"||w==="auth/cancelled-popup-request")return await Dv(wt,_),null;throw console.error("[Auth] Google sign-in failed:",k),k}},[o]),m=D.useCallback(()=>{if(typeof window>"u")return null;if(!window.recaptchaVerifier){const _="recaptcha-container";let v=document.getElementById(_);v||(v=document.createElement("div"),v.id=_,v.style.display="inline-block",document.body.appendChild(v)),window.recaptchaVerifier=new QD(wt,_,{size:"invisible"})}return window.recaptchaVerifier},[]);function y(_){if(!_)return"";let b=String(_).replace(/[^0-9]/g,"");return b.startsWith("91")&&b.length>10&&(b=b.slice(b.length-10)),b.length===11&&b.startsWith("0")&&(b=b.slice(1)),b}function x(_){return/^[6-9][0-9]{9}$/.test(_)}const E=D.useCallback(async _=>{const v=m();try{v&&typeof v.render=="function"&&await v.render()}catch{}const b=y(_);if(!x(b)){const M=new Error("Please enter a valid Indian mobile number (10 digits starting with 6-9).");throw M.code="auth/invalid-india-number",M}const R=`+91${b}`,N=await JD(wt,R,v);return i(N),N},[m]),T=D.useCallback(async _=>{const v=s;if(!v)throw new Error("No phone confirmation in progress");const b=await v.confirm(_);return await o(b.user),e(b.user),i(null),b.user},[s,o]);return{user:t,loading:n,login:a,signup:l,logout:c,getIdToken:h,loginWithGoogle:d,sendPhoneCode:E,confirmPhoneCode:T,phoneConfirmation:s}}const US=D.createContext(null);function M4({children:t}){const e=O4();return f.jsx(US.Provider,{value:e,children:t})}function qr(){return D.useContext(US)}function Te({variant:t="primary",className:e="",disabled:n=!1,children:r,...s}){const i="inline-flex items-center justify-center rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed px-3.5 py-2.5 text-sm font-medium shadow-sm focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900",o={primary:"bg-gradient-to-tr from-brand-600 to-brand-700 text-white hover:from-brand-600 hover:to-brand-800 focus:ring-brand-600",secondary:"bg-blue-50 text-blue-900 hover:bg-blue-100 focus:ring-blue-300 dark:bg-slate-800 dark:text-blue-100 dark:hover:bg-slate-700",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",ghost:"bg-transparent text-slate-700 hover:bg-brand-50 dark:text-slate-200 dark:hover:bg-slate-800 focus:ring-brand-300"},a=`${i} ${o[t]||o.primary} ${e}`.trim();return f.jsx("button",{className:a,disabled:n,...s,children:r})}function L4(){const{theme:t,toggleTheme:e}=LP(),{user:n,logout:r,loading:s,loginWithGoogle:i}=qr(),[o,a]=D.useState(!1),[l,c]=D.useState(!1),h=({isActive:d})=>`px-3 py-2 rounded-md transition-colors hover:text-brand-700 hover:bg-brand-50 dark:hover:bg-slate-800 ${d?"text-brand-700 bg-brand-50 dark:text-blue-300 dark:bg-slate-800":"text-slate-700 dark:text-slate-200"}`;return f.jsx("nav",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/70 bg-white dark:bg-slate-900 border-b border-brand-100 dark:border-slate-800 shadow-subtle",children:f.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"mr-auto flex items-center gap-3",children:[f.jsx("div",{className:"w-7 h-7 rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 shadow ring-1 ring-brand-500/30"}),f.jsx("span",{className:"font-semibold tracking-wide text-slate-900 dark:text-slate-100",children:"AgenticSprit"})]}),f.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[f.jsx(or,{className:h,to:"/",children:"Dashboard"}),f.jsx(or,{className:h,to:"/daily-checkin",children:"Daily Check-in"}),f.jsx(or,{className:h,to:"/upload-report",children:"Upload Report"})]}),f.jsxs("div",{className:"flex items-center gap-2 relative",children:[f.jsxs("button",{onClick:e,"aria-label":"Toggle theme","aria-pressed":t==="dark",className:`relative inline-flex w-14 h-8 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900\r
                bg-blue-50 dark:bg-slate-700`,children:[f.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-amber-500 ${theme === 'dark' ? 'opacity-0' : 'opacity-100'}",children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M12 4a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1Zm0 13a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm7-6a1 1 0 0 1 1 1h1a1 1 0 1 1 0 2h-1a1 1 0 1 1-2 0 1 1 0 0 1 1-1ZM4 12a1 1 0 0 1 1-1H6a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm12.95-6.364a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414ZM4.929 17.657a1 1 0 0 1 1.414 0l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414Zm12.021 2.121a1 1 0 0 1 0-1.414l.707-.707a1 1 0 1 1 1.414 1.414l-.707.707a1 1 0 0 1-1.414 0ZM6.05 5.636a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 3.929 6.343l.707-.707A1 1 0 0 1 6.05 5.636Z"})})}),f.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-blue-400 ${theme === 'dark' ? 'opacity-100' : 'opacity-0'}",children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"})})}),f.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 rounded-full bg-white shadow transition-transform duration-300 ${t==="dark"?"translate-x-6":"translate-x-0"}`})]}),!s&&(n?f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>c(d=>!d),className:"relative inline-flex items-center gap-2 px-2 py-1 rounded-md border border-brand-100 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-brand-50 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600","aria-haspopup":"menu","aria-expanded":l,children:[f.jsxs("span",{className:"relative inline-block",children:[n.photoURL?f.jsx("img",{src:n.photoURL,alt:"avatar",className:"w-8 h-8 rounded-full ring-2 ring-brand-500/40"}):f.jsx("span",{className:"w-8 h-8 rounded-full grid place-items-center text-white text-sm font-medium bg-gradient-to-tr from-brand-600 to-blue-500 ring-2 ring-brand-500/40",children:(n.displayName||n.email||"?").slice(0,1).toUpperCase()}),f.jsx("span",{className:"absolute -right-0.5 -bottom-0.5 block w-3 h-3 rounded-full bg-emerald-500 ring-2 ring-white dark:ring-slate-900","aria-hidden":"true"})]}),f.jsx("span",{className:"hidden sm:inline text-sm max-w-[10rem] truncate",children:n.displayName||n.email}),f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-70",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l&&f.jsxs("div",{role:"menu",className:"absolute right-0 mt-2 w-60 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg z-50",children:[f.jsxs("div",{className:"px-3 py-2 text-sm text-slate-700 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700",children:[f.jsx("div",{className:"font-medium truncate",children:n.displayName||"Signed in"}),f.jsx("div",{className:"text-xs text-slate-500 truncate",children:n.email})]}),f.jsx("a",{href:"/profile",className:"block px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",onClick:()=>c(!1),children:"Profile"}),f.jsx("button",{onClick:async()=>{c(!1);try{await r()}catch{}},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",children:"Log out"})]})]}):f.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[f.jsx(or,{className:h,to:"/login",children:"Log in"}),f.jsx(or,{className:h,to:"/signup",children:"Sign up"}),f.jsx(Te,{variant:"secondary",onClick:()=>{try{i()}catch{}},children:"Continue with Google"})]})),f.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200",onClick:()=>a(d=>!d),"aria-expanded":o,"aria-controls":"mobile-nav","aria-label":"Toggle navigation",children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),f.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),f.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),o&&f.jsxs("div",{id:"mobile-nav",className:"md:hidden mt-3 grid gap-1",children:[f.jsx(or,{onClick:()=>a(!1),className:h,to:"/",children:"Dashboard"}),f.jsx(or,{onClick:()=>a(!1),className:h,to:"/daily-checkin",children:"Daily Check-in"}),f.jsx(or,{onClick:()=>a(!1),className:h,to:"/upload-report",children:"Upload Report"}),!s&&(n?f.jsx("button",{onClick:async()=>{a(!1);try{await r()}catch{}},className:"text-left px-3 py-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Log out"}):f.jsxs(f.Fragment,{children:[f.jsx(or,{onClick:()=>a(!1),className:h,to:"/login",children:"Log in"}),f.jsx(or,{onClick:()=>a(!1),className:h,to:"/signup",children:"Sign up"}),f.jsx("button",{onClick:()=>{a(!1);try{i()}catch{}},className:"text-left px-3 py-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800",children:"Continue with Google"})]}))]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function bc(t){return t+.5|0}const _s=(t,e,n)=>Math.max(Math.min(t,n),e);function Qa(t){return _s(bc(t*2.55),0,255)}function Ns(t){return _s(bc(t*255),0,255)}function Sr(t){return _s(bc(t/2.55)/100,0,1)}function zw(t){return _s(bc(t*100),0,100)}const An={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},km=[..."0123456789ABCDEF"],j4=t=>km[t&15],V4=t=>km[(t&240)>>4]+km[t&15],lu=t=>(t&240)>>4===(t&15),F4=t=>lu(t.r)&&lu(t.g)&&lu(t.b)&&lu(t.a);function U4(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&An[t[1]]*17,g:255&An[t[2]]*17,b:255&An[t[3]]*17,a:e===5?An[t[4]]*17:255}:(e===7||e===9)&&(n={r:An[t[1]]<<4|An[t[2]],g:An[t[3]]<<4|An[t[4]],b:An[t[5]]<<4|An[t[6]],a:e===9?An[t[7]]<<4|An[t[8]]:255})),n}const B4=(t,e)=>t<255?e(t):"";function z4(t){var e=F4(t)?j4:V4;return t?"#"+e(t.r)+e(t.g)+e(t.b)+B4(t.a,e):void 0}const $4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function BS(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function H4(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function W4(t,e,n){const r=BS(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function q4(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function $y(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,h;return i!==o&&(h=i-o,c=a>.5?h/(2-i-o):h/(i+o),l=q4(n,r,s,h,i),l=l*60+.5),[l|0,c||0,a]}function Hy(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ns)}function Wy(t,e,n){return Hy(BS,t,e,n)}function K4(t,e,n){return Hy(W4,t,e,n)}function G4(t,e,n){return Hy(H4,t,e,n)}function zS(t){return(t%360+360)%360}function Q4(t){const e=$4.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Qa(+e[5]):Ns(+e[5]));const s=zS(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=K4(s,i,o):e[1]==="hsv"?r=G4(s,i,o):r=Wy(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Y4(t,e){var n=$y(t);n[0]=zS(n[0]+e),n=Wy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function X4(t){if(!t)return;const e=$y(t),n=e[0],r=zw(e[1]),s=zw(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Sr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const $w={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Hw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function J4(){const t={},e=Object.keys(Hw),n=Object.keys($w);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,$w[i]);i=parseInt(Hw[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let cu;function Z4(t){cu||(cu=J4(),cu.transparent=[0,0,0,0]);const e=cu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const eU=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tU(t){const e=eU.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Qa(o):_s(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Qa(r):_s(r,0,255)),s=255&(e[4]?Qa(s):_s(s,0,255)),i=255&(e[6]?Qa(i):_s(i,0,255)),{r,g:s,b:i,a:n}}}function nU(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Sr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const qf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,eo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function rU(t,e,n){const r=eo(Sr(t.r)),s=eo(Sr(t.g)),i=eo(Sr(t.b));return{r:Ns(qf(r+n*(eo(Sr(e.r))-r))),g:Ns(qf(s+n*(eo(Sr(e.g))-s))),b:Ns(qf(i+n*(eo(Sr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function uu(t,e,n){if(t){let r=$y(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Wy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function $S(t,e){return t&&Object.assign(e||{},t)}function Ww(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ns(t[3]))):(e=$S(t,{r:0,g:0,b:0,a:1}),e.a=Ns(e.a)),e}function sU(t){return t.charAt(0)==="r"?tU(t):Q4(t)}class tc{constructor(e){if(e instanceof tc)return e;const n=typeof e;let r;n==="object"?r=Ww(e):n==="string"&&(r=U4(e)||Z4(e)||sU(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=$S(this._rgb);return e&&(e.a=Sr(e.a)),e}set rgb(e){this._rgb=Ww(e)}rgbString(){return this._valid?nU(this._rgb):void 0}hexString(){return this._valid?z4(this._rgb):void 0}hslString(){return this._valid?X4(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=rU(this._rgb,e._rgb,n)),this}clone(){return new tc(this.rgb)}alpha(e){return this._rgb.a=Ns(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=bc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return uu(this._rgb,2,e),this}darken(e){return uu(this._rgb,2,-e),this}saturate(e){return uu(this._rgb,1,e),this}desaturate(e){return uu(this._rgb,1,-e),this}rotate(e){return Y4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function br(){}const iU=(()=>{let t=0;return()=>t++})();function Le(t){return t==null}function Tt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ke(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Fn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ar(t,e){return Fn(t)?t:e}function ve(t,e){return typeof t>"u"?e:t}const oU=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ue(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ae(t,e,n,r){let s,i,o;if(Tt(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ke(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Fh(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Uh(t){if(Tt(t))return t.map(Uh);if(ke(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Uh(t[n[s]]);return e}return t}function HS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function aU(t,e,n,r){if(!HS(t))return;const s=e[t],i=n[t];ke(s)&&ke(i)?nc(s,i,r):e[t]=Uh(i)}function nc(t,e,n){const r=Tt(e)?e:[e],s=r.length;if(!ke(t))return t;n=n||{};const i=n.merger||aU;let o;for(let a=0;a<s;++a){if(o=r[a],!ke(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)i(l[c],t,o,n)}return t}function _l(t,e){return nc(t,e,{merger:lU})}function lU(t,e,n){if(!HS(t))return;const r=e[t],s=n[t];ke(r)&&ke(s)?_l(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Uh(s))}const qw={"":t=>t,x:t=>t.x,y:t=>t.y};function cU(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function uU(t){const e=cU(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Bh(t,e){return(qw[e]||(qw[e]=uU(e)))(t)}function qy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zh=t=>typeof t<"u",Bs=t=>typeof t=="function",Kw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function hU(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Vt=Math.PI,_r=2*Vt,dU=_r+Vt,$h=Number.POSITIVE_INFINITY,fU=Vt/180,Yn=Vt/2,ni=Vt/4,Gw=Vt*2/3,WS=Math.log10,qo=Math.sign;function vl(t,e,n){return Math.abs(t-e)<n}function Qw(t){const e=Math.round(t);t=vl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(WS(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function pU(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function mU(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function rc(t){return!mU(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function gU(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function yU(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function yi(t){return t*(Vt/180)}function _U(t){return t*(180/Vt)}function Yw(t){if(!Fn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function vU(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Vt&&(i+=_r),{angle:i,distance:s}}function Im(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function wU(t,e){return(t-e+dU)%_r-Vt}function is(t){return(t%_r+_r)%_r}function qS(t,e,n,r){const s=is(t),i=is(e),o=is(n),a=is(i-s),l=is(o-s),c=is(s-i),h=is(s-o);return s===i||s===o||r&&i===o||a>l&&c<h}function Dn(t,e,n){return Math.max(e,Math.min(n,t))}function xU(t){return Dn(t,-32768,32767)}function Ya(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Ky(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const _i=(t,e,n,r)=>Ky(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),bU=(t,e,n)=>Ky(t,n,r=>t[r][e]>=n);function EU(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const KS=["push","pop","shift","splice","unshift"];function TU(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),KS.forEach(n=>{const r="_onData"+qy(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Xw(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(KS.forEach(i=>{delete t[i]}),delete t._chartjs)}function kU(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const GS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function QS(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,GS.call(window,()=>{r=!1,t.apply(e,n)}))}}function IU(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const YS=t=>t==="start"?"left":t==="end"?"right":"center",pn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,SU=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function AU(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:m,minDefined:y,maxDefined:x}=o.getUserBounds();if(y){if(s=Math.min(_i(l,h,d).lo,n?r:_i(e,h,o.getPixelForValue(d)).lo),c){const E=l.slice(0,s+1).reverse().findIndex(T=>!Le(T[a.axis]));s-=Math.max(0,E)}s=Dn(s,0,r-1)}if(x){let E=Math.max(_i(l,o.axis,m,!0).hi+1,n?0:_i(e,h,o.getPixelForValue(m),!0).hi+1);if(c){const T=l.slice(E-1).findIndex(_=>!Le(_[a.axis]));E+=Math.max(0,T)}i=Dn(E,s,r)-s}else i=r-s}return{start:s,count:i}}function CU(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const hu=t=>t===0||t===1,Jw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*_r/n)),Zw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*_r/n)+1,wl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Yn)+1,easeOutSine:t=>Math.sin(t*Yn),easeInOutSine:t=>-.5*(Math.cos(Vt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>hu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>hu(t)?t:Jw(t,.075,.3),easeOutElastic:t=>hu(t)?t:Zw(t,.075,.3),easeInOutElastic(t){return hu(t)?t:t<.5?.5*Jw(t*2,.1125,.45):.5+.5*Zw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-wl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?wl.easeInBounce(t*2)*.5:wl.easeOutBounce(t*2-1)*.5+.5};function Gy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ex(t){return Gy(t)?t:new tc(t)}function Kf(t){return Gy(t)?t:new tc(t).saturate(.5).darken(.1).hexString()}const RU=["x","y","borderWidth","radius","tension"],PU=["color","borderColor","backgroundColor"];function NU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:PU},numbers:{type:"number",properties:RU}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function DU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const tx=new Map;function OU(t,e){e=e||{};const n=t+JSON.stringify(e);let r=tx.get(n);return r||(r=new Intl.NumberFormat(t,e),tx.set(n,r)),r}function XS(t,e,n){return OU(e,n).format(t)}const MU={values(t){return Tt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=LU(t,n)}const o=WS(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),XS(t,r,l)}};function LU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var JS={formatters:MU};function jU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:JS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Vi=Object.create(null),Sm=Object.create(null);function xl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Gf(t,e,n){return typeof e=="string"?nc(xl(t,e),n):nc(xl(t,""),e)}class VU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Kf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Kf(s.borderColor),this.hoverColor=(r,s)=>Kf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Gf(this,e,n)}get(e){return xl(this,e)}describe(e,n){return Gf(Sm,e,n)}override(e,n){return Gf(Vi,e,n)}route(e,n,r,s){const i=xl(this,e),o=xl(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ke(l)?Object.assign({},c,l):ve(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ot=new VU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[NU,DU,jU]);function FU(t){return!t||Le(t.size)||Le(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function nx(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function ri(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function rx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Am(t,e,n,r){ZS(t,e,n,r,null)}function ZS(t,e,n,r,s){let i,o,a,l,c,h,d,m;const y=e.pointStyle,x=e.rotation,E=e.radius;let T=(x||0)*fU;if(y&&typeof y=="object"&&(i=y.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),y){default:s?t.ellipse(n,r,s/2,E,0,0,_r):t.arc(n,r,E,0,_r),t.closePath();break;case"triangle":h=s?s/2:E,t.moveTo(n+Math.sin(T)*h,r-Math.cos(T)*E),T+=Gw,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*E),T+=Gw,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(T+ni)*l,d=Math.cos(T+ni)*(s?s/2-c:l),a=Math.sin(T+ni)*l,m=Math.sin(T+ni)*(s?s/2-c:l),t.arc(n-d,r-a,c,T-Vt,T-Yn),t.arc(n+m,r-o,c,T-Yn,T),t.arc(n+d,r+a,c,T,T+Yn),t.arc(n-m,r+o,c,T+Yn,T+Vt),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,h=s?s/2:l,t.rect(n-h,r-l,2*h,2*l);break}T+=ni;case"rectRot":d=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+m,r-o),t.lineTo(n+d,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":T+=ni;case"cross":d=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":d=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),T+=ni,d=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(T)*E,a=Math.sin(T)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(s?s/2:E),r+Math.sin(T)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function sc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Qy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Yy(t){t.restore()}function UU(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function BU(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function zU(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Le(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function $U(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function HU(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Hh(t,e,n,r,s,i={}){const o=Tt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,zU(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&HU(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Le(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),$U(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Cm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Vt,Vt,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Vt,Yn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Yn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Yn,!0),t.lineTo(n+o.topLeft,r)}const WU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qU=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function KU(t,e){const n=(""+t).match(WU);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const GU=t=>+t||0;function e1(t,e){const n={},r=ke(e),s=r?Object.keys(e):e,i=ke(t)?r?o=>ve(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=GU(i(o));return n}function QU(t){return e1(t,{top:"y",right:"x",bottom:"y",left:"x"})}function bl(t){return e1(t,["topLeft","topRight","bottomLeft","bottomRight"])}function rr(t){const e=QU(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nn(t,e){t=t||{},e=e||ot.font;let n=ve(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ve(t.style,e.style);r&&!(""+r).match(qU)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ve(t.family,e.family),lineHeight:KU(ve(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ve(t.weight,e.weight),string:""};return s.string=FU(s),s}function du(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function YU(t,e,n){const{min:r,max:s}=t,i=oU(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Wi(t,e){return Object.assign(Object.create(t),e)}function Xy(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=s1("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Xy([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return n1(a,l,()=>s5(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ix(a).includes(l)},ownKeys(a){return ix(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Ko(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:t1(t,r),setContext:i=>Ko(t,i,n,r),override:i=>Ko(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return n1(i,o,()=>JU(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function t1(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Bs(n)?n:()=>n,isIndexable:Bs(r)?r:()=>r}}const XU=(t,e)=>t?t+qy(e):e,Jy=(t,e)=>ke(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function n1(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function JU(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Bs(a)&&o.isScriptable(e)&&(a=ZU(e,a,t,n)),Tt(a)&&a.length&&(a=e5(e,a,t,o.isIndexable)),Jy(e,a)&&(a=Ko(a,s,i&&i[e],o)),a}function ZU(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Jy(t,l)&&(l=Zy(s._scopes,s,t,l)),l}function e5(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ke(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Zy(c,s,t,h);e.push(Ko(d,i,o&&o[t],a))}}return e}function r1(t,e,n){return Bs(t)?t(e,n):t}const t5=(t,e)=>t===!0?e:typeof t=="string"?Bh(e,t):void 0;function n5(t,e,n,r,s){for(const i of e){const o=t5(n,i);if(o){t.add(o);const a=r1(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Zy(t,e,n,r){const s=e._rootScopes,i=r1(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=sx(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=sx(a,o,i,l,r),l===null)?!1:Xy(Array.from(a),[""],s,i,()=>r5(e,n,r))}function sx(t,e,n,r,s){for(;n;)n=n5(t,e,n,r,s);return n}function r5(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Tt(s)&&ke(n)?n:s||{}}function s5(t,e,n,r){let s;for(const i of e)if(s=s1(XU(i,t),n),typeof s<"u")return Jy(t,s)?Zy(n,r,t,s):s}function s1(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function ix(t){let e=t._keys;return e||(e=t._keys=i5(t._scopes)),e}function i5(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const o5=Number.EPSILON||1e-14,Go=(t,e)=>e<t.length&&!t[e].skip&&t[e],i1=t=>t==="x"?"y":"x";function a5(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Im(i,s),l=Im(o,i);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,m=r*h;return{previous:{x:i.x-d*(o.x-s.x),y:i.y-d*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function l5(t,e,n){const r=t.length;let s,i,o,a,l,c=Go(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Go(t,h+1),!(!l||!c)){if(vl(e[h],0,o5)){n[h]=n[h+1]=0;continue}s=n[h]/e[h],i=n[h+1]/e[h],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=s*o*e[h],n[h+1]=i*o*e[h])}}function c5(t,e,n="x"){const r=i1(n),s=t.length;let i,o,a,l=Go(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Go(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(i=(h-o[n])/3,a[`cp1${n}`]=h-i,a[`cp1${r}`]=d-i*e[c]),l&&(i=(l[n]-h)/3,a[`cp2${n}`]=h+i,a[`cp2${r}`]=d+i*e[c])}}function u5(t,e="x"){const n=i1(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Go(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Go(t,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[n]-l[n])/h:0}i[o]=a?c?qo(s[o-1])!==qo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}l5(t,s,i),c5(t,i,e)}function fu(t,e,n){return Math.max(Math.min(t,n),e)}function h5(t,e){let n,r,s,i,o,a=sc(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&sc(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=fu(s.cp1x,e.left,e.right),s.cp1y=fu(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=fu(s.cp2x,e.left,e.right),s.cp2y=fu(s.cp2y,e.top,e.bottom)))}function d5(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")u5(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=a5(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&h5(t,n)}function e0(){return typeof window<"u"&&typeof document<"u"}function t0(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ld=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function f5(t,e){return Ld(t).getPropertyValue(e)}const p5=["top","right","bottom","left"];function Ti(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=p5[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const m5=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function g5(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(m5(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ci(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Ld(n),i=s.boxSizing==="border-box",o=Ti(s,"padding"),a=Ti(s,"border","width"),{x:l,y:c,box:h}=g5(t,n),d=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:y,height:x}=e;return i&&(y-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-d)/y*n.width/r),y:Math.round((c-m)/x*n.height/r)}}function y5(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&t0(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Ld(i),l=Ti(a,"border","width"),c=Ti(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Wh(a.maxWidth,i,"clientWidth"),s=Wh(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||$h,maxHeight:s||$h}}const pu=t=>Math.round(t*10)/10;function _5(t,e,n,r){const s=Ld(t),i=Ti(s,"margin"),o=Wh(s.maxWidth,t,"clientWidth")||$h,a=Wh(s.maxHeight,t,"clientHeight")||$h,l=y5(t,e,n);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const m=Ti(s,"border","width"),y=Ti(s,"padding");c-=y.width+m.width,h-=y.height+m.height}return c=Math.max(0,c-i.width),h=Math.max(0,r?c/r:h-i.height),c=pu(Math.min(c,o,l.maxWidth)),h=pu(Math.min(h,a,l.maxHeight)),c&&!h&&(h=pu(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=pu(Math.floor(h*r))),{width:c,height:h}}function ox(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const v5=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};e0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ax(t,e){const n=f5(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ui(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function w5(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function x5(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ui(t,s,n),a=ui(s,i,n),l=ui(i,e,n),c=ui(o,a,n),h=ui(a,l,n);return ui(c,h,n)}const b5=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},E5=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function So(t,e,n){return t?b5(e,n):E5()}function o1(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function a1(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function l1(t){return t==="angle"?{between:qS,compare:wU,normalize:is}:{between:Ya,compare:(e,n)=>e-n,normalize:e=>e}}function lx({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function T5(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=l1(r),l=e.length;let{start:c,end:h,loop:d}=t,m,y;if(d){for(c+=l,h+=l,m=0,y=l;m<y&&o(a(e[c%l][r]),s,i);++m)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function k5(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=l1(r),{start:h,end:d,loop:m,style:y}=T5(t,e,n),x=[];let E=!1,T=null,_,v,b;const R=()=>l(s,b,_)&&a(s,b)!==0,N=()=>a(i,_)===0||l(i,b,_),M=()=>E||R(),k=()=>!E||N();for(let w=h,A=h;w<=d;++w)v=e[w%o],!v.skip&&(_=c(v[r]),_!==b&&(E=l(_,s,i),T===null&&M()&&(T=a(_,s)===0?w:A),T!==null&&k()&&(x.push(lx({start:T,end:w,loop:m,count:o,style:y})),T=null),A=w,b=_));return T!==null&&x.push(lx({start:T,end:d,loop:m,count:o,style:y})),x}function I5(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=k5(r[s],t.points,e);i.length&&n.push(...i)}return n}function S5(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function A5(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function C5(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=S5(n,s,i,r);if(r===!0)return cx(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return cx(t,A5(n,o,l,c),n,e)}function cx(t,e,n,r){return!r||!r.setContext||!n?e:R5(t,e,n,r)}function R5(t,e,n,r){const s=t._chart.getContext(),i=ux(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=i,d=e[0].start,m=d;function y(x,E,T,_){const v=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=v;for(;n[E%l].skip;)E+=v;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:T,style:_}),h=_,d=E%l)}}for(const x of e){d=a?d:x.start;let E=n[d%l],T;for(m=d+1;m<=x.end;m++){const _=n[m%l];T=ux(r.setContext(Wi(s,{type:"segment",p0:E,p1:_,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),P5(T,h)&&y(d,m-1,x.loop,h),E=_,h=T}d<m-1&&y(d,m-1,x.loop,h)}return c}function ux(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function P5(t,e){if(!e)return!1;const n=[],r=function(s,i){return Gy(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function mu(t,e,n){return t.options.clip?t[n]:e[n]}function N5(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:mu(n,e,"left"),right:mu(n,e,"right"),top:mu(r,e,"top"),bottom:mu(r,e,"bottom")}:e}function D5(t,e){const n=e._clip;if(n.disabled)return!1;const r=N5(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class O5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=GS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Er=new O5;const hx="transparent",M5={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=ex(t||hx),s=r.valid&&ex(e||hx);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class L5{constructor(e,n,r,s){const i=n[r];s=du([e.to,s,i,e.from]);const o=du([e.from,i,s]);this._active=!0,this._fn=e.fn||M5[e.type||typeof o],this._easing=wl[e.easing]||wl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=du([e.to,n,s,e.from]),this._from=du([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class c1{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ke(e))return;const n=Object.keys(ot.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ke(i))return;const o={};for(const a of n)o[a]=i[a];(Tt(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=V5(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&j5(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[c];let d=i[c];const m=r.get(c);if(d)if(m&&d.active()){d.update(m,h,a);continue}else d.cancel();if(!m||!m.duration){e[c]=h;continue}i[c]=d=new L5(m,e,c,h),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Er.add(this._chart,r),!0}}function j5(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function V5(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function dx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function F5(t,e,n){if(n===!1)return!1;const r=dx(t,n),s=dx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function U5(t){let e,n,r,s;return ke(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function u1(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function fx(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],Fn(c)&&(i||e===0||qo(e)===qo(c))&&(e+=c)}return!h&&!r.all?0:e}function B5(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[i]:t[h]};return a}function Qf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function z5(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function $5(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function H5(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function px(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function mx(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,h=z5(i,o,r),d=e.length;let m;for(let y=0;y<d;++y){const x=e[y],{[l]:E,[c]:T}=x,_=x._stacks||(x._stacks={});m=_[c]=H5(s,h,E),m[a]=T,m._top=px(m,o,!0,r.type),m._bottom=px(m,o,!1,r.type);const v=m._visualValues||(m._visualValues={});v[a]=T}}function Yf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function W5(t,e){return Wi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function q5(t,e,n){return Wi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Da(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Xf=t=>t==="reset"||t==="none",gx=(t,e)=>e?t:Object.assign({},t),K5=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:u1(n,!0),values:null};class El{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Qf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Da(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(d,m,y,x)=>d==="x"?m:d==="r"?x:y,i=n.xAxisID=ve(r.xAxisID,Yf(e,"x")),o=n.yAxisID=ve(r.yAxisID,Yf(e,"y")),a=n.rAxisID=ve(r.rAxisID,Yf(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),h=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Xw(this._data,this),e._stacked&&Da(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ke(n)){const s=this._cachedMeta;this._data=B5(n,s)}else if(r!==n){if(r){Xw(r,this);const s=this._cachedMeta;Da(s),s._parsed=[]}n&&Object.isExtensible(n)&&TU(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Qf(n.vScale,n),n.stack!==r.stack&&(s=!0,Da(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(mx(this,n._parsed),n._stacked=Qf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{Tt(s[e])?m=this.parseArrayData(r,s,e,n):ke(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const y=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=m[h],l&&(y()&&(l=!1),c=d);r._sorted=l}o&&mx(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),h=i===o,d=new Array(s);let m,y,x;for(m=0,y=s;m<y;++m)x=m+r,d[m]={[a]:h||i.parse(c[x],x),[l]:o.parse(n[x],x)};return d}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+r,d=n[h],a[l]={x:i.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,m,y;for(h=0,d=s;h<d;++h)m=h+r,y=n[m],c[h]={x:i.parse(Bh(y,a),m),y:o.parse(Bh(y,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:u1(s,!0),values:n._stacks[e.axis]._visualValues};return fx(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=fx(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=K5(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=$5(a);let m,y;function x(){y=s[m];const E=y[a.axis];return!Fn(y[e.axis])||h>E||d<E}for(m=0;m<o&&!(!x()&&(this.updateRangeFromParsed(c,e,y,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(c,e,y,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Fn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=U5(ve(this.options.clip,F5(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const d=s[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=q5(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=W5(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&zh(r);if(a)return gx(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),h),y=Object.keys(ot.elements[e]),x=()=>this.getContext(r,s,n),E=c.resolveNamedOptions(m,y,x,d);return E.$shared&&(E.$shared=l,i[o]=Object.freeze(gx(E,l))),E}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(m,this.getContext(e,r,n))}const c=new c1(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Xf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Xf(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Xf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Da(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}pe(El,"defaults",{}),pe(El,"datasetElementType",null),pe(El,"dataElementType",null);class Hu extends El{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=AU(n,s,o);this._drawStart=a,this._drawCount=l,CU(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s),m=o.axis,y=a.axis,{spanGaps:x,segment:E}=this.options,T=rc(x)?x:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||s==="none",v=n+r,b=e.length;let R=n>0&&this.getParsed(n-1);for(let N=0;N<b;++N){const M=e[N],k=_?M:{};if(N<n||N>=v){k.skip=!0;continue}const w=this.getParsed(N),A=Le(w[y]),C=k[m]=o.getPixelForValue(w[m],N),P=k[y]=i||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[y],N);k.skip=isNaN(C)||isNaN(P)||A,k.stop=N>0&&Math.abs(w[m]-R[m])>T,E&&(k.parsed=w,k.raw=c.data[N]),d&&(k.options=h||this.resolveDataElementOptions(N,M.active?"active":s)),_||this.updateElement(M,N,k,s),R=w}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}pe(Hu,"id","line"),pe(Hu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),pe(Hu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function si(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class n0{constructor(e){pe(this,"options");this.options=e||{}}static override(e){Object.assign(n0.prototype,e)}init(){}formats(){return si()}parse(){return si()}format(){return si()}add(){return si()}diff(){return si()}startOf(){return si()}endOf(){return si()}}var G5={_date:n0};function Q5(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?bU:_i;if(r){if(s._sharedOptions){const h=i[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const m=c(i,e,n-d),y=c(i,e,n+d);return{lo:m.lo,hi:y.hi}}}}else{const h=c(i,e,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:m}=t,y=m.slice(0,h.lo+1).reverse().findIndex(E=>!Le(E[d.axis]));h.lo-=Math.max(0,y);const x=m.slice(h.hi).findIndex(E=>!Le(E[d.axis]));h.hi+=Math.max(0,x)}return h}}return{lo:0,hi:i.length-1}}function jd(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:h}=i[a],{lo:d,hi:m}=Q5(i[a],e,o,s);for(let y=d;y<=m;++y){const x=h[y];x.skip||r(x,c,y)}}}function Y5(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Jf(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||jd(t,n,e,function(a,l,c){!s&&!sc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function X5(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=vU(o,{x:e.x,y:e.y});qS(d,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return jd(t,n,e,i),s}function J5(t,e,n,r,s,i){let o=[];const a=Y5(n);let l=Number.POSITIVE_INFINITY;function c(h,d,m){const y=h.inRange(e.x,e.y,s);if(r&&!y)return;const x=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!y)return;const T=a(e,x);T<l?(o=[{element:h,datasetIndex:d,index:m}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:m})}return jd(t,n,e,c),o}function Zf(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?X5(t,e,n,s):J5(t,e,n,r,s,i)}function yx(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return jd(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var Z5={modes:{index(t,e,n,r){const s=ci(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Jf(t,s,i,r,o):Zf(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const s=ci(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Jf(t,s,i,r,o):Zf(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const s=ci(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Jf(t,s,i,r,o)},nearest(t,e,n,r){const s=ci(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Zf(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=ci(e,t);return yx(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=ci(e,t);return yx(t,s,"y",n.intersect,r)}}};const h1=["left","top","right","bottom"];function Oa(t,e){return t.filter(n=>n.pos===e)}function _x(t,e){return t.filter(n=>h1.indexOf(n.pos)===-1&&n.box.axis===e)}function Ma(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function e3(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function t3(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!h1.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function n3(t,e){const n=t3(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return n}function r3(t){const e=e3(t),n=Ma(e.filter(c=>c.box.fullSize),!0),r=Ma(Oa(e,"left"),!0),s=Ma(Oa(e,"right")),i=Ma(Oa(e,"top"),!0),o=Ma(Oa(e,"bottom")),a=_x(e,"x"),l=_x(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Oa(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function vx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function d1(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function s3(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ke(s)){n.size&&(t[s]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[s]+=n.size}i.getPadding&&d1(o,i.getPadding());const a=Math.max(0,e.outerWidth-vx(o,t,"left","right")),l=Math.max(0,e.outerHeight-vx(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function i3(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function o3(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Xa(t,e,n,r){const s=[];let i,o,a,l,c,h;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,o3(a.horizontal,e));const{same:d,other:m}=s3(e,n,a,r);c|=d&&s.length,h=h||m,l.fullSize||s.push(a)}return c&&Xa(s,e,n,r)||h}function gu(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function wx(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,m=c.size||l.height;zh(c.start)&&(o=c.start),l.fullSize?gu(l,s.left,o,n.outerWidth-s.right-s.left,m):gu(l,e.left+c.placed,o,d,m),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,m=c.size||l.width;zh(c.start)&&(i=c.start),l.fullSize?gu(l,i,s.top,m,n.outerHeight-s.bottom-s.top):gu(l,i,e.top+c.placed,m,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var vs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=rr(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=r3(t.boxes),l=a.vertical,c=a.horizontal;Ae(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,T)=>T.box.options&&T.box.options.display===!1?E:E+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},s);d1(m,rr(r));const y=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),x=n3(l.concat(c),d);Xa(a.fullSize,y,d,x),Xa(l,y,d,x),Xa(c,y,d,x)&&Xa(l,y,d,x),i3(y),wx(a.leftAndTop,y,d,x),y.x+=y.w,y.y+=y.h,wx(a.rightAndBottom,y,d,x),t.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Ae(a.chartArea,E=>{const T=E.box;Object.assign(T,t.chartArea),T.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class f1{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class a3 extends f1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wu="$chartjs",l3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xx=t=>t===null||t==="";function c3(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Wu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",xx(s)){const i=ax(t,"width");i!==void 0&&(t.width=i)}if(xx(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=ax(t,"height");i!==void 0&&(t.height=i)}return t}const p1=v5?{passive:!0}:!1;function u3(t,e,n){t&&t.addEventListener(e,n,p1)}function h3(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,p1)}function d3(t,e){const n=l3[t.type]||t.type,{x:r,y:s}=ci(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function qh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function f3(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||qh(a.addedNodes,r),o=o&&!qh(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function p3(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||qh(a.removedNodes,r),o=o&&!qh(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const ic=new Map;let bx=0;function m1(){const t=window.devicePixelRatio;t!==bx&&(bx=t,ic.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function m3(t,e){ic.size||window.addEventListener("resize",m1),ic.set(t,e)}function g3(t){ic.delete(t),ic.size||window.removeEventListener("resize",m1)}function y3(t,e,n){const r=t.canvas,s=r&&t0(r);if(!s)return;const i=QS((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||i(c,h)});return o.observe(s),m3(t,i),o}function ep(t,e,n){n&&n.disconnect(),e==="resize"&&g3(t)}function _3(t,e,n){const r=t.canvas,s=QS(i=>{t.ctx!==null&&n(d3(i,t))},t);return u3(r,e,s),s}class v3 extends f1{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(c3(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Wu])return!1;const r=n[Wu].initial;["height","width"].forEach(i=>{const o=r[i];Le(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Wu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:f3,detach:p3,resize:y3}[n]||_3;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:ep,detach:ep,resize:ep}[n]||h3)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return _5(e,n,r,s)}isAttached(e){const n=e&&t0(e);return!!(n&&n.isConnected)}}function w3(t){return!e0()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?a3:v3}class zs{constructor(){pe(this,"x");pe(this,"y");pe(this,"active",!1);pe(this,"options");pe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return rc(this.x)&&rc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}pe(zs,"defaults",{}),pe(zs,"defaultRoutes");function x3(t,e){const n=t.options.ticks,r=b3(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?T3(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return k3(e,c,i,o/s),c;const h=E3(i,e,s);if(o>0){let d,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(yu(e,c,h,Le(y)?0:a-y,a),d=0,m=o-1;d<m;d++)yu(e,c,h,i[d],i[d+1]);return yu(e,c,h,l,Le(y)?e.length:l+y),c}return yu(e,c,h),c}function b3(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function E3(t,e,n){const r=I3(t),s=e.length/n;if(!r)return Math.max(s,1);const i=pU(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function T3(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function k3(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function yu(t,e,n,r,s){const i=ve(r,0),o=Math.min(ve(s,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(i+a*n))}function I3(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const S3=t=>t==="left"?"right":t==="right"?"left":t,Ex=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Tx=(t,e)=>Math.min(e||t,t);function kx(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function A3(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function C3(t,e){Ae(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function La(t){return t.drawTicks?t.tickLength:0}function Ix(t,e){if(!t.display)return 0;const n=nn(t.font,e),r=rr(t.padding);return(Tt(t.text)?t.text.length:1)*n.lineHeight+r.height}function R3(t,e){return Wi(t,{scale:e,type:"scale"})}function P3(t,e,n){return Wi(t,{tick:n,index:e,type:"tick"})}function N3(t,e,n){let r=YS(t);return(n&&e!=="right"||!n&&e==="right")&&(r=S3(r)),r}function D3(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,m,y,x;const E=o-s,T=a-i;if(t.isHorizontal()){if(y=pn(r,i,a),ke(n)){const _=Object.keys(n)[0],v=n[_];x=h[_].getPixelForValue(v)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=Ex(t,n,e);m=a-i}else{if(ke(n)){const _=Object.keys(n)[0],v=n[_];y=h[_].getPixelForValue(v)-T+e}else n==="center"?y=(c.left+c.right)/2-T+e:y=Ex(t,n,e);x=pn(r,o,s),d=n==="left"?-Yn:Yn}return{titleX:y,titleY:x,maxWidth:m,rotation:d}}class la extends zs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=ar(e,Number.POSITIVE_INFINITY),n=ar(n,Number.NEGATIVE_INFINITY),r=ar(r,Number.POSITIVE_INFINITY),s=ar(s,Number.NEGATIVE_INFINITY),{min:ar(e,r),max:ar(n,s),minDefined:Fn(e),maxDefined:Fn(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:ar(n,ar(r,n)),max:ar(r,ar(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ue(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=YU(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?kx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=x3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ue(this.options.afterUpdate,[this])}beforeSetDimensions(){Ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ue(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ue(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Ue(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Tx(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,m=h.highest.height,y=Dn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),d+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-La(e.grid)-n.padding-Ix(e.title,this.chart.options.font),c=Math.sqrt(d*d+m*m),o=_U(Math.min(Math.asin(Dn((h.highest.height+6)/a,-1,1)),Math.asin(Dn(l/c,-1,1))-Math.asin(Dn(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ue(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ue(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ix(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=La(i)+l):(e.height=this.maxHeight,e.width=La(i)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:m}=this._getLabelSizes(),y=r.padding*2,x=yi(this.labelRotation),E=Math.cos(x),T=Math.sin(x);if(a){const _=r.mirror?0:T*d.width+E*m.height;e.height=Math.min(this.maxHeight,e.height+_+y)}else{const _=r.mirror?0:E*d.width+T*m.height;e.width=Math.min(this.maxWidth,e.width+_+y)}this._calculatePadding(c,h,T,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?c?(m=s*e.width,y=r*n.height):(m=r*e.height,y=s*n.width):i==="start"?y=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,y=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((y-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;i==="start"?(h=0,d=e.height):i==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ue(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Le(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=kx(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Tx(n,r));let c=0,h=0,d,m,y,x,E,T,_,v,b,R,N;for(d=0;d<n;d+=l){if(x=e[d].label,E=this._resolveTickFontOptions(d),s.font=T=E.string,_=i[T]=i[T]||{data:{},gc:[]},v=E.lineHeight,b=R=0,!Le(x)&&!Tt(x))b=nx(s,_.data,_.gc,b,x),R=v;else if(Tt(x))for(m=0,y=x.length;m<y;++m)N=x[m],!Le(N)&&!Tt(N)&&(b=nx(s,_.data,_.gc,b,N),R+=v);o.push(b),a.push(R),c=Math.max(b,c),h=Math.max(R,h)}C3(i,n);const M=o.indexOf(c),k=a.indexOf(h),w=A=>({width:o[A]||0,height:a[A]||0});return{first:w(0),last:w(n-1),widest:w(M),highest:w(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return xU(this._alignToPixels?ri(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=P3(this.getContext(),e,r))}return this.$context||(this.$context=R3(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=yi(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),m=La(i),y=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,T=E/2,_=function(re){return ri(r,re,E)};let v,b,R,N,M,k,w,A,C,P,O,I;if(o==="top")v=_(this.bottom),k=this.bottom-m,A=v-T,P=_(e.top)+T,I=e.bottom;else if(o==="bottom")v=_(this.top),P=e.top,I=_(e.bottom)-T,k=v+T,A=this.top+m;else if(o==="left")v=_(this.right),M=this.right-m,w=v-T,C=_(e.left)+T,O=e.right;else if(o==="right")v=_(this.left),C=e.left,O=_(e.right)-T,M=v+T,w=this.left+m;else if(n==="x"){if(o==="center")v=_((e.top+e.bottom)/2+.5);else if(ke(o)){const re=Object.keys(o)[0],he=o[re];v=_(this.chart.scales[re].getPixelForValue(he))}P=e.top,I=e.bottom,k=v+T,A=k+m}else if(n==="y"){if(o==="center")v=_((e.left+e.right)/2);else if(ke(o)){const re=Object.keys(o)[0],he=o[re];v=_(this.chart.scales[re].getPixelForValue(he))}M=v-T,w=M-m,C=e.left,O=e.right}const W=ve(s.ticks.maxTicksLimit,d),H=Math.max(1,Math.ceil(d/W));for(b=0;b<d;b+=H){const re=this.getContext(b),he=i.setContext(re),B=a.setContext(re),Q=he.lineWidth,q=he.color,fe=B.dash||[],se=B.dashOffset,j=he.tickWidth,ee=he.tickColor,oe=he.tickBorderDash||[],we=he.tickBorderDashOffset;R=A3(this,b,l),R!==void 0&&(N=ri(r,R,Q),c?M=w=C=O=N:k=A=P=I=N,y.push({tx1:M,ty1:k,tx2:w,ty2:A,x1:C,y1:P,x2:O,y2:I,width:Q,color:q,borderDash:fe,borderDashOffset:se,tickWidth:j,tickColor:ee,tickBorderDash:oe,tickBorderDashOffset:we}))}return this._ticksLength=d,this._borderValue=v,y}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=i,m=La(r.grid),y=m+h,x=d?-h:y,E=-yi(this.labelRotation),T=[];let _,v,b,R,N,M,k,w,A,C,P,O,I="middle";if(s==="top")M=this.bottom-x,k=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+x,k=this._getXAxisLabelAlignment();else if(s==="left"){const H=this._getYAxisLabelAlignment(m);k=H.textAlign,N=H.x}else if(s==="right"){const H=this._getYAxisLabelAlignment(m);k=H.textAlign,N=H.x}else if(n==="x"){if(s==="center")M=(e.top+e.bottom)/2+y;else if(ke(s)){const H=Object.keys(s)[0],re=s[H];M=this.chart.scales[H].getPixelForValue(re)+y}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")N=(e.left+e.right)/2-y;else if(ke(s)){const H=Object.keys(s)[0],re=s[H];N=this.chart.scales[H].getPixelForValue(re)}k=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?I="top":l==="end"&&(I="bottom"));const W=this._getLabelSizes();for(_=0,v=a.length;_<v;++_){b=a[_],R=b.label;const H=i.setContext(this.getContext(_));w=this.getPixelForTick(_)+i.labelOffset,A=this._resolveTickFontOptions(_),C=A.lineHeight,P=Tt(R)?R.length:1;const re=P/2,he=H.color,B=H.textStrokeColor,Q=H.textStrokeWidth;let q=k;o?(N=w,k==="inner"&&(_===v-1?q=this.options.reverse?"left":"right":_===0?q=this.options.reverse?"right":"left":q="center"),s==="top"?c==="near"||E!==0?O=-P*C+C/2:c==="center"?O=-W.highest.height/2-re*C+C:O=-W.highest.height+C/2:c==="near"||E!==0?O=C/2:c==="center"?O=W.highest.height/2-re*C:O=W.highest.height-P*C,d&&(O*=-1),E!==0&&!H.showLabelBackdrop&&(N+=C/2*Math.sin(E))):(M=w,O=(1-P)*C/2);let fe;if(H.showLabelBackdrop){const se=rr(H.backdropPadding),j=W.heights[_],ee=W.widths[_];let oe=O-se.top,we=0-se.left;switch(I){case"middle":oe-=j/2;break;case"bottom":oe-=j;break}switch(k){case"center":we-=ee/2;break;case"right":we-=ee;break;case"inner":_===v-1?we-=ee:_>0&&(we-=ee/2);break}fe={left:we,top:oe,width:ee+se.width,height:j+se.height,color:H.backdropColor}}T.push({label:R,font:A,textOffset:O,options:{rotation:E,color:he,strokeColor:B,strokeWidth:Q,textAlign:q,textBaseline:I,translation:[N,M],backdrop:fe}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-yi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,h;return n==="left"?s?(h=this.right+i,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?s?(h=this.left+i,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,m;this.isHorizontal()?(c=ri(e,this.left,o)-o/2,h=ri(e,this.right,a)+a/2,d=m=l):(d=ri(e,this.top,o)-o/2,m=ri(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Qy(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Hh(r,c,0,h,l,a)}s&&Yy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=nn(r.font),o=rr(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ke(n)?(l+=o.bottom,Tt(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:m}=D3(this,l,n,a);Hh(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:m,textAlign:N3(a,n,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ve(e.grid&&e.grid.z,-1),s=ve(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==la.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return nn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class _u{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;L3(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,O3(e,o,r),this.override&&ot.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in ot[s]&&(delete ot[s][r],this.override&&delete Vi[r])}}function O3(t,e,n){const r=nc(Object.create(null),[n?ot.get(n):{},ot.get(e),t.defaults]);ot.set(e,r),t.defaultRoutes&&M3(e,t.defaultRoutes),t.descriptors&&ot.describe(e,t.descriptors)}function M3(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ot.route(i,s,l,a)})}function L3(t){return"id"in t&&"defaults"in t}class j3{constructor(){this.controllers=new _u(El,"datasets",!0),this.elements=new _u(zs,"elements"),this.plugins=new _u(Object,"plugins"),this.scales=new _u(la,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Ae(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=qy(e);Ue(r["before"+s],[],r),n[e](r),Ue(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var ur=new j3;class V3{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Ue(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Le(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ve(r.options&&r.options.plugins,{}),i=F3(r);return s===!1&&!n?[]:B3(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function F3(t){const e={},n=[],r=Object.keys(ur.plugins.items);for(let i=0;i<r.length;i++)n.push(ur.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function U3(t,e){return!e&&t===!1?null:t===!0?{}:t}function B3(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=U3(r[l],s);c!==null&&i.push({plugin:a,options:z3(t.config,{plugin:a,local:n[l]},c,o)})}return i}function z3(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Rm(t,e){const n=ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function $3(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function H3(t,e){return t===e?"_index_":"_value_"}function Sx(t){if(t==="x"||t==="y"||t==="r")return t}function W3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Pm(t,...e){if(Sx(t))return t;for(const n of e){const r=n.axis||W3(n.position)||t.length>1&&Sx(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ax(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function q3(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Ax(t,"x",n[0])||Ax(t,"y",n[0])}return{}}function K3(t,e){const n=Vi[t.type]||{scales:{}},r=e.scales||{},s=Rm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ke(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Pm(o,a,q3(o,t),ot.scales[a.type]),c=H3(l,s),h=n.scales||{};i[o]=_l(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Rm(a,e),h=(Vi[a]||{}).scales||{};Object.keys(h).forEach(d=>{const m=$3(d,l),y=o[m+"AxisID"]||m;i[y]=i[y]||Object.create(null),_l(i[y],[{axis:m},r[y],h[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];_l(a,[ot.scales[a.type],ot.scale])}),i}function g1(t){const e=t.options||(t.options={});e.plugins=ve(e.plugins,{}),e.scales=K3(t,e)}function y1(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function G3(t){return t=t||{},t.data=y1(t.data),g1(t),t}const Cx=new Map,_1=new Set;function vu(t,e){let n=Cx.get(t);return n||(n=e(),Cx.set(t,n),_1.add(n)),n}const ja=(t,e,n)=>{const r=Bh(e,n);r!==void 0&&t.add(r)};class Q3{constructor(e){this._config=G3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=y1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),g1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return vu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return vu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return vu(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ja(l,e,d))),h.forEach(d=>ja(l,s,d)),h.forEach(d=>ja(l,Vi[i]||{},d)),h.forEach(d=>ja(l,ot,d)),h.forEach(d=>ja(l,Sm,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),_1.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Vi[n]||{},ot.datasets[n]||{},{type:n},ot,Sm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Rx(this._resolverCache,e,s);let l=o;if(X3(o,n)){i.$shared=!1,r=Bs(r)?r():r;const c=this.createResolver(e,r,a);l=Ko(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Rx(this._resolverCache,e,r);return ke(n)?Ko(i,n,void 0,s):i}}function Rx(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Xy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const Y3=t=>ke(t)&&Object.getOwnPropertyNames(t).some(e=>Bs(t[e]));function X3(t,e){const{isScriptable:n,isIndexable:r}=t1(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Bs(a)||Y3(a))||o&&Tt(a))return!0}return!1}var J3="4.5.0";const Z3=["top","bottom","left","right","chartArea"];function Px(t,e){return t==="top"||t==="bottom"||Z3.indexOf(t)===-1&&e==="x"}function Nx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Dx(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ue(n&&n.onComplete,[t],e)}function e6(t){const e=t.chart,n=e.options.animation;Ue(n&&n.onProgress,[t],e)}function v1(t){return e0()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const qu={},Ox=t=>{const e=v1(t);return Object.values(qu).filter(n=>n.canvas===e).pop()};function t6(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function n6(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var ns;let Vd=(ns=class{static register(...e){ur.add(...e),Mx()}static unregister(...e){ur.remove(...e),Mx()}constructor(e,n){const r=this.config=new Q3(n),s=v1(e),i=Ox(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||w3(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=iU(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new V3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=IU(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],qu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Er.listen(this,"complete",Dx),Er.listen(this,"progress",e6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Le(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ur}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ox(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rx(this.canvas,this.ctx),this}stop(){return Er.stop(this),this}resize(e,n){Er.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ox(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ue(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ae(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Pm(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Ae(i,o=>{const a=o.options,l=a.id,c=Pm(l,a),h=ve(a.type,o.dtype);(a.position===void 0||Px(a.position,c)!==Px(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const m=ur.getScale(h);d=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Ae(s,(o,a)=>{o||delete r[a]}),Ae(r,o=>{vs.configure(this,o,o.options),vs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Nx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Rm(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ur.getController(a),{datasetElementType:c,dataElementType:h}=ot.datasets[a];Object.assign(l,{dataElementType:ur.getElement(h),datasetElementType:c&&ur.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ae(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),m=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(m),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Ae(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Nx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ae(this.scales,e=>{vs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Kw(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;t6(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Kw(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vs.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ae(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Bs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Er.has(this)?this.attached&&!Er.running(this)&&Er.start(this):(this.draw(),Dx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=D5(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Qy(n,s),e.controller.draw(),s&&Yy(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return sc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Z5.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);zh(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Er.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),rx(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete qu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Ae(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ae(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ae(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Fh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=hU(e),c=n6(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ue(i.onHover,[e,a,this],this),l&&Ue(i.onClick,[e,a,this],this));const h=!Fh(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},pe(ns,"defaults",ot),pe(ns,"instances",qu),pe(ns,"overrides",Vi),pe(ns,"registry",ur),pe(ns,"version",J3),pe(ns,"getChart",Ox),ns);function Mx(){return Ae(Vd.instances,t=>t._plugins.invalidate())}function w1(t,e,n=e){t.lineCap=ve(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ve(n.borderDash,e.borderDash)),t.lineDashOffset=ve(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ve(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ve(n.borderWidth,e.borderWidth),t.strokeStyle=ve(n.borderColor,e.borderColor)}function r6(t,e,n){t.lineTo(n.x,n.y)}function s6(t){return t.stepped?UU:t.tension||t.cubicInterpolationMode==="monotone"?BU:r6}function x1(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),h=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function i6(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=x1(s,n,r),h=s6(i);let{move:d=!0,reverse:m}=r||{},y,x,E;for(y=0;y<=c;++y)x=s[(a+(m?c-y:y))%o],!x.skip&&(d?(t.moveTo(x.x,x.y),d=!1):h(t,E,x,m,i.stepped),E=x);return l&&(x=s[(a+(m?c:0))%o],h(t,E,x,m,i.stepped)),!!l}function o6(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=x1(s,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,m,y,x,E,T,_;const v=R=>(o+(c?a-R:R))%i,b=()=>{E!==T&&(t.lineTo(h,T),t.lineTo(h,E),t.lineTo(h,_))};for(l&&(y=s[v(0)],t.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=s[v(m)],y.skip)continue;const R=y.x,N=y.y,M=R|0;M===x?(N<E?E=N:N>T&&(T=N),h=(d*h+R)/++d):(b(),t.lineTo(R,N),x=M,d=0,E=T=N),_=N}b()}function Nm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?o6:i6}function a6(t){return t.stepped?w5:t.tension||t.cubicInterpolationMode==="monotone"?x5:ui}function l6(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),w1(t,e.options),t.stroke(s)}function c6(t,e,n,r){const{segments:s,options:i}=e,o=Nm(e);for(const a of s)w1(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const u6=typeof Path2D=="function";function h6(t,e,n,r){u6&&!e.options.segment?l6(t,e,n,r):c6(t,e,n,r)}class Ja extends zs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;d5(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=C5(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=I5(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=a6(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:m}=o[c],y=i[d],x=i[m];if(y===x){a.push(y);continue}const E=Math.abs((s-y[n])/(x[n]-y[n])),T=l(y,x,E,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Nm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=Nm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),h6(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}pe(Ja,"id","line"),pe(Ja,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),pe(Ja,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),pe(Ja,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Lx(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Ku extends zs{constructor(n){super();pe(this,"parsed");pe(this,"skip");pe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Lx(this,n,"x",r)}inYRange(n,r){return Lx(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!sc(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Am(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}pe(Ku,"id","point"),pe(Ku,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),pe(Ku,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const jx=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},d6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Vx extends zs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ue(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=nn(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=jx(r,i);let c,h;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let d=e;i.textAlign="left",i.textBaseline="middle";let m=-1,y=-h;return this.legendItems.forEach((x,E)=>{const T=r+n/2+i.measureText(x.text).width;(E===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(E>0?0:1)]=0,y+=h,m++),l[E]={left:0,top:y,row:m,width:T,height:s},c[c.length-1]+=T+a}),d}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,m=0,y=0,x=0,E=0;return this.legendItems.forEach((T,_)=>{const{itemWidth:v,itemHeight:b}=f6(r,n,i,T,s);_>0&&y+b+2*a>h&&(d+=m+a,c.push({width:m,height:y}),x+=m+a,E++,m=y=0),l[_]={left:x,top:y,col:E,width:v,height:b},m=Math.max(m,v),y+=b+a}),d+=m,c.push({width:m,height:y}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=So(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=pn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=pn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=pn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=pn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Qy(e,this),this._draw(),Yy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=ot.color,l=So(e.rtl,this.left,this.width),c=nn(o.font),{padding:h}=o,d=c.size,m=d/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:T}=jx(o,d),_=function(M,k,w){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;s.save();const A=ve(w.lineWidth,1);if(s.fillStyle=ve(w.fillStyle,a),s.lineCap=ve(w.lineCap,"butt"),s.lineDashOffset=ve(w.lineDashOffset,0),s.lineJoin=ve(w.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=ve(w.strokeStyle,a),s.setLineDash(ve(w.lineDash,[])),o.usePointStyle){const C={radius:E*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:A},P=l.xPlus(M,x/2),O=k+m;ZS(s,C,P,O,o.pointStyleWidth&&x)}else{const C=k+Math.max((d-E)/2,0),P=l.leftForLtr(M,x),O=bl(w.borderRadius);s.beginPath(),Object.values(O).some(I=>I!==0)?Cm(s,{x:P,y:C,w:x,h:E,radius:O}):s.rect(P,C,x,E),s.fill(),A!==0&&s.stroke()}s.restore()},v=function(M,k,w){Hh(s,w.text,M,k+T/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?y={x:pn(i,this.left+h,this.right-r[0]),y:this.top+h+R,line:0}:y={x:this.left+h,y:pn(i,this.top+R+h,this.bottom-n[0].height),line:0},o1(this.ctx,e.textDirection);const N=T+h;this.legendItems.forEach((M,k)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const w=s.measureText(M.text).width,A=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),C=x+m+w;let P=y.x,O=y.y;l.setWidth(this.width),b?k>0&&P+C+h>this.right&&(O=y.y+=N,y.line++,P=y.x=pn(i,this.left+h,this.right-r[y.line])):k>0&&O+N>this.bottom&&(P=y.x=P+n[y.line].width+h,y.line++,O=y.y=pn(i,this.top+R+h,this.bottom-n[y.line].height));const I=l.x(P);if(_(I,O,M),P=SU(A,P+x+m,b?P+C:this.right,e.rtl),v(l.x(P),O,M),b)y.x+=C+h;else if(typeof M.text!="string"){const W=c.lineHeight;y.y+=b1(M,W)+h}else y.y+=N}),a1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=nn(n.font),s=rr(n.padding);if(!n.display)return;const i=So(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let h,d=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+c,d=pn(e.align,d,this.right-m);else{const x=this.columnSizes.reduce((E,T)=>Math.max(E,T.height),0);h=c+pn(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const y=pn(a,d,d+m);o.textAlign=i.textAlign(YS(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Hh(o,n.text,y,h,r)}_computeTitleHeight(){const e=this.options.title,n=nn(e.font),r=rr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Ya(e,this.left,this.right)&&Ya(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Ya(e,s.left,s.left+s.width)&&Ya(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!g6(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=d6(s,r);s&&!i&&Ue(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Ue(n.onHover,[e,r,this],this)}else r&&Ue(n.onClick,[e,r,this],this)}}function f6(t,e,n,r,s){const i=p6(r,t,e,n),o=m6(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function p6(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function m6(t,e,n){let r=t;return typeof e.text!="string"&&(r=b1(e,n)),r}function b1(t,e){const n=t.text?t.text.length:0;return e*n}function g6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var y6={id:"legend",_element:Vx,start(t,e,n){const r=t.legend=new Vx({ctx:t.ctx,options:n,chart:t});vs.configure(t,r,n),vs.addBox(t,r)},stop(t){vs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;vs.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=rr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Za={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Im(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function lr(t,e){return e&&(Tt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Tr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function _6(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Fx(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=nn(e.bodyFont),c=nn(e.titleFont),h=nn(e.footerFont),d=i.length,m=s.length,y=r.length,x=rr(e.padding);let E=x.height,T=0,_=r.reduce((R,N)=>R+N.before.length+N.lines.length+N.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(E+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=y*R+(_-y)*l.lineHeight+(_-1)*e.bodySpacing}m&&(E+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let v=0;const b=function(R){T=Math.max(T,n.measureText(R).width+v)};return n.save(),n.font=c.string,Ae(t.title,b),n.font=l.string,Ae(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,Ae(r,R=>{Ae(R.before,b),Ae(R.lines,b),Ae(R.after,b)}),v=0,n.font=h.string,Ae(t.footer,b),n.restore(),T+=x.width,{width:T,height:E}}function v6(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function w6(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function x6(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),w6(c,t,e,n)&&(c="center"),c}function Ux(t,e,n){const r=n.yAlign||e.yAlign||v6(t,n);return{xAlign:n.xAlign||e.xAlign||x6(t,e,n,r),yAlign:r}}function b6(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function E6(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Bx(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:h,topRight:d,bottomLeft:m,bottomRight:y}=bl(o);let x=b6(e,a);const E=E6(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(h,m)+s:a==="right"&&(x+=Math.max(d,y)+s),{x:Dn(x,0,r.width-e.width),y:Dn(E,0,r.height-e.height)}}function wu(t,e,n){const r=rr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function zx(t){return lr([],Tr(t))}function T6(t,e,n){return Wi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function $x(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const E1={beforeTitle:br,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:br,beforeBody:br,beforeLabel:br,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Le(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:br,afterBody:br,beforeFooter:br,footer:br,afterFooter:br};function Jt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?E1[e].call(n,r):s}class Dm extends zs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new c1(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=T6(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Jt(r,"beforeTitle",this,e),i=Jt(r,"title",this,e),o=Jt(r,"afterTitle",this,e);let a=[];return a=lr(a,Tr(s)),a=lr(a,Tr(i)),a=lr(a,Tr(o)),a}getBeforeBody(e,n){return zx(Jt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Ae(e,i=>{const o={before:[],lines:[],after:[]},a=$x(r,i);lr(o.before,Tr(Jt(a,"beforeLabel",this,i))),lr(o.lines,Jt(a,"label",this,i)),lr(o.after,Tr(Jt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return zx(Jt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Jt(r,"beforeFooter",this,e),i=Jt(r,"footer",this,e),o=Jt(r,"afterFooter",this,e);let a=[];return a=lr(a,Tr(s)),a=lr(a,Tr(i)),a=lr(a,Tr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(_6(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,m)=>e.filter(h,d,m,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),Ae(a,h=>{const d=$x(e.callbacks,h);s.push(Jt(d,"labelColor",this,h)),i.push(Jt(d,"labelPointStyle",this,h)),o.push(Jt(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Za[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Fx(this,r),c=Object.assign({},a,l),h=Ux(this.chart,r,c),d=Bx(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=bl(a),{x:m,y}=e,{width:x,height:E}=n;let T,_,v,b,R,N;return i==="center"?(R=y+E/2,s==="left"?(T=m,_=T-o,b=R+o,N=R-o):(T=m+x,_=T+o,b=R-o,N=R+o),v=T):(s==="left"?_=m+Math.max(l,h)+o:s==="right"?_=m+x-Math.max(c,d)-o:_=this.caretX,i==="top"?(b=y,R=b-o,T=_-o,v=_+o):(b=y+E,R=b+o,T=_+o,v=_-o),N=b),{x1:T,x2:_,x3:v,y1:b,y2:R,y3:N}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=So(r.rtl,this.x,this.width);for(e.x=wu(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=nn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,h=nn(i.bodyFont),d=wu(this,"left",i),m=s.x(d),y=l<h.lineHeight?(h.lineHeight-l)/2:0,x=n.y+y;if(i.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=s.leftForLtr(m,c)+c/2,_=x+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Am(e,E,T,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Am(e,E,T,_)}else{e.lineWidth=ke(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=s.leftForLtr(m,c),T=s.leftForLtr(s.xPlus(m,1),c-2),_=bl(o.borderRadius);Object.values(_).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Cm(e,{x:E,y:x,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Cm(e,{x:T,y:x+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=nn(r.bodyFont);let m=d.lineHeight,y=0;const x=So(r.rtl,this.x,this.width),E=function(w){n.fillText(w,x.x(e.x+y),e.y+m/2),e.y+=m+i},T=x.textAlign(o);let _,v,b,R,N,M,k;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=wu(this,T,r),n.fillStyle=r.bodyColor,Ae(this.beforeBody,E),y=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,M=s.length;R<M;++R){for(_=s[R],v=this.labelTextColors[R],n.fillStyle=v,Ae(_.before,E),b=_.lines,a&&b.length&&(this._drawColorBox(n,e,R,x,r),m=Math.max(d.lineHeight,l)),N=0,k=b.length;N<k;++N)E(b[N]),m=d.lineHeight;Ae(_.after,E)}y=0,m=d.lineHeight,Ae(this.afterBody,E),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=So(r.rtl,this.x,this.width);for(e.x=wu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=nn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:m,bottomLeft:y,bottomRight:x}=bl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+h-x),n.quadraticCurveTo(a+c,l+h,a+c-x,l+h),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+y,l+h),n.quadraticCurveTo(a,l+h,a,l+h-y),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Za[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Fx(this,e),l=Object.assign({},o,this._size),c=Ux(n,e,l),h=Bx(e,l,c,n);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=rr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),o1(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),a1(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Fh(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Fh(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Za[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}pe(Dm,"positioners",Za);var k6={id:"tooltip",_element:Dm,positioners:Za,afterInit(t,e,n){n&&(t.tooltip=new Dm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:E1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const I6=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function S6(t,e,n,r){const s=t.indexOf(e);if(s===-1)return I6(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const A6=(t,e)=>t===null?null:Dn(Math.round(t),0,e);function Hx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Om extends la{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Le(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:S6(r,e,ve(n,e),this._addedLabels),A6(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Hx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}pe(Om,"id","category"),pe(Om,"defaults",{ticks:{callback:Hx}});function C6(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:m}=t,y=i||1,x=h-1,{min:E,max:T}=e,_=!Le(o),v=!Le(a),b=!Le(c),R=(T-E)/(d+1);let N=Qw((T-E)/x/y)*y,M,k,w,A;if(N<1e-14&&!_&&!v)return[{value:E},{value:T}];A=Math.ceil(T/N)-Math.floor(E/N),A>x&&(N=Qw(A*N/x/y)*y),Le(l)||(M=Math.pow(10,l),N=Math.ceil(N*M)/M),s==="ticks"?(k=Math.floor(E/N)*N,w=Math.ceil(T/N)*N):(k=E,w=T),_&&v&&i&&gU((a-o)/i,N/1e3)?(A=Math.round(Math.min((a-o)/N,h)),N=(a-o)/A,k=o,w=a):b?(k=_?o:k,w=v?a:w,A=c-1,N=(w-k)/A):(A=(w-k)/N,vl(A,Math.round(A),N/1e3)?A=Math.round(A):A=Math.ceil(A));const C=Math.max(Yw(N),Yw(k));M=Math.pow(10,Le(l)?C:l),k=Math.round(k*M)/M,w=Math.round(w*M)/M;let P=0;for(_&&(m&&k!==o?(n.push({value:o}),k<o&&P++,vl(Math.round((k+P*N)*M)/M,o,Wx(o,R,t))&&P++):k<o&&P++);P<A;++P){const O=Math.round((k+P*N)*M)/M;if(v&&O>a)break;n.push({value:O})}return v&&m&&w!==a?n.length&&vl(n[n.length-1].value,a,Wx(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!v||w===a)&&n.push({value:w}),n}function Wx(t,e,{horizontal:n,minRotation:r}){const s=yi(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class R6 extends la{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Le(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=qo(s),c=qo(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=C6(s,i);return e.bounds==="ticks"&&yU(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return XS(e,this.chart.options.locale,this.options.ticks.format)}}class Mm extends R6{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Fn(e)?e:0,this.max=Fn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=yi(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}pe(Mm,"id","linear"),pe(Mm,"defaults",{ticks:{callback:JS.formatters.numeric}});const Fd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},en=Object.keys(Fd);function qx(t,e){return t-e}function Kx(t,e){if(Le(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Fn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(rc(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Gx(t,e,n,r){const s=en.length;for(let i=en.indexOf(t);i<s-1;++i){const o=Fd[en[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return en[i]}return en[s-1]}function P6(t,e,n,r,s){for(let i=en.length-1;i>=en.indexOf(n);i--){const o=en[i];if(Fd[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return en[n?en.indexOf(n):0]}function N6(t){for(let e=en.indexOf(t)+1,n=en.length;e<n;++e)if(Fd[en[e]].common)return en[e]}function Qx(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Ky(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function D6(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Yx(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:D6(t,r,s,n)}class Kh extends la{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new G5._date(e.adapters.date);s.init(n),_l(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Kx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Fn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Fn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=EU(s,i,o);return this._unit=n.unit||(r.autoSkip?Gx(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):P6(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:N6(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Yx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Dn(n,0,o),r=Dn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Gx(i.minUnit,n,r,this._getLabelCapacity(n)),a=ve(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=rc(l)||l===!0,h={};let d=n,m,y;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(m=d,y=0;m<r;m=+e.add(m,a,o),y++)Qx(h,m,x);return(m===r||s.bounds==="ticks"||y===1)&&Qx(h,m,x),Object.keys(h).sort(qx).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Ue(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],m=r[n],y=c&&d&&m&&m.major;return this._adapter.format(e,s||(y?d:h))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=yi(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Yx(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Kx(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return kU(e.sort(qx))}}pe(Kh,"id","time"),pe(Kh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xu(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=_i(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=_i(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class Xx extends Kh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=xu(n,this.min),this._tableRange=xu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(xu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return xu(this._table,r*this._tableRange+this._minPos,!0)}}pe(Xx,"id","timeseries"),pe(Xx,"defaults",Kh.defaults);const T1="label";function Jx(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function O6(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function k1(t,e){t.labels=e}function I1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T1;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function M6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T1;const n={labels:[],datasets:[]};return k1(n,t.labels),I1(n,t.datasets,e),n}function L6(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...m}=t,y=D.useRef(null),x=D.useRef(null),E=()=>{y.current&&(x.current=new Vd(y.current,{type:o,data:M6(a,i),options:l&&{...l},plugins:c}),Jx(e,x.current))},T=()=>{Jx(e,null),x.current&&(x.current.destroy(),x.current=null)};return D.useEffect(()=>{!s&&x.current&&l&&O6(x.current,l)},[s,l]),D.useEffect(()=>{!s&&x.current&&k1(x.current.config.data,a.labels)},[s,a.labels]),D.useEffect(()=>{!s&&x.current&&a.datasets&&I1(x.current.config.data,a.datasets,i)},[s,a.datasets]),D.useEffect(()=>{x.current&&(s?(T(),setTimeout(E)):x.current.update(d))},[s,l,a.labels,a.datasets,d]),D.useEffect(()=>{x.current&&(T(),setTimeout(E))},[o]),D.useEffect(()=>(E(),()=>T()),[]),Qh.createElement("canvas",{ref:y,role:"img",height:n,width:r,...m},h)}const j6=D.forwardRef(L6);function V6(t,e){return Vd.register(e),D.forwardRef((n,r)=>Qh.createElement(j6,{...n,ref:r,type:t}))}const F6=V6("line",Hu);Vd.register(Om,Mm,Ku,Ja,k6,y6);function S1({points:t=[],labels:e,yRange:n={min:0,max:1},title:r}){const i={labels:Array.isArray(e)&&e.length===t.length?e:t.map((a,l)=>`T${l+1}`),datasets:[{label:r||"Risk",data:t,borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.2)"}]},o={responsive:!0,plugins:{legend:{display:!1}},scales:{y:{min:(n==null?void 0:n.min)??0,max:(n==null?void 0:n.max)??1}}};return f.jsx(F6,{data:i,options:o})}const Xs="",Ud={"x-user-id":"demo"};async function r0(){try{const t=wt.currentUser;if(t)return{Authorization:`Bearer ${await t.getIdToken()}`}}catch{}return{...Ud}}async function U6(){return(await fetch(`${Xs}/api/ai/health`)).json()}async function B6(t,{useOcr:e,lang:n}={}){const r=await fetch(`${Xs}/api/pdf-extract`,{method:"POST",headers:{"Content-Type":"application/json",...Ud},body:JSON.stringify({url:t,useOcr:e,lang:n})}),s=await r.text();let i={};try{i=s?JSON.parse(s):{}}catch{i={}}if(!r.ok){const o=(i==null?void 0:i.error)||(i==null?void 0:i.message)||`HTTP ${r.status}`,a=new Error(o);throw a.status=r.status,a.body=i,a}return i}function z6(t,{onProgress:e,signal:n}={}){return new Promise((r,s)=>{try{const i=new XMLHttpRequest,o=new FormData;if(o.append("file",t),i.open("POST",`${Xs}/functions/processReport`,!0),i.setRequestHeader("x-user-id",Ud["x-user-id"]),i.upload&&typeof e=="function"&&(i.upload.onprogress=a=>{if(!a.lengthComputable)return;const l=Math.min(99,Math.round(a.loaded/a.total*100));e(l)}),i.onreadystatechange=()=>{if(i.readyState===4)if(i.status>=200&&i.status<300)try{const a=JSON.parse(i.responseText||"{}");r(a)}catch{r({ok:!0})}else{let a="Upload failed";try{const c=JSON.parse(i.responseText||"{}");a=(c==null?void 0:c.error)||(c==null?void 0:c.message)||a;const h=new Error(a);return h.status=i.status,h.body=c,s(h)}catch{}const l=new Error(a);l.status=i.status,s(l)}},i.onerror=()=>s(new Error("Network error during upload")),i.onabort=()=>s(new Error("Upload canceled")),n)if(n.aborted)i.abort();else{const a=()=>i.abort();n.addEventListener("abort",a,{once:!0})}i.send(o)}catch(i){s(i)}})}async function $6(t){return(await fetch(`${Xs}/functions/analyzeCheckin`,{method:"POST",headers:{"Content-Type":"application/json",...Ud},body:JSON.stringify(t)})).json()}async function H6(t,e,n){const r=new URL(`${Xs}/functions/findNearbyAmbulance`);return r.searchParams.set("lat",String(t)),r.searchParams.set("lng",String(e)),Number.isFinite(n)&&r.searchParams.set("radiusMeters",String(n)),(await fetch(r.toString())).json()}async function W6(t,{signal:e}={}){const n=await fetch(`${Xs}/functions/chat`,{method:"POST",headers:{"Content-Type":"application/json",...await r0()},body:JSON.stringify(t),signal:e}),r=await n.text();let s=null;try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function A1(t){const e=new URL(`${Xs}/functions/riskSeries`);t&&e.searchParams.set("userId",String(t));const n=await fetch(e.toString(),{headers:{...await r0()}}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function q6(t,e){const n=await fetch(`${Xs}/functions/generateReportSummary`,{method:"POST",headers:{"Content-Type":"application/json",...await r0()},body:JSON.stringify({extractedData:t,ocrText:e})}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}function xn({className:t="",children:e}){return f.jsx("div",{className:`bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm ${t}`.trim(),children:e})}function Ds({className:t="",children:e}){return f.jsx("div",{className:`px-5 py-4 border-b border-slate-200 dark:border-slate-800 ${t}`.trim(),children:e})}function Os({className:t="",children:e}){return f.jsx("h2",{className:`text-base font-semibold tracking-tight text-slate-900 dark:text-slate-100 ${t}`.trim(),children:e})}function bn({className:t="",children:e}){return f.jsx("div",{className:`p-5 text-slate-800 dark:text-slate-200 ${t}`.trim(),children:e})}function Ao({size:t=16,className:e=""}){const n={width:t,height:t};return f.jsxs("svg",{className:`animate-spin text-blue-600 ${e}`,style:n,viewBox:"0 0 24 24",fill:"none",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}const C1=D.createContext({notify:()=>{}});function K6({children:t}){const[e,n]=D.useState([]),r=D.useCallback((i,o="info",a=3e3)=>{const l=Math.random().toString(36).slice(2);n(c=>c.concat({id:l,message:i,type:o})),setTimeout(()=>n(c=>c.filter(h=>h.id!==l)),a)},[]),s=D.useMemo(()=>({notify:r}),[r]);return f.jsxs(C1.Provider,{value:s,children:[t,f.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map(i=>f.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-900"}`,children:i.message},i.id))})]})}function ca(){return D.useContext(C1)}function G6({title:t,subtitle:e,cta:n}){return f.jsxs("section",{className:"mb-6 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6",children:[f.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-100",children:t}),e&&f.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:e}),n&&f.jsx("div",{className:"mt-4",children:n})]})}function Co({label:t,value:e,hint:n,accent:r="blue"}){const s={blue:"bg-blue-50 text-blue-700 dark:bg-slate-800 dark:text-blue-300",emerald:"bg-emerald-50 text-emerald-700 dark:bg-slate-800 dark:text-emerald-300",amber:"bg-amber-50 text-amber-700 dark:bg-slate-800 dark:text-amber-300",red:"bg-red-50 text-red-700 dark:bg-slate-800 dark:text-red-300"};return f.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[f.jsx("div",{className:`inline-block rounded px-2 py-0.5 text-xs ${s[r]}`,children:t}),f.jsx("div",{className:"mt-2 text-2xl font-semibold text-slate-900 dark:text-slate-100",children:e}),n&&f.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:n})]})}function Q6({onLocate:t}){const e=ea();return f.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[f.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Quick actions"}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(Te,{onClick:()=>e("/daily-checkin"),children:"Daily Check-in"}),f.jsx(Te,{variant:"secondary",onClick:()=>e("/upload-report"),children:"Upload Report"}),f.jsx(Te,{variant:"secondary",onClick:t,children:"Find Ambulance"})]})]})}function Y6({items:t=[]}){const e=t.length?t:[{type:"info",text:"Welcome! Start by running an analysis."},{type:"tip",text:"Upload a report to extract structured insights."}];return f.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[f.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Recent activity"}),f.jsx("ul",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300",children:e.map((n,r)=>f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:`mt-1 w-2 h-2 rounded-full ${n.type==="tip"?"bg-emerald-500":"bg-slate-400"}`}),f.jsx("span",{children:n.text})]},r))})]})}function X6(t){if(!t)return .5;const e=s=>({None:1,Normal:1,"Slept well – no trouble falling or staying asleep":1,"None – no unusual warmth":1,Mild:.7,"Mild – occasional discomfort":.7,"Mild – didn’t interfere with work":.7,"Mild – occasional queasiness":.7,"Mild – slightly tired":.7,"Mild – slight temperature fluctuation":.7,"Mild – occasional cough or shortness of breath":.7,"Slight irregularity – mild constipation/diarrhea":.7,"Slight – minor discomfort or frequency change":.7,"Minor – small rashes, bruises, or pimples":.7,"Mild – occasional lightheadedness":.7,Moderate:.4,"Moderate – noticeable, affects tasks":.4,"Moderate – interfered with tasks":.4,"Moderate – affected meals":.4,"Moderate – noticeable fatigue":.4,"Moderate – measurable fever (100–102°F / 37.7–38.8°C)":.4,"Moderate – daily cough or breathing difficulty":.4,"Moderate – frequent or loose stools":.4,"Moderate – frequent or painful urination":.4,"Noticeable – persistent rash, sores, or swelling":.4,"Moderate – dizziness affecting tasks":.4,"Moderate difficulty – frequent waking or poor sleep quality":.4,"Moderate – noticeable episodes affecting comfort":.4,Severe:.2,"Severe – persistent pain":.2,"Severe – unable to perform daily activities":.2,"Severe – persistent vomiting":.2,"Severe – could barely perform activities":.2,"Severe – high fever (>102°F / 38.8°C)":.2,"Severe – persistent cough or severe breathing issues":.2,"Severe – persistent diarrhea/constipation":.2,"Severe – inability to urinate normally or severe discomfort":.2,"Severe – bleeding, large lesions, or non-healing wounds":.2,"Severe – fainting or inability to stand":.2,"Severe – frequent or intense hot flashes":.2})[s]??.5,n=[e(t.ns_q1),e(t.ns_q2),e(t.ns_q3),e(t.ns_q4),e(t.ns_q5),e(t.ns_q6),e(t.ns_q7),e(t.ns_q8),e(t.ns_q9),e(t.ns_q10),e(t.ns_q11),e(t.ns_q12)],r=n.reduce((s,i)=>s+(typeof i=="number"?i:.5),0)/n.length;return Math.max(0,Math.min(1,Number(r.toFixed(3))))}function R1(t){return 1-X6(t)}function J6(){const{notify:t}=ca(),{user:e}=qr(),n=ea(),[r,s]=D.useState(null),[i,o]=D.useState(!1),[a,l]=D.useState(null),[c,h]=D.useState([]),[d,m]=D.useState([]),[y,x]=D.useState([]),[E,T]=D.useState({level:"Low",reason:"No data yet.",score:0});function _(b){var O,I;let R=0,N=0,M=0,k=0,w=0,A=0;for(const W of b){const H=(W==null?void 0:W.answers)||{},re=H.ns_q2&&H.ns_q2.toLowerCase().startsWith("mild")||((O=H.ns_q2)==null?void 0:O.toLowerCase().startsWith("moderate"))||((I=H.ns_q2)==null?void 0:I.toLowerCase().startsWith("severe")),he=H.ns_q11&&(H.ns_q11.toLowerCase().includes("hardly")||H.ns_q11.toLowerCase().includes("moderate difficulty")),B=H.ns_q5&&(H.ns_q5.toLowerCase().includes("very low")||H.ns_q5.toLowerCase()==="low"),Q=H.ns_q5&&H.ns_q5.toLowerCase().includes("fever"),q=H.ns_q3&&!H.ns_q3.toLowerCase().startsWith("none"),fe=H.ns_q4&&!H.ns_q4.toLowerCase().startsWith("none");re&&(R+=2,N+=1),he&&(R+=3,M+=1),B?(R+=4,w+=1):w=0,w>=5&&(k=Math.max(k,w)),(Q?1:0)+(q?1:0)+(fe?1:0)>=2&&(R+=6,A+=1)}let C="Low",P="No major recurring symptoms.";return N>=3&&M>=3&&(C="Mid",P="Frequent headaches with low sleep across several days."),k>=5&&(C="Mid",P="Sustained low mood/stress for 5+ days."),A>=2&&(C="High",P="Multiple symptoms clustered (e.g., nausea + weakness) on several days."),R>=20?(C="High",(!P||P==="No major recurring symptoms.")&&(P="Multiple risk factors accumulated in recent logs.")):R>=10&&C!=="High"&&(C="Mid",(!P||P==="No major recurring symptoms.")&&(P="Some recurring issues detected (sleep/mood/symptoms).")),{level:C,reason:P,score:R}}D.useEffect(()=>{async function b(){if(!(!bt||!e))try{const R=gl(bt,"users",e.uid,"dailyCheckins"),N=xm(R,dS("date","desc"),fS(30)),k=(await bm(N)).docs.map(W=>({id:W.id,...W.data()})),w=k.slice().reverse();let A=w.map(W=>R1(W.answers));const C=w.map(W=>{var H;return(H=W==null?void 0:W.date)!=null&&H.toDate?W.date.toDate().toLocaleDateString():""});h(k),m(A),x(C);try{const W=await A1(e.uid);W&&W.ok&&Array.isArray(W.points)&&W.points.length>0&&(m(W.points),Array.isArray(W.labels)&&W.labels.length===W.points.length&&x(W.labels.map(H=>{try{return new Date(H).toLocaleDateString()}catch{return H}})))}catch{}const P=k.slice(-7),I=_(k);T(I)}catch(R){console.error("[Dashboard] loadCheckins error:",R)}}b()},[e]);async function v(){try{if(l(null),o(!0),!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");t("Finding nearby ambulance services...","info"),await new Promise((b,R)=>{navigator.geolocation.getCurrentPosition(async N=>{try{const{latitude:M,longitude:k}=N.coords,w=await H6(M,k);if(!w||w.ok===!1){const C=w&&w.error?w.error:"Failed to fetch nearby services";throw new Error(C)}s(w);const A=Array.isArray(w.data)?w.data.length:0;t(`Found ${A} ambulance service${A===1?"":"s"}`,"success"),b()}catch(M){R(M)}},N=>{const M=N&&N.message?N.message:"Unable to retrieve location.";R(new Error(M))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}catch(b){const R=(b==null?void 0:b.message)||"Failed to find nearby ambulances";l(R),t(R,"error")}finally{o(!1)}}return f.jsxs("div",{children:[f.jsx(G6,{title:"AI Diagnostic & Triage Dashboard",subtitle:"Track your health, upload reports, and monitor trends.",cta:f.jsxs("div",{className:"flex gap-3 items-center",children:[f.jsx(Te,{onClick:()=>n("/daily-checkin"),children:"Daily Check-in"}),f.jsx(Te,{variant:"secondary",onClick:()=>n("/upload-report"),children:"Upload Report"}),f.jsx(Te,{variant:"secondary",onClick:v,children:"Find Ambulance"})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[f.jsx(xn,{className:`${E.level==="High"?"bg-rose-50 dark:bg-rose-900/20 border-rose-200 dark:border-rose-800":E.level==="Mid"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800"}`,children:f.jsxs(bn,{children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Health Risk"}),f.jsx("div",{className:`text-xl font-semibold ${E.level==="High"?"text-rose-700 dark:text-rose-300":E.level==="Mid"?"text-amber-700 dark:text-amber-300":"text-emerald-700 dark:text-emerald-300"}`,children:E.level})]}),f.jsx("div",{className:`px-3 py-1 rounded-full text-xs border ${E.level==="High"?"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/30 dark:text-rose-300 dark:border-rose-800":E.level==="Mid"?"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800":"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800"}`,children:"Last 30 days"})]}),f.jsx("p",{className:"mt-2 text-sm text-slate-700 dark:text-slate-300",children:E.reason})]})}),f.jsxs(xn,{className:"md:col-span-2",children:[f.jsx(Ds,{children:f.jsxs(Os,{children:["Risk Trend (last ",y.length," check-ins)"]})}),f.jsx(bn,{children:d.length>0?f.jsx("div",{className:"max-h-[220px]",children:f.jsx(S1,{points:d,labels:y,yRange:{min:0,max:1},title:"Rule-based risk"})}):f.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No check-ins yet. Your risk trend will appear here."})})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[f.jsx(Co,{label:"Check-ins today",value:c.filter(b=>{var M;const R=new Date;return((M=b==null?void 0:b.date)!=null&&M.toDate?b.date.toDate():new Date(b==null?void 0:b.date)).toDateString()===R.toDateString()}).length,hint:"Daily check-ins",accent:"blue"}),f.jsx(Co,{label:"Risk level",value:E.level,hint:"Based on recent data",accent:E.level==="High"?"red":E.level==="Mid"?"amber":"green"}),f.jsx(Co,{label:"Total check-ins",value:c.length,hint:"Last 30 days",accent:"purple"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx(Q6,{onLocate:v}),f.jsx(Y6,{})]})}),(i||a||r&&Array.isArray(r.data))&&f.jsx("div",{className:"mt-6",children:f.jsxs(xn,{children:[f.jsx(Ds,{children:f.jsx(Os,{children:"Nearby Ambulance Services"})}),f.jsxs(bn,{children:[i&&f.jsxs("div",{className:"text-slate-600 inline-flex items-center gap-2",children:[f.jsx(Ao,{})," Locating services..."]}),a&&f.jsx("div",{className:"text-red-600",children:a}),!i&&!a&&f.jsxs("ul",{className:"list-disc pl-6",children:[((r==null?void 0:r.data)||[]).map((b,R)=>f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:b.name})," — ",b.address||"Address N/A",typeof b.distance_meters=="number"?` • ${b.distance_meters} m`:"",b.rating?` • rating: ${b.rating}`:""]},R)),((r==null?void 0:r.data)||[]).length===0&&f.jsx("li",{children:"No ambulance services found nearby."})]})]})]})})]})}function Gn({className:t="",...e}){return f.jsx("input",{className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:ring-offset-0 outline-none ${t}`.trim(),...e})}const ii={"auth/invalid-email":"Please enter a valid email address.","auth/user-disabled":"This account has been disabled. Contact support if this is a mistake.","auth/user-not-found":"No account found with that email.","auth/wrong-password":"Incorrect password. Please try again.","auth/missing-password":"Please enter your password.","auth/too-many-requests":"Too many attempts. Please wait a moment and try again.","auth/network-request-failed":"Network error. Check your connection and try again.","auth/popup-closed-by-user":"Sign-in popup was closed before completing.","auth/popup-blocked":"Sign-in popup was blocked by your browser.","auth/cancelled-popup-request":"Another sign-in is already in progress.","auth/account-exists-with-different-credential":"An account with this email exists using a different sign-in method.","auth/invalid-credential":"Invalid credentials. Please try again.","auth/operation-not-allowed":"This sign-in method is disabled. Contact support.","auth/weak-password":"Please choose a stronger password (at least 6 characters).","auth/email-already-in-use":"An account with this email already exists."};function vi(t){if(!t)return"Something went wrong. Please try again.";const e=typeof t=="string"?t:t.code||t.message||"",n=ii[e]||ii[`auth/${e}`];if(n)return n;const r=(t.message||"").toLowerCase();return r.includes("user-not-found")?ii["auth/user-not-found"]:r.includes("wrong-password")?ii["auth/wrong-password"]:r.includes("email-already-in-use")?ii["auth/email-already-in-use"]:r.includes("invalid-email")?ii["auth/invalid-email"]:r.includes("weak-password")?ii["auth/weak-password"]:"Authentication failed. Please check your details and try again."}function Z6(){var P,O;const{user:t,login:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=qr(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,h]=D.useState(""),[d,m]=D.useState(""),[y,x]=D.useState("enter"),[E,T]=D.useState(!1),[_,v]=D.useState(""),{notify:b}=ca(),R=ea(),M=((O=(P=Ks().state)==null?void 0:P.from)==null?void 0:O.pathname)||"/";D.useEffect(()=>{t&&R(M,{replace:!0})},[t,M,R]);async function k(I){I.preventDefault(),v(""),T(!0);try{await e({email:i,password:a}),R(M,{replace:!0})}catch(W){const H=vi(W);v(H),b(H,"error")}finally{T(!1)}}async function w(){v(""),T(!0);try{await n()&&R(M,{replace:!0})}catch(I){const W=vi(I)||"Google sign-in failed";v(W),b(W,"error")}finally{T(!1)}}async function A(I){I.preventDefault(),v(""),T(!0);try{await r(c),x("verify")}catch(W){const H=vi(W)||"Failed to send OTP";v(H),b(H,"error")}finally{T(!1)}}async function C(I){I.preventDefault(),v(""),T(!0);try{await s(d),R(M,{replace:!0})}catch(W){const H=vi(W)||"Invalid OTP";v(H),b(H,"error")}finally{T(!1)}}return t?null:f.jsx("div",{className:"grid place-items-center",children:f.jsxs("div",{className:"w-full max-w-md",children:[f.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Welcome back"}),f.jsx(xn,{children:f.jsxs(bn,{children:[f.jsxs("form",{className:"space-y-4",onSubmit:k,children:[f.jsx(Gn,{type:"email",placeholder:"Email",value:i,onChange:I=>o(I.target.value),disabled:E}),f.jsx(Gn,{type:"password",placeholder:"Password",value:a,onChange:I=>l(I.target.value),disabled:E}),_&&f.jsx("p",{className:"text-red-600 text-sm",children:_}),f.jsx(Te,{type:"submit",className:"w-full",disabled:E,children:E?"Signing in…":"Sign in"})]}),f.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[f.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),f.jsx("span",{children:"or"}),f.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),f.jsx(Te,{variant:"secondary",onClick:w,disabled:E,children:"Continue with Google"}),f.jsx("div",{id:"recaptcha-container",className:"mt-3"}),y==="enter"&&f.jsxs("form",{className:"space-y-2 mt-2",onSubmit:A,children:[f.jsx(Gn,{type:"tel",placeholder:"Indian mobile (10 digits)",value:c,onChange:I=>h(I.target.value),disabled:E}),f.jsx(Te,{type:"submit",variant:"secondary",disabled:E||!c,children:"Send OTP"})]}),y==="verify"&&f.jsxs("form",{className:"space-y-2 mt-2",onSubmit:C,children:[f.jsx(Gn,{type:"text",placeholder:"Enter OTP",value:d,onChange:I=>m(I.target.value),disabled:E}),f.jsx(Te,{type:"submit",variant:"secondary",disabled:E||!d,children:"Verify OTP"})]}),f.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:["No account? ",f.jsx(Dg,{className:"text-blue-600",to:"/signup",children:"Sign up"})]})]})})]})})}function eB(){const{user:t,signup:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=qr(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,h]=D.useState(""),[d,m]=D.useState(""),[y,x]=D.useState(""),[E,T]=D.useState("enter"),[_,v]=D.useState(""),[b,R]=D.useState(!1),N=ea(),{notify:M}=ca();D.useEffect(()=>{t&&N("/")},[t,N]);async function k(C){C.preventDefault(),v(""),R(!0);try{const P=await e({email:i,password:a,name:c});d?(await r(d),T("verify")):N("/")}catch(P){const O=vi(P)||"Signup failed";v(O),M(O,"error")}finally{R(!1)}}async function w(C){C.preventDefault(),v(""),R(!0);try{await s(y),N("/")}catch(P){const O=vi(P)||"Invalid OTP";v(O),M(O,"error")}finally{R(!1)}}async function A(){v(""),R(!0);try{await n()&&N("/")}catch(C){const P=vi(C)||"Google sign-in failed";v(P),M(P,"error")}finally{R(!1)}}return t?null:f.jsx("div",{className:"grid place-items-center",children:f.jsxs("div",{className:"w-full max-w-md",children:[f.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Create your account"}),f.jsx(xn,{children:f.jsxs(bn,{children:[E==="enter"?f.jsxs("form",{className:"space-y-4",onSubmit:k,children:[f.jsx(Gn,{type:"text",placeholder:"Name",value:c,onChange:C=>h(C.target.value),disabled:b}),f.jsx(Gn,{type:"email",placeholder:"Email",value:i,onChange:C=>o(C.target.value),disabled:b}),f.jsx(Gn,{type:"password",placeholder:"Password",value:a,onChange:C=>l(C.target.value),disabled:b}),f.jsx(Gn,{type:"tel",placeholder:"Indian phone (optional)",value:d,onChange:C=>m(C.target.value),disabled:b}),_&&f.jsx("p",{className:"text-red-600 text-sm",children:_}),f.jsx(Te,{type:"submit",className:"w-full",disabled:b,children:b?"Creating…":"Create Account"})]}):f.jsxs("form",{className:"space-y-2",onSubmit:w,children:[f.jsx(Gn,{type:"text",placeholder:"Enter OTP",value:y,onChange:C=>x(C.target.value),disabled:b}),_&&f.jsx("p",{className:"text-red-600 text-sm",children:_}),f.jsx(Te,{type:"submit",className:"w-full",disabled:b||!y,children:"Verify OTP"})]}),f.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[f.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),f.jsx("span",{children:"or"}),f.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),f.jsx(Te,{variant:"secondary",onClick:A,disabled:b,children:"Continue with Google"}),f.jsx("div",{id:"recaptcha-container"})]})})]})})}const P1=Qh.forwardRef(function({className:e="",rows:n=4,...r},s){return f.jsx("textarea",{ref:s,rows:n,className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-brand-600 focus:ring-2 focus:ring-brand-600 focus:ring-offset-0 outline-none ${e}`.trim(),...r})});function tB(){var se;const{notify:t}=ca(),{user:e,loading:n}=qr(),[r,s]=D.useState({q1:"",q2:"",q2_specify:"",q3:"",q3_severity:"",q4:"",q4_specify:"",q5:"",q6_activity:"",q6_hydration:"",q6_diet:""}),[i,o]=D.useState(!1),[a,l]=D.useState(!1),[c,h]=D.useState(null),[d,m]=D.useState([]),[y,x]=D.useState([]),[E,T]=D.useState(""),[_,v]=D.useState([]),[b,R]=D.useState(""),[N,M]=D.useState(null),[k,w]=D.useState(!1),[A,C]=D.useState(3),[P,O]=D.useState("auto"),[I,W]=D.useState(!0),[H,re]=D.useState(!1);D.useEffect(()=>{try{const j=JSON.parse(localStorage.getItem("analysisPrefs")||"{}");j&&typeof j=="object"&&(j.topK&&C(j.topK),j.explainMethod&&O(j.explainMethod),typeof j.useScipyWinsorize=="boolean"&&W(j.useScipyWinsorize),typeof j.forceLocal=="boolean"&&re(j.forceLocal))}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("analysisPrefs",JSON.stringify({topK:A,explainMethod:P,useScipyWinsorize:I,forceLocal:H}))}catch{}},[A,P,I,H]);const he=D.useMemo(()=>{const j=["ns_q1","ns_q2","ns_q3","ns_q4","ns_q5","ns_q6","ns_q7","ns_q8","ns_q9","ns_q10","ns_q11","ns_q12"];for(const ee of j)if(!r[ee])return!1;return!0},[r]);function B(){const j=new Date,ee=new Date(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0,0),oe=new Date(j.getFullYear(),j.getMonth(),j.getDate()+1,0,0,0,0);return{start:et.fromDate(ee),end:et.fromDate(oe)}}D.useEffect(()=>{async function j(){if(!bt||!e)return;const{start:ee,end:oe}=B(),we=gl(bt,"users",e.uid,"dailyCheckins"),Oe=xm(we,Dw("date",">=",ee),Dw("date","<",oe));try{const He=await bm(Oe);He.empty?(l(!1),h(null)):(l(!0),h(He.docs[0].data()))}catch(He){console.error("[DailyCheckin] checkToday error:",He)}}j()},[e]);function Q(j){if(!j)return .5;const ee=Oe=>({None:1,Normal:1,Mild:.7,"Slight irregularity – mild constipation/diarrhea":.7,"Slight – minor discomfort or frequency change":.7,Moderate:.4,"Moderate – noticeable, affects tasks":.4,"Moderate – interfered with tasks":.4,"Moderate – affected meals":.4,"Moderate – frequent or loose stools":.4,"Moderate – frequent or painful urination":.4,Severe:.2,"Severe – persistent pain":.2,"Severe – unable to perform daily activities":.2,"Severe – persistent vomiting":.2,"Severe – could barely perform activities":.2,"Severe – high fever (>102°F / 38.8°C)":.2,"Severe – persistent cough or severe breathing issues":.2,"Severe – persistent diarrhea/constipation":.2,"Severe – inability to urinate normally or severe discomfort":.2,"Severe – bleeding, large lesions, or non-healing wounds":.2,"Severe – fainting or inability to stand":.2})[Oe]??.5,oe=[ee(j.ns_q1),ee(j.ns_q2),ee(j.ns_q3),ee(j.ns_q4),ee(j.ns_q5),ee(j.ns_q6),ee(j.ns_q7),ee(j.ns_q8),ee(j.ns_q9),ee(j.ns_q10),ee(j.ns_q11),ee(j.ns_q12)],we=oe.reduce((Oe,He)=>Oe+He,0)/oe.length;return Math.max(0,Math.min(1,Number(we.toFixed(3))))}D.useEffect(()=>{async function j(){var ee;if(!(!bt||!e))try{const oe=gl(bt,"users",e.uid,"dailyCheckins"),we=xm(oe,dS("date","desc"),fS(30)),He=(await bm(we)).docs.map(Se=>({id:Se.id,...Se.data()})),Bt=He.slice().reverse();let Xe=Bt.map(Se=>R1(Se.answers)),zt=Bt.map(Se=>{var dn;return(dn=Se==null?void 0:Se.date)!=null&&dn.toDate?Se.date.toDate().toLocaleDateString():""});try{if((ee=N==null?void 0:N.python)!=null&&ee.available){const Se=await A1(e.uid);Se&&Se.ok&&Array.isArray(Se.points)&&Se.points.length>0&&(Xe=Se.points,Array.isArray(Se.labels)&&Se.labels.length===Se.points.length?zt=Se.labels.map(dn=>{try{return new Date(dn).toLocaleDateString()}catch{return dn}}):zt=Se.points.map((dn,zn)=>`T${zn+1}`))}}catch{}const Yt=Xe.length;let sr="";if(Yt>=6){const Se=Xe.slice(Yt-6,Yt-3).reduce((Kr,Gr)=>Kr+Gr,0)/3,zn=Xe.slice(Yt-3).reduce((Kr,Gr)=>Kr+Gr,0)/3-Se;zn>.06?sr="Worsening":zn<-.06?sr="Improving":sr="Stable"}m(He),x(Xe),v(zt),T(sr)}catch(oe){console.error("[DailyCheckin] loadHistory error:",oe)}}j()},[e,a]),D.useEffect(()=>{let j=!0;return(async()=>{try{w(!0);const ee=await U6();j&&M(ee)}catch{j&&M({ok:!0,python:{available:!1}})}finally{j&&w(!1)}})(),()=>{j=!1}},[]);function q(j,ee){s(oe=>({...oe,[j]:ee}))}async function fe(j){if(j.preventDefault(),!e){t("Please log in first!","error");return}if(!bt){t("App is not connected to Firestore. Check Firebase config.","error");return}if(a){t("You've already completed today's check-in.","info");return}if(!he){t("Please answer all required questions.","error");return}o(!0);try{const ee=gl(bt,"users",e.uid,"dailyCheckins"),oe={date:et.now(),dateServer:ec(),answers:{ns_q1:r.ns_q1,ns_q2:r.ns_q2,ns_q3:r.ns_q3,ns_q4:r.ns_q4,ns_q5:r.ns_q5,ns_q6:r.ns_q6,ns_q7:r.ns_q7,ns_q8:r.ns_q8,ns_q9:r.ns_q9,ns_q10:r.ns_q10,ns_q11:r.ns_q11,ns_q12:r.ns_q12},analyzed:!1,notes:b||null,topK:Number(A),explainMethod:P,useScipyWinsorize:I,forceLocal:H};console.log("[DailyCheckin] Submitting payload:",oe),await vS(ee,oe),t("Daily check-in saved!","success"),l(!0);try{$6({userId:e.uid,payload:oe})}catch{}}catch(ee){console.error("[DailyCheckin] Firestore addDoc error:",ee);const oe=(ee==null?void 0:ee.message)||"Error saving check-in. Please try again.";t(oe,"error")}finally{o(!1)}}return f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Daily Check-in"}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[f.jsxs(xn,{className:"lg:col-span-2",children:[f.jsx(Ds,{children:f.jsx(Os,{children:"Today's Check-in"})}),f.jsx(bn,{children:a?f.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[f.jsx("p",{className:"font-medium",children:"You've already submitted today's check-in. Come back tomorrow."}),c&&c.answers&&f.jsxs("div",{className:"mt-2",children:[f.jsx("p",{className:"text-xs text-slate-500",children:"Your last responses:"}),f.jsxs("ul",{className:"list-disc ml-5 mt-1 space-y-1",children:[f.jsxs("li",{children:["Sleep & Energy: ",c.answers.q1]}),f.jsxs("li",{children:["Pain/Discomfort: ",c.answers.q2,c.answers.q2_specify?` (${c.answers.q2_specify})`:""]}),f.jsxs("li",{children:["Heart/Respiratory: ",c.answers.q3,c.answers.q3==="Yes"&&c.answers.q3_severity?` (${c.answers.q3_severity})`:""]}),f.jsxs("li",{children:["Digestive/Temperature: ",c.answers.q4,c.answers.q4_specify?` (${c.answers.q4_specify})`:""]}),f.jsxs("li",{children:["Mental & Emotional: ",c.answers.q5]}),f.jsxs("li",{children:["Activity: ",c.answers.q6_activity,", Hydration: ",c.answers.q6_hydration,", Diet: ",c.answers.q6_diet]})]})]})]}):f.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[f.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Daily Symptom Tracking MCQs"}),[{key:"ns_q1",title:"Stomach / Abdominal Pain Today",opts:["None","Mild – occasional discomfort","Moderate – noticeable, affects tasks","Severe – persistent pain"]},{key:"ns_q2",title:"Headache or Migraine Today",opts:["None","Mild – didn’t interfere with work","Moderate – interfered with tasks","Severe – unable to perform daily activities"]},{key:"ns_q3",title:"Nausea or Vomiting Today",opts:["None","Mild – occasional queasiness","Moderate – affected meals","Severe – persistent vomiting"]},{key:"ns_q4",title:"Fatigue or Weakness Today",opts:["None – felt energetic","Mild – slightly tired","Moderate – noticeable fatigue","Severe – could barely perform activities"]},{key:"ns_q5",title:"Fever or Chills Today",opts:["None","Mild – slight temperature fluctuation","Moderate – measurable fever (100–102°F / 37.7–38.8°C)","Severe – high fever (>102°F / 38.8°C)"]},{key:"ns_q6",title:"Cough or Shortness of Breath Today",opts:["None","Mild – occasional cough or shortness of breath","Moderate – daily cough or breathing difficulty","Severe – persistent cough or severe breathing issues"]},{key:"ns_q7",title:"Changes in Bowel Movements Today",opts:["Normal","Slight irregularity – mild constipation/diarrhea","Moderate – frequent or loose stools","Severe – persistent diarrhea/constipation"]},{key:"ns_q8",title:"Changes in Urination Today",opts:["Normal","Slight – minor discomfort or frequency change","Moderate – frequent or painful urination","Severe – inability to urinate normally or severe discomfort"]},{key:"ns_q9",title:"Skin Changes / Wounds Today",opts:["None","Minor – small rashes, bruises, or pimples","Noticeable – persistent rash, sores, or swelling","Severe – bleeding, large lesions, or non-healing wounds"]},{key:"ns_q10",title:"Dizziness or Fainting Today",opts:["None","Mild – occasional lightheadedness","Moderate – dizziness affecting tasks","Severe – fainting or inability to stand"]},{key:"ns_q11",title:"Sleep / Insomnia Today",opts:["Slept well – no trouble falling or staying asleep","Mild difficulty – took longer than usual to fall asleep","Moderate difficulty – frequent waking or poor sleep quality","Severe – hardly slept or very restless night"]},{key:"ns_q12",title:"Hot Flashes / Sudden Warmth Today",opts:["None – no unusual warmth","Mild – occasional warmth or flushing","Moderate – noticeable episodes affecting comfort","Severe – frequent or intense hot flashes"]}].map((j,ee)=>f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:ee+1}),f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:j.title})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-2",children:j.opts.map(oe=>f.jsx("button",{type:"button",onClick:()=>q(j.key,oe),className:`px-3 py-2 rounded-md border text-sm text-left transition ${r[j.key]===oe?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:oe},oe))})]},j.key)),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Add notes for today (optional)"}),f.jsx(P1,{value:b,onChange:j=>R(j.target.value),placeholder:"Type anything noteworthy about your health today..."})]}),f.jsxs("div",{className:"hidden",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"1"}),f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sleep & Energy"})]}),f.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How well did you sleep last night, and how energetic do you feel today?"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Moderate","High","Very high"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q1",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q1===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"2"}),f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pain or Discomfort"})]}),f.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you experience any unusual pain, discomfort, or bodily symptoms today?"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q2",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q2===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q2==="Mild"||r.q2==="Moderate"||r.q2==="Severe")&&f.jsx("input",{type:"text",placeholder:"Specify location (optional)",value:r.q2_specify,onChange:j=>q("q2_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"3"}),f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Heart & Respiratory Health"})]}),f.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Chest pain, palpitations, shortness of breath, or rapid heartbeat today?"}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:["No","Yes"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q3",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),r.q3==="Yes"&&f.jsx("div",{className:"mt-2 grid grid-cols-3 md:grid-cols-6 gap-2",children:["Mild","Moderate","Severe"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q3_severity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3_severity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"4"}),f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Digestive & Temperature Symptoms"})]}),f.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Digestive issues (nausea, vomiting, diarrhea, constipation, heartburn) or fever/chills today?"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q4",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q4===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q4==="Mild"||r.q4==="Moderate"||r.q4==="Severe")&&f.jsx("input",{type:"text",placeholder:"Specify (optional)",value:r.q4_specify,onChange:j=>q("q4_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"5"}),f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Mental & Emotional Well-being"})]}),f.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How would you rate your mood and stress levels today?"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Neutral","Good","Very good"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q5",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q5===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"6"}),f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Physical Activity & Lifestyle"})]}),f.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you maintain physical activity, hydration, and balanced meals today?"}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Activity"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Light","Moderate","Intense"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q6_activity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_activity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Hydration"}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q6_hydration",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_hydration===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Diet"}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>f.jsx("button",{type:"button",onClick:()=>q("q6_diet",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_diet===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between gap-3",children:[f.jsx("div",{className:"text-xs text-slate-500",children:"Complete all sections to enable saving."}),f.jsx(Te,{type:"submit",disabled:i||!he||n,children:i?f.jsxs("span",{className:"inline-flex items-center gap-2",children:[f.jsx(Ao,{size:16})," Saving..."]}):"Save today's check-in"})]})]})})]}),f.jsxs(xn,{className:"lg:col-span-2",children:[f.jsx(Ds,{children:f.jsx(Os,{children:"Your recent check-ins"})}),f.jsx(bn,{children:y.length>0?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Overall trend: ",f.jsx("span",{className:`font-medium ${E==="Worsening"?"text-red-600":E==="Improving"?"text-emerald-600":"text-slate-700 dark:text-slate-200"}`,children:E||"Not enough data"})]}),f.jsx("div",{className:"bg-white dark:bg-slate-950 rounded-md p-3 border border-slate-200 dark:border-slate-800",children:f.jsx(S1,{points:y,labels:_,title:(se=N==null?void 0:N.python)!=null&&se.available?"AI risk":"Risk",yRange:{min:0,max:1}})}),f.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 text-sm",children:d.slice(0,10).map((j,ee)=>{var oe;return f.jsxs("li",{className:"py-2 flex items-center justify-between",children:[f.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:(oe=j==null?void 0:j.date)!=null&&oe.toDate?j.date.toDate().toLocaleDateString():""}),f.jsx("span",{className:"font-medium",children:Q(j.answers)})]},j.id||ee)})})]}):f.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No history yet. Your check-ins will appear here."})})]}),f.jsxs(xn,{className:"lg:col-span-2",children:[f.jsx(Ds,{children:f.jsx(Os,{children:"Why this matters"})}),f.jsx(bn,{children:f.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 space-y-2",children:[f.jsx("p",{children:"Your daily responses help track trends in sleep, mood, pain, and lifestyle. If you report concerning symptoms, your clinician or AI assistant can prioritize guidance."}),f.jsx("p",{children:"We limit to one check-in per day to keep insights consistent. You can update tomorrow if anything changes."})]})})]})]})]})}function nB(){var zn,Kr,Gr,ua,qi,ha;const{notify:t}=ca(),{user:e}=qr(),[n,r]=D.useState(null),[s,i]=D.useState(null),[o,a]=D.useState(null),[l,c]=D.useState(!1),[h,d]=D.useState(!1),[m,y]=D.useState(0),x=D.useRef(null),[E,T]=D.useState(""),[_,v]=D.useState("Idle"),b=D.useRef(null),[R,N]=D.useState(""),[M,k]=D.useState(null),[w,A]=D.useState(""),[C,P]=D.useState(!1),[O,I]=D.useState("eng"),[W,H]=D.useState(null),[re,he]=D.useState(!1),[B,Q]=D.useState(null),[q,fe]=D.useState(0),[se]=D.useState(3),j=D.useCallback($=>{if(!$)return{score:0,issues:["No data extracted"]};const te=Array.isArray($==null?void 0:$.labs)?$.labs:[],G=($==null?void 0:$.meta)||{},ae=[];let ie=1;return te.length===0?(ae.push("No lab values extracted"),ie-=.4):(te.filter(je=>je.confidence>=.7).length/te.length<.5&&(ae.push("Low confidence in extracted lab values"),ie-=.2),te.filter(je=>je.value!==null&&je.value!==void 0).length<te.length*.7&&(ae.push("Many lab values missing or invalid"),ie-=.2)),!G.patientName&&!G.patientId&&(ae.push("No patient identification found"),ie-=.1),G.date||(ae.push("No report date found"),ie-=.1),["hemoglobin","glucose","creatinine","sodium","potassium"].some(Ct=>te.some($t=>$t.name===Ct&&$t.value!==null))||(ae.push("No critical lab values found"),ie-=.1),{score:Math.max(0,Math.min(1,ie)),issues:ae.length>0?ae:["Good extraction quality"],labCount:te.length,highConfidenceCount:te.filter(Ct=>Ct.confidence>=.7).length}},[]),ee=D.useCallback(async()=>{if(!(!o||re)){he(!0),H(null);try{const $=(s==null?void 0:s.text)||"",te=await q6(o,$);if(te.ok&&te.summary){H(te.summary),t("AI summary generated successfully","success");try{if(bt&&e&&e.uid){const G=gl(bt,"users",e.uid,"reportSummaries"),ae=(o==null?void 0:o.meta)||{};await vS(G,{createdAt:ec(),summary:te.summary,simpleSummary:oe(o),meta:{patientName:ae.patientName||null,patientId:ae.patientId||null,date:ae.date||null},stats:{labCount:Array.isArray(o==null?void 0:o.labs)?o.labs.length:0},ocrPreview:($||"").slice(0,2e3)||null}),t("Summary saved to your records","success")}else t("Login required to save summary","info")}catch(G){console.error("Failed to save summary:",G),t("Summary generated but saving to cloud failed.","warning")}}else throw new Error(te.error||"Failed to generate summary")}catch($){console.error("Error generating AI summary:",$),t("Failed to generate AI summary: "+($.message||"Unknown error"),"error")}finally{he(!1)}}},[o,s,re,t]);function oe($){try{const te=Array.isArray($==null?void 0:$.labs)?$.labs:[],G=($==null?void 0:$.meta)||{},ae=Array.isArray($==null?void 0:$.diagnoses)?$.diagnoses:[],ie=Array.isArray($==null?void 0:$.medications)?$.medications:[],Ie=de=>te.find(lt=>(lt.name||"").toLowerCase()===de.toLowerCase()),Pe=Ie("hemoglobin"),Ct=Ie("glucose"),$t=Ie("creatinine"),Ne=Ie("wbc"),je=Ie("platelets"),Sn=Ie("sodium"),Qr=Ie("potassium"),Yr=Ie("hbA1c"),at=[];G!=null&&G.patientName&&at.push(`Patient: ${G.patientName}`),G!=null&&G.patientId&&at.push(`ID: ${G.patientId}`),G!=null&&G.date&&at.push(`Report Date: ${G.date}`),at.length>0&&at.push("");const Xt=[];if(Pe&&typeof Pe.value=="number"){const de=Pe.value,lt=Pe.unit||"g/dL",rt=de<12?"LOW":de>16?"HIGH":"NORMAL";Xt.push(`• Hemoglobin: ${de} ${lt} (${rt}) - Blood oxygen-carrying protein`)}if(Ct&&typeof Ct.value=="number"){const de=Ct.value,lt=Ct.unit||"mg/dL",rt=de<70?"LOW":de>140?"HIGH":"NORMAL";Xt.push(`• Glucose: ${de} ${lt} (${rt}) - Blood sugar level`)}if($t&&typeof $t.value=="number"){const de=$t.value,lt=$t.unit||"mg/dL",rt=de<.6?"LOW":de>1.3?"HIGH":"NORMAL";Xt.push(`• Creatinine: ${de} ${lt} (${rt}) - Kidney function indicator`)}if(Ne&&typeof Ne.value=="number"){const de=Ne.value,lt=Ne.unit||"10^3/µL",rt=de<4?"LOW":de>11?"HIGH":"NORMAL";Xt.push(`• White Blood Cells: ${de} ${lt} (${rt}) - Immune system cells`)}if(je&&typeof je.value=="number"){const de=je.value,lt=je.unit||"10^3/µL",rt=de<150?"LOW":de>450?"HIGH":"NORMAL";Xt.push(`• Platelets: ${de} ${lt} (${rt}) - Blood clotting cells`)}if(Sn&&typeof Sn.value=="number"){const de=Sn.value,lt=Sn.unit||"mmol/L",rt=de<136?"LOW":de>145?"HIGH":"NORMAL";Xt.push(`• Sodium: ${de} ${lt} (${rt}) - Electrolyte balance`)}if(Qr&&typeof Qr.value=="number"){const de=Qr.value,lt=Qr.unit||"mmol/L",rt=de<3.5?"LOW":de>5?"HIGH":"NORMAL";Xt.push(`• Potassium: ${de} ${lt} (${rt}) - Heart and muscle function`)}if(Yr&&typeof Yr.value=="number"){const de=Yr.value,lt=Yr.unit||"%",rt=de<5.7?"NORMAL":de<6.5?"PREDIABETES":"DIABETES";Xt.push(`• HbA1c: ${de} ${lt} (${rt}) - 3-month average blood sugar`)}Xt.length>0&&(at.push("LABORATORY RESULTS:"),at.push(...Xt),at.push("")),ae.length>0&&(at.push("DIAGNOSES:"),ae.forEach(de=>at.push(`• ${de}`)),at.push("")),ie.length>0&&(at.push("MEDICATIONS:"),ie.forEach(de=>at.push(`• ${de}`)),at.push(""));const Ki=Xt.filter(de=>de.includes("HIGH")||de.includes("LOW")).length;return Ki>0?at.push(`SUMMARY: ${Ki} lab value(s) outside normal range. Please consult with your healthcare provider for interpretation and follow-up.`):Xt.length>0&&at.push("SUMMARY: All lab values appear to be within normal ranges. Continue regular monitoring as recommended by your healthcare provider."),at.length===0?"We parsed the report and extracted key details. Values will appear here once identified.":at.join(`
`)}catch(te){return console.error("Error generating summary:",te),"We parsed the report and extracted key details."}}const we=D.useMemo(()=>["application/pdf","image/jpeg","image/png","image/heic","image/heif"],[]),Oe=10*1024*1024,He=D.useCallback($=>$?we.includes($.type)?$.size>Oe?"File is too large. Max 10MB.":null:"Unsupported file type. Use PDF, JPG, or PNG.":"No file selected",[we]),Bt=D.useCallback($=>!$||$.length===0?null:$.length>1?Array.from($).filter(G=>G.type==="application/pdf").length>1?"Multiple PDF files detected. Please upload only one PDF at a time.":"Multiple files detected. Please upload only one file at a time.":null,[]),Xe=D.useCallback($=>{if($.preventDefault(),$.stopPropagation(),c(!1),n){t("A file is already uploaded. Please remove it first before uploading a new one.","error");return}const te=$.dataTransfer.files,G=Bt(te);if(G){t(G,"error");return}const ae=te==null?void 0:te[0],ie=He(ae);if(ie){t(ie,"error");return}r(ae||null)},[t,He,Bt,n]),zt=D.useCallback($=>{const te=$.target.files;if(n){t("A file is already uploaded. Please remove it first before uploading a new one.","error"),$.target.value="";return}const G=Bt(te);if(G){t(G,"error"),$.target.value="";return}const ae=te==null?void 0:te[0],ie=He(ae);if(ie){t(ie,"error"),$.target.value="";return}r(ae||null)},[t,He,Bt,n]);D.useEffect(()=>{if(n&&n.type.startsWith("image/")){const $=URL.createObjectURL(n);return T($),()=>URL.revokeObjectURL($)}T("")},[n]),D.useEffect(()=>{x.current&&(x.current.multiple=!1)},[]),D.useEffect(()=>{const $=async te=>{var G;try{if(n){t("A file is already uploaded. Please remove it first before uploading a new one.","error");return}const ae=Array.from(((G=te.clipboardData)==null?void 0:G.items)||[]).find(Pe=>Pe.type.startsWith("image/"));if(!ae)return;const ie=ae.getAsFile();if(!ie)return;const Ie=He(ie);if(Ie){t(Ie,"error");return}r(new File([ie],ie.name||"pasted-image.png",{type:ie.type})),t("Image pasted from clipboard","success")}catch{}};return window.addEventListener("paste",$),()=>window.removeEventListener("paste",$)},[t,He,n]);async function Yt($){if($.preventDefault(),!n){t("Please select a file to process.","error");return}d(!0),y(0),N(""),v("Uploading…"),fe(0),Q(null);try{const te=new AbortController;b.current=te;const G=await z6(n,{onProgress:ie=>y(ie),signal:te.signal});y(100),i((G==null?void 0:G.ocr)||G),a((G==null?void 0:G.extracted)||null),H(null);const ae=j(G==null?void 0:G.extracted);Q(ae),v("Completed"),ae.score>=.8?t("Report processed successfully with high quality extraction.","success"):ae.score>=.6?t("Report processed with moderate quality extraction. Please review results.","warning"):t("Report processed with low quality extraction. Consider retrying with a clearer image.","warning")}catch(te){const G=(te==null?void 0:te.message)||"Failed to process the report.";N(G),k(te&&te.body?te.body:null),v(G.toLowerCase().includes("canceled")?"Canceled":"Failed"),q<se&&!G.toLowerCase().includes("canceled")?(t(`${G} Retrying... (${q+1}/${se})`,"warning"),setTimeout(()=>{fe(ae=>ae+1),Yt($)},2e3)):t(G,"error")}finally{b.current=null,setTimeout(()=>d(!1),200)}}async function sr($){$.preventDefault();const te=(w||"").trim();if(!te){t("Enter a PDF URL to process.","error");return}d(!0),y(0),N(""),k(null),v("Processing URL…");try{const G=await B6(te,{useOcr:C?!0:null,lang:O});i((G==null?void 0:G.ocr)||G),a((G==null?void 0:G.extracted)||null),H(null),v("Completed"),t("PDF URL processed successfully.","success")}catch(G){const ae=(G==null?void 0:G.message)||"Failed to process the PDF URL.";N(ae),k(G&&G.body?G.body:null),v("Failed"),t(ae,"error")}finally{setTimeout(()=>d(!1),200)}}const Se=D.useCallback(()=>{b.current&&b.current.abort()},[]),dn=D.useCallback(()=>{if(!n)return;i(null),y(0),v("Retrying…"),Yt({preventDefault:()=>{}})},[n]);return f.jsxs("div",{children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-semibold mb-1 text-transparent bg-clip-text bg-gradient-to-r from-brand-600 via-blue-600 to-blue-500",children:"Upload Report"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload a single medical report to extract key details with OCR. We support PDF and image formats (one file at a time - remove current file to upload a new one)."})]}),f.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[f.jsxs(xn,{children:[f.jsx(Ds,{className:"bg-blue-50 dark:bg-slate-800/50 border-b border-blue-100 dark:border-slate-700",children:f.jsx(Os,{className:"text-blue-900 dark:text-slate-100",children:"Select file"})}),f.jsxs(bn,{children:[f.jsxs("form",{onSubmit:Yt,className:"space-y-4",children:[f.jsxs("div",{className:`relative flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed px-6 py-10 text-center transition-colors bg-gradient-to-r ${n?"from-slate-50 via-slate-50 to-slate-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800 border-slate-200 dark:border-slate-600 cursor-not-allowed opacity-60":l?"from-blue-50 via-sky-50 to-indigo-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800 border-blue-600 dark:border-blue-500":"from-brand-50 via-blue-50 to-blue-50 dark:from-slate-900 dark:via-slate-900 dark:to-slate-900 border-slate-300 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-400"}`,onDragOver:$=>{n||($.preventDefault(),c(!0))},onDragLeave:()=>c(!1),onDrop:Xe,role:"button",tabIndex:n?-1:0,"aria-label":n?"File already uploaded. Remove current file to upload a new one.":"Drag and drop a report file here or choose a file",onKeyDown:$=>{n||($.key==="Enter"||$.key===" ")&&($.preventDefault(),x.current&&(x.current.multiple=!1,x.current.click()))},children:[l&&f.jsx("div",{className:"absolute inset-0 bg-blue-600/10 dark:bg-blue-500/10 border-2 border-blue-600 dark:border-blue-500 rounded pointer-events-none"}),f.jsxs("div",{className:"flex items-center gap-3",children:[h?f.jsx(Ao,{size:20}):f.jsxs("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-300",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("path",{d:"M12 16V4m0 12l-4-4m4 4l4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),f.jsx("rect",{x:"3",y:"16",width:"18",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]}),f.jsxs("div",{className:"text-slate-800 dark:text-slate-100",children:[f.jsx("div",{className:"font-medium",children:n?"File already uploaded":"Drag and drop your report"}),f.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:n?"Remove current file to upload a new one":"PDF, JPG, or PNG up to 10MB (one file at a time). Paste an image with Ctrl/Cmd+V."})]})]}),f.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"or"}),f.jsx("input",{ref:x,type:"file",accept:we.join(","),onChange:zt,multiple:!1,className:"hidden","data-testid":"file-input"}),f.jsx(Te,{type:"button",variant:"secondary",onClick:()=>{x.current&&(x.current.multiple=!1,x.current.click())},disabled:h||!!n,className:"hover:bg-indigo-100",children:n?"File uploaded":"Choose file"}),n&&f.jsx("div",{className:"mt-3 w-full max-w-md",children:E?f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:E,alt:"preview",className:"h-20 w-20 object-cover rounded border border-emerald-200 dark:border-emerald-700"}),f.jsxs("div",{className:"text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:n.name}),f.jsx("span",{className:"rounded-full bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300 text-[10px] px-2 py-0.5 border border-emerald-200 dark:border-emerald-800",children:"IMAGE"})]}),f.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(n.size/1024)," KB"]})]})]}):f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"h-10 w-10 rounded bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 flex items-center justify-center font-semibold border border-rose-200 dark:border-rose-800",children:"PDF"}),f.jsxs("div",{className:"text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:n.name}),f.jsx("span",{className:"rounded-full bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 text-[10px] px-2 py-0.5 border border-rose-200 dark:border-rose-800",children:"PDF"})]}),f.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(n.size/1024)," KB"]})]})]})}),h&&f.jsx("div",{className:"absolute inset-x-0 bottom-0",children:f.jsx("div",{className:"h-1 w-full bg-blue-100 dark:bg-slate-800",children:f.jsx("div",{className:"h-1 bg-brand-600 dark:bg-blue-500 transition-all",style:{width:`${m}%`}})})})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[f.jsx(Te,{type:"button",variant:"secondary",onClick:()=>{r(null),i(null),a(null),H(null),v("Idle"),x.current&&(x.current.value="")},disabled:h,children:"Remove"}),f.jsx(Te,{type:"button",variant:"ghost",onClick:()=>x.current&&x.current.click(),disabled:h||!n,children:"Replace"}),f.jsx("div",{className:"ml-auto"}),h?f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Te,{type:"button",variant:"danger",onClick:Se,children:"Cancel"}),f.jsx(Te,{type:"button",variant:"primary",disabled:!0,className:"bg-brand-600 dark:bg-brand-600",children:f.jsxs("span",{className:"inline-flex items-center gap-2",children:[f.jsx(Ao,{size:16})," Uploading…"]})})]}):f.jsx(Te,{type:"submit",disabled:!n,className:"bg-brand-600 hover:bg-brand-700 focus:ring-brand-600",children:"Process report"})]})]}),f.jsxs("div",{className:"mt-4 space-y-2",children:[f.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Or process a PDF by URL"}),f.jsxs("form",{onSubmit:sr,className:"flex items-stretch gap-2",children:[f.jsx("input",{type:"url",placeholder:"https://example.com/report.pdf",className:"flex-1 rounded border px-3 py-2 text-sm border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-brand-200 dark:focus:ring-blue-300",value:w,onChange:$=>A($.target.value),disabled:h}),f.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[f.jsx("input",{type:"checkbox",checked:C,onChange:$=>P($.target.checked),disabled:h}),"Force OCR"]}),f.jsxs("select",{className:"rounded border px-2 py-2 text-xs border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",value:O,onChange:$=>I($.target.value),disabled:h,title:"OCR language",children:[f.jsx("option",{value:"eng",children:"English (eng)"}),f.jsx("option",{value:"hin",children:"Hindi (hin)"}),f.jsx("option",{value:"eng+hin",children:"English+Hindi (eng+hin)"})]}),f.jsx(Te,{type:"submit",variant:"secondary",disabled:h||!w.trim(),className:"hover:bg-indigo-100",children:"Process URL"})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[f.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 border ${_==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-200":_==="Failed"||_==="Canceled"?"bg-rose-50 text-rose-700 border-rose-200":"bg-sky-50 text-sky-700 border-sky-200"}`,children:[f.jsx("span",{className:`h-2 w-2 rounded-full ${_==="Completed"?"bg-emerald-600":_==="Failed"||_==="Canceled"?"bg-rose-600":"bg-sky-600"}`}),_]}),!!R&&!h&&f.jsx("button",{className:"text-rose-700 underline",onClick:dn,children:"Retry"})]}),!!R&&M&&f.jsxs("div",{className:"mt-2 text-xs text-rose-700",children:[(M==null?void 0:M.acceptedTypes)&&f.jsxs("div",{children:["Supported types: ",(M.acceptedTypes||[]).join(", ")]}),(M==null?void 0:M.maxSizeMb)&&f.jsxs("div",{children:["Max file size: ",M.maxSizeMb," MB"]})]})]})]})]}),f.jsxs(xn,{className:"md:col-span-2",children:[f.jsx(Ds,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Os,{className:"text-slate-900 dark:text-slate-100",children:"Summary"}),o&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Te,{type:"button",variant:"secondary",onClick:ee,disabled:re,className:"text-sm px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:re?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Ao,{size:14}),f.jsx("span",{children:"Generating AI Analysis..."})]}):f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("span",{children:"🤖 Generate AI Health Analysis"})]})}),f.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Powered by Gemini AI"})]})]})}),f.jsx(bn,{className:"bg-white dark:bg-slate-900/40",children:o?f.jsxs("div",{className:"space-y-4",children:[(()=>{const $=Array.isArray(o==null?void 0:o.labs)?o.labs:[],te=Ne=>$.find(je=>(je.name||"").toLowerCase()===Ne.toLowerCase()),G=te("hemoglobin"),ae=te("glucose"),ie=te("creatinine"),Ie=$.length,Pe={hemoglobin:{min:12,max:16,unit:"g/dL"},glucose:{min:70,max:140,unit:"mg/dL"},creatinine:{min:.6,max:1.3,unit:"mg/dL"}};function Ct(Ne,{min:je,max:Sn}){return typeof Ne!="number"?{text:"—",cls:"bg-slate-100 text-slate-700"}:Ne<je?{text:"Low",cls:"bg-amber-100 text-amber-800"}:Ne>Sn?{text:"High",cls:"bg-rose-100 text-rose-800"}:{text:"Normal",cls:"bg-emerald-100 text-emerald-800"}}function $t(Ne,{min:je,max:Sn}){return typeof Ne!="number"?.5:(Math.max(je,Math.min(Sn,Ne))-je)/(Sn-je)}return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[f.jsx(Co,{label:"Labs detected",value:String(Ie),hint:"Parsed from OCR",accent:"blue"}),f.jsx(Co,{label:"Hemoglobin",value:G?`${G.value??"—"} ${G.unit||""}`:"—",hint:"g/dL",accent:"emerald"}),f.jsx(Co,{label:"Glucose",value:ae?`${ae.value??"—"} ${ae.unit||""}`:"—",hint:"mg/dL",accent:"amber"})]}),B&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Extraction Quality"}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400 mb-1",children:[f.jsx("span",{children:"Quality Score"}),f.jsxs("span",{children:[Math.round(B.score*100),"%"]})]}),f.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:f.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${B.score>=.8?"bg-green-500":B.score>=.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${B.score*100}%`}})})]}),f.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[B.labCount," labs, ",B.highConfidenceCount," high confidence"]})]}),f.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:B.issues.map((Ne,je)=>f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx("span",{className:`w-1 h-1 rounded-full ${Ne.includes("Good")?"bg-green-500":"bg-amber-500"}`}),f.jsx("span",{children:Ne})]},je))})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Report Summary"}),f.jsx("div",{className:"text-[13px] leading-6 text-slate-800 dark:text-slate-200 bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 rounded p-3 whitespace-pre-line",children:oe(o)})]}),f.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[f.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Hemoglobin"}),(()=>{const Ne=Ct(G==null?void 0:G.value,Pe.hemoglobin);return f.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ne.cls}`,children:Ne.text})})()]}),f.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:f.jsx("div",{className:"h-2 bg-emerald-500 dark:bg-emerald-400 rounded",style:{width:`${Math.round($t(G==null?void 0:G.value,Pe.hemoglobin)*100)}%`}})}),f.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Pe.hemoglobin.min,"-",Pe.hemoglobin.max," ",Pe.hemoglobin.unit]})]}),f.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Glucose"}),(()=>{const Ne=Ct(ae==null?void 0:ae.value,Pe.glucose);return f.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ne.cls}`,children:Ne.text})})()]}),f.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:f.jsx("div",{className:"h-2 bg-blue-500 dark:bg-blue-400 rounded",style:{width:`${Math.round($t(ae==null?void 0:ae.value,Pe.glucose)*100)}%`}})}),f.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Pe.glucose.min,"-",Pe.glucose.max," ",Pe.glucose.unit]})]}),f.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Creatinine"}),(()=>{const Ne=Ct(ie==null?void 0:ie.value,Pe.creatinine);return f.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ne.cls}`,children:Ne.text})})()]}),f.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:f.jsx("div",{className:"h-2 bg-indigo-500 dark:bg-indigo-400 rounded",style:{width:`${Math.round($t(ie==null?void 0:ie.value,Pe.creatinine)*100)}%`}})}),f.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Pe.creatinine.min,"-",Pe.creatinine.max," ",Pe.creatinine.unit]})]})]})]})})(),W&&f.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"h-3 w-3 bg-blue-500 rounded-full animate-pulse"}),f.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:"AI Health Analysis"}),f.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[f.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded-full",children:"Powered by Gemini AI"}),f.jsx(Te,{type:"button",variant:"ghost",onClick:()=>H(null),className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 p-1",children:"✕"})]})]}),f.jsx("div",{className:"whitespace-pre-wrap w-full font-sans antialiased text-slate-900 dark:text-slate-100 text-[17px] md:text-[18px] leading-8 tracking-[0.008em] selection:bg-blue-100 selection:text-blue-900",children:W}),f.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("div",{className:"text-yellow-600 dark:text-yellow-400 mt-0.5",children:"⚠️"}),f.jsxs("div",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[f.jsx("strong",{children:"Medical Disclaimer:"})," This AI analysis is for informational purposes only and should not replace professional medical advice. Please consult with your healthcare provider for proper diagnosis and treatment."]})]})})]})]}):f.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload or process a report to see a quick summary."})})]}),f.jsxs(xn,{children:[f.jsx(Ds,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:f.jsx(Os,{className:"text-slate-900 dark:text-slate-100",children:"Extracted Fields"})}),f.jsx(bn,{className:"bg-white dark:bg-slate-900/40",children:o?f.jsxs("div",{className:"space-y-4 text-base text-slate-900 dark:text-slate-100",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Meta"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient:"})," ",f.jsx("span",{className:"font-medium",children:((zn=o==null?void 0:o.meta)==null?void 0:zn.patientName)||"—"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient ID:"})," ",f.jsx("span",{className:"font-medium",children:((Kr=o==null?void 0:o.meta)==null?void 0:Kr.patientId)||"—"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Date:"})," ",f.jsx("span",{className:"font-medium",children:((Gr=o==null?void 0:o.meta)==null?void 0:Gr.date)||"—"})]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Labs"}),(ua=o==null?void 0:o.labs)!=null&&ua.length?f.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded",children:f.jsxs("table",{className:"min-w-full text-left",children:[f.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Name"}),f.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Value"}),f.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Unit"}),f.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Confidence"})]})}),f.jsx("tbody",{children:o.labs.map(($,te)=>f.jsxs("tr",{className:te%2===0?"bg-white dark:bg-slate-900":"bg-slate-50 dark:bg-slate-800/60",children:[f.jsx("td",{className:"px-3 py-2 capitalize text-slate-900 dark:text-slate-100",children:$.name}),f.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:$.value??"—"}),f.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:$.unit||"—"}),f.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:typeof $.confidence=="number"?`${Math.round($.confidence*100)}%`:"—"})]},te))})]})}):f.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:"No labs found"})]}),(qi=o==null?void 0:o.diagnoses)!=null&&qi.length||(ha=o==null?void 0:o.medications)!=null&&ha.length?f.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Diagnoses"}),f.jsx("ul",{className:"list-disc pl-5",children:(o.diagnoses||[]).map(($,te)=>f.jsx("li",{children:$},te))})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Medications"}),f.jsx("ul",{className:"list-disc pl-5",children:(o.medications||[]).map(($,te)=>f.jsx("li",{children:$},te))})]})]}):null,f.jsx("div",{className:"flex items-center gap-3",children:f.jsx(Te,{type:"button",variant:"primary",className:"bg-emerald-600 hover:bg-emerald-700",disabled:!o,onClick:()=>{try{const $=JSON.stringify(o,null,2);navigator.clipboard.writeText($),t("Extracted fields copied","success")}catch{t("Copy failed","error")}},children:"Copy extracted JSON"})})]}):f.jsx("div",{className:"text-base text-slate-700 dark:text-slate-300",children:"No structured fields extracted yet."})})]})]})]})}function rB(){return f.jsx("footer",{className:"mt-10 border-t border-slate-200 dark:border-slate-800 py-8 text-center text-sm text-slate-500 dark:text-slate-400 bg-white/60 dark:bg-slate-900/60 backdrop-blur",children:f.jsxs("div",{className:"mx-auto max-w-7xl px-4",children:["© ",new Date().getFullYear()," AgenticSprit"]})})}function sB(){return f.jsxs("div",{className:"text-center py-16",children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Page not found"}),f.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"The page you are looking for doesn’t exist."}),f.jsx(Dg,{className:"text-blue-600 hover:underline",to:"/",children:"Go back home"})]})}function bu({children:t}){const{user:e,loading:n}=qr(),r=Ks();return n?f.jsx("div",{className:"flex items-center justify-center py-16",children:f.jsx(Ao,{size:24})}):e?t:f.jsx(vP,{to:"/login",replace:!0,state:{from:r}})}function Lm(t){return new Date(t).toLocaleString()}function iB({compact:t=!1}){const{user:e}=qr(),{notify:n}=ca(),r=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:messages`,[e==null?void 0:e.uid]),s=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useCheckins`,[e==null?void 0:e.uid]),i=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useAllCheckins`,[e==null?void 0:e.uid]),[o,a]=D.useState([]),[l,c]=D.useState(""),[h,d]=D.useState(!1),[m,y]=D.useState(null),[x,E]=D.useState({}),T=D.useRef(null),_=D.useRef(null),v=D.useMemo(()=>["Summarize my last diagnosis","What red flags should I watch?","Explain this lab result in simple terms","What are next steps for follow-up?"],[]),[b,R]=D.useState(!0),[N,M]=D.useState(!1);D.useEffect(()=>{try{const I=localStorage.getItem(r);if(I){const re=JSON.parse(I);Array.isArray(re)?a(re):a([])}else a([]);const W=localStorage.getItem(s);R(W==="true"||W==="false"?W==="true":!0);const H=localStorage.getItem(i);M(H==="true"||H==="false"?H==="true":!1)}catch{a([])}E({})},[r,s,i]),D.useEffect(()=>{var I;(I=T.current)==null||I.scrollTo({top:T.current.scrollHeight});try{localStorage.setItem(r,JSON.stringify(o))}catch{}},[o,r]),D.useEffect(()=>{try{localStorage.setItem(s,String(b))}catch{}},[b,s]),D.useEffect(()=>{try{localStorage.setItem(i,String(N))}catch{}},[N,i]);const k=D.useMemo(()=>l.trim().length>0&&!h,[l,h]),w=D.useMemo(()=>{const I=[...o].reverse().find(W=>W.role==="assistant");return!!(I&&typeof I.content=="string"&&I.content.toLowerCase().includes("gemini api key missing"))},[o]);async function A(){var W,H;if(!k)return;const I=[...o,{role:"user",content:l,createdAt:Date.now()}];a(I),c(""),d(!0);try{const re={messages:I,options:{maxOutputTokens:512,useCheckins:b,checkinLimit:7,useAllCheckins:N,checkinMax:365,userId:(e==null?void 0:e.uid)||void 0}},he=new AbortController;y(he);const B=await W6(re,{signal:he.signal}),Q=((W=B==null?void 0:B.data)==null?void 0:W.error)||((H=B==null?void 0:B.data)==null?void 0:H.reply)||"...";a(q=>q.concat({role:"assistant",content:Q,createdAt:Date.now()}))}catch(re){const he=(re==null?void 0:re.message)||"Network error";n(he,"error")}finally{d(!1),y(null)}}function C(){a([])}function P(I){var W;try{(W=navigator.clipboard)==null||W.writeText(I)}catch{}}D.useEffect(()=>{const I=_.current;I&&(I.style.height="auto",I.style.height=Math.min(I.scrollHeight,120)+"px")},[l]);function O(I){if(typeof I!="string"||I.length===0)return null;const W=I.split(/\r?\n/);function H(Q,q){const fe=[];let se=Q,j=0;const ee=/\*\*([^*]+)\*\*/,oe=/(^|[^*])\*([^*]+)\*(?!\*)/;for(;se.length>0;){const we=ee.exec(se),Oe=oe.exec(se);let He=se.length,Bt=null,Xe=null;if(we&&(!Oe||we.index<=Oe.index)?(He=we.index,Bt="bold",Xe=we):Oe&&(He=Oe.index+(Oe[1]?Oe[1].length:0),Bt="italic",Xe=Oe),!Bt){fe.push(f.jsx("span",{children:se},`${q}-t-${j++}`));break}if(He>0&&fe.push(f.jsx("span",{children:se.slice(0,He)},`${q}-t-${j++}`)),Bt==="bold")fe.push(f.jsx("strong",{children:Xe[1]},`${q}-b-${j++}`)),se=se.slice(Xe.index+Xe[0].length);else if(Bt==="italic"){const zt=Xe[1]||"";zt&&fe.push(f.jsx("span",{children:zt},`${q}-l-${j++}`)),fe.push(f.jsx("em",{children:Xe[2]},`${q}-i-${j++}`));const Yt=Xe.index+zt.length+Xe[0].length-(zt?0:1);se=se.slice(Yt)}}return fe}const re=[];let he=[];const B=()=>{he.length>0&&(re.push(f.jsx("ul",{className:"list-disc pl-5 my-2 space-y-1",children:he.map((Q,q)=>f.jsx("li",{children:H(Q.replace(/^\s*[*-]\s+/,""),`li-${q}`)},`li-${q}`))},`ul-${re.length}`)),he=[])};for(let Q=0;Q<W.length;Q++){const q=W[Q];if(/^\s*[*-]\s+/.test(q)){he.push(q);continue}B(),q.trim()===""?re.push(f.jsx("div",{className:"h-2"},`br-${Q}`)):re.push(f.jsx("p",{children:H(q,`p-${Q}`)},`p-${Q}`))}return B(),f.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:re})}return f.jsxs("div",{className:`${t?"flex h-full flex-col gap-0":"flex flex-col gap-3"}`,children:[w&&f.jsxs("div",{className:"rounded-md border border-amber-300 bg-amber-50 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200 px-3 py-2 text-xs",children:["Gemini API key is not configured on the backend. Set ",f.jsx("code",{children:"GEMINI_API_KEY"})," and restart the server."]}),!t&&f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:f.jsxs("span",{className:"inline-flex items-center gap-2",children:[f.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),"Gemini · Online"]})}),f.jsxs("div",{className:"flex items-center gap-2",children:[h?f.jsx(Te,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>m==null?void 0:m.abort(),children:"Stop"}):null,f.jsx(Te,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:C,disabled:o.length===0&&!h,children:"Clear"})]})]}),f.jsxs("div",{ref:T,className:`${t?"flex-1 min-h-0 overflow-auto p-3":"max-h-[70vh] min-h-[55vh] overflow-auto p-4"} rounded-lg border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-950/70 backdrop-blur`,children:[o.length===0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-slate-500 mb-3",children:"Start the conversation by asking a question, or try one of these:"}),f.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.map((I,W)=>f.jsx("button",{onClick:()=>c(I),className:"px-3 py-1.5 rounded-full text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-100 border border-slate-200 dark:border-slate-700",children:I},W))})]}),o.map((I,W)=>f.jsx("div",{className:`mb-3 flex ${I.role==="user"?"justify-end":"justify-start"}`,children:f.jsxs("div",{className:`flex items-end gap-2 ${I.role==="user"?"flex-row-reverse":"flex-row"}`,children:[f.jsx("div",{className:`hidden lg:flex h-8 w-8 shrink-0 rounded-full items-center justify-center text-xs font-semibold ${I.role==="user"?"bg-brand-600 text-white":"bg-slate-200 text-slate-700 dark:bg-slate-800 dark:text-slate-100"}`,children:I.role==="user"?"You":"AI"}),f.jsxs("div",{children:[(()=>{const H=`${I.createdAt||W}-${W}`;I.role==="assistant"&&typeof I.content=="string"&&I.content.length>500;const re=!!x[H];return f.jsxs("div",{className:`group relative max-w-[95%] sm:max-w-[92%] md:max-w-[90%] lg:max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-subtle break-words whitespace-pre-wrap leading-normal ${I.role==="user"?"bg-brand-600 text-white rounded-br-md":"bg-slate-100/90 dark:bg-slate-900/80 text-slate-900 dark:text-slate-100 rounded-bl-md"}`,children:[f.jsx("div",{className:"max-h-60 overflow-y-auto pr-1",children:I.role==="assistant"?f.jsx("div",{className:`chat-content select-text ${re?"":"line-clamp-10"}`,children:O(I.content)}):f.jsx("div",{className:"break-words whitespace-pre-wrap",children:I.content})}),f.jsx("button",{onClick:()=>P(I.content),title:"Copy",className:`absolute -top-2 ${I.role==="user"?"-left-2":"-right-2"} hidden group-hover:inline-flex items-center justify-center h-6 w-6 rounded-full bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600`,children:"⧉"})]})})(),f.jsxs("div",{className:`mt-1 flex items-center gap-2 ${I.role==="user"?"justify-end":"justify-start"}`,children:[f.jsx("div",{className:`text-[10px] ${I.role==="user"?"text-slate-300":"text-slate-500 dark:text-slate-400"}`,children:I.createdAt?Lm(I.createdAt):""}),I.role==="assistant"&&typeof I.content=="string"&&I.content.length>500&&(()=>{const H=`${I.createdAt||W}-${W}`,re=!!x[H];return f.jsx("button",{className:"text-[10px] px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>E(he=>({...he,[H]:!he[H]})),children:re?"Collapse":"Expand"})})()]})]})]})},W)),h&&f.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-500 text-sm",children:[f.jsxs("span",{className:"relative flex h-2 w-2",children:[f.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"}),f.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-600"})]}),"Thinking…"]})]}),f.jsxs("div",{className:`${t?"sticky bottom-0 z-10 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur pt-3":""}`,children:[f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsx(P1,{ref:_,value:l,onChange:I=>c(I.target.value.slice(0,1e3)),onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),A())},placeholder:"Type your message",rows:t?2:3}),f.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f.jsx(Te,{onClick:A,disabled:!k,children:"Send"}),f.jsxs("div",{className:"text-[10px] text-slate-500",children:[l.length,"/1000"]})]})]}),f.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[f.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:b,onChange:I=>R(I.target.checked)}),"Use my daily check-ins for answers"]}),f.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[f.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:N,onChange:I=>M(I.target.checked),disabled:!b}),"Include all check-ins (compact)"]})]}),t?f.jsxs("div",{className:"flex items-center gap-2",children:[h?f.jsx(Te,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>m==null?void 0:m.abort(),children:"Stop"}):null,f.jsx(Te,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:C,disabled:o.length===0&&!h,children:"Clear"})]}):null]})]})]})}function oB(){const[t,e]=D.useState(!1),[n,r]=D.useState(!1);D.useEffect(()=>{try{const o=localStorage.getItem("chat:widgetOpen");o!=null&&e(o==="true");const a=localStorage.getItem("chat:messages");if(a){const l=JSON.parse(a);r(Array.isArray(l)&&l.length>0)}}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("chat:widgetOpen",String(t))}catch{}},[t]);const s=D.useCallback(()=>e(o=>!o),[]),i=D.useCallback(()=>e(!1),[]);return D.useEffect(()=>{const o=a=>{a.key==="Escape"&&i(),(a.altKey||a.metaKey)&&a.key==="/"&&s()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,i]),f.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!t&&f.jsx(Te,{onClick:s,className:`h-14 w-14 rounded-full shadow-lg p-0 ring-2 ring-brand-600 bg-brand-600 text-white hover:bg-brand-700 focus:outline-none focus:ring-4 focus:ring-brand-300 transition ${n?"":"animate-pulse"}`,"aria-label":"Open chat",title:"Open chat (Alt+/)",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-7 w-7 m-auto",children:[f.jsx("path",{d:"M7.5 8.25h9a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1 0-1.5Zm0 4.5h5.25a.75.75 0 0 1 0 1.5H7.5a.75.75 0 0 1 0-1.5Z"}),f.jsx("path",{fillRule:"evenodd",d:"M4.5 3.75A2.25 2.25 0 0 0 2.25 6v8.25A2.25 2.25 0 0 0 4.5 16.5H6v3.19a.75.75 0 0 0 1.28.53l3.72-3.72h6.5A2.25 2.25 0 0 0 20.25 14.25V6A2.25 2.25 0 0 0 18 3.75h-13.5Z",clipRule:"evenodd"})]})}),t&&f.jsxs("div",{className:"relative w-[500px] max-w-[96vw] h-[60vh] sm:h-[65vh] md:h-[72vh] lg:h-[75vh] rounded-xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[f.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[f.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),f.jsx("span",{className:"font-medium",children:"Assistive Chat"})]}),f.jsx("button",{onClick:i,"aria-label":"Close chat",className:"h-7 w-7 rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 flex items-center justify-center text-xs",title:"Close",children:"✕"})]}),f.jsx("div",{className:"h-full flex flex-col",children:f.jsx("div",{className:"flex-1 p-4 overflow-auto",children:f.jsx(iB,{compact:!0})})})]})]})}function aB(){const{user:t}=qr(),[e,n]=D.useState(""),[r,s]=D.useState(""),[i,o]=D.useState(!1),[a,l]=D.useState(""),[c,h]=D.useState(null),[d,m]=D.useState(!1),[y,x]=D.useState(""),[E,T]=D.useState(""),[_,v]=D.useState(null);function b(N){try{if(!N)return null;if(typeof N.toDate=="function")return N.toDate();if(typeof N.seconds=="number")return new Date(N.seconds*1e3);const M=new Date(N);return Number.isNaN(M.getTime())?null:M}catch{return null}}D.useEffect(()=>{let N=!0;async function M(){if(!(!t||!bt))try{const k=Lh(bt,"users",t.uid),w=await yS(k),A=w.exists()?w.data():{};if(!N)return;n(t.displayName||A.displayName||""),s(t.photoURL||A.photoURL||""),v({uid:t.uid,email:t.email||A.email||null,phoneNumber:t.phoneNumber||A.phoneNumber||null,providerIds:(t.providerData||[]).map(C=>C.providerId),role:A.role||"user",createdAt:b(A.createdAt)||null,updatedAt:b(A.updatedAt)||null})}catch{}}return M(),()=>{N=!1}},[t]);async function R(N){if(N.preventDefault(),!!t){o(!0),l("");try{let M=r||null;if(c&&Vh){m(!0);try{const w=c.name&&c.name.includes(".")?c.name.split(".").pop():"jpg",A=`avatars/${t.uid}/${Date.now()}.${w}`,C=I4(Vh,A);await T4(C,c,{contentType:c.type||"image/jpeg"}),M=await k4(C)}catch(w){throw console.error("[Profile] Upload failed:",w),w}finally{m(!1)}}await uk(wt.currentUser,{displayName:e||null,photoURL:M});const k=Lh(bt,"users",t.uid);await Em(k,{displayName:e||null,photoURL:M,updatedAt:ec()},{merge:!0}),l("Profile updated")}catch(M){l((M==null?void 0:M.message)||"Failed to update"),console.error("[Profile] Save failed:",M)}finally{o(!1)}}}return f.jsx("div",{className:"grid place-items-center",children:f.jsxs("div",{className:"w-full max-w-md",children:[f.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Your profile"}),f.jsx(xn,{children:f.jsx(bn,{children:f.jsxs("form",{className:"space-y-4",onSubmit:R,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[r?f.jsx("img",{src:r,alt:"avatar",className:"w-12 h-12 rounded-full border border-slate-200 dark:border-slate-700"}):f.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-600 text-white grid place-items-center text-lg",children:(e||(t==null?void 0:t.email)||"?").slice(0,1).toUpperCase()}),f.jsx("div",{className:"text-sm text-slate-500",children:"Update your display info"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Display name"}),f.jsx(Gn,{type:"text",value:e,onChange:N=>n(N.target.value),disabled:i})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Upload photo"}),f.jsx("input",{type:"file",accept:"image/*",onChange:N=>{x("");const M=N.target.files&&N.target.files[0]?N.target.files[0]:null;if(!M){h(null),T("");return}const k=["image/jpeg","image/png","image/webp"],w=5*1024*1024;if(!k.includes(M.type)){x("Only JPG, PNG or WebP images are allowed."),h(null),T("");return}if(M.size>w){x("File too large. Max size is 5MB."),h(null),T("");return}h(M);const A=new FileReader;A.onload=()=>T(String(A.result||"")),A.readAsDataURL(M)},disabled:i,className:"block w-full text-sm text-slate-700 dark:text-slate-200"}),f.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPEG/PNG up to ~5MB."}),E?f.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[f.jsx("img",{src:E,alt:"preview",className:"w-16 h-16 rounded-full border border-slate-200 dark:border-slate-700 object-cover"}),f.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>{h(null),T(""),x("")},children:"Remove"})]}):null,y?f.jsx("p",{className:"text-sm text-red-600 mt-1",children:y}):null]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Or photo URL"}),f.jsx(Gn,{type:"url",value:r,onChange:N=>s(N.target.value),disabled:i})]}),d?f.jsx("p",{className:"text-sm text-slate-500",children:"Uploading photo…"}):null,a?f.jsx("p",{className:`text-sm ${a==="Profile updated"?"text-green-600":"text-red-600"}`,children:a}):null,f.jsx(Te,{type:"submit",className:"w-full",disabled:i||d,children:i?"Saving…":"Save changes"})]})})}),_?f.jsx(xn,{className:"mt-4",children:f.jsx(bn,{children:f.jsxs("div",{className:"space-y-2 text-sm text-slate-700 dark:text-slate-300",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Email"}),f.jsx("span",{className:"truncate max-w-[60%] text-right",children:_.email||"—"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"User ID"}),f.jsx("span",{className:"truncate max-w-[60%] text-right",children:_.uid})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Phone"}),f.jsx("span",{className:"truncate max-w-[60%] text-right",children:_.phoneNumber||"—"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Providers"}),f.jsx("span",{className:"truncate max-w-[60%] text-right",children:(_.providerIds||[]).length?_.providerIds.join(", "):"—"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Role"}),f.jsx("span",{className:"truncate max-w-[60%] text-right",children:_.role})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Created"}),f.jsx("span",{className:"truncate max-w-[60%] text-right",children:_.createdAt?Lm(_.createdAt):"—"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Updated"}),f.jsx("span",{className:"truncate max-w-[60%] text-right",children:_.updatedAt?Lm(_.updatedAt):"—"})]})]})})}):null]})})}function lB(){return f.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[f.jsx(L4,{}),f.jsx("main",{className:"mx-auto max-w-7xl px-4 py-6",children:f.jsxs(xP,{children:[f.jsx(rs,{path:"/",element:f.jsx(bu,{children:f.jsx(J6,{})})}),f.jsx(rs,{path:"/daily-checkin",element:f.jsx(bu,{children:f.jsx(tB,{})})}),f.jsx(rs,{path:"/upload-report",element:f.jsx(bu,{children:f.jsx(nB,{})})}),f.jsx(rs,{path:"/profile",element:f.jsx(bu,{children:f.jsx(aB,{})})}),f.jsx(rs,{path:"/login",element:f.jsx(Z6,{})}),f.jsx(rs,{path:"/signup",element:f.jsx(eB,{})}),f.jsx(rs,{path:"*",element:f.jsx(sB,{})})]})}),f.jsx(rB,{}),f.jsx(oB,{})]})}hT(document.getElementById("root")).render(f.jsx(MP,{children:f.jsx(K6,{children:f.jsx(M4,{children:f.jsx(CP,{children:f.jsx(lB,{})})})})}));
