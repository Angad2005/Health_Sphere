var X1=Object.defineProperty;var J1=(t,e,n)=>e in t?X1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ge=(t,e,n)=>J1(t,typeof e!="symbol"?e+"":e,n);function Z1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function eC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qx={exports:{}},jh={},Yx={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),tC=Symbol.for("react.portal"),nC=Symbol.for("react.fragment"),rC=Symbol.for("react.strict_mode"),sC=Symbol.for("react.profiler"),iC=Symbol.for("react.provider"),oC=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.memo"),uC=Symbol.for("react.lazy"),$0=Symbol.iterator;function hC(t){return t===null||typeof t!="object"?null:(t=$0&&t[$0]||t["@@iterator"],typeof t=="function"?t:null)}var Xx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jx=Object.assign,Zx={};function Vo(t,e,n){this.props=t,this.context=e,this.refs=Zx,this.updater=n||Xx}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eb(){}eb.prototype=Vo.prototype;function Am(t,e,n){this.props=t,this.context=e,this.refs=Zx,this.updater=n||Xx}var Rm=Am.prototype=new eb;Rm.constructor=Am;Jx(Rm,Vo.prototype);Rm.isPureReactComponent=!0;var W0=Array.isArray,tb=Object.prototype.hasOwnProperty,Pm={current:null},nb={key:!0,ref:!0,__self:!0,__source:!0};function rb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tb.call(e,r)&&!nb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Hl,type:t,key:i,ref:o,props:s,_owner:Pm.current}}function dC(t,e){return{$$typeof:Hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hl}function fC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var H0=/\/+/g;function Kd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fC(""+t.key):e.toString(36)}function uu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hl:case tC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Kd(o,0):r,W0(s)?(n="",t!=null&&(n=t.replace(H0,"$&/")+"/"),uu(s,e,n,"",function(c){return c})):s!=null&&(Nm(s)&&(s=dC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(H0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",W0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Kd(i,a);o+=uu(i,e,n,l,s)}else if(l=hC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Kd(i,a++),o+=uu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kc(t,e,n){if(t==null)return t;var r=[],s=0;return uu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},hu={transition:null},mC={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:hu,ReactCurrentOwner:Pm};function sb(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:kc,forEach:function(t,e,n){kc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kc(t,function(){e++}),e},toArray:function(t){return kc(t,function(e){return e})||[]},only:function(t){if(!Nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Vo;_e.Fragment=nC;_e.Profiler=sC;_e.PureComponent=Am;_e.StrictMode=rC;_e.Suspense=lC;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;_e.act=sb;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Pm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tb.call(e,l)&&!nb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hl,type:t.type,key:s,ref:i,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:oC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iC,_context:t},t.Consumer=t};_e.createElement=rb;_e.createFactory=function(t){var e=rb.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:aC,render:t}};_e.isValidElement=Nm;_e.lazy=function(t){return{$$typeof:uC,_payload:{_status:-1,_result:t},_init:pC}};_e.memo=function(t,e){return{$$typeof:cC,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=hu.transition;hu.transition={};try{t()}finally{hu.transition=e}};_e.unstable_act=sb;_e.useCallback=function(t,e){return Qt.current.useCallback(t,e)};_e.useContext=function(t){return Qt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Qt.current.useEffect(t,e)};_e.useId=function(){return Qt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Qt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};_e.useRef=function(t){return Qt.current.useRef(t)};_e.useState=function(t){return Qt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Qt.current.useTransition()};_e.version="18.3.1";Yx.exports=_e;var D=Yx.exports;const ci=eC(D),gC=Z1({__proto__:null,default:ci},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=D,_C=Symbol.for("react.element"),vC=Symbol.for("react.fragment"),wC=Object.prototype.hasOwnProperty,xC=yC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bC={key:!0,ref:!0,__self:!0,__source:!0};function ib(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wC.call(e,r)&&!bC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_C,type:t,key:i,ref:o,props:s,_owner:xC.current}}jh.Fragment=vC;jh.jsx=ib;jh.jsxs=ib;Qx.exports=jh;var d=Qx.exports,ob={exports:{}},En={},ab={exports:{}},lb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var H=$.length;$.push(G);e:for(;0<H;){var fe=H-1>>>1,ie=$[fe];if(0<s(ie,G))$[fe]=G,$[H]=ie,H=fe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],H=$.pop();if(H!==G){$[0]=H;e:for(var fe=0,ie=$.length,pe=ie>>>1;fe<pe;){var Oe=2*(fe+1)-1,Ue=$[Oe],Ae=Oe+1,j=$[Ae];if(0>s(Ue,H))Ae<ie&&0>s(j,Ue)?($[fe]=j,$[Ae]=H,fe=Ae):($[fe]=Ue,$[Oe]=H,fe=Oe);else if(Ae<ie&&0>s(j,H))$[fe]=j,$[Ae]=H,fe=Ae;else break e}}return G}function s($,G){var H=$.sortIndex-G.sortIndex;return H!==0?H:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,x=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=$)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function R($){if(E=!1,b($),!x)if(n(l)!==null)x=!0,ee(P);else{var G=n(c);G!==null&&de(R,G.startTime-$)}}function P($,G){x=!1,E&&(E=!1,v(w),w=-1),y=!0;var H=m;try{for(b(G),f=n(l);f!==null&&(!(f.expirationTime>G)||$&&!N());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,m=f.priorityLevel;var ie=fe(f.expirationTime<=G);G=t.unstable_now(),typeof ie=="function"?f.callback=ie:f===n(l)&&r(l),b(G)}else r(l);f=n(l)}if(f!==null)var pe=!0;else{var Oe=n(c);Oe!==null&&de(R,Oe.startTime-G),pe=!1}return pe}finally{f=null,m=H,y=!1}}var M=!1,k=null,w=-1,I=5,A=-1;function N(){return!(t.unstable_now()-A<I)}function O(){if(k!==null){var $=t.unstable_now();A=$;var G=!0;try{G=k(!0,$)}finally{G?S():(M=!1,k=null)}}else M=!1}var S;if(typeof _=="function")S=function(){_(O)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ne=te.port2;te.port1.onmessage=O,S=function(){ne.postMessage(null)}}else S=function(){T(O,0)};function ee($){k=$,M||(M=!0,S())}function de($,G){w=T(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,ee(P))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var H=m;m=G;try{return $()}finally{m=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var H=m;m=$;try{return G()}finally{m=H}},t.unstable_scheduleCallback=function($,G,H){var fe=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?fe+H:fe):H=fe,$){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=H+ie,$={id:h++,callback:G,priorityLevel:$,startTime:H,expirationTime:ie,sortIndex:-1},H>fe?($.sortIndex=H,e(c,$),n(l)===null&&$===n(c)&&(E?(v(w),w=-1):E=!0,de(R,H-fe))):($.sortIndex=ie,e(l,$),x||y||(x=!0,ee(P))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var G=m;return function(){var H=m;m=G;try{return $.apply(this,arguments)}finally{m=H}}}})(lb);ab.exports=lb;var EC=ab.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC=D,bn=EC;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cb=new Set,ul={};function Ri(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(ul[t]=e,t=0;t<e.length;t++)cb.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kf=Object.prototype.hasOwnProperty,kC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q0={},K0={};function IC(t){return Kf.call(K0,t)?!0:Kf.call(q0,t)?!1:kC.test(t)?K0[t]=!0:(q0[t]=!0,!1)}function SC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CC(t,e,n,r){if(e===null||typeof e>"u"||SC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dm=/[\-:]([a-z])/g;function Om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dm,Om);Rt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dm,Om);Rt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dm,Om);Rt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mm(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CC(e,n,s,r)&&(n=null),r||s===null?IC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=TC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ic=Symbol.for("react.element"),Gi=Symbol.for("react.portal"),Qi=Symbol.for("react.fragment"),Lm=Symbol.for("react.strict_mode"),Gf=Symbol.for("react.profiler"),ub=Symbol.for("react.provider"),hb=Symbol.for("react.context"),jm=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),Yf=Symbol.for("react.suspense_list"),Vm=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),db=Symbol.for("react.offscreen"),G0=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=G0&&t[G0]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Gd;function ka(t){if(Gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gd=e&&e[1]||""}return`
`+Gd+t}var Qd=!1;function Yd(t,e){if(!t||Qd)return"";Qd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Qd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ka(t):""}function AC(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=Yd(t.type,!1),t;case 11:return t=Yd(t.type.render,!1),t;case 1:return t=Yd(t.type,!0),t;default:return""}}function Xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qi:return"Fragment";case Gi:return"Portal";case Gf:return"Profiler";case Lm:return"StrictMode";case Qf:return"Suspense";case Yf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hb:return(t.displayName||"Context")+".Consumer";case ub:return(t._context.displayName||"Context")+".Provider";case jm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vm:return e=t.displayName||null,e!==null?e:Xf(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return Xf(t(e))}catch{}}return null}function RC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xf(e);case 8:return e===Lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PC(t){var e=fb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sc(t){t._valueTracker||(t._valueTracker=PC(t))}function pb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jf(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Q0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ks(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mb(t,e){e=e.checked,e!=null&&Mm(t,"checked",e,!1)}function Zf(t,e){mb(t,e);var n=ks(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ep(t,e.type,n):e.hasOwnProperty("defaultValue")&&ep(t,e.type,ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Y0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ep(t,e,n){(e!=="number"||Lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ks(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ia(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ks(n)}}function gb(t,e){var n=ks(e.value),r=ks(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function J0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cc,_b=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cc=Cc||document.createElement("div"),Cc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NC=["Webkit","ms","Moz","O"];Object.keys(Ba).forEach(function(t){NC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ba[e]=Ba[t]})});function vb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ba.hasOwnProperty(t)&&Ba[t]?(""+e).trim():e+"px"}function wb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var DC=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rp(t,e){if(e){if(DC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=null;function Fm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var op=null,ao=null,lo=null;function Z0(t){if(t=Gl(t)){if(typeof op!="function")throw Error(W(280));var e=t.stateNode;e&&(e=zh(e),op(t.stateNode,t.type,e))}}function xb(t){ao?lo?lo.push(t):lo=[t]:ao=t}function bb(){if(ao){var t=ao,e=lo;if(lo=ao=null,Z0(t),e)for(t=0;t<e.length;t++)Z0(e[t])}}function Eb(t,e){return t(e)}function Tb(){}var Xd=!1;function kb(t,e,n){if(Xd)return t(e,n);Xd=!0;try{return Eb(t,e,n)}finally{Xd=!1,(ao!==null||lo!==null)&&(Tb(),bb())}}function dl(t,e){var n=t.stateNode;if(n===null)return null;var r=zh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var ap=!1;if(Nr)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){ap=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{ap=!1}function OC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var za=!1,ju=null,Vu=!1,lp=null,MC={onError:function(t){za=!0,ju=t}};function LC(t,e,n,r,s,i,o,a,l){za=!1,ju=null,OC.apply(MC,arguments)}function jC(t,e,n,r,s,i,o,a,l){if(LC.apply(this,arguments),za){if(za){var c=ju;za=!1,ju=null}else throw Error(W(198));Vu||(Vu=!0,lp=c)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ib(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e_(t){if(Pi(t)!==t)throw Error(W(188))}function VC(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return e_(s),t;if(i===r)return e_(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function Sb(t){return t=VC(t),t!==null?Cb(t):null}function Cb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cb(t);if(e!==null)return e;t=t.sibling}return null}var Ab=bn.unstable_scheduleCallback,t_=bn.unstable_cancelCallback,FC=bn.unstable_shouldYield,UC=bn.unstable_requestPaint,at=bn.unstable_now,BC=bn.unstable_getCurrentPriorityLevel,Um=bn.unstable_ImmediatePriority,Rb=bn.unstable_UserBlockingPriority,Fu=bn.unstable_NormalPriority,zC=bn.unstable_LowPriority,Pb=bn.unstable_IdlePriority,Vh=null,cr=null;function $C(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Vh,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:qC,WC=Math.log,HC=Math.LN2;function qC(t){return t>>>=0,t===0?32:31-(WC(t)/HC|0)|0}var Ac=64,Rc=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Sa(a):(i&=o,i!==0&&(r=Sa(i)))}else o=n&~s,o!==0?r=Sa(o):i!==0&&(r=Sa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),s=1<<n,r|=t[n],e&=~s;return r}function KC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=KC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function cp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nb(){var t=Ac;return Ac<<=1,!(Ac&4194240)&&(Ac=64),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function QC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Bm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ne=0;function Db(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ob,zm,Mb,Lb,jb,up=!1,Pc=[],ds=null,fs=null,ps=null,fl=new Map,pl=new Map,es=[],YC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n_(t,e){switch(t){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":fl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(e.pointerId)}}function da(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Gl(e),e!==null&&zm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function XC(t,e,n,r,s){switch(e){case"focusin":return ds=da(ds,t,e,n,r,s),!0;case"dragenter":return fs=da(fs,t,e,n,r,s),!0;case"mouseover":return ps=da(ps,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fl.set(i,da(fl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pl.set(i,da(pl.get(i)||null,t,e,n,r,s)),!0}return!1}function Vb(t){var e=ti(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=Ib(n),e!==null){t.blockedOn=e,jb(t.priority,function(){Mb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function du(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ip=r,n.target.dispatchEvent(r),ip=null}else return e=Gl(n),e!==null&&zm(e),t.blockedOn=n,!1;e.shift()}return!0}function r_(t,e,n){du(t)&&n.delete(e)}function JC(){up=!1,ds!==null&&du(ds)&&(ds=null),fs!==null&&du(fs)&&(fs=null),ps!==null&&du(ps)&&(ps=null),fl.forEach(r_),pl.forEach(r_)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,up||(up=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,JC)))}function ml(t){function e(s){return fa(s,t)}if(0<Pc.length){fa(Pc[0],t);for(var n=1;n<Pc.length;n++){var r=Pc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ds!==null&&fa(ds,t),fs!==null&&fa(fs,t),ps!==null&&fa(ps,t),fl.forEach(e),pl.forEach(e),n=0;n<es.length;n++)r=es[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)Vb(n),n.blockedOn===null&&es.shift()}var co=Ur.ReactCurrentBatchConfig,Bu=!0;function ZC(t,e,n,r){var s=Ne,i=co.transition;co.transition=null;try{Ne=1,$m(t,e,n,r)}finally{Ne=s,co.transition=i}}function eA(t,e,n,r){var s=Ne,i=co.transition;co.transition=null;try{Ne=4,$m(t,e,n,r)}finally{Ne=s,co.transition=i}}function $m(t,e,n,r){if(Bu){var s=hp(t,e,n,r);if(s===null)cf(t,e,r,zu,n),n_(t,r);else if(XC(s,t,e,n,r))r.stopPropagation();else if(n_(t,r),e&4&&-1<YC.indexOf(t)){for(;s!==null;){var i=Gl(s);if(i!==null&&Ob(i),i=hp(t,e,n,r),i===null&&cf(t,e,r,zu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cf(t,e,r,null,n)}}var zu=null;function hp(t,e,n,r){if(zu=null,t=Fm(r),t=ti(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ib(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zu=t,null}function Fb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BC()){case Um:return 1;case Rb:return 4;case Fu:case zC:return 16;case Pb:return 536870912;default:return 16}default:return 16}}var os=null,Wm=null,fu=null;function Ub(){if(fu)return fu;var t,e=Wm,n=e.length,r,s="value"in os?os.value:os.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return fu=s.slice(t,1<r?1-r:void 0)}function pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nc(){return!0}function s_(){return!1}function Tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nc:s_,this.isPropagationStopped=s_,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),e}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hm=Tn(Fo),Kl=Ye({},Fo,{view:0,detail:0}),tA=Tn(Kl),Zd,ef,pa,Fh=Ye({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pa&&(pa&&t.type==="mousemove"?(Zd=t.screenX-pa.screenX,ef=t.screenY-pa.screenY):ef=Zd=0,pa=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:ef}}),i_=Tn(Fh),nA=Ye({},Fh,{dataTransfer:0}),rA=Tn(nA),sA=Ye({},Kl,{relatedTarget:0}),tf=Tn(sA),iA=Ye({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),oA=Tn(iA),aA=Ye({},Fo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lA=Tn(aA),cA=Ye({},Fo,{data:0}),o_=Tn(cA),uA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dA[t])?!!e[t]:!1}function qm(){return fA}var pA=Ye({},Kl,{key:function(t){if(t.key){var e=uA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qm,charCode:function(t){return t.type==="keypress"?pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mA=Tn(pA),gA=Ye({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a_=Tn(gA),yA=Ye({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qm}),_A=Tn(yA),vA=Ye({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),wA=Tn(vA),xA=Ye({},Fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bA=Tn(xA),EA=[9,13,27,32],Km=Nr&&"CompositionEvent"in window,$a=null;Nr&&"documentMode"in document&&($a=document.documentMode);var TA=Nr&&"TextEvent"in window&&!$a,Bb=Nr&&(!Km||$a&&8<$a&&11>=$a),l_=" ",c_=!1;function zb(t,e){switch(t){case"keyup":return EA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $b(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yi=!1;function kA(t,e){switch(t){case"compositionend":return $b(e);case"keypress":return e.which!==32?null:(c_=!0,l_);case"textInput":return t=e.data,t===l_&&c_?null:t;default:return null}}function IA(t,e){if(Yi)return t==="compositionend"||!Km&&zb(t,e)?(t=Ub(),fu=Wm=os=null,Yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bb&&e.locale!=="ko"?null:e.data;default:return null}}var SA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SA[t.type]:e==="textarea"}function Wb(t,e,n,r){xb(r),e=$u(e,"onChange"),0<e.length&&(n=new Hm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wa=null,gl=null;function CA(t){tE(t,0)}function Uh(t){var e=Zi(t);if(pb(e))return t}function AA(t,e){if(t==="change")return e}var Hb=!1;if(Nr){var nf;if(Nr){var rf="oninput"in document;if(!rf){var h_=document.createElement("div");h_.setAttribute("oninput","return;"),rf=typeof h_.oninput=="function"}nf=rf}else nf=!1;Hb=nf&&(!document.documentMode||9<document.documentMode)}function d_(){Wa&&(Wa.detachEvent("onpropertychange",qb),gl=Wa=null)}function qb(t){if(t.propertyName==="value"&&Uh(gl)){var e=[];Wb(e,gl,t,Fm(t)),kb(CA,e)}}function RA(t,e,n){t==="focusin"?(d_(),Wa=e,gl=n,Wa.attachEvent("onpropertychange",qb)):t==="focusout"&&d_()}function PA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uh(gl)}function NA(t,e){if(t==="click")return Uh(e)}function DA(t,e){if(t==="input"||t==="change")return Uh(e)}function OA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:OA;function yl(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kf.call(e,s)||!Xn(t[s],e[s]))return!1}return!0}function f_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p_(t,e){var n=f_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f_(n)}}function Kb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gb(){for(var t=window,e=Lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lu(t.document)}return e}function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MA(t){var e=Gb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kb(n.ownerDocument.documentElement,n)){if(r!==null&&Gm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=p_(n,i);var o=p_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LA=Nr&&"documentMode"in document&&11>=document.documentMode,Xi=null,dp=null,Ha=null,fp=!1;function m_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fp||Xi==null||Xi!==Lu(r)||(r=Xi,"selectionStart"in r&&Gm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ha&&yl(Ha,r)||(Ha=r,r=$u(dp,"onSelect"),0<r.length&&(e=new Hm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xi)))}function Dc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ji={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},sf={},Qb={};Nr&&(Qb=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Bh(t){if(sf[t])return sf[t];if(!Ji[t])return t;var e=Ji[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qb)return sf[t]=e[n];return t}var Yb=Bh("animationend"),Xb=Bh("animationiteration"),Jb=Bh("animationstart"),Zb=Bh("transitionend"),eE=new Map,g_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){eE.set(t,e),Ri(e,[t])}for(var of=0;of<g_.length;of++){var af=g_[of],jA=af.toLowerCase(),VA=af[0].toUpperCase()+af.slice(1);Ds(jA,"on"+VA)}Ds(Yb,"onAnimationEnd");Ds(Xb,"onAnimationIteration");Ds(Jb,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(Zb,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function y_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jC(r,e,void 0,t),t.currentTarget=null}function tE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;y_(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;y_(s,a,c),i=l}}}if(Vu)throw t=lp,Vu=!1,lp=null,t}function ze(t,e){var n=e[_p];n===void 0&&(n=e[_p]=new Set);var r=t+"__bubble";n.has(r)||(nE(e,t,2,!1),n.add(r))}function lf(t,e,n){var r=0;e&&(r|=4),nE(n,t,r,e)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function _l(t){if(!t[Oc]){t[Oc]=!0,cb.forEach(function(n){n!=="selectionchange"&&(FA.has(n)||lf(n,!1,t),lf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Oc]||(e[Oc]=!0,lf("selectionchange",!1,e))}}function nE(t,e,n,r){switch(Fb(e)){case 1:var s=ZC;break;case 4:s=eA;break;default:s=$m}n=s.bind(null,e,n,t),s=void 0,!ap||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ti(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}kb(function(){var c=i,h=Fm(n),f=[];e:{var m=eE.get(t);if(m!==void 0){var y=Hm,x=t;switch(t){case"keypress":if(pu(n)===0)break e;case"keydown":case"keyup":y=mA;break;case"focusin":x="focus",y=tf;break;case"focusout":x="blur",y=tf;break;case"beforeblur":case"afterblur":y=tf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=i_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=rA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_A;break;case Yb:case Xb:case Jb:y=oA;break;case Zb:y=wA;break;case"scroll":y=tA;break;case"wheel":y=bA;break;case"copy":case"cut":case"paste":y=lA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=a_}var E=(e&4)!==0,T=!E&&t==="scroll",v=E?m!==null?m+"Capture":null:m;E=[];for(var _=c,b;_!==null;){b=_;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,v!==null&&(R=dl(_,v),R!=null&&E.push(vl(_,R,b)))),T)break;_=_.return}0<E.length&&(m=new y(m,x,null,n,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==ip&&(x=n.relatedTarget||n.fromElement)&&(ti(x)||x[Dr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=c,x=x?ti(x):null,x!==null&&(T=Pi(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(E=i_,R="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=a_,R="onPointerLeave",v="onPointerEnter",_="pointer"),T=y==null?m:Zi(y),b=x==null?m:Zi(x),m=new E(R,_+"leave",y,n,h),m.target=T,m.relatedTarget=b,R=null,ti(h)===c&&(E=new E(v,_+"enter",x,n,h),E.target=b,E.relatedTarget=T,R=E),T=R,y&&x)t:{for(E=y,v=x,_=0,b=E;b;b=zi(b))_++;for(b=0,R=v;R;R=zi(R))b++;for(;0<_-b;)E=zi(E),_--;for(;0<b-_;)v=zi(v),b--;for(;_--;){if(E===v||v!==null&&E===v.alternate)break t;E=zi(E),v=zi(v)}E=null}else E=null;y!==null&&__(f,m,y,E,!1),x!==null&&T!==null&&__(f,T,x,E,!0)}}e:{if(m=c?Zi(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var P=AA;else if(u_(m))if(Hb)P=DA;else{P=PA;var M=RA}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=NA);if(P&&(P=P(t,c))){Wb(f,P,n,h);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&ep(m,"number",m.value)}switch(M=c?Zi(c):window,t){case"focusin":(u_(M)||M.contentEditable==="true")&&(Xi=M,dp=c,Ha=null);break;case"focusout":Ha=dp=Xi=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,m_(f,n,h);break;case"selectionchange":if(LA)break;case"keydown":case"keyup":m_(f,n,h)}var k;if(Km)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Yi?zb(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Bb&&n.locale!=="ko"&&(Yi||w!=="onCompositionStart"?w==="onCompositionEnd"&&Yi&&(k=Ub()):(os=h,Wm="value"in os?os.value:os.textContent,Yi=!0)),M=$u(c,w),0<M.length&&(w=new o_(w,t,null,n,h),f.push({event:w,listeners:M}),k?w.data=k:(k=$b(n),k!==null&&(w.data=k)))),(k=TA?kA(t,n):IA(t,n))&&(c=$u(c,"onBeforeInput"),0<c.length&&(h=new o_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=k))}tE(f,e)})}function vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $u(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=dl(t,n),i!=null&&r.unshift(vl(t,i,s)),i=dl(t,e),i!=null&&r.push(vl(t,i,s))),t=t.return}return r}function zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function __(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=dl(n,i),l!=null&&o.unshift(vl(n,l,a))):s||(l=dl(n,i),l!=null&&o.push(vl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UA=/\r\n?/g,BA=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(UA,`
`).replace(BA,"")}function Mc(t,e,n){if(e=v_(e),v_(t)!==e&&n)throw Error(W(425))}function Wu(){}var pp=null,mp=null;function gp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yp=typeof setTimeout=="function"?setTimeout:void 0,zA=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,$A=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(WA)}:yp;function WA(t){setTimeout(function(){throw t})}function uf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ml(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ml(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uo=Math.random().toString(36).slice(2),ar="__reactFiber$"+Uo,wl="__reactProps$"+Uo,Dr="__reactContainer$"+Uo,_p="__reactEvents$"+Uo,HA="__reactListeners$"+Uo,qA="__reactHandles$"+Uo;function ti(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x_(t);t!==null;){if(n=t[ar])return n;t=x_(t)}return e}t=n,n=t.parentNode}return null}function Gl(t){return t=t[ar]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function zh(t){return t[wl]||null}var vp=[],eo=-1;function Os(t){return{current:t}}function He(t){0>eo||(t.current=vp[eo],vp[eo]=null,eo--)}function Ve(t,e){eo++,vp[eo]=t.current,t.current=e}var Is={},Bt=Os(Is),nn=Os(!1),mi=Is;function wo(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function Hu(){He(nn),He(Bt)}function b_(t,e,n){if(Bt.current!==Is)throw Error(W(168));Ve(Bt,e),Ve(nn,n)}function rE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,RC(t)||"Unknown",s));return Ye({},n,r)}function qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,mi=Bt.current,Ve(Bt,t),Ve(nn,nn.current),!0}function E_(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=rE(t,e,mi),r.__reactInternalMemoizedMergedChildContext=t,He(nn),He(Bt),Ve(Bt,t)):He(nn),Ve(nn,n)}var br=null,$h=!1,hf=!1;function sE(t){br===null?br=[t]:br.push(t)}function KA(t){$h=!0,sE(t)}function Ms(){if(!hf&&br!==null){hf=!0;var t=0,e=Ne;try{var n=br;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,$h=!1}catch(s){throw br!==null&&(br=br.slice(t+1)),Ab(Um,Ms),s}finally{Ne=e,hf=!1}}return null}var to=[],no=0,Ku=null,Gu=0,Sn=[],Cn=0,gi=null,kr=1,Ir="";function Ys(t,e){to[no++]=Gu,to[no++]=Ku,Ku=t,Gu=e}function iE(t,e,n){Sn[Cn++]=kr,Sn[Cn++]=Ir,Sn[Cn++]=gi,gi=t;var r=kr;t=Ir;var s=32-Gn(r)-1;r&=~(1<<s),n+=1;var i=32-Gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kr=1<<32-Gn(e)+s|n<<s|r,Ir=i+t}else kr=1<<i|n<<s|r,Ir=t}function Qm(t){t.return!==null&&(Ys(t,1),iE(t,1,0))}function Ym(t){for(;t===Ku;)Ku=to[--no],to[no]=null,Gu=to[--no],to[no]=null;for(;t===gi;)gi=Sn[--Cn],Sn[Cn]=null,Ir=Sn[--Cn],Sn[Cn]=null,kr=Sn[--Cn],Sn[Cn]=null}var wn=null,yn=null,qe=!1,Wn=null;function oE(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function T_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,yn=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gi!==null?{id:kr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,yn=null,!0):!1;default:return!1}}function wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xp(t){if(qe){var e=yn;if(e){var n=e;if(!T_(t,e)){if(wp(t))throw Error(W(418));e=ms(n.nextSibling);var r=wn;e&&T_(t,e)?oE(r,n):(t.flags=t.flags&-4097|2,qe=!1,wn=t)}}else{if(wp(t))throw Error(W(418));t.flags=t.flags&-4097|2,qe=!1,wn=t}}}function k_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Lc(t){if(t!==wn)return!1;if(!qe)return k_(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gp(t.type,t.memoizedProps)),e&&(e=yn)){if(wp(t))throw aE(),Error(W(418));for(;e;)oE(t,e),e=ms(e.nextSibling)}if(k_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=wn?ms(t.stateNode.nextSibling):null;return!0}function aE(){for(var t=yn;t;)t=ms(t.nextSibling)}function xo(){yn=wn=null,qe=!1}function Xm(t){Wn===null?Wn=[t]:Wn.push(t)}var GA=Ur.ReactCurrentBatchConfig;function ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function jc(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I_(t){var e=t._init;return e(t._payload)}function lE(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=vs(v,_),v.index=0,v.sibling=null,v}function i(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=2,_):b):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,b,R){return _===null||_.tag!==6?(_=_f(b,v.mode,R),_.return=v,_):(_=s(_,b),_.return=v,_)}function l(v,_,b,R){var P=b.type;return P===Qi?h(v,_,b.props.children,R,b.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Jr&&I_(P)===_.type)?(R=s(_,b.props),R.ref=ma(v,_,b),R.return=v,R):(R=xu(b.type,b.key,b.props,null,v.mode,R),R.ref=ma(v,_,b),R.return=v,R)}function c(v,_,b,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=vf(b,v.mode,R),_.return=v,_):(_=s(_,b.children||[]),_.return=v,_)}function h(v,_,b,R,P){return _===null||_.tag!==7?(_=hi(b,v.mode,R,P),_.return=v,_):(_=s(_,b),_.return=v,_)}function f(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_f(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ic:return b=xu(_.type,_.key,_.props,null,v.mode,b),b.ref=ma(v,null,_),b.return=v,b;case Gi:return _=vf(_,v.mode,b),_.return=v,_;case Jr:var R=_._init;return f(v,R(_._payload),b)}if(Ia(_)||ua(_))return _=hi(_,v.mode,b,null),_.return=v,_;jc(v,_)}return null}function m(v,_,b,R){var P=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return P!==null?null:a(v,_,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ic:return b.key===P?l(v,_,b,R):null;case Gi:return b.key===P?c(v,_,b,R):null;case Jr:return P=b._init,m(v,_,P(b._payload),R)}if(Ia(b)||ua(b))return P!==null?null:h(v,_,b,R,null);jc(v,b)}return null}function y(v,_,b,R,P){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(b)||null,a(_,v,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ic:return v=v.get(R.key===null?b:R.key)||null,l(_,v,R,P);case Gi:return v=v.get(R.key===null?b:R.key)||null,c(_,v,R,P);case Jr:var M=R._init;return y(v,_,b,M(R._payload),P)}if(Ia(R)||ua(R))return v=v.get(b)||null,h(_,v,R,P,null);jc(_,R)}return null}function x(v,_,b,R){for(var P=null,M=null,k=_,w=_=0,I=null;k!==null&&w<b.length;w++){k.index>w?(I=k,k=null):I=k.sibling;var A=m(v,k,b[w],R);if(A===null){k===null&&(k=I);break}t&&k&&A.alternate===null&&e(v,k),_=i(A,_,w),M===null?P=A:M.sibling=A,M=A,k=I}if(w===b.length)return n(v,k),qe&&Ys(v,w),P;if(k===null){for(;w<b.length;w++)k=f(v,b[w],R),k!==null&&(_=i(k,_,w),M===null?P=k:M.sibling=k,M=k);return qe&&Ys(v,w),P}for(k=r(v,k);w<b.length;w++)I=y(k,v,w,b[w],R),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?w:I.key),_=i(I,_,w),M===null?P=I:M.sibling=I,M=I);return t&&k.forEach(function(N){return e(v,N)}),qe&&Ys(v,w),P}function E(v,_,b,R){var P=ua(b);if(typeof P!="function")throw Error(W(150));if(b=P.call(b),b==null)throw Error(W(151));for(var M=P=null,k=_,w=_=0,I=null,A=b.next();k!==null&&!A.done;w++,A=b.next()){k.index>w?(I=k,k=null):I=k.sibling;var N=m(v,k,A.value,R);if(N===null){k===null&&(k=I);break}t&&k&&N.alternate===null&&e(v,k),_=i(N,_,w),M===null?P=N:M.sibling=N,M=N,k=I}if(A.done)return n(v,k),qe&&Ys(v,w),P;if(k===null){for(;!A.done;w++,A=b.next())A=f(v,A.value,R),A!==null&&(_=i(A,_,w),M===null?P=A:M.sibling=A,M=A);return qe&&Ys(v,w),P}for(k=r(v,k);!A.done;w++,A=b.next())A=y(k,v,w,A.value,R),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?w:A.key),_=i(A,_,w),M===null?P=A:M.sibling=A,M=A);return t&&k.forEach(function(O){return e(v,O)}),qe&&Ys(v,w),P}function T(v,_,b,R){if(typeof b=="object"&&b!==null&&b.type===Qi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ic:e:{for(var P=b.key,M=_;M!==null;){if(M.key===P){if(P=b.type,P===Qi){if(M.tag===7){n(v,M.sibling),_=s(M,b.props.children),_.return=v,v=_;break e}}else if(M.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Jr&&I_(P)===M.type){n(v,M.sibling),_=s(M,b.props),_.ref=ma(v,M,b),_.return=v,v=_;break e}n(v,M);break}else e(v,M);M=M.sibling}b.type===Qi?(_=hi(b.props.children,v.mode,R,b.key),_.return=v,v=_):(R=xu(b.type,b.key,b.props,null,v.mode,R),R.ref=ma(v,_,b),R.return=v,v=R)}return o(v);case Gi:e:{for(M=b.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),_=s(_,b.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=vf(b,v.mode,R),_.return=v,v=_}return o(v);case Jr:return M=b._init,T(v,_,M(b._payload),R)}if(Ia(b))return x(v,_,b,R);if(ua(b))return E(v,_,b,R);jc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,b),_.return=v,v=_):(n(v,_),_=_f(b,v.mode,R),_.return=v,v=_),o(v)):n(v,_)}return T}var bo=lE(!0),cE=lE(!1),Qu=Os(null),Yu=null,ro=null,Jm=null;function Zm(){Jm=ro=Yu=null}function eg(t){var e=Qu.current;He(Qu),t._currentValue=e}function bp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){Yu=t,Jm=ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Jm!==t)if(t={context:t,memoizedValue:e,next:null},ro===null){if(Yu===null)throw Error(W(308));ro=t,Yu.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return e}var ni=null;function tg(t){ni===null?ni=[t]:ni.push(t)}function uE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,tg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function ng(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Or(t,n)}return s=r.interleaved,s===null?(e.next=e,tg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Or(t,n)}function mu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}function S_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xu(t,e,n,r){var s=t.updateQueue;Zr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,E=a;switch(m=e,y=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){f=x.call(y,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,m=typeof x=="function"?x.call(y,f,m):x,m==null)break e;f=Ye({},f,m);break e;case 2:Zr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_i|=o,t.lanes=o,t.memoizedState=f}}function C_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Ql={},ur=Os(Ql),xl=Os(Ql),bl=Os(Ql);function ri(t){if(t===Ql)throw Error(W(174));return t}function rg(t,e){switch(Ve(bl,e),Ve(xl,t),Ve(ur,Ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:np(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=np(e,t)}He(ur),Ve(ur,e)}function Eo(){He(ur),He(xl),He(bl)}function dE(t){ri(bl.current);var e=ri(ur.current),n=np(e,t.type);e!==n&&(Ve(xl,t),Ve(ur,n))}function sg(t){xl.current===t&&(He(ur),He(xl))}var Ke=Os(0);function Ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var df=[];function ig(){for(var t=0;t<df.length;t++)df[t]._workInProgressVersionPrimary=null;df.length=0}var gu=Ur.ReactCurrentDispatcher,ff=Ur.ReactCurrentBatchConfig,yi=0,Ge=null,ft=null,_t=null,Zu=!1,qa=!1,El=0,QA=0;function Ot(){throw Error(W(321))}function og(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function ag(t,e,n,r,s,i){if(yi=i,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gu.current=t===null||t.memoizedState===null?ZA:eR,t=n(r,s),qa){i=0;do{if(qa=!1,El=0,25<=i)throw Error(W(301));i+=1,_t=ft=null,e.updateQueue=null,gu.current=tR,t=n(r,s)}while(qa)}if(gu.current=eh,e=ft!==null&&ft.next!==null,yi=0,_t=ft=Ge=null,Zu=!1,e)throw Error(W(300));return t}function lg(){var t=El!==0;return El=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ge.memoizedState=_t=t:_t=_t.next=t,_t}function On(){if(ft===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=_t===null?Ge.memoizedState:_t.next;if(e!==null)_t=e,ft=t;else{if(t===null)throw Error(W(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},_t===null?Ge.memoizedState=_t=t:_t=_t.next=t}return _t}function Tl(t,e){return typeof e=="function"?e(t):e}function pf(t){var e=On(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((yi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ge.lanes|=h,_i|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Xn(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ge.lanes|=i,_i|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mf(t){var e=On(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Xn(i,e.memoizedState)||(en=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fE(){}function pE(t,e){var n=Ge,r=On(),s=e(),i=!Xn(r.memoizedState,s);if(i&&(r.memoizedState=s,en=!0),r=r.queue,cg(yE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,kl(9,gE.bind(null,n,r,s,e),void 0,null),vt===null)throw Error(W(349));yi&30||mE(n,e,s)}return s}function mE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gE(t,e,n,r){e.value=n,e.getSnapshot=r,_E(e)&&vE(t)}function yE(t,e,n){return n(function(){_E(e)&&vE(t)})}function _E(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function vE(t){var e=Or(t,1);e!==null&&Qn(e,t,1,-1)}function A_(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:t},e.queue=t,t=t.dispatch=JA.bind(null,Ge,t),[e.memoizedState,t]}function kl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wE(){return On().memoizedState}function yu(t,e,n,r){var s=ir();Ge.flags|=t,s.memoizedState=kl(1|e,n,void 0,r===void 0?null:r)}function Wh(t,e,n,r){var s=On();r=r===void 0?null:r;var i=void 0;if(ft!==null){var o=ft.memoizedState;if(i=o.destroy,r!==null&&og(r,o.deps)){s.memoizedState=kl(e,n,i,r);return}}Ge.flags|=t,s.memoizedState=kl(1|e,n,i,r)}function R_(t,e){return yu(8390656,8,t,e)}function cg(t,e){return Wh(2048,8,t,e)}function xE(t,e){return Wh(4,2,t,e)}function bE(t,e){return Wh(4,4,t,e)}function EE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TE(t,e,n){return n=n!=null?n.concat([t]):null,Wh(4,4,EE.bind(null,e,t),n)}function ug(){}function kE(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&og(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function IE(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&og(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function SE(t,e,n){return yi&21?(Xn(n,e)||(n=Nb(),Ge.lanes|=n,_i|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function YA(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=ff.transition;ff.transition={};try{t(!1),e()}finally{Ne=n,ff.transition=r}}function CE(){return On().memoizedState}function XA(t,e,n){var r=_s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AE(t))RE(e,n);else if(n=uE(t,e,n,r),n!==null){var s=Gt();Qn(n,t,r,s),PE(n,e,r)}}function JA(t,e,n){var r=_s(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AE(t))RE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Xn(a,o)){var l=e.interleaved;l===null?(s.next=s,tg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=uE(t,e,s,r),n!==null&&(s=Gt(),Qn(n,t,r,s),PE(n,e,r))}}function AE(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function RE(t,e){qa=Zu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}var eh={readContext:Dn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},ZA={readContext:Dn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:R_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yu(4194308,4,EE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){return yu(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XA.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:A_,useDebugValue:ug,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=A_(!1),e=t[0];return t=YA.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,s=ir();if(qe){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),vt===null)throw Error(W(349));yi&30||mE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,R_(yE.bind(null,r,i,t),[t]),r.flags|=2048,kl(9,gE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ir(),e=vt.identifierPrefix;if(qe){var n=Ir,r=kr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=El++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eR={readContext:Dn,useCallback:kE,useContext:Dn,useEffect:cg,useImperativeHandle:TE,useInsertionEffect:xE,useLayoutEffect:bE,useMemo:IE,useReducer:pf,useRef:wE,useState:function(){return pf(Tl)},useDebugValue:ug,useDeferredValue:function(t){var e=On();return SE(e,ft.memoizedState,t)},useTransition:function(){var t=pf(Tl)[0],e=On().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:pE,useId:CE,unstable_isNewReconciler:!1},tR={readContext:Dn,useCallback:kE,useContext:Dn,useEffect:cg,useImperativeHandle:TE,useInsertionEffect:xE,useLayoutEffect:bE,useMemo:IE,useReducer:mf,useRef:wE,useState:function(){return mf(Tl)},useDebugValue:ug,useDeferredValue:function(t){var e=On();return ft===null?e.memoizedState=t:SE(e,ft.memoizedState,t)},useTransition:function(){var t=mf(Tl)[0],e=On().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:pE,useId:CE,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ep(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hh={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gt(),s=_s(t),i=Rr(r,s);i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Qn(e,t,s,r),mu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gt(),s=_s(t),i=Rr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Qn(e,t,s,r),mu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gt(),r=_s(t),s=Rr(n,r);s.tag=2,e!=null&&(s.callback=e),e=gs(t,s,r),e!==null&&(Qn(e,t,r,n),mu(e,t,r))}};function P_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yl(n,r)||!yl(s,i):!0}function NE(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=Dn(i):(s=rn(e)?mi:Bt.current,r=e.contextTypes,i=(r=r!=null)?wo(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function N_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hh.enqueueReplaceState(e,e.state,null)}function Tp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ng(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Dn(i):(i=rn(e)?mi:Bt.current,s.context=wo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ep(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hh.enqueueReplaceState(s,s.state,null),Xu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function To(t,e){try{var n="",r=e;do n+=AC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nR=typeof WeakMap=="function"?WeakMap:Map;function DE(t,e,n){n=Rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nh||(nh=!0,Mp=r),kp(t,e)},n}function OE(t,e,n){n=Rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){kp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kp(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function D_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gR.bind(null,t,e,n),e.then(t,t))}function O_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rr(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var rR=Ur.ReactCurrentOwner,en=!1;function qt(t,e,n,r){e.child=t===null?cE(e,null,n,r):bo(e,t.child,n,r)}function L_(t,e,n,r,s){n=n.render;var i=e.ref;return uo(e,s),r=ag(t,e,n,r,i,s),n=lg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(qe&&n&&Qm(e),e.flags|=1,qt(t,e,r,s),e.child)}function j_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!_g(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ME(t,e,i,r,s)):(t=xu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yl,n(o,r)&&t.ref===e.ref)return Mr(t,e,s)}return e.flags|=1,t=vs(i,r),t.ref=e.ref,t.return=e,e.child=t}function ME(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yl(i,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Mr(t,e,s)}return Ip(t,e,n,r,s)}function LE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(io,pn),pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(io,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ve(io,pn),pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ve(io,pn),pn|=r;return qt(t,e,s,n),e.child}function jE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ip(t,e,n,r,s){var i=rn(n)?mi:Bt.current;return i=wo(e,i),uo(e,s),n=ag(t,e,n,r,i,s),r=lg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(qe&&r&&Qm(e),e.flags|=1,qt(t,e,n,s),e.child)}function V_(t,e,n,r,s){if(rn(n)){var i=!0;qu(e)}else i=!1;if(uo(e,s),e.stateNode===null)_u(t,e),NE(e,n,r),Tp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=rn(n)?mi:Bt.current,c=wo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&N_(e,o,r,c),Zr=!1;var m=e.memoizedState;o.state=m,Xu(e,r,o,s),l=e.memoizedState,a!==r||m!==l||nn.current||Zr?(typeof h=="function"&&(Ep(e,n,h,r),l=e.memoizedState),(a=Zr||P_(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:zn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=rn(n)?mi:Bt.current,l=wo(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&N_(e,o,r,l),Zr=!1,m=e.memoizedState,o.state=m,Xu(e,r,o,s);var x=e.memoizedState;a!==f||m!==x||nn.current||Zr?(typeof y=="function"&&(Ep(e,n,y,r),x=e.memoizedState),(c=Zr||P_(e,n,c,r,m,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Sp(t,e,n,r,i,s)}function Sp(t,e,n,r,s,i){jE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&E_(e,n,!1),Mr(t,e,i);r=e.stateNode,rR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,i),e.child=bo(e,null,a,i)):qt(t,e,a,i),e.memoizedState=r.state,s&&E_(e,n,!0),e.child}function VE(t){var e=t.stateNode;e.pendingContext?b_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&b_(t,e.context,!1),rg(t,e.containerInfo)}function F_(t,e,n,r,s){return xo(),Xm(s),e.flags|=256,qt(t,e,n,r),e.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function Ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function FE(t,e,n){var r=e.pendingProps,s=Ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ve(Ke,s&1),t===null)return xp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Gh(o,r,0,null),t=hi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ap(n),e.memoizedState=Cp,t):hg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=vs(a,i):(i=hi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ap(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cp,r}return i=t.child,t=i.sibling,r=vs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hg(t,e){return e=Gh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,n,r){return r!==null&&Xm(r),bo(e,t.child,null,n),t=hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=gf(Error(W(422))),Vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Gh({mode:"visible",children:r.children},s,0,null),i=hi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=Ap(o),e.memoizedState=Cp,i);if(!(e.mode&1))return Vc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=gf(i,r,void 0),Vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,en||a){if(r=vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Or(t,s),Qn(r,t,s,-1))}return yg(),r=gf(Error(W(421))),Vc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,yn=ms(s.nextSibling),wn=e,qe=!0,Wn=null,t!==null&&(Sn[Cn++]=kr,Sn[Cn++]=Ir,Sn[Cn++]=gi,kr=t.id,Ir=t.overflow,gi=e),e=hg(e,r.children),e.flags|=4096,e)}function U_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bp(t.return,e,n)}function yf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function UE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(qt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U_(t,n,e);else if(t.tag===19)U_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ju(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ju(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yf(e,!0,n,null,i);break;case"together":yf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_i|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iR(t,e,n){switch(e.tag){case 3:VE(e),xo();break;case 5:dE(e);break;case 1:rn(e.type)&&qu(e);break;case 4:rg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ve(Qu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?FE(t,e,n):(Ve(Ke,Ke.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);Ve(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return UE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ve(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,LE(t,e,n)}return Mr(t,e,n)}var BE,Rp,zE,$E;BE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rp=function(){};zE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ri(ur.current);var i=null;switch(n){case"input":s=Jf(t,s),r=Jf(t,r),i=[];break;case"select":s=Ye({},s,{value:void 0}),r=Ye({},r,{value:void 0}),i=[];break;case"textarea":s=tp(t,s),r=tp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wu)}rp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ul.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ul.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ze("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};$E=function(t,e,n,r){n!==r&&(e.flags|=4)};function ga(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oR(t,e,n){var r=e.pendingProps;switch(Ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return rn(e.type)&&Hu(),Mt(e),null;case 3:return r=e.stateNode,Eo(),He(nn),He(Bt),ig(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Vp(Wn),Wn=null))),Rp(t,e),Mt(e),null;case 5:sg(e);var s=ri(bl.current);if(n=e.type,t!==null&&e.stateNode!=null)zE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Mt(e),null}if(t=ri(ur.current),Lc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ar]=e,r[wl]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<Ca.length;s++)ze(Ca[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Q0(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":X0(r,i),ze("invalid",r)}rp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Mc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Mc(r.textContent,a,t),s=["children",""+a]):ul.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Sc(r),Y0(r,i,!0);break;case"textarea":Sc(r),J0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[wl]=r,BE(t,e,!1,!1),e.stateNode=t;e:{switch(o=sp(n,r),n){case"dialog":ze("cancel",t),ze("close",t),s=r;break;case"iframe":case"object":case"embed":ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ca.length;s++)ze(Ca[s],t);s=r;break;case"source":ze("error",t),s=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=r;break;case"details":ze("toggle",t),s=r;break;case"input":Q0(t,r),s=Jf(t,r),ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ye({},r,{value:void 0}),ze("invalid",t);break;case"textarea":X0(t,r),s=tp(t,r),ze("invalid",t);break;default:s=r}rp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_b(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hl(t,l):typeof l=="number"&&hl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ul.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ze("scroll",t):l!=null&&Mm(t,i,l,o))}switch(n){case"input":Sc(t),Y0(t,r,!1);break;case"textarea":Sc(t),J0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ks(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)$E(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=ri(bl.current),ri(ur.current),Lc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(i=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Mc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Mt(e),null;case 13:if(He(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&yn!==null&&e.mode&1&&!(e.flags&128))aE(),xo(),e.flags|=98560,i=!1;else if(i=Lc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[ar]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Wn!==null&&(Vp(Wn),Wn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?gt===0&&(gt=3):yg())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Eo(),Rp(t,e),t===null&&_l(e.stateNode.containerInfo),Mt(e),null;case 10:return eg(e.type._context),Mt(e),null;case 17:return rn(e.type)&&Hu(),Mt(e),null;case 19:if(He(Ke),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ga(i,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ju(t),o!==null){for(e.flags|=128,ga(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ke,Ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&at()>ko&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ju(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ga(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return Mt(e),null}else 2*at()-i.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=at(),e.sibling=null,n=Ke.current,Ve(Ke,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return gg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function aR(t,e){switch(Ym(e),e.tag){case 1:return rn(e.type)&&Hu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Eo(),He(nn),He(Bt),ig(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sg(e),null;case 13:if(He(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Ke),null;case 4:return Eo(),null;case 10:return eg(e.type._context),null;case 22:case 23:return gg(),null;case 24:return null;default:return null}}var Fc=!1,Vt=!1,lR=typeof WeakSet=="function"?WeakSet:Set,Y=null;function so(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function Pp(t,e,n){try{n()}catch(r){tt(t,e,r)}}var B_=!1;function cR(t,e){if(pp=Bu,t=Gb(),Gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mp={focusedElem:t,selectionRange:n},Bu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,T=x.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:zn(e.type,E),T);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(R){tt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return x=B_,B_=!1,x}function Ka(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pp(e,n,i)}s=s.next}while(s!==r)}}function qh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WE(t){var e=t.alternate;e!==null&&(t.alternate=null,WE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[wl],delete e[_p],delete e[HA],delete e[qA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HE(t){return t.tag===5||t.tag===3||t.tag===4}function z_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wu));else if(r!==4&&(t=t.child,t!==null))for(Dp(t,e,n),t=t.sibling;t!==null;)Dp(t,e,n),t=t.sibling}function Op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Op(t,e,n),t=t.sibling;t!==null;)Op(t,e,n),t=t.sibling}var Et=null,$n=!1;function qr(t,e,n){for(n=n.child;n!==null;)qE(t,e,n),n=n.sibling}function qE(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Vh,n)}catch{}switch(n.tag){case 5:Vt||so(n,e);case 6:var r=Et,s=$n;Et=null,qr(t,e,n),Et=r,$n=s,Et!==null&&($n?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&($n?(t=Et,n=n.stateNode,t.nodeType===8?uf(t.parentNode,n):t.nodeType===1&&uf(t,n),ml(t)):uf(Et,n.stateNode));break;case 4:r=Et,s=$n,Et=n.stateNode.containerInfo,$n=!0,qr(t,e,n),Et=r,$n=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Pp(n,e,o),s=s.next}while(s!==r)}qr(t,e,n);break;case 1:if(!Vt&&(so(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tt(n,e,a)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,qr(t,e,n),Vt=r):qr(t,e,n);break;default:qr(t,e,n)}}function $_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lR),e.forEach(function(r){var s=_R.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Et=a.stateNode,$n=!1;break e;case 3:Et=a.stateNode.containerInfo,$n=!0;break e;case 4:Et=a.stateNode.containerInfo,$n=!0;break e}a=a.return}if(Et===null)throw Error(W(160));qE(i,o,s),Et=null,$n=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){tt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KE(e,t),e=e.sibling}function KE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),tr(t),r&4){try{Ka(3,t,t.return),qh(3,t)}catch(E){tt(t,t.return,E)}try{Ka(5,t,t.return)}catch(E){tt(t,t.return,E)}}break;case 1:Bn(e,t),tr(t),r&512&&n!==null&&so(n,n.return);break;case 5:if(Bn(e,t),tr(t),r&512&&n!==null&&so(n,n.return),t.flags&32){var s=t.stateNode;try{hl(s,"")}catch(E){tt(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mb(s,i),sp(a,o);var c=sp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?wb(s,f):h==="dangerouslySetInnerHTML"?_b(s,f):h==="children"?hl(s,f):Mm(s,h,f,c)}switch(a){case"input":Zf(s,i);break;case"textarea":gb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?oo(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[wl]=i}catch(E){tt(t,t.return,E)}}break;case 6:if(Bn(e,t),tr(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){tt(t,t.return,E)}}break;case 3:if(Bn(e,t),tr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ml(e.containerInfo)}catch(E){tt(t,t.return,E)}break;case 4:Bn(e,t),tr(t);break;case 13:Bn(e,t),tr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pg=at())),r&4&&$_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(c=Vt)||h,Bn(e,t),Vt=c):Bn(e,t),tr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(f=Y=h;Y!==null;){switch(m=Y,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ka(4,m,m.return);break;case 1:so(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){tt(r,n,E)}}break;case 5:so(m,m.return);break;case 22:if(m.memoizedState!==null){H_(f);continue}}y!==null?(y.return=m,Y=y):H_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vb("display",o))}catch(E){tt(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(E){tt(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bn(e,t),tr(t),r&4&&$_(t);break;case 21:break;default:Bn(e,t),tr(t)}}function tr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HE(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hl(s,""),r.flags&=-33);var i=z_(t);Op(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=z_(t);Dp(t,a,o);break;default:throw Error(W(161))}}catch(l){tt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uR(t,e,n){Y=t,GE(t)}function GE(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=Fc;var c=Vt;if(Fc=o,(Vt=l)&&!c)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?q_(s):l!==null?(l.return=o,Y=l):q_(s);for(;i!==null;)Y=i,GE(i),i=i.sibling;Y=s,Fc=a,Vt=c}W_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):W_(t)}}function W_(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||qh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&C_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}C_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ml(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Vt||e.flags&512&&Np(e)}catch(m){tt(e,e.return,m)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function H_(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function q_(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qh(4,e)}catch(l){tt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){tt(e,s,l)}}var i=e.return;try{Np(e)}catch(l){tt(e,i,l)}break;case 5:var o=e.return;try{Np(e)}catch(l){tt(e,o,l)}}}catch(l){tt(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var hR=Math.ceil,th=Ur.ReactCurrentDispatcher,dg=Ur.ReactCurrentOwner,Nn=Ur.ReactCurrentBatchConfig,ke=0,vt=null,ht=null,Ct=0,pn=0,io=Os(0),gt=0,Il=null,_i=0,Kh=0,fg=0,Ga=null,Jt=null,pg=0,ko=1/0,xr=null,nh=!1,Mp=null,ys=null,Uc=!1,as=null,rh=0,Qa=0,Lp=null,vu=-1,wu=0;function Gt(){return ke&6?at():vu!==-1?vu:vu=at()}function _s(t){return t.mode&1?ke&2&&Ct!==0?Ct&-Ct:GA.transition!==null?(wu===0&&(wu=Nb()),wu):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Fb(t.type)),t):1}function Qn(t,e,n,r){if(50<Qa)throw Qa=0,Lp=null,Error(W(185));ql(t,n,r),(!(ke&2)||t!==vt)&&(t===vt&&(!(ke&2)&&(Kh|=n),gt===4&&ts(t,Ct)),sn(t,r),n===1&&ke===0&&!(e.mode&1)&&(ko=at()+500,$h&&Ms()))}function sn(t,e){var n=t.callbackNode;GC(t,e);var r=Uu(t,t===vt?Ct:0);if(r===0)n!==null&&t_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&t_(n),e===1)t.tag===0?KA(K_.bind(null,t)):sE(K_.bind(null,t)),$A(function(){!(ke&6)&&Ms()}),n=null;else{switch(Db(r)){case 1:n=Um;break;case 4:n=Rb;break;case 16:n=Fu;break;case 536870912:n=Pb;break;default:n=Fu}n=nT(n,QE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QE(t,e){if(vu=-1,wu=0,ke&6)throw Error(W(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var r=Uu(t,t===vt?Ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sh(t,r);else{e=r;var s=ke;ke|=2;var i=XE();(vt!==t||Ct!==e)&&(xr=null,ko=at()+500,ui(t,e));do try{pR();break}catch(a){YE(t,a)}while(!0);Zm(),th.current=i,ke=s,ht!==null?e=0:(vt=null,Ct=0,e=gt)}if(e!==0){if(e===2&&(s=cp(t),s!==0&&(r=s,e=jp(t,s))),e===1)throw n=Il,ui(t,0),ts(t,r),sn(t,at()),n;if(e===6)ts(t,r);else{if(s=t.current.alternate,!(r&30)&&!dR(s)&&(e=sh(t,r),e===2&&(i=cp(t),i!==0&&(r=i,e=jp(t,i))),e===1))throw n=Il,ui(t,0),ts(t,r),sn(t,at()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Xs(t,Jt,xr);break;case 3:if(ts(t,r),(r&130023424)===r&&(e=pg+500-at(),10<e)){if(Uu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Gt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yp(Xs.bind(null,t,Jt,xr),e);break}Xs(t,Jt,xr);break;case 4:if(ts(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hR(r/1960))-r,10<r){t.timeoutHandle=yp(Xs.bind(null,t,Jt,xr),r);break}Xs(t,Jt,xr);break;case 5:Xs(t,Jt,xr);break;default:throw Error(W(329))}}}return sn(t,at()),t.callbackNode===n?QE.bind(null,t):null}function jp(t,e){var n=Ga;return t.current.memoizedState.isDehydrated&&(ui(t,e).flags|=256),t=sh(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&Vp(e)),t}function Vp(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function dR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~fg,e&=~Kh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function K_(t){if(ke&6)throw Error(W(327));ho();var e=Uu(t,0);if(!(e&1))return sn(t,at()),null;var n=sh(t,e);if(t.tag!==0&&n===2){var r=cp(t);r!==0&&(e=r,n=jp(t,r))}if(n===1)throw n=Il,ui(t,0),ts(t,e),sn(t,at()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xs(t,Jt,xr),sn(t,at()),null}function mg(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(ko=at()+500,$h&&Ms())}}function vi(t){as!==null&&as.tag===0&&!(ke&6)&&ho();var e=ke;ke|=1;var n=Nn.transition,r=Ne;try{if(Nn.transition=null,Ne=1,t)return t()}finally{Ne=r,Nn.transition=n,ke=e,!(ke&6)&&Ms()}}function gg(){pn=io.current,He(io)}function ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zA(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(Ym(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hu();break;case 3:Eo(),He(nn),He(Bt),ig();break;case 5:sg(r);break;case 4:Eo();break;case 13:He(Ke);break;case 19:He(Ke);break;case 10:eg(r.type._context);break;case 22:case 23:gg()}n=n.return}if(vt=t,ht=t=vs(t.current,null),Ct=pn=e,gt=0,Il=null,fg=Kh=_i=0,Jt=Ga=null,ni!==null){for(e=0;e<ni.length;e++)if(n=ni[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ni=null}return t}function YE(t,e){do{var n=ht;try{if(Zm(),gu.current=eh,Zu){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zu=!1}if(yi=0,_t=ft=Ge=null,qa=!1,El=0,dg.current=null,n===null||n.return===null){gt=1,Il=e,ht=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=O_(o);if(y!==null){y.flags&=-257,M_(y,o,a,i,e),y.mode&1&&D_(i,c,e),e=y,l=c;var x=e.updateQueue;if(x===null){var E=new Set;E.add(l),e.updateQueue=E}else x.add(l);break e}else{if(!(e&1)){D_(i,c,e),yg();break e}l=Error(W(426))}}else if(qe&&a.mode&1){var T=O_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),M_(T,o,a,i,e),Xm(To(l,a));break e}}i=l=To(l,a),gt!==4&&(gt=2),Ga===null?Ga=[i]:Ga.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=DE(i,l,e);S_(i,v);break e;case 1:a=l;var _=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ys===null||!ys.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=OE(i,a,e);S_(i,R);break e}}i=i.return}while(i!==null)}ZE(n)}catch(P){e=P,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function XE(){var t=th.current;return th.current=eh,t===null?eh:t}function yg(){(gt===0||gt===3||gt===2)&&(gt=4),vt===null||!(_i&268435455)&&!(Kh&268435455)||ts(vt,Ct)}function sh(t,e){var n=ke;ke|=2;var r=XE();(vt!==t||Ct!==e)&&(xr=null,ui(t,e));do try{fR();break}catch(s){YE(t,s)}while(!0);if(Zm(),ke=n,th.current=r,ht!==null)throw Error(W(261));return vt=null,Ct=0,gt}function fR(){for(;ht!==null;)JE(ht)}function pR(){for(;ht!==null&&!FC();)JE(ht)}function JE(t){var e=tT(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?ZE(t):ht=e,dg.current=null}function ZE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aR(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ht=null;return}}else if(n=oR(n,e,pn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);gt===0&&(gt=5)}function Xs(t,e,n){var r=Ne,s=Nn.transition;try{Nn.transition=null,Ne=1,mR(t,e,n,r)}finally{Nn.transition=s,Ne=r}return null}function mR(t,e,n,r){do ho();while(as!==null);if(ke&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(QC(t,i),t===vt&&(ht=vt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uc||(Uc=!0,nT(Fu,function(){return ho(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nn.transition,Nn.transition=null;var o=Ne;Ne=1;var a=ke;ke|=4,dg.current=null,cR(t,n),KE(n,t),MA(mp),Bu=!!pp,mp=pp=null,t.current=n,uR(n),UC(),ke=a,Ne=o,Nn.transition=i}else t.current=n;if(Uc&&(Uc=!1,as=t,rh=s),i=t.pendingLanes,i===0&&(ys=null),$C(n.stateNode),sn(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nh)throw nh=!1,t=Mp,Mp=null,t;return rh&1&&t.tag!==0&&ho(),i=t.pendingLanes,i&1?t===Lp?Qa++:(Qa=0,Lp=t):Qa=0,Ms(),null}function ho(){if(as!==null){var t=Db(rh),e=Nn.transition,n=Ne;try{if(Nn.transition=null,Ne=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,rh=0,ke&6)throw Error(W(331));var s=ke;for(ke|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:Ka(8,h,i)}var f=h.child;if(f!==null)f.return=h,Y=f;else for(;Y!==null;){h=Y;var m=h.sibling,y=h.return;if(WE(h),h===c){Y=null;break}if(m!==null){m.return=y,Y=m;break}Y=y}}}var x=i.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ka(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Y=v;break e}Y=i.return}}var _=t.current;for(Y=_;Y!==null;){o=Y;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Y=b;else e:for(o=_;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qh(9,a)}}catch(P){tt(a,a.return,P)}if(a===o){Y=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Y=R;break e}Y=a.return}}if(ke=s,Ms(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Vh,t)}catch{}r=!0}return r}finally{Ne=n,Nn.transition=e}}return!1}function G_(t,e,n){e=To(n,e),e=DE(t,e,1),t=gs(t,e,1),e=Gt(),t!==null&&(ql(t,1,e),sn(t,e))}function tt(t,e,n){if(t.tag===3)G_(t,t,n);else for(;e!==null;){if(e.tag===3){G_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=To(n,t),t=OE(e,t,1),e=gs(e,t,1),t=Gt(),e!==null&&(ql(e,1,t),sn(e,t));break}}e=e.return}}function gR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Ct&n)===n&&(gt===4||gt===3&&(Ct&130023424)===Ct&&500>at()-pg?ui(t,0):fg|=n),sn(t,e)}function eT(t,e){e===0&&(t.mode&1?(e=Rc,Rc<<=1,!(Rc&130023424)&&(Rc=4194304)):e=1);var n=Gt();t=Or(t,e),t!==null&&(ql(t,e,n),sn(t,n))}function yR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eT(t,n)}function _R(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),eT(t,n)}var tT;tT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,iR(t,e,n);en=!!(t.flags&131072)}else en=!1,qe&&e.flags&1048576&&iE(e,Gu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_u(t,e),t=e.pendingProps;var s=wo(e,Bt.current);uo(e,n),s=ag(null,e,r,t,s,n);var i=lg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(i=!0,qu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ng(e),s.updater=Hh,e.stateNode=s,s._reactInternals=e,Tp(e,r,t,n),e=Sp(null,e,r,!0,i,n)):(e.tag=0,qe&&i&&Qm(e),qt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_u(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wR(r),t=zn(r,t),s){case 0:e=Ip(null,e,r,t,n);break e;case 1:e=V_(null,e,r,t,n);break e;case 11:e=L_(null,e,r,t,n);break e;case 14:e=j_(null,e,r,zn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),Ip(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),V_(t,e,r,s,n);case 3:e:{if(VE(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,hE(t,e),Xu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=To(Error(W(423)),e),e=F_(t,e,r,n,s);break e}else if(r!==s){s=To(Error(W(424)),e),e=F_(t,e,r,n,s);break e}else for(yn=ms(e.stateNode.containerInfo.firstChild),wn=e,qe=!0,Wn=null,n=cE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),r===s){e=Mr(t,e,n);break e}qt(t,e,r,n)}e=e.child}return e;case 5:return dE(e),t===null&&xp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gp(r,s)?o=null:i!==null&&gp(r,i)&&(e.flags|=32),jE(t,e),qt(t,e,o,n),e.child;case 6:return t===null&&xp(e),null;case 13:return FE(t,e,n);case 4:return rg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):qt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),L_(t,e,r,s,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ve(Qu,r._currentValue),r._currentValue=o,i!==null)if(Xn(i.value,o)){if(i.children===s.children&&!nn.current){e=Mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Rr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),bp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,uo(e,n),s=Dn(s),r=r(s),e.flags|=1,qt(t,e,r,n),e.child;case 14:return r=e.type,s=zn(r,e.pendingProps),s=zn(r.type,s),j_(t,e,r,s,n);case 15:return ME(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),_u(t,e),e.tag=1,rn(r)?(t=!0,qu(e)):t=!1,uo(e,n),NE(e,r,s),Tp(e,r,s,n),Sp(null,e,r,!0,t,n);case 19:return UE(t,e,n);case 22:return LE(t,e,n)}throw Error(W(156,e.tag))};function nT(t,e){return Ab(t,e)}function vR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new vR(t,e,n,r)}function _g(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wR(t){if(typeof t=="function")return _g(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jm)return 11;if(t===Vm)return 14}return 2}function vs(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")_g(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qi:return hi(n.children,s,i,e);case Lm:o=8,s|=8;break;case Gf:return t=Rn(12,n,e,s|2),t.elementType=Gf,t.lanes=i,t;case Qf:return t=Rn(13,n,e,s),t.elementType=Qf,t.lanes=i,t;case Yf:return t=Rn(19,n,e,s),t.elementType=Yf,t.lanes=i,t;case db:return Gh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ub:o=10;break e;case hb:o=9;break e;case jm:o=11;break e;case Vm:o=14;break e;case Jr:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function hi(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function Gh(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=db,t.lanes=n,t.stateNode={isHidden:!1},t}function _f(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function vf(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vg(t,e,n,r,s,i,o,a,l){return t=new xR(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ng(i),t}function bR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rT(t){if(!t)return Is;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(rn(n))return rE(t,n,e)}return e}function sT(t,e,n,r,s,i,o,a,l){return t=vg(n,r,!0,t,s,i,o,a,l),t.context=rT(null),n=t.current,r=Gt(),s=_s(n),i=Rr(r,s),i.callback=e??null,gs(n,i,s),t.current.lanes=s,ql(t,s,r),sn(t,r),t}function Qh(t,e,n,r){var s=e.current,i=Gt(),o=_s(s);return n=rT(n),e.context===null?e.context=n:e.pendingContext=n,e=Rr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(s,e,o),t!==null&&(Qn(t,s,o,i),mu(t,s,o)),o}function ih(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Q_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wg(t,e){Q_(t,e),(t=t.alternate)&&Q_(t,e)}function ER(){return null}var iT=typeof reportError=="function"?reportError:function(t){console.error(t)};function xg(t){this._internalRoot=t}Yh.prototype.render=xg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Qh(t,e,null,null)};Yh.prototype.unmount=xg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vi(function(){Qh(null,t,null,null)}),e[Dr]=null}};function Yh(t){this._internalRoot=t}Yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&Vb(t)}};function bg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y_(){}function TR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ih(o);i.call(c)}}var o=sT(e,r,t,0,null,!1,!1,"",Y_);return t._reactRootContainer=o,t[Dr]=o.current,_l(t.nodeType===8?t.parentNode:t),vi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=ih(l);a.call(c)}}var l=vg(t,0,!1,null,null,!1,!1,"",Y_);return t._reactRootContainer=l,t[Dr]=l.current,_l(t.nodeType===8?t.parentNode:t),vi(function(){Qh(e,l,n,r)}),l}function Jh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ih(o);a.call(l)}}Qh(e,o,t,s)}else o=TR(n,e,t,s,r);return ih(o)}Ob=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(Bm(e,n|1),sn(e,at()),!(ke&6)&&(ko=at()+500,Ms()))}break;case 13:vi(function(){var r=Or(t,1);if(r!==null){var s=Gt();Qn(r,t,1,s)}}),wg(t,1)}};zm=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=Gt();Qn(e,t,134217728,n)}wg(t,134217728)}};Mb=function(t){if(t.tag===13){var e=_s(t),n=Or(t,e);if(n!==null){var r=Gt();Qn(n,t,e,r)}wg(t,e)}};Lb=function(){return Ne};jb=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};op=function(t,e,n){switch(e){case"input":if(Zf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=zh(r);if(!s)throw Error(W(90));pb(r),Zf(r,s)}}}break;case"textarea":gb(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};Eb=mg;Tb=vi;var kR={usingClientEntryPoint:!1,Events:[Gl,Zi,zh,xb,bb,mg]},ya={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IR={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sb(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||ER,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Vh=Bc.inject(IR),cr=Bc}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kR;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bg(e))throw Error(W(200));return bR(t,e,null,n)};En.createRoot=function(t,e){if(!bg(t))throw Error(W(299));var n=!1,r="",s=iT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=vg(t,1,!1,null,null,n,!1,r,s),t[Dr]=e.current,_l(t.nodeType===8?t.parentNode:t),new xg(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=Sb(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return vi(t)};En.hydrate=function(t,e,n){if(!Xh(e))throw Error(W(200));return Jh(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!bg(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=iT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sT(e,null,t,1,n??null,s,!1,i,o),t[Dr]=e.current,_l(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Yh(e)};En.render=function(t,e,n){if(!Xh(e))throw Error(W(200));return Jh(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!Xh(t))throw Error(W(40));return t._reactRootContainer?(vi(function(){Jh(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};En.unstable_batchedUpdates=mg;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xh(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Jh(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function oT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oT)}catch(t){console.error(t)}}oT(),ob.exports=En;var SR=ob.exports,aT,X_=SR;aT=X_.createRoot,X_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sl.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const J_="popstate";function CR(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Fp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:oh(s)}return RR(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AR(){return Math.random().toString(36).substr(2,8)}function Z_(t,e){return{usr:t.state,key:t.key,idx:e}}function Fp(t,e,n,r){return n===void 0&&(n=null),Sl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bo(e):e,{state:n,key:e&&e.key||r||AR()})}function oh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function RR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ls.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Sl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=ls.Pop;let T=h(),v=T==null?null:T-c;c=T,l&&l({action:a,location:E.location,delta:v})}function m(T,v){a=ls.Push;let _=Fp(E.location,T,v);c=h()+1;let b=Z_(_,c),R=E.createHref(_);try{o.pushState(b,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(R)}i&&l&&l({action:a,location:E.location,delta:1})}function y(T,v){a=ls.Replace;let _=Fp(E.location,T,v);c=h();let b=Z_(_,c),R=E.createHref(_);o.replaceState(b,"",R),i&&l&&l({action:a,location:E.location,delta:0})}function x(T){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof T=="string"?T:oh(T);return _=_.replace(/ $/,"%20"),Qe(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let E={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(J_,f),l=T,()=>{s.removeEventListener(J_,f),l=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let v=x(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(T){return o.go(T)}};return E}var ev;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ev||(ev={}));function PR(t,e,n){return n===void 0&&(n="/"),NR(t,e,n)}function NR(t,e,n,r){let s=typeof e=="string"?Bo(e):e,i=Io(s.pathname||"/",n);if(i==null)return null;let o=cT(t);DR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=WR(i);a=zR(o[l],c)}return a}function cT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ws([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cT(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:UR(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of uT(i.path))s(i,o,l)}),e}function uT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function DR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:BR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OR=/^:[\w-]+$/,MR=3,LR=2,jR=1,VR=10,FR=-2,tv=t=>t==="*";function UR(t,e){let n=t.split("/"),r=n.length;return n.some(tv)&&(r+=FR),e&&(r+=LR),n.filter(s=>!tv(s)).reduce((s,i)=>s+(OR.test(i)?MR:i===""?jR:VR),r)}function BR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function zR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Up({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ws([i,f.pathname]),pathnameBase:GR(ws([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ws([i,f.pathnameBase]))}return o}function Up(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$R(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let E=a[f]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const x=a[f];return y&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function $R(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function WR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Io(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function HR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bo(t):t;return{pathname:n?n.startsWith("/")?n:qR(n,e):e,search:QR(r),hash:YR(s)}}function qR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function wf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eg(t,e){let n=KR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bo(t):(s=Sl({},t),Qe(!s.pathname||!s.pathname.includes("?"),wf("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),wf("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),wf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=HR(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ws=t=>t.join("/").replace(/\/\/+/g,"/"),GR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hT=["post","put","patch","delete"];new Set(hT);const JR=["get",...hT];new Set(JR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cl.apply(this,arguments)}const Zh=D.createContext(null),dT=D.createContext(null),Br=D.createContext(null),ed=D.createContext(null),Ls=D.createContext({outlet:null,matches:[],isDataRoute:!1}),fT=D.createContext(null);function ZR(t,e){let{relative:n}=e===void 0?{}:e;zo()||Qe(!1);let{basename:r,navigator:s}=D.useContext(Br),{hash:i,pathname:o,search:a}=nd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ws([r,o])),s.createHref({pathname:l,search:a,hash:i})}function zo(){return D.useContext(ed)!=null}function js(){return zo()||Qe(!1),D.useContext(ed).location}function pT(t){D.useContext(Br).static||D.useLayoutEffect(t)}function td(){let{isDataRoute:t}=D.useContext(Ls);return t?dP():eP()}function eP(){zo()||Qe(!1);let t=D.useContext(Zh),{basename:e,future:n,navigator:r}=D.useContext(Br),{matches:s}=D.useContext(Ls),{pathname:i}=js(),o=JSON.stringify(Eg(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return pT(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Tg(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ws([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function nd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Br),{matches:s}=D.useContext(Ls),{pathname:i}=js(),o=JSON.stringify(Eg(s,r.v7_relativeSplatPath));return D.useMemo(()=>Tg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function tP(t,e){return nP(t,e)}function nP(t,e,n,r){zo()||Qe(!1);let{navigator:s}=D.useContext(Br),{matches:i}=D.useContext(Ls),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=js(),h;if(e){var f;let T=typeof e=="string"?Bo(e):e;l==="/"||(f=T.pathname)!=null&&f.startsWith(l)||Qe(!1),h=T}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let T=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=PR(t,{pathname:y}),E=aP(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ws([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ws([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&E?D.createElement(ed.Provider,{value:{location:Cl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ls.Pop}},E):E}function rP(){let t=hP(),e=XR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const sP=D.createElement(rP,null);class iP extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Ls.Provider,{value:this.props.routeContext},D.createElement(fT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oP(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(Zh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ls.Provider,{value:e},r)}function aP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Qe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=n,x=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,x=!1,E=null,T=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,E=f.route.errorElement||sP,l&&(c<0&&m===0?(fP("route-fallback"),x=!0,T=null):c===m&&(x=!0,T=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),_=()=>{let b;return y?b=E:x?b=T:f.route.Component?b=D.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,D.createElement(oP,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?D.createElement(iP,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var mT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mT||{}),gT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gT||{});function lP(t){let e=D.useContext(Zh);return e||Qe(!1),e}function cP(t){let e=D.useContext(dT);return e||Qe(!1),e}function uP(t){let e=D.useContext(Ls);return e||Qe(!1),e}function yT(t){let e=uP(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function hP(){var t;let e=D.useContext(fT),n=cP(),r=yT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function dP(){let{router:t}=lP(mT.UseNavigateStable),e=yT(gT.UseNavigateStable),n=D.useRef(!1);return pT(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Cl({fromRouteId:e},i)))},[t,e])}const nv={};function fP(t,e,n){nv[t]||(nv[t]=!0)}function pP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mP(t){let{to:e,replace:n,state:r,relative:s}=t;zo()||Qe(!1);let{future:i,static:o}=D.useContext(Br),{matches:a}=D.useContext(Ls),{pathname:l}=js(),c=td(),h=Tg(e,Eg(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return D.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function Qr(t){Qe(!1)}function gP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ls.Pop,navigator:i,static:o=!1,future:a}=t;zo()&&Qe(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:i,static:o,future:Cl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Bo(r));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:x="default"}=r,E=D.useMemo(()=>{let T=Io(h,l);return T==null?null:{location:{pathname:T,search:f,hash:m,state:y,key:x},navigationType:s}},[l,h,f,m,y,x,s]);return E==null?null:D.createElement(Br.Provider,{value:c},D.createElement(ed.Provider,{children:n,value:E}))}function yP(t){let{children:e,location:n}=t;return tP(Bp(e),n)}new Promise(()=>{});function Bp(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Bp(r.props.children,i));return}r.type!==Qr&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Bp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ah(){return ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ah.apply(this,arguments)}function _T(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function _P(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vP(t,e){return t.button===0&&(!e||e==="_self")&&!_P(t)}const wP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],bP="6";try{window.__reactRouterVersion=bP}catch{}const EP=D.createContext({isTransitioning:!1}),TP="startTransition",rv=gC[TP];function kP(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=CR({window:s,v5Compat:!0}));let o=i.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=D.useCallback(f=>{c&&rv?rv(()=>l(f)):l(f)},[l,c]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>pP(r),[r]),D.createElement(gP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const IP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kg=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,m=_T(e,wP),{basename:y}=D.useContext(Br),x,E=!1;if(typeof c=="string"&&SP.test(c)&&(x=c,IP))try{let b=new URL(window.location.href),R=c.startsWith("//")?new URL(b.protocol+c):new URL(c),P=Io(R.pathname,y);R.origin===b.origin&&P!=null?c=P+R.search+R.hash:E=!0}catch{}let T=ZR(c,{relative:s}),v=AP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function _(b){r&&r(b),b.defaultPrevented||v(b)}return D.createElement("a",ah({},m,{href:x||T,onClick:E||i?r:_,ref:n,target:l}))}),nr=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,f=_T(e,xP),m=nd(l,{relative:f.relative}),y=js(),x=D.useContext(dT),{navigator:E,basename:T}=D.useContext(Br),v=x!=null&&RP(m)&&c===!0,_=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,b=y.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(b=b.toLowerCase(),R=R?R.toLowerCase():null,_=_.toLowerCase()),R&&T&&(R=Io(R,T)||R);const P=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=b===_||!o&&b.startsWith(_)&&b.charAt(P)==="/",k=R!=null&&(R===_||!o&&R.startsWith(_)&&R.charAt(_.length)==="/"),w={isActive:M,isPending:k,isTransitioning:v},I=M?r:void 0,A;typeof i=="function"?A=i(w):A=[i,M?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(w):a;return D.createElement(kg,ah({},f,{"aria-current":I,className:A,ref:n,style:N,to:l,viewTransition:c}),typeof h=="function"?h(w):h)});var zp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zp||(zp={}));var sv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sv||(sv={}));function CP(t){let e=D.useContext(Zh);return e||Qe(!1),e}function AP(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=td(),c=js(),h=nd(t,{relative:o});return D.useCallback(f=>{if(vP(f,n)){f.preventDefault();let m=r!==void 0?r:oh(c)===oh(h);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function RP(t,e){e===void 0&&(e={});let n=D.useContext(EP);n==null&&Qe(!1);let{basename:r}=CP(zp.useViewTransitionState),s=nd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Io(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Io(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Up(s.pathname,o)!=null||Up(s.pathname,i)!=null}const vT=D.createContext({theme:"light",toggleTheme:()=>{}});function PP({children:t}){const[e,n]=D.useState(()=>{const s=typeof window<"u"?localStorage.getItem("theme"):null;return s==="light"||s==="dark"?s:"light"});D.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=D.useMemo(()=>({theme:e,toggleTheme:()=>n(s=>s==="dark"?"light":"dark")}),[e]);return d.jsx(vT.Provider,{value:r,children:t})}function NP(){return D.useContext(vT)}var iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},DP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new OP;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const x=c<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MP=function(t){const e=wT(t);return xT.encodeByteArray(e,!0)},lh=function(t){return MP(t).replace(/\./g,"")},bT=function(t){try{return xT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=()=>LP().__FIREBASE_DEFAULTS__,VP=()=>{if(typeof process>"u"||typeof iv>"u")return;const t=iv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bT(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return jP()||VP()||FP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ET=t=>{var e,n;return(n=(e=rd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TT=t=>{const e=ET(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kT=()=>{var t;return(t=rd())===null||t===void 0?void 0:t.config},IT=t=>{var e;return(e=rd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lh(JSON.stringify(n)),lh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function zP(){var t;const e=(t=rd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $P(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ig(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HP(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qP(){return!zP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sg(){try{return typeof indexedDB=="object"}catch{return!1}}function Cg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function CT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KP,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ni.prototype.create)}}class Ni{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?GP(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Vn(s,a,r)}}function GP(t,e){return t.replace(QP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const QP=/\{\$([^}]+)}/g;function YP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ov(i)&&ov(o)){if(!Al(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ov(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Aa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ra(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XP(t,e){const n=new JP(t,e);return n.subscribe.bind(n)}class JP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xf),s.error===void 0&&(s.error=xf),s.complete===void 0&&(s.complete=xf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=1e3,tN=2,nN=4*60*60*1e3,rN=.5;function av(t,e=eN,n=tN){const r=e*Math.pow(n,t),s=Math.round(rN*r*(Math.random()-.5)*2);return Math.min(nN,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class Mn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oN(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iN(t){return t===Js?void 0:t}function oN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const lN={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},cN=xe.INFO,uN={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},hN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=uN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sd{constructor(e){this.name=e,this._logLevel=cN,this._logHandler=hN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const dN=(t,e)=>e.some(n=>t instanceof n);let lv,cv;function fN(){return lv||(lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pN(){return cv||(cv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AT=new WeakMap,$p=new WeakMap,RT=new WeakMap,bf=new WeakMap,Ag=new WeakMap;function mN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AT.set(n,t)}).catch(()=>{}),Ag.set(e,t),e}function gN(t){if($p.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$p.set(t,e)}let Wp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $p.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yN(t){Wp=t(Wp)}function _N(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ef(this),e,...n);return RT.set(r,e.sort?e.sort():[e]),xs(r)}:pN().includes(t)?function(...e){return t.apply(Ef(this),e),xs(AT.get(this))}:function(...e){return xs(t.apply(Ef(this),e))}}function vN(t){return typeof t=="function"?_N(t):(t instanceof IDBTransaction&&gN(t),dN(t,fN())?new Proxy(t,Wp):t)}function xs(t){if(t instanceof IDBRequest)return mN(t);if(bf.has(t))return bf.get(t);const e=vN(t);return e!==t&&(bf.set(t,e),Ag.set(e,t)),e}const Ef=t=>Ag.get(t);function PT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=xs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xs(o.result),l.oldVersion,l.newVersion,xs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const wN=["get","getKey","getAll","getAllKeys","count"],xN=["put","add","delete","clear"],Tf=new Map;function uv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tf.get(e))return Tf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=xN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wN.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Tf.set(e,i),i}yN(t=>({...t,get:(e,n,r)=>uv(e,n)||t.get(e,n,r),has:(e,n)=>!!uv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hp="@firebase/app",hv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new sd("@firebase/app"),TN="@firebase/app-compat",kN="@firebase/analytics-compat",IN="@firebase/analytics",SN="@firebase/app-check-compat",CN="@firebase/app-check",AN="@firebase/auth",RN="@firebase/auth-compat",PN="@firebase/database",NN="@firebase/data-connect",DN="@firebase/database-compat",ON="@firebase/functions",MN="@firebase/functions-compat",LN="@firebase/installations",jN="@firebase/installations-compat",VN="@firebase/messaging",FN="@firebase/messaging-compat",UN="@firebase/performance",BN="@firebase/performance-compat",zN="@firebase/remote-config",$N="@firebase/remote-config-compat",WN="@firebase/storage",HN="@firebase/storage-compat",qN="@firebase/firestore",KN="@firebase/vertexai-preview",GN="@firebase/firestore-compat",QN="firebase",YN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="[DEFAULT]",XN={[Hp]:"fire-core",[TN]:"fire-core-compat",[IN]:"fire-analytics",[kN]:"fire-analytics-compat",[CN]:"fire-app-check",[SN]:"fire-app-check-compat",[AN]:"fire-auth",[RN]:"fire-auth-compat",[PN]:"fire-rtdb",[NN]:"fire-data-connect",[DN]:"fire-rtdb-compat",[ON]:"fire-fn",[MN]:"fire-fn-compat",[LN]:"fire-iid",[jN]:"fire-iid-compat",[VN]:"fire-fcm",[FN]:"fire-fcm-compat",[UN]:"fire-perf",[BN]:"fire-perf-compat",[zN]:"fire-rc",[$N]:"fire-rc-compat",[WN]:"fire-gcs",[HN]:"fire-gcs-compat",[qN]:"fire-fst",[GN]:"fire-fst-compat",[KN]:"fire-vertex","fire-js":"fire-js",[QN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map,JN=new Map,Kp=new Map;function dv(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jn(t){const e=t.name;if(Kp.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Kp.set(e,t);for(const n of ch.values())dv(n,t);for(const n of JN.values())dv(n,t);return!0}function Vs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new Ni("app","Firebase",ZN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=YN;function NT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw bs.create("bad-app-name",{appName:String(s)});if(n||(n=kT()),!n)throw bs.create("no-options");const i=ch.get(s);if(i){if(Al(n,i.options)&&Al(r,i.config))return i;throw bs.create("duplicate-app",{appName:s})}const o=new aN(s);for(const l of Kp.values())o.addComponent(l);const a=new e2(n,r,o);return ch.set(s,a),a}function id(t=qp){const e=ch.get(t);if(!e&&t===qp&&kT())return NT();if(!e)throw bs.create("no-app",{appName:t});return e}function on(t,e,n){var r;let s=(r=XN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}Jn(new Mn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="firebase-heartbeat-database",n2=1,Rl="firebase-heartbeat-store";let kf=null;function DT(){return kf||(kf=PT(t2,n2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw bs.create("idb-open",{originalErrorMessage:t.message})})),kf}async function r2(t){try{const n=(await DT()).transaction(Rl),r=await n.objectStore(Rl).get(OT(t));return await n.done,r}catch(e){if(e instanceof Vn)Lr.warn(e.message);else{const n=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function fv(t,e){try{const r=(await DT()).transaction(Rl,"readwrite");await r.objectStore(Rl).put(e,OT(t)),await r.done}catch(n){if(n instanceof Vn)Lr.warn(n.message);else{const r=bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function OT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=1024,i2=30*24*60*60*1e3;class o2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=i2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pv(),{heartbeatsToSend:r,unsentEntries:s}=a2(this._heartbeatsCache.heartbeats),i=lh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Lr.warn(n),""}}}function pv(){return new Date().toISOString().substring(0,10)}function a2(t,e=s2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class l2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sg()?Cg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mv(t){return lh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){Jn(new Mn("platform-logger",e=>new bN(e),"PRIVATE")),Jn(new Mn("heartbeat",e=>new o2(e),"PRIVATE")),on(Hp,hv,t),on(Hp,hv,"esm2017"),on("fire-js","")}c2("");var u2="firebase",h2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on(u2,h2,"app");function Rg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d2=MT,LT=new Ni("auth","Firebase",MT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new sd("@firebase/auth");function f2(t,...e){uh.logLevel<=xe.WARN&&uh.warn(`Auth (${Di}): ${t}`,...e)}function bu(t,...e){uh.logLevel<=xe.ERROR&&uh.error(`Auth (${Di}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw Ng(t,...e)}function an(t,...e){return Ng(t,...e)}function Pg(t,e,n){const r=Object.assign(Object.assign({},d2()),{[e]:n});return new Ni("auth","Firebase",r).create(e,{appName:t.name})}function Yn(t){return Pg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jT(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ln(t,"argument-error"),Pg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ng(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LT.create(t,...e)}function X(t,e,...n){if(!t)throw Ng(e,...n)}function Sr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bu(e),new Error(e)}function jr(t,e){t||Sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VT(){return gv()==="http:"||gv()==="https:"}function gv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VT()||Ig()||"connection"in navigator)?navigator.onLine:!0}function m2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,jr(n>e,"Short delay should be less than long delay!"),this.isMobile=BP()||WP()}get(){return p2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t,e){jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new Yl(3e4,6e4);function un(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,s={}){return UT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=$o(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return $P()||(c.referrerPolicy="no-referrer"),FT.fetch()(BT(t,t.config.apiHost,n,a),c)})}async function UT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},g2),e);try{const s=new v2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Pa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pa(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Pg(t,h,c);Ln(t,h)}}catch(s){if(s instanceof Vn)throw s;Ln(t,"network-request-failed",{message:String(s)})}}async function Fs(t,e,n,r,s={}){const i=await kn(t,e,n,r,s);return"mfaPendingCredential"in i&&Ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}function BT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Dg(t.config,s):`${t.config.apiScheme}://${s}`}function _2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(an(this.auth,"network-request-failed")),y2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=an(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t){return t!==void 0&&t.getResponse!==void 0}function _v(t){return t!==void 0&&t.enterprise!==void 0}class w2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t){return(await kn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function b2(t,e){return kn(t,"GET","/v2/recaptchaConfig",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function zT(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T2(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),s=Og(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ya(If(s.auth_time)),issuedAtTime:Ya(If(s.iat)),expirationTime:Ya(If(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function If(t){return Number(t)*1e3}function Og(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bu("JWT malformed, contained fewer than 3 sections"),null;try{const s=bT(n);return s?JSON.parse(s):(bu("Failed to decode base64 JWT payload"),null)}catch(s){return bu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function vv(t){const e=Og(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&k2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function k2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ya(this.lastLoginAt),this.creationTime=Ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await So(t,zT(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?$T(i.providerUserInfo):[],a=C2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Qp(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function S2(t){const e=Xe(t);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $T(t){return t.map(e=>{var{providerId:n}=e,r=Rg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e){const n=await UT(t,{},async()=>{const r=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=BT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function R2(t,e){return kn(t,"POST","/v2/accounts:revokeToken",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=vv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await A2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new fo;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await So(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T2(this,e)}reload(){return S2(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Yn(this.auth));const e=await this.getIdToken();return await So(this,E2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:R,isAnonymous:P,providerData:M,stsTokenManager:k}=n;X(b&&k,e,"internal-error");const w=fo.fromJSON(this.name,k);X(typeof b=="string",e,"internal-error"),Kr(f,e.name),Kr(m,e.name),X(typeof R=="boolean",e,"internal-error"),X(typeof P=="boolean",e,"internal-error"),Kr(y,e.name),Kr(x,e.name),Kr(E,e.name),Kr(T,e.name),Kr(v,e.name),Kr(_,e.name);const I=new Cr({uid:b,auth:e,email:m,emailVerified:R,displayName:f,isAnonymous:P,photoURL:x,phoneNumber:y,tenantId:E,stsTokenManager:w,createdAt:v,lastLoginAt:_});return M&&Array.isArray(M)&&(I.providerData=M.map(A=>Object.assign({},A))),T&&(I._redirectEventId=T),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new fo;s.updateFromServerResponse(n);const i=new Cr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?$T(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new fo;a.updateFromIdToken(r);const l=new Cr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map;function Ar(t){jr(t instanceof Function,"Expected a class definition");let e=wv.get(t);return e?(jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WT.type="NONE";const xv=WT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t,e,n){return`firebase:${t}:${e}:${n}`}class po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Eu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Eu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new po(Ar(xv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ar(xv);const o=Eu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Cr._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new po(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new po(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YT(e))return"Blackberry";if(XT(e))return"Webos";if(qT(e))return"Safari";if((e.includes("chrome/")||KT(e))&&!e.includes("edge/"))return"Chrome";if(QT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HT(t=zt()){return/firefox\//i.test(t)}function qT(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KT(t=zt()){return/crios\//i.test(t)}function GT(t=zt()){return/iemobile/i.test(t)}function QT(t=zt()){return/android/i.test(t)}function YT(t=zt()){return/blackberry/i.test(t)}function XT(t=zt()){return/webos/i.test(t)}function Mg(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function P2(t=zt()){var e;return Mg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function N2(){return HP()&&document.documentMode===10}function JT(t=zt()){return Mg(t)||QT(t)||XT(t)||YT(t)||/windows phone/i.test(t)||GT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t,e=[]){let n;switch(t){case"Browser":n=bv(zt());break;case"Worker":n=`${bv(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Di}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t,e={}){return kn(t,"GET","/v2/passwordPolicy",un(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=6;class L2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:M2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ev(this),this.idTokenSubscription=new Ev(this),this.beforeStateQueue=new D2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ar(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zT(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Yn(this));const n=e?Xe(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O2(this),n=new L2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ni("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await R2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ar(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[Ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&f2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fn(t){return Xe(t)}class Ev{constructor(e){this.auth=e,this.observer=null,this.addObserver=XP(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V2(t){Xl=t}function Lg(t){return Xl.loadJS(t)}function F2(){return Xl.recaptchaV2Script}function U2(){return Xl.recaptchaEnterpriseScript}function B2(){return Xl.gapiScript}function ek(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const z2="recaptcha-enterprise",$2="NO_RECAPTCHA";class W2{constructor(e){this.type=z2,this.auth=Fn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{b2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new w2(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;_v(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o($2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&_v(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=U2();l.length!==0&&(l+=a),Lg(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Tv(t,e,n,r=!1){const s=new W2(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yp(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Tv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Tv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t,e){const n=Vs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Al(i,e??{}))return s;Ln(s,"already-initialized")}return n.initialize({options:e})}function q2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function K2(t,e,n){const r=Fn(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=tk(e),{host:o,port:a}=G2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Q2()}function tk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function G2(t){const e=tk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:kv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:kv(o)}}}function kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,n){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}async function Y2(t,e){return kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return Fs(t,"POST","/v1/accounts:signInWithPassword",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t,e){return Fs(t,"POST","/v1/accounts:signInWithEmailLink",un(t,e))}async function Z2(t,e){return Fs(t,"POST","/v1/accounts:signInWithEmailLink",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends od{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,n,"signInWithPassword",X2);case"emailLink":return J2(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,r,"signUpPassword",Y2);case"emailLink":return Z2(e,{idToken:n,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t,e){return Fs(t,"POST","/v1/accounts:signInWithIdp",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="http://localhost";class wi extends od{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Rg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new wi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:eD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t,e){return kn(t,"POST","/v1/accounts:sendVerificationCode",un(t,e))}async function nD(t,e){return Fs(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,e))}async function rD(t,e){const n=await Fs(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,e));if(n.temporaryProof)throw Pa(t,"account-exists-with-different-credential",n);return n}const sD={USER_NOT_FOUND:"user-not-found"};async function iD(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Fs(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,n),sD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends od{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Xa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Xa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return nD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return rD(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return iD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Xa({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aD(t){const e=Aa(Ra(t)).link,n=e?Aa(Ra(e)).deep_link_id:null,r=Aa(Ra(t)).deep_link_id;return(r?Aa(Ra(r)).link:null)||r||n||e||t}class jg{constructor(e){var n,r,s,i,o,a;const l=Aa(Ra(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=oD((s=l.mode)!==null&&s!==void 0?s:null);X(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=aD(e);try{return new jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return Pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jg.parseLink(n);return X(r,"argument-error"),Pl._fromEmailAndCode(e,r.code,r.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends ad{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Jl{constructor(){super("facebook.com")}static credential(e){return wi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wi._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com";Tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Jl{constructor(){super("github.com")}static credential(e){return wi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Jl{constructor(){super("twitter.com")}static credential(e,n){return wi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(t,e){return Fs(t,"POST","/v1/accounts:signUp",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Cr._fromIdTokenResponse(e,r,s),o=Iv(r);return new xi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Iv(r);return new xi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Iv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends Vn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new dh(e,n,r,s)}}function nk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(t,i,e,r):i})}async function cD(t,e,n=!1){const r=await So(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e,n=!1){const{auth:r}=t;if(_n(r.app))return Promise.reject(Yn(r));const s="reauthenticate";try{const i=await So(t,nk(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=Og(i.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),xi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ln(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e,n=!1){if(_n(t.app))return Promise.reject(Yn(t));const r="signIn",s=await nk(t,r,e),i=await xi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function sk(t,e){return rk(Fn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t){const e=Fn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hD(t,e,n){if(_n(t.app))return Promise.reject(Yn(t));const r=Fn(t),o=await Yp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ik(t),l}),a=await xi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function dD(t,e,n){return _n(t.app)?Promise.reject(Yn(t)):sk(Xe(t),Wo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ik(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t,e){return kn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Xe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await So(r,fD(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function pD(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function mD(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function gD(t,e,n,r){return Xe(t).onAuthStateChanged(e,n,r)}function yD(t){return Xe(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:start",un(t,e))}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=1e3,wD=10;class lk extends ak{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);N2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,wD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},vD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lk.type="LOCAL";const xD=lk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck extends ak{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ck.type="SESSION";const uk=ck;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await bD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Vg("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function TD(t){ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function kD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ID(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SD(){return Fg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="firebaseLocalStorageDb",CD=1,ph="firebaseLocalStorage",dk="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cd(t,e){return t.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function AD(){const t=indexedDB.deleteDatabase(hk);return new Zl(t).toPromise()}function Xp(){const t=indexedDB.open(hk,CD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ph,{keyPath:dk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ph)?e(r):(r.close(),await AD(),e(await Xp()))})})}async function Sv(t,e,n){const r=cd(t,!0).put({[dk]:e,value:n});return new Zl(r).toPromise()}async function RD(t,e){const n=cd(t,!1).get(e),r=await new Zl(n).toPromise();return r===void 0?null:r.value}function Cv(t,e){const n=cd(t,!0).delete(e);return new Zl(n).toPromise()}const PD=800,ND=3;class fk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ND)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(SD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kD(),!this.activeServiceWorker)return;this.sender=new ED(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ID()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xp();return await Sv(e,fh,"1"),await Cv(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=cd(s,!1).getAll();return new Zl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fk.type="LOCAL";const DD=fk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:start",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=500,LD=6e4,zc=1e12;class jD{constructor(e){this.auth=e,this.counter=zc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new VD(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||zc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||zc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||zc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class VD{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;X(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=FD(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},LD)},MD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function FD(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=ek("rcb"),UD=new Yl(3e4,6e4);class BD{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return X(zD(n),e,"argument-error"),this.shouldResolveImmediately(n)&&yv(ut().grecaptcha)?Promise.resolve(ut().grecaptcha):new Promise((r,s)=>{const i=ut().setTimeout(()=>{s(an(e,"network-request-failed"))},UD.get());ut()[Sf]=()=>{ut().clearTimeout(i),delete ut()[Sf];const a=ut().grecaptcha;if(!a||!yv(a)){s(an(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const f=l(c,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${F2()}?${$o({onload:Sf,render:"explicit",hl:n})}`;Lg(o).catch(()=>{clearTimeout(i),s(an(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function zD(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class $D{async load(e){return new jD(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="recaptcha",WD={theme:"light",type:"image"};class HD{constructor(e,n,r=Object.assign({},WD)){this.parameters=r,this.type=pk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(e),this.isInvisible=this.parameters.size==="invisible",X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;X(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $D:new BD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){X(VT()&&!Fg(),this.auth,"internal-error"),await qD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await x2(this.auth);X(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function qD(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Xa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function GD(t,e,n){if(_n(t.app))return Promise.reject(Yn(t));const r=Fn(t),s=await QD(r,e,Xe(n));return new KD(s,i=>sk(r,i))}async function QD(t,e,n){var r;const s=await n.verify();try{X(typeof s=="string",t,"argument-error"),X(n.type===pk,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return X(o.type==="enroll",t,"internal-error"),(await _D(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{X(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return X(a,t,"missing-multi-factor-info"),(await OD(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await tD(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e){return e?Ar(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends od{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YD(t){return rk(t.auth,new Bg(t),t.bypassAuthState)}function XD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),uD(n,new Bg(t),t.bypassAuthState)}async function JD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),cD(n,new Bg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YD;case"linkViaPopup":case"linkViaRedirect":return JD;case"reauthViaPopup":case"reauthViaRedirect":return XD;default:Ln(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new Yl(2e3,1e4);async function eO(t,e,n){if(_n(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const r=Fn(t);jT(t,e,ad);const s=Ug(r,n);return new si(r,"signInViaPopup",e,s).executeNotNull()}class si extends mk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZD.get())};e()}}si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="pendingRedirect",Tu=new Map;class nO extends mk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tu.get(this.auth._key());if(!e){try{const r=await rO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rO(t,e){const n=yk(e),r=gk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function sO(t,e){return gk(t)._set(yk(e),"true")}function iO(t,e){Tu.set(t._key(),e)}function gk(t){return Ar(t._redirectPersistence)}function yk(t){return Eu(tO,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e,n){return oO(t,e,n)}async function oO(t,e,n){if(_n(t.app))return Promise.reject(Yn(t));const r=Fn(t);jT(t,e,ad),await r._initializationPromise;const s=Ug(r,n);return await sO(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function aO(t,e){return await Fn(t)._initializationPromise,_k(t,e,!1)}async function _k(t,e,n=!1){if(_n(t.app))return Promise.reject(Yn(t));const r=Fn(t),s=Ug(r,e),o=await new nO(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=10*60*1e3;class cO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(an(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rv(e))}saveEventToCache(e){this.cachedEventUids.add(Rv(e)),this.lastProcessedEventTime=Date.now()}}function Rv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fO=/^https?/;async function pO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hO(t);for(const n of e)try{if(mO(n))return}catch{}Ln(t,"unauthorized-domain")}function mO(t){const e=Gp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!fO.test(n))return!1;if(dO.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new Yl(3e4,6e4);function Pv(){const t=ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yO(t){return new Promise((e,n)=>{var r,s,i;function o(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),n(an(t,"network-request-failed"))},timeout:gO.get()})}if(!((s=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ut().gapi)===null||i===void 0)&&i.load)o();else{const a=ek("iframefcb");return ut()[a]=()=>{gapi.load?o():n(an(t,"network-request-failed"))},Lg(`${B2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ku=null,e})}let ku=null;function _O(t){return ku=ku||yO(t),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=new Yl(5e3,15e3),wO="__/auth/iframe",xO="emulator/auth/iframe",bO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TO(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dg(e,xO):`https://${t.config.authDomain}/${wO}`,r={apiKey:e.apiKey,appName:t.name,v:Di},s=EO.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$o(r).slice(1)}`}async function kO(t){const e=await _O(t),n=ut().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:TO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bO,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),a=ut().setTimeout(()=>{i(o)},vO.get());function l(){ut().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SO=500,CO=600,AO="_blank",RO="http://localhost";class Nv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PO(t,e,n,r=SO,s=CO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},IO),{width:r.toString(),height:s.toString(),top:i,left:o}),c=zt().toLowerCase();n&&(a=KT(c)?AO:n),HT(c)&&(e=e||RO,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(P2(c)&&a!=="_self")return NO(e||"",a),new Nv(null);const f=window.open(e||"",a,h);X(f,t,"popup-blocked");try{f.focus()}catch{}return new Nv(f)}function NO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="__/auth/handler",OO="emulator/auth/handler",MO=encodeURIComponent("fac");async function Dv(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Di,eventId:s};if(e instanceof ad){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Jl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${MO}=${encodeURIComponent(l)}`:"";return`${LO(t)}?${$o(a).slice(1)}${c}`}function LO({config:t}){return t.emulator?Dg(t,OO):`https://${t.authDomain}/${DO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="webStorageSupport";class jO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uk,this._completeRedirectFn=_k,this._overrideRedirectResult=iO}async _openPopup(e,n,r,s){var i;jr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Dv(e,n,r,Gp(),s);return PO(e,o,Vg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Dv(e,n,r,Gp(),s);return TD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(jr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kO(e),r=new cO(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cf,{type:Cf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Cf];o!==void 0&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JT()||qT()||Mg()}}const VO=jO;var Ov="@firebase/auth",Mv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BO(t){Jn(new Mn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZT(t)},c=new j2(r,s,i,l);return q2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jn(new Mn("auth-internal",e=>{const n=Fn(e.getProvider("auth").getImmediate());return(r=>new FO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(Ov,Mv,UO(t)),on(Ov,Mv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=5*60,$O=IT("authIdTokenMaxAge")||zO;let Lv=null;const WO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$O)return;const s=n==null?void 0:n.token;Lv!==s&&(Lv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HO(t=id()){const e=Vs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=H2(t,{popupRedirectResolver:VO,persistence:[DD,xD,uk]}),r=IT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=WO(i.toString());mD(n,o,()=>o(n.currentUser)),pD(n,a=>o(a))}}const s=ET("auth");return s&&K2(n,`http://${s}`),n}function qO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}V2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=an("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",qO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BO("Browser");const wk="@firebase/installations",zg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=1e4,bk=`w:${zg}`,Ek="FIS_v2",KO="https://firebaseinstallations.googleapis.com/v1",GO=60*60*1e3,QO="installations",YO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bi=new Ni(QO,YO,XO);function Tk(t){return t instanceof Vn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk({projectId:t}){return`${KO}/projects/${t}/installations`}function Ik(t){return{token:t.token,requestStatus:2,expiresIn:ZO(t.expiresIn),creationTime:Date.now()}}async function Sk(t,e){const r=(await e.json()).error;return bi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Ck({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function JO(t,{refreshToken:e}){const n=Ck(t);return n.append("Authorization",eM(e)),n}async function Ak(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ZO(t){return Number(t.replace("s","000"))}function eM(t){return`${Ek} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=kk(t),s=Ck(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:Ek,appId:t.appId,sdkVersion:bk},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Ak(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Ik(c.authToken)}}else throw await Sk("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=/^[cdef][\w-]{21}$/,Jp="";function sM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=iM(t);return rM.test(n)?n:Jp}catch{return Jp}}function iM(t){return nM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new Map;function Nk(t,e){const n=ud(t);Dk(n,e),oM(n,e)}function Dk(t,e){const n=Pk.get(t);if(n)for(const r of n)r(e)}function oM(t,e){const n=aM();n&&n.postMessage({key:t,fid:e}),lM()}let ii=null;function aM(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=t=>{Dk(t.data.key,t.data.fid)}),ii}function lM(){Pk.size===0&&ii&&(ii.close(),ii=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="firebase-installations-database",uM=1,Ei="firebase-installations-store";let Af=null;function $g(){return Af||(Af=PT(cM,uM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ei)}}})),Af}async function mh(t,e){const n=ud(t),s=(await $g()).transaction(Ei,"readwrite"),i=s.objectStore(Ei),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Nk(t,e.fid),e}async function Ok(t){const e=ud(t),r=(await $g()).transaction(Ei,"readwrite");await r.objectStore(Ei).delete(e),await r.done}async function hd(t,e){const n=ud(t),s=(await $g()).transaction(Ei,"readwrite"),i=s.objectStore(Ei),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Nk(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wg(t){let e;const n=await hd(t.appConfig,r=>{const s=hM(r),i=dM(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Jp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function hM(t){const e=t||{fid:sM(),registrationStatus:0};return Mk(e)}function dM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(bi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=fM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pM(t)}:{installationEntry:e}}async function fM(t,e){try{const n=await tM(t,e);return mh(t.appConfig,n)}catch(n){throw Tk(n)&&n.customData.serverCode===409?await Ok(t.appConfig):await mh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function pM(t){let e=await jv(t.appConfig);for(;e.registrationStatus===1;)await Rk(100),e=await jv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Wg(t);return r||n}return e}function jv(t){return hd(t,e=>{if(!e)throw bi.create("installation-not-found");return Mk(e)})}function Mk(t){return mM(t)?{fid:t.fid,registrationStatus:0}:t}function mM(t){return t.registrationStatus===1&&t.registrationTime+xk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM({appConfig:t,heartbeatServiceProvider:e},n){const r=yM(t,n),s=JO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:bk,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Ak(()=>fetch(r,a));if(l.ok){const c=await l.json();return Ik(c)}else throw await Sk("Generate Auth Token",l)}function yM(t,{fid:e}){return`${kk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hg(t,e=!1){let n;const r=await hd(t.appConfig,i=>{if(!Lk(i))throw bi.create("not-registered");const o=i.authToken;if(!e&&wM(o))return i;if(o.requestStatus===1)return n=_M(t,e),i;{if(!navigator.onLine)throw bi.create("app-offline");const a=bM(i);return n=vM(t,a),a}});return n?await n:r.authToken}async function _M(t,e){let n=await Vv(t.appConfig);for(;n.authToken.requestStatus===1;)await Rk(100),n=await Vv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Hg(t,e):r}function Vv(t){return hd(t,e=>{if(!Lk(e))throw bi.create("not-registered");const n=e.authToken;return EM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function vM(t,e){try{const n=await gM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await mh(t.appConfig,r),n}catch(n){if(Tk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Ok(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await mh(t.appConfig,r)}throw n}}function Lk(t){return t!==void 0&&t.registrationStatus===2}function wM(t){return t.requestStatus===2&&!xM(t)}function xM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+GO}function bM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function EM(t){return t.requestStatus===1&&t.requestTime+xk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t){const e=t,{installationEntry:n,registrationPromise:r}=await Wg(e);return r?r.catch(console.error):Hg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e=!1){const n=t;return await IM(n),(await Hg(n,e)).token}async function IM(t){const{registrationPromise:e}=await Wg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){if(!t||!t.options)throw Rf("App Configuration");if(!t.name)throw Rf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Rf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Rf(t){return bi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="installations",CM="installations-internal",AM=t=>{const e=t.getProvider("app").getImmediate(),n=SM(e),r=Vs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},RM=t=>{const e=t.getProvider("app").getImmediate(),n=Vs(e,jk).getImmediate();return{getId:()=>TM(n),getToken:s=>kM(n,s)}};function PM(){Jn(new Mn(jk,AM,"PUBLIC")),Jn(new Mn(CM,RM,"PRIVATE"))}PM();on(wk,zg);on(wk,zg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="analytics",NM="firebase_id",DM="origin",OM=60*1e3,MM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln=new sd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new Ni("analytics","Analytics",LM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){if(!t.startsWith(qg)){const e=xn.create("invalid-gtag-resource",{gtagURL:t});return ln.warn(e.message),""}return t}function Vk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function VM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function FM(t,e){const n=VM("firebase-js-sdk-policy",{createScriptURL:jM}),r=document.createElement("script"),s=`${qg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function UM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function BM(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await Vk(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){ln.error(a)}t("config",s,i)}async function zM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Vk(n);for(const l of o){const c=a.find(f=>f.measurementId===l),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){ln.error(i)}}function $M(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await zM(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await BM(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){ln.error(a)}}return s}function WM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=$M(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function HM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(qg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=30,KM=1e3;class GM{constructor(e={},n=KM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Fk=new GM;function QM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function YM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:QM(r)},i=MM.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function XM(t,e=Fk,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw xn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw xn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new eL;return setTimeout(async()=>{a.abort()},OM),Uk({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Uk(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Fk){var i;const{appId:o,measurementId:a}=t;try{await JM(r,e)}catch(l){if(a)return ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await YM(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!ZM(c)){if(s.deleteThrottleMetadata(o),a)return ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?av(n,s.intervalMillis,qM):av(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,f),ln.debug(`Calling attemptFetch again in ${h} millis`),Uk(t,f,r,s)}}function JM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZM(t){if(!(t instanceof Vn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class eL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function tL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(){if(Sg())try{await Cg()}catch(t){return ln.warn(xn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ln.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function rL(t,e,n,r,s,i,o){var a;const l=XM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&ln.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>ln.error(y)),e.push(l);const c=nL().then(y=>{if(y)return r.getId()}),[h,f]=await Promise.all([l,c]);HM(i)||FM(i,h.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[DM]="firebase",m.update=!0,f!=null&&(m[NM]=f),s("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.app=e}_delete(){return delete Ja[this.app.options.appId],Promise.resolve()}}let Ja={},Fv=[];const Uv={};let Pf="dataLayer",iL="gtag",Bv,Bk,zv=!1;function oL(){const t=[];if(Ig()&&t.push("This is a browser extension environment."),CT()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=xn.create("invalid-analytics-context",{errorInfo:e});ln.warn(n.message)}}function aL(t,e,n){oL();const r=t.options.appId;if(!r)throw xn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(Ja[r]!=null)throw xn.create("already-exists",{id:r});if(!zv){UM(Pf);const{wrappedGtag:i,gtagCore:o}=WM(Ja,Fv,Uv,Pf,iL);Bk=i,Bv=o,zv=!0}return Ja[r]=rL(t,Fv,Uv,e,Bv,Pf,n),new sL(t)}function lL(t=id()){t=Xe(t);const e=Vs(t,gh);return e.isInitialized()?e.getImmediate():cL(t)}function cL(t,e={}){const n=Vs(t,gh);if(n.isInitialized()){const s=n.getImmediate();if(Al(e,n.getOptions()))return s;throw xn.create("already-initialized")}return n.initialize({options:e})}async function uL(){if(Ig()||!CT()||!Sg())return!1;try{return await Cg()}catch{return!1}}function hL(t,e,n,r){t=Xe(t),tL(Bk,Ja[t.app.options.appId],e,n,r).catch(s=>ln.error(s))}const $v="@firebase/analytics",Wv="0.10.8";function dL(){Jn(new Mn(gh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return aL(r,s,n)},"PUBLIC")),Jn(new Mn("analytics-internal",t,"PRIVATE")),on($v,Wv),on($v,Wv,"esm2017");function t(e){try{const n=e.getProvider(gh).getImmediate();return{logEvent:(r,s,i)=>hL(n,r,s,i)}}catch(n){throw xn.create("interop-component-reg-failed",{reason:n})}}}dL();var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,zk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function I(){}I.prototype=w.prototype,k.D=w.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(A,N,O){for(var S=Array(arguments.length-2),te=2;te<arguments.length;te++)S[te-2]=arguments[te];return w.prototype[N].apply(A,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,I){I||(I=0);var A=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)A[N]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(N=0;16>N;++N)A[N]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=k.g[0],I=k.g[1],N=k.g[2];var O=k.g[3],S=w+(O^I&(N^O))+A[0]+3614090360&4294967295;w=I+(S<<7&4294967295|S>>>25),S=O+(N^w&(I^N))+A[1]+3905402710&4294967295,O=w+(S<<12&4294967295|S>>>20),S=N+(I^O&(w^I))+A[2]+606105819&4294967295,N=O+(S<<17&4294967295|S>>>15),S=I+(w^N&(O^w))+A[3]+3250441966&4294967295,I=N+(S<<22&4294967295|S>>>10),S=w+(O^I&(N^O))+A[4]+4118548399&4294967295,w=I+(S<<7&4294967295|S>>>25),S=O+(N^w&(I^N))+A[5]+1200080426&4294967295,O=w+(S<<12&4294967295|S>>>20),S=N+(I^O&(w^I))+A[6]+2821735955&4294967295,N=O+(S<<17&4294967295|S>>>15),S=I+(w^N&(O^w))+A[7]+4249261313&4294967295,I=N+(S<<22&4294967295|S>>>10),S=w+(O^I&(N^O))+A[8]+1770035416&4294967295,w=I+(S<<7&4294967295|S>>>25),S=O+(N^w&(I^N))+A[9]+2336552879&4294967295,O=w+(S<<12&4294967295|S>>>20),S=N+(I^O&(w^I))+A[10]+4294925233&4294967295,N=O+(S<<17&4294967295|S>>>15),S=I+(w^N&(O^w))+A[11]+2304563134&4294967295,I=N+(S<<22&4294967295|S>>>10),S=w+(O^I&(N^O))+A[12]+1804603682&4294967295,w=I+(S<<7&4294967295|S>>>25),S=O+(N^w&(I^N))+A[13]+4254626195&4294967295,O=w+(S<<12&4294967295|S>>>20),S=N+(I^O&(w^I))+A[14]+2792965006&4294967295,N=O+(S<<17&4294967295|S>>>15),S=I+(w^N&(O^w))+A[15]+1236535329&4294967295,I=N+(S<<22&4294967295|S>>>10),S=w+(N^O&(I^N))+A[1]+4129170786&4294967295,w=I+(S<<5&4294967295|S>>>27),S=O+(I^N&(w^I))+A[6]+3225465664&4294967295,O=w+(S<<9&4294967295|S>>>23),S=N+(w^I&(O^w))+A[11]+643717713&4294967295,N=O+(S<<14&4294967295|S>>>18),S=I+(O^w&(N^O))+A[0]+3921069994&4294967295,I=N+(S<<20&4294967295|S>>>12),S=w+(N^O&(I^N))+A[5]+3593408605&4294967295,w=I+(S<<5&4294967295|S>>>27),S=O+(I^N&(w^I))+A[10]+38016083&4294967295,O=w+(S<<9&4294967295|S>>>23),S=N+(w^I&(O^w))+A[15]+3634488961&4294967295,N=O+(S<<14&4294967295|S>>>18),S=I+(O^w&(N^O))+A[4]+3889429448&4294967295,I=N+(S<<20&4294967295|S>>>12),S=w+(N^O&(I^N))+A[9]+568446438&4294967295,w=I+(S<<5&4294967295|S>>>27),S=O+(I^N&(w^I))+A[14]+3275163606&4294967295,O=w+(S<<9&4294967295|S>>>23),S=N+(w^I&(O^w))+A[3]+4107603335&4294967295,N=O+(S<<14&4294967295|S>>>18),S=I+(O^w&(N^O))+A[8]+1163531501&4294967295,I=N+(S<<20&4294967295|S>>>12),S=w+(N^O&(I^N))+A[13]+2850285829&4294967295,w=I+(S<<5&4294967295|S>>>27),S=O+(I^N&(w^I))+A[2]+4243563512&4294967295,O=w+(S<<9&4294967295|S>>>23),S=N+(w^I&(O^w))+A[7]+1735328473&4294967295,N=O+(S<<14&4294967295|S>>>18),S=I+(O^w&(N^O))+A[12]+2368359562&4294967295,I=N+(S<<20&4294967295|S>>>12),S=w+(I^N^O)+A[5]+4294588738&4294967295,w=I+(S<<4&4294967295|S>>>28),S=O+(w^I^N)+A[8]+2272392833&4294967295,O=w+(S<<11&4294967295|S>>>21),S=N+(O^w^I)+A[11]+1839030562&4294967295,N=O+(S<<16&4294967295|S>>>16),S=I+(N^O^w)+A[14]+4259657740&4294967295,I=N+(S<<23&4294967295|S>>>9),S=w+(I^N^O)+A[1]+2763975236&4294967295,w=I+(S<<4&4294967295|S>>>28),S=O+(w^I^N)+A[4]+1272893353&4294967295,O=w+(S<<11&4294967295|S>>>21),S=N+(O^w^I)+A[7]+4139469664&4294967295,N=O+(S<<16&4294967295|S>>>16),S=I+(N^O^w)+A[10]+3200236656&4294967295,I=N+(S<<23&4294967295|S>>>9),S=w+(I^N^O)+A[13]+681279174&4294967295,w=I+(S<<4&4294967295|S>>>28),S=O+(w^I^N)+A[0]+3936430074&4294967295,O=w+(S<<11&4294967295|S>>>21),S=N+(O^w^I)+A[3]+3572445317&4294967295,N=O+(S<<16&4294967295|S>>>16),S=I+(N^O^w)+A[6]+76029189&4294967295,I=N+(S<<23&4294967295|S>>>9),S=w+(I^N^O)+A[9]+3654602809&4294967295,w=I+(S<<4&4294967295|S>>>28),S=O+(w^I^N)+A[12]+3873151461&4294967295,O=w+(S<<11&4294967295|S>>>21),S=N+(O^w^I)+A[15]+530742520&4294967295,N=O+(S<<16&4294967295|S>>>16),S=I+(N^O^w)+A[2]+3299628645&4294967295,I=N+(S<<23&4294967295|S>>>9),S=w+(N^(I|~O))+A[0]+4096336452&4294967295,w=I+(S<<6&4294967295|S>>>26),S=O+(I^(w|~N))+A[7]+1126891415&4294967295,O=w+(S<<10&4294967295|S>>>22),S=N+(w^(O|~I))+A[14]+2878612391&4294967295,N=O+(S<<15&4294967295|S>>>17),S=I+(O^(N|~w))+A[5]+4237533241&4294967295,I=N+(S<<21&4294967295|S>>>11),S=w+(N^(I|~O))+A[12]+1700485571&4294967295,w=I+(S<<6&4294967295|S>>>26),S=O+(I^(w|~N))+A[3]+2399980690&4294967295,O=w+(S<<10&4294967295|S>>>22),S=N+(w^(O|~I))+A[10]+4293915773&4294967295,N=O+(S<<15&4294967295|S>>>17),S=I+(O^(N|~w))+A[1]+2240044497&4294967295,I=N+(S<<21&4294967295|S>>>11),S=w+(N^(I|~O))+A[8]+1873313359&4294967295,w=I+(S<<6&4294967295|S>>>26),S=O+(I^(w|~N))+A[15]+4264355552&4294967295,O=w+(S<<10&4294967295|S>>>22),S=N+(w^(O|~I))+A[6]+2734768916&4294967295,N=O+(S<<15&4294967295|S>>>17),S=I+(O^(N|~w))+A[13]+1309151649&4294967295,I=N+(S<<21&4294967295|S>>>11),S=w+(N^(I|~O))+A[4]+4149444226&4294967295,w=I+(S<<6&4294967295|S>>>26),S=O+(I^(w|~N))+A[11]+3174756917&4294967295,O=w+(S<<10&4294967295|S>>>22),S=N+(w^(O|~I))+A[2]+718787259&4294967295,N=O+(S<<15&4294967295|S>>>17),S=I+(O^(N|~w))+A[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+O&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var I=w-this.blockSize,A=this.B,N=this.h,O=0;O<w;){if(N==0)for(;O<=I;)s(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<w;)if(A[N++]=k.charCodeAt(O++),N==this.blockSize){s(this,A),N=0;break}}else for(;O<w;)if(A[N++]=k[O++],N==this.blockSize){s(this,A),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var I=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=I&255,I/=256;for(this.u(k),k=Array(16),w=I=0;4>w;++w)for(var A=0;32>A;A+=8)k[I++]=this.g[w]>>>A&255;return k};function i(k,w){var I=a;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=w(k)}function o(k,w){this.h=w;for(var I=[],A=!0,N=k.length-1;0<=N;N--){var O=k[N]|0;A&&O==w||(I[N]=O,A=!1)}this.g=I}var a={};function l(k){return-128<=k&&128>k?i(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return T(c(-k));for(var w=[],I=1,A=0;k>=I;A++)w[A]=k/I|0,I*=4294967296;return new o(w,0)}function h(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return T(h(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(w,8)),A=f,N=0;N<k.length;N+=8){var O=Math.min(8,k.length-N),S=parseInt(k.substring(N,N+O),w);8>O?(O=c(Math.pow(w,O)),A=A.j(O).add(c(S))):(A=A.j(I),A=A.add(c(S)))}return A}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-T(this).m();for(var k=0,w=1,I=0;I<this.g.length;I++){var A=this.i(I);k+=(0<=A?A:4294967296+A)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(E(this))return"-"+T(this).toString(k);for(var w=c(Math.pow(k,6)),I=this,A="";;){var N=R(I,w).g;I=v(I,N.j(w));var O=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=N,x(I))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function E(k){return k.h==-1}t.l=function(k){return k=v(this,k),E(k)?-1:x(k)?0:1};function T(k){for(var w=k.g.length,I=[],A=0;A<w;A++)I[A]=~k.g[A];return new o(I,~k.h).add(m)}t.abs=function(){return E(this)?T(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],A=0,N=0;N<=w;N++){var O=A+(this.i(N)&65535)+(k.i(N)&65535),S=(O>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);A=S>>>16,O&=65535,S&=65535,I[N]=S<<16|O}return new o(I,I[I.length-1]&-2147483648?-1:0)};function v(k,w){return k.add(T(w))}t.j=function(k){if(x(this)||x(k))return f;if(E(this))return E(k)?T(this).j(T(k)):T(T(this).j(k));if(E(k))return T(this.j(T(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var w=this.g.length+k.g.length,I=[],A=0;A<2*w;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var N=0;N<k.g.length;N++){var O=this.i(A)>>>16,S=this.i(A)&65535,te=k.i(N)>>>16,ne=k.i(N)&65535;I[2*A+2*N]+=S*ne,_(I,2*A+2*N),I[2*A+2*N+1]+=O*ne,_(I,2*A+2*N+1),I[2*A+2*N+1]+=S*te,_(I,2*A+2*N+1),I[2*A+2*N+2]+=O*te,_(I,2*A+2*N+2)}for(A=0;A<w;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=w;A<2*w;A++)I[A]=0;return new o(I,0)};function _(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function b(k,w){this.g=k,this.h=w}function R(k,w){if(x(w))throw Error("division by zero");if(x(k))return new b(f,f);if(E(k))return w=R(T(k),w),new b(T(w.g),T(w.h));if(E(w))return w=R(k,T(w)),new b(T(w.g),w.h);if(30<k.g.length){if(E(k)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=w;0>=A.l(k);)I=P(I),A=P(A);var N=M(I,1),O=M(A,1);for(A=M(A,2),I=M(I,2);!x(A);){var S=O.add(A);0>=S.l(k)&&(N=N.add(I),O=S),A=M(A,1),I=M(I,1)}return w=v(k,N.j(w)),new b(N,w)}for(N=f;0<=k.l(w);){for(I=Math.max(1,Math.floor(k.m()/w.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=c(I),S=O.j(w);E(S)||0<S.l(k);)I-=A,O=c(I),S=O.j(w);x(O)&&(O=m),N=N.add(O),k=v(k,S)}return new b(N,k)}t.A=function(k){return R(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)&k.i(A);return new o(I,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)|k.i(A);return new o(I,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)^k.i(A);return new o(I,this.h^k.h)};function P(k){for(var w=k.g.length+1,I=[],A=0;A<w;A++)I[A]=k.i(A)<<1|k.i(A-1)>>>31;return new o(I,k.h)}function M(k,w){var I=w>>5;w%=32;for(var A=k.g.length-I,N=[],O=0;O<A;O++)N[O]=0<w?k.i(O+I)>>>w|k.i(O+I+1)<<32-w:k.i(O+I);return new o(N,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,di=o}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $k,Na,Wk,Iu,Zp,Hk,qk,Kk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var L=u[C];if(!(L in g))break e;g=g[L]}u=u[u.length-1],C=g[u],p=p(C),p!=C&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,C=!1,L={next:function(){if(!C&&g<u.length){var V=g++;return{value:p(V,u[V]),done:!1}}return C=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function f(u,p,g){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,C),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var C=g.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function x(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(C,L,V){for(var q=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)q[Le-2]=arguments[Le];return p.prototype[L].apply(C,q)}}function E(u){const p=u.length;if(0<p){const g=Array(p);for(let C=0;C<p;C++)g[C]=u[C];return g}return[]}function T(u,p){for(let g=1;g<arguments.length;g++){const C=arguments[g];if(l(C)){const L=u.length||0,V=C.length||0;u.length=L+V;for(let q=0;q<V;q++)u[L+q]=C[q]}else u.push(C)}}class v{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var P=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(u,p,g){for(const C in u)p.call(g,u[C],C,u)}function k(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function w(u){const p={};for(const g in u)p[g]=u[g];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let g,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(g in C)u[g]=C[g];for(let V=0;V<I.length;V++)g=I[V],Object.prototype.hasOwnProperty.call(C,g)&&(u[g]=C[g])}}function N(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function O(u){a.setTimeout(()=>{throw u},0)}function S(){var u=G;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class te{constructor(){this.h=this.g=null}add(p,g){const C=ne.get();C.set(p,g),this.h?this.h.next=C:this.g=C,this.h=C}}var ne=new v(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let de,$=!1,G=new te,H=()=>{const u=a.Promise.resolve(void 0);de=()=>{u.then(fe)}};var fe=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(g){O(g)}var p=ne;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}$=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function Ue(u,p){if(pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(P){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ue.aa.h.call(this)}}x(Ue,pe);var Ae={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),oe=0;function me(u,p,g,C,L){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!C,this.ha=L,this.key=++oe,this.da=this.fa=!1}function Me(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ze(u){this.src=u,this.g={},this.h=0}Ze.prototype.add=function(u,p,g,C,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var q=K(u,p,C,L);return-1<q?(p=u[q],g||(p.fa=!1)):(p=new me(p,this.src,V,!!C,L),p.fa=g,u.push(p)),p};function it(u,p){var g=p.type;if(g in u.g){var C=u.g[g],L=Array.prototype.indexOf.call(C,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(C,L,1),V&&(Me(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function K(u,p,g,C){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==C)return L}return-1}var U="closure_lm_"+(1e6*Math.random()|0),B={};function Z(u,p,g,C,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)Z(u,p[V],g,C,L);return null}return g=wt(g),u&&u[j]?u.K(p,g,c(C)?!!C.capture:!1,L):ye(u,p,g,!1,C,L)}function ye(u,p,g,C,L,V){if(!p)throw Error("Invalid event type");var q=c(L)?!!L.capture:!!L,Le=$t(u);if(Le||(u[U]=Le=new Ze(u)),g=Le.add(p,g,C,q,V),g.proxy)return g;if(C=ae(),g.proxy=C,C.src=u,C.listener=g,u.addEventListener)Oe||(L=q),L===void 0&&(L=!1),u.addEventListener(p.toString(),C,L);else if(u.attachEvent)u.attachEvent(Re(p.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ae(){function u(g){return p.call(u.src,u.listener,g)}const p=he;return u}function re(u,p,g,C,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)re(u,p[V],g,C,L);else C=c(C)?!!C.capture:!!C,g=wt(g),u&&u[j]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],g=K(V,g,C,L),-1<g&&(Me(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=$t(u))&&(p=u.g[p.toString()],u=-1,p&&(u=K(p,g,C,L)),(g=-1<u?p[u]:null)&&je(g))}function je(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[j])it(p.i,u);else{var g=u.type,C=u.proxy;p.removeEventListener?p.removeEventListener(g,C,u.capture):p.detachEvent?p.detachEvent(Re(g),C):p.addListener&&p.removeListener&&p.removeListener(C),(g=$t(p))?(it(g,u),g.h==0&&(g.src=null,p[U]=null)):Me(u)}}}function Re(u){return u in B?B[u]:B[u]="on"+u}function he(u,p){if(u.da)u=!0;else{p=new Ue(p,this);var g=u.listener,C=u.ha||u.src;u.fa&&je(u),u=g.call(C,p)}return u}function $t(u){return u=u[U],u instanceof Ze?u:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(u){return typeof u=="function"?u:(u[hn]||(u[hn]=function(p){return u.handleEvent(p)}),u[hn])}function ve(){ie.call(this),this.i=new Ze(this),this.M=this,this.F=null}x(ve,ie),ve.prototype[j]=!0,ve.prototype.removeEventListener=function(u,p,g,C){re(this,u,p,g,C)};function xt(u,p){var g,C=u.F;if(C)for(g=[];C;C=C.F)g.push(C);if(u=u.M,C=p.type||p,typeof p=="string")p=new pe(p,u);else if(p instanceof pe)p.target=p.target||u;else{var L=p;p=new pe(C,u),A(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var q=p.g=g[V];L=ji(q,C,!0,p)&&L}if(q=p.g=u,L=ji(q,C,!0,p)&&L,L=ji(q,C,!1,p)&&L,g)for(V=0;V<g.length;V++)q=p.g=g[V],L=ji(q,C,!1,p)&&L}ve.prototype.N=function(){if(ve.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],C=0;C<g.length;C++)Me(g[C]);delete u.g[p],u.h--}}this.F=null},ve.prototype.K=function(u,p,g,C){return this.i.add(String(u),p,!1,g,C)},ve.prototype.L=function(u,p,g,C){return this.i.add(String(u),p,!0,g,C)};function ji(u,p,g,C){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var q=p[V];if(q&&!q.da&&q.capture==g){var Le=q.listener,bt=q.ha||q.src;q.fa&&it(u.i,q),L=Le.call(bt,C)!==!1&&L}}return L&&!C.defaultPrevented}function lc(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function cc(u){u.g=lc(()=>{u.g=null,u.i&&(u.i=!1,cc(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Rd extends ie{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:cc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(u){ie.call(this),this.h=u,this.g={}}x(zs,ie);var Yy=[];function Xy(u){M(u.g,function(p,g){this.g.hasOwnProperty(g)&&je(p)},u),u.g={}}zs.prototype.N=function(){zs.aa.N.call(this),Xy(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pd=a.JSON.stringify,I1=a.JSON.parse,S1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Nd(){}Nd.prototype.h=null;function Jy(u){return u.h||(u.h=u.i())}function Zy(){}var Jo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dd(){pe.call(this,"d")}x(Dd,pe);function Od(){pe.call(this,"c")}x(Od,pe);var $s={},e0=null;function uc(){return e0=e0||new ve}$s.La="serverreachability";function t0(u){pe.call(this,$s.La,u)}x(t0,pe);function Zo(u){const p=uc();xt(p,new t0(p))}$s.STAT_EVENT="statevent";function n0(u,p){pe.call(this,$s.STAT_EVENT,u),this.stat=p}x(n0,pe);function Wt(u){const p=uc();xt(p,new n0(p,u))}$s.Ma="timingevent";function r0(u,p){pe.call(this,$s.Ma,u),this.size=p}x(r0,pe);function ea(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function C1(u,p,g,C,L,V){u.info(function(){if(u.g)if(V)for(var q="",Le=V.split("&"),bt=0;bt<Le.length;bt++){var Ie=Le[bt].split("=");if(1<Ie.length){var Nt=Ie[0];Ie=Ie[1];var Dt=Nt.split("_");q=2<=Dt.length&&Dt[1]=="type"?q+(Nt+"="+Ie+"&"):q+(Nt+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+p+`
`+g+`
`+q})}function A1(u,p,g,C,L,V,q){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+q})}function Vi(u,p,g,C){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+P1(u,g)+(C?" "+C:"")})}function R1(u,p){u.info(function(){return"TIMEOUT: "+p})}ta.prototype.info=function(){};function P1(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var C=g[u];if(!(2>C.length)){var L=C[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<L.length;q++)L[q]=""}}}}return Pd(g)}catch{return p}}var hc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},s0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Md;function dc(){}x(dc,Nd),dc.prototype.g=function(){return new XMLHttpRequest},dc.prototype.i=function(){return{}},Md=new dc;function $r(u,p,g,C){this.j=u,this.i=p,this.l=g,this.R=C||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new i0}function i0(){this.i=null,this.g="",this.h=!1}var o0={},Ld={};function jd(u,p,g){u.L=1,u.v=gc(gr(p)),u.m=g,u.P=!0,a0(u,null)}function a0(u,p){u.F=Date.now(),fc(u),u.A=gr(u.v);var g=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),x0(g.i,"t",C),u.C=0,g=u.j.J,u.h=new i0,u.g=F0(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Rd(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,C=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Yy[0]=L.toString()),L=Yy);for(var V=0;V<L.length;V++){var q=Z(g,L[V],C||p.handleEvent,!1,p.h||p);if(!q)break;p.g[q.key]=q}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Zo(),C1(u.i,u.u,u.A,u.l,u.R,u.m)}$r.prototype.ca=function(u){u=u.target;const p=this.M;p&&yr(u)==3?p.j():this.Y(u)},$r.prototype.Y=function(u){try{if(u==this.g)e:{const Dt=yr(this.g);var p=this.g.Ba();const Bi=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||C0(this.g)))){this.J||Dt!=4||p==7||(p==8||0>=Bi?Zo(3):Zo(2)),Vd(this);var g=this.g.Z();this.X=g;t:if(l0(this)){var C=C0(this.g);u="";var L=C.length,V=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ws(this),na(this);var q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(C[p],{stream:!(V&&p==L-1)});C.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,A1(this.i,this.u,this.A,this.l,this.R,Dt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,bt=this.g;if((Le=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Le)){var Ie=Le;break t}}Ie=null}if(g=Ie)Vi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fd(this,g);else{this.o=!1,this.s=3,Wt(12),Ws(this),na(this);break e}}if(this.P){g=!0;let Un;for(;!this.J&&this.C<q.length;)if(Un=N1(this,q),Un==Ld){Dt==4&&(this.s=4,Wt(14),g=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==o0){this.s=4,Wt(15),Vi(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else Vi(this.i,this.l,Un,null),Fd(this,Un);if(l0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||q.length!=0||this.h.h||(this.s=1,Wt(16),g=!1),this.o=this.o&&g,!g)Vi(this.i,this.l,q,"[Invalid Chunked Response]"),Ws(this),na(this);else if(0<q.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Hd(Nt),Nt.M=!0,Wt(11))}}else Vi(this.i,this.l,q,null),Fd(this,q);Dt==4&&Ws(this),this.o&&!this.J&&(Dt==4?M0(this.j,this):(this.o=!1,fc(this)))}else Q1(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),Ws(this),na(this)}}}catch{}finally{}};function l0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function N1(u,p){var g=u.C,C=p.indexOf(`
`,g);return C==-1?Ld:(g=Number(p.substring(g,C)),isNaN(g)?o0:(C+=1,C+g>p.length?Ld:(p=p.slice(C,C+g),u.C=C+g,p)))}$r.prototype.cancel=function(){this.J=!0,Ws(this)};function fc(u){u.S=Date.now()+u.I,c0(u,u.I)}function c0(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ea(m(u.ba,u),p)}function Vd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}$r.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(R1(this.i,this.A),this.L!=2&&(Zo(),Wt(17)),Ws(this),this.s=2,na(this)):c0(this,this.S-u)};function na(u){u.j.G==0||u.J||M0(u.j,u)}function Ws(u){Vd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Xy(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Fd(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Ud(g.h,u))){if(!u.K&&Ud(g.h,u)&&g.G==3){try{var C=g.Da.g.parse(p)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)bc(g),wc(g);else break e;Wd(g),Wt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=ea(m(g.Za,g),6e3));if(1>=d0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else qs(g,11)}else if((u.K||g.g==u)&&bc(g),!_(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let Ie=L[p];if(g.T=Ie[0],Ie=Ie[1],g.G==2)if(Ie[0]=="c"){g.K=Ie[1],g.ia=Ie[2];const Nt=Ie[3];Nt!=null&&(g.la=Nt,g.j.info("VER="+g.la));const Dt=Ie[4];Dt!=null&&(g.Aa=Dt,g.j.info("SVER="+g.Aa));const Bi=Ie[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(C=1.5*Bi,g.L=C,g.j.info("backChannelRequestTimeoutMs_="+C)),C=g;const Un=u.g;if(Un){const Tc=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tc){var V=C.h;V.g||Tc.indexOf("spdy")==-1&&Tc.indexOf("quic")==-1&&Tc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Bd(V,V.h),V.h=null))}if(C.D){const qd=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(C.ya=qd,Be(C.I,C.D,qd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),C=g;var q=u;if(C.qa=V0(C,C.J?C.ia:null,C.W),q.K){f0(C.h,q);var Le=q,bt=C.L;bt&&(Le.I=bt),Le.B&&(Vd(Le),fc(Le)),C.g=q}else D0(C);0<g.i.length&&xc(g)}else Ie[0]!="stop"&&Ie[0]!="close"||qs(g,7);else g.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?qs(g,7):$d(g):Ie[0]!="noop"&&g.l&&g.l.ta(Ie),g.v=0)}}Zo(4)}catch{}}var D1=class{constructor(u,p){this.g=u,this.map=p}};function u0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function h0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function d0(u){return u.h?1:u.g?u.g.size:0}function Ud(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Bd(u,p){u.g?u.g.add(p):u.h=p}function f0(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}u0.prototype.cancel=function(){if(this.i=p0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function p0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return E(u.i)}function O1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,C=0;C<g;C++)p.push(u[C]);return p}p=[],g=0;for(C in u)p[g++]=u[C];return p}function M1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const C in u)p[g++]=C;return p}}}function m0(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=M1(u),C=O1(u),L=C.length,V=0;V<L;V++)p.call(void 0,C[V],g&&g[V],u)}var g0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L1(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var C=u[g].indexOf("="),L=null;if(0<=C){var V=u[g].substring(0,C);L=u[g].substring(C+1)}else V=u[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Hs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Hs){this.h=u.h,pc(this,u.j),this.o=u.o,this.g=u.g,mc(this,u.s),this.l=u.l;var p=u.i,g=new ia;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),y0(this,g),this.m=u.m}else u&&(p=String(u).match(g0))?(this.h=!1,pc(this,p[1]||"",!0),this.o=ra(p[2]||""),this.g=ra(p[3]||"",!0),mc(this,p[4]),this.l=ra(p[5]||"",!0),y0(this,p[6]||"",!0),this.m=ra(p[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}Hs.prototype.toString=function(){var u=[],p=this.j;p&&u.push(sa(p,_0,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(sa(p,_0,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(sa(g,g.charAt(0)=="/"?F1:V1,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",sa(g,B1)),u.join("")};function gr(u){return new Hs(u)}function pc(u,p,g){u.j=g?ra(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function mc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function y0(u,p,g){p instanceof ia?(u.i=p,z1(u.i,u.h)):(g||(p=sa(p,U1)),u.i=new ia(p,u.h))}function Be(u,p,g){u.i.set(p,g)}function gc(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ra(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function sa(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,j1),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function j1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _0=/[#\/\?@]/g,V1=/[#\?:]/g,F1=/[#\?]/g,U1=/[#\?@]/g,B1=/#/g;function ia(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Wr(u){u.g||(u.g=new Map,u.h=0,u.i&&L1(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=ia.prototype,t.add=function(u,p){Wr(this),this.i=null,u=Fi(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function v0(u,p){Wr(u),p=Fi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function w0(u,p){return Wr(u),p=Fi(u,p),u.g.has(p)}t.forEach=function(u,p){Wr(this),this.g.forEach(function(g,C){g.forEach(function(L){u.call(p,L,C,this)},this)},this)},t.na=function(){Wr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let C=0;C<p.length;C++){const L=u[C];for(let V=0;V<L.length;V++)g.push(p[C])}return g},t.V=function(u){Wr(this);let p=[];if(typeof u=="string")w0(this,u)&&(p=p.concat(this.g.get(Fi(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return Wr(this),this.i=null,u=Fi(this,u),w0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function x0(u,p,g){v0(u,p),0<g.length&&(u.i=null,u.g.set(Fi(u,p),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var C=p[g];const V=encodeURIComponent(String(C)),q=this.V(C);for(C=0;C<q.length;C++){var L=V;q[C]!==""&&(L+="="+encodeURIComponent(String(q[C]))),u.push(L)}}return this.i=u.join("&")};function Fi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function z1(u,p){p&&!u.j&&(Wr(u),u.i=null,u.g.forEach(function(g,C){var L=C.toLowerCase();C!=L&&(v0(this,C),x0(this,L,g))},u)),u.j=p}function $1(u,p){const g=new ta;if(a.Image){const C=new Image;C.onload=y(Hr,g,"TestLoadImage: loaded",!0,p,C),C.onerror=y(Hr,g,"TestLoadImage: error",!1,p,C),C.onabort=y(Hr,g,"TestLoadImage: abort",!1,p,C),C.ontimeout=y(Hr,g,"TestLoadImage: timeout",!1,p,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else p(!1)}function W1(u,p){const g=new ta,C=new AbortController,L=setTimeout(()=>{C.abort(),Hr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:C.signal}).then(V=>{clearTimeout(L),V.ok?Hr(g,"TestPingServer: ok",!0,p):Hr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Hr(g,"TestPingServer: error",!1,p)})}function Hr(u,p,g,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(g)}catch{}}function H1(){this.g=new S1}function q1(u,p,g){const C=g||"";try{m0(u,function(L,V){let q=L;c(L)&&(q=Pd(L)),p.push(C+V+"="+encodeURIComponent(q))})}catch(L){throw p.push(C+"type="+encodeURIComponent("_badmap")),L}}function yc(u){this.l=u.Ub||null,this.j=u.eb||!1}x(yc,Nd),yc.prototype.g=function(){return new _c(this.l,this.j)},yc.prototype.i=function(u){return function(){return u}}({});function _c(u,p){ve.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(_c,ve),t=_c.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,aa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;b0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function b0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?oa(this):aa(this),this.readyState==3&&b0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,oa(this))},t.Qa=function(u){this.g&&(this.response=u,oa(this))},t.ga=function(){this.g&&oa(this)};function oa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,aa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function aa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function E0(u){let p="";return M(u,function(g,C){p+=C,p+=":",p+=g,p+=`\r
`}),p}function zd(u,p,g){e:{for(C in g){var C=!1;break e}C=!0}C||(g=E0(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Be(u,p,g))}function et(u){ve.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(et,ve);var K1=/^https?$/i,G1=["POST","PUT"];t=et.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Md.g(),this.v=this.o?Jy(this.o):Jy(Md),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){T0(this,V);return}if(u=g||"",g=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)g.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const V of C.keys())g.set(V,C.get(V));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(G1,p,void 0))||C||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of g)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{S0(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){T0(this,V)}};function T0(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,k0(u),vc(u)}function k0(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),vc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vc(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?I0(this):this.bb())},t.bb=function(){I0(this)};function I0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||yr(u)!=4||u.Z()!=2)){if(u.u&&yr(u)==4)lc(u.Ea,0,u);else if(xt(u,"readystatechange"),yr(u)==4){u.h=!1;try{const q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var C;if(C=q===0){var L=String(u.D).match(g0)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),C=!K1.test(L?L.toLowerCase():"")}g=C}if(g)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var V=2<yr(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",k0(u)}}finally{vc(u)}}}}function vc(u,p){if(u.g){S0(u);const g=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||xt(u,"ready");try{g.onreadystatechange=C}catch{}}}function S0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function yr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),I1(p)}};function C0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Q1(u){const p={};u=(u.g&&2<=yr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(_(u[C]))continue;var g=N(u[C]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}k(p,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function A0(u){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,u),this.cb=la("retryDelaySeedMs",1e4,u),this.Wa=la("forwardChannelMaxRetries",2,u),this.wa=la("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new u0(u&&u.concurrentRequestLimit),this.Da=new H1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=A0.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,C){Wt(0),this.W=u,this.H=p||{},g&&C!==void 0&&(this.H.OSID=g,this.H.OAID=C),this.F=this.X,this.I=V0(this,null,this.W),xc(this)};function $d(u){if(R0(u),u.G==3){var p=u.U++,g=gr(u.I);if(Be(g,"SID",u.K),Be(g,"RID",p),Be(g,"TYPE","terminate"),ca(u,g),p=new $r(u,u.j,p),p.L=2,p.v=gc(gr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=F0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),fc(p)}j0(u)}function wc(u){u.g&&(Hd(u),u.g.cancel(),u.g=null)}function R0(u){wc(u),u.u&&(a.clearTimeout(u.u),u.u=null),bc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function xc(u){if(!h0(u.h)&&!u.s){u.s=!0;var p=u.Ga;de||H(),$||(de(),$=!0),G.add(p,u),u.B=0}}function Y1(u,p){return d0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ea(m(u.Ga,u,p),L0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new $r(this,this.j,u);let V=this.o;if(this.S&&(V?(V=w(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var C=this.i[g];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(p+=C,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=N0(this,L,p),g=gr(this.I),Be(g,"RID",u),Be(g,"CVER",22),this.D&&Be(g,"X-HTTP-Session-Id",this.D),ca(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(E0(V)))+"&"+p:this.m&&zd(g,this.m,V)),Bd(this.h,L),this.Ua&&Be(g,"TYPE","init"),this.P?(Be(g,"$req",p),Be(g,"SID","null"),L.T=!0,jd(L,g,null)):jd(L,g,p),this.G=2}}else this.G==3&&(u?P0(this,u):this.i.length==0||h0(this.h)||P0(this))};function P0(u,p){var g;p?g=p.l:g=u.U++;const C=gr(u.I);Be(C,"SID",u.K),Be(C,"RID",g),Be(C,"AID",u.T),ca(u,C),u.m&&u.o&&zd(C,u.m,u.o),g=new $r(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=N0(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Bd(u.h,g),jd(g,C,p)}function ca(u,p){u.H&&M(u.H,function(g,C){Be(p,C,g)}),u.l&&m0({},function(g,C){Be(p,C,g)})}function N0(u,p,g){g=Math.min(u.i.length,g);var C=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const q=["count="+g];V==-1?0<g?(V=L[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Le=!0;for(let bt=0;bt<g;bt++){let Ie=L[bt].g;const Nt=L[bt].map;if(Ie-=V,0>Ie)V=Math.max(0,L[bt].g-100),Le=!1;else try{q1(Nt,q,"req"+Ie+"_")}catch{C&&C(Nt)}}if(Le){C=q.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,C}function D0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;de||H(),$||(de(),$=!0),G.add(p,u),u.v=0}}function Wd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ea(m(u.Fa,u),L0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,O0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ea(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),wc(this),O0(this))};function Hd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function O0(u){u.g=new $r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=gr(u.qa);Be(p,"RID","rpc"),Be(p,"SID",u.K),Be(p,"AID",u.T),Be(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(p,"TO",u.ja),Be(p,"TYPE","xmlhttp"),ca(u,p),u.m&&u.o&&zd(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=gc(gr(p)),g.m=null,g.P=!0,a0(g,u)}t.Za=function(){this.C!=null&&(this.C=null,wc(this),Wd(this),Wt(19))};function bc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function M0(u,p){var g=null;if(u.g==p){bc(u),Hd(u),u.g=null;var C=2}else if(Ud(u.h,p))g=p.D,f0(u.h,p),C=1;else return;if(u.G!=0){if(p.o)if(C==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;C=uc(),xt(C,new r0(C,g)),xc(u)}else D0(u);else if(L=p.s,L==3||L==0&&0<p.X||!(C==1&&Y1(u,p)||C==2&&Wd(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),L){case 1:qs(u,5);break;case 4:qs(u,10);break;case 3:qs(u,6);break;default:qs(u,2)}}}function L0(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function qs(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),C=u.Xa;const L=!C;C=new Hs(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pc(C,"https"),gc(C),L?$1(C.toString(),g):W1(C.toString(),g)}else Wt(2);u.G=0,u.l&&u.l.sa(p),j0(u),R0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function j0(u){if(u.G=0,u.ka=[],u.l){const p=p0(u.h);(p.length!=0||u.i.length!=0)&&(T(u.ka,p),T(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function V0(u,p,g){var C=g instanceof Hs?gr(g):new Hs(g);if(C.g!="")p&&(C.g=p+"."+C.g),mc(C,C.s);else{var L=a.location;C=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new Hs(null);C&&pc(V,C),p&&(V.g=p),L&&mc(V,L),g&&(V.l=g),C=V}return g=u.D,p=u.ya,g&&p&&Be(C,g,p),Be(C,"VER",u.la),ca(u,C),C}function F0(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new et(new yc({eb:g})):new et(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function U0(){}t=U0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ec(){}Ec.prototype.g=function(u,p){return new dn(u,p)};function dn(u,p){ve.call(this),this.g=new A0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Ui(this)}x(dn,ve),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){$d(this.g)},dn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Pd(u),u=g);p.i.push(new D1(p.Ya++,u)),p.G==3&&xc(p)},dn.prototype.N=function(){this.g.l=null,delete this.j,$d(this.g),delete this.g,dn.aa.N.call(this)};function B0(u){Dd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}x(B0,Dd);function z0(){Od.call(this),this.status=1}x(z0,Od);function Ui(u){this.g=u}x(Ui,U0),Ui.prototype.ua=function(){xt(this.g,"a")},Ui.prototype.ta=function(u){xt(this.g,new B0(u))},Ui.prototype.sa=function(u){xt(this.g,new z0)},Ui.prototype.ra=function(){xt(this.g,"b")},Ec.prototype.createWebChannel=Ec.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Kk=function(){return new Ec},qk=function(){return uc()},Hk=$s,Zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hc.NO_ERROR=0,hc.TIMEOUT=8,hc.HTTP_ERROR=6,Iu=hc,s0.COMPLETE="complete",Wk=s0,Zy.EventType=Jo,Jo.OPEN="a",Jo.CLOSE="b",Jo.ERROR="c",Jo.MESSAGE="d",ve.prototype.listen=ve.prototype.K,Na=Zy,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,$k=et}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new sd("@firebase/firestore");function _a(){return Ti.logLevel}function J(t,...e){if(Ti.logLevel<=xe.DEBUG){const n=e.map(Kg);Ti.debug(`Firestore (${Ho}): ${t}`,...n)}}function Vr(t,...e){if(Ti.logLevel<=xe.ERROR){const n=e.map(Kg);Ti.error(`Firestore (${Ho}): ${t}`,...n)}}function Co(t,...e){if(Ti.logLevel<=xe.WARN){const n=e.map(Kg);Ti.warn(`Firestore (${Ho}): ${t}`,...n)}}function Kg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: `+t;throw Vr(e),new Error(e)}function De(t,e){t||le()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class pL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mL{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new Gk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new jt(e)}}class gL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new gL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _L{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new _L(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=wL(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Ao(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new nt(0,0))}static max(){return new ce(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class We extends Nl{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new We(n)}static emptyPath(){return new We([])}}const xL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Nl{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return xL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(We.fromString(e))}static fromName(e){return new se(We.fromString(e).popFirst(5))}static empty(){return new se(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new We(e.slice()))}}function bL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new Ss(s,se.empty(),e)}function EL(t){return new Ss(t.readTime,t.key,-1)}class Ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ss(ce.min(),se.empty(),-1)}static max(){return new Ss(ce.max(),se.empty(),-1)}}function TL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==kL)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function SL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gg.oe=-1;function dd(t){return t==null}function yh(t){return t===0&&1/t==-1/0}function CL(t){return typeof t=="number"&&Number.isInteger(t)&&!yh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,s,i){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new qn([])}unionWith(e){let n=new At(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Xk("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const AL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(t){if(De(!!t),typeof t=="string"){let e=0;const n=AL.exec(t);if(De(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ki(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yg(t){const e=t.mapValue.fields.__previous_value__;return Qg(e)?Yg(e):e}function Dl(t){const e=Cs(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc={mapValue:{}};function Ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qg(t)?4:NL(t)?9007199254740991:PL(t)?10:11:le()}function mr(t,e){if(t===e)return!0;const n=Ii(t);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dl(t).isEqual(Dl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Cs(s.timestampValue),a=Cs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ki(s.bytesValue).isEqual(ki(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ot(s.geoPointValue.latitude)===ot(i.geoPointValue.latitude)&&ot(s.geoPointValue.longitude)===ot(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ot(s.integerValue)===ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ot(s.doubleValue),a=ot(i.doubleValue);return o===a?yh(o)===yh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ao(t.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Kv(o)!==Kv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!mr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function Ml(t,e){return(t.values||[]).find(n=>mr(n,e))!==void 0}function Ro(t,e){if(t===e)return 0;const n=Ii(t),r=Ii(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ot(i.integerValue||i.doubleValue),l=ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Qv(t.timestampValue,e.timestampValue);case 4:return Qv(Dl(t),Dl(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ki(i),l=ki(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Se(a[c],l[c]);if(h!==0)return h}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Se(ot(i.latitude),ot(o.latitude));return a!==0?a:Se(ot(i.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Yv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const f=i.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,E=Se(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:Yv(y,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Hc.mapValue&&o===Hc.mapValue)return 0;if(i===Hc.mapValue)return 1;if(o===Hc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Se(l[f],h[f]);if(m!==0)return m;const y=Ro(a[l[f]],c[h[f]]);if(y!==0)return y}return Se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function Qv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Cs(t),r=Cs(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function Yv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ro(n[s],r[s]);if(i)return i}return Se(n.length,r.length)}function Po(t){return em(t)}function em(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Cs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=em(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${em(n.fields[o])}`;return s+"}"}(t.mapValue):le()}function Xv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tm(t){return!!t&&"integerValue"in t}function Xg(t){return!!t&&"arrayValue"in t}function Jv(t){return!!t&&"nullValue"in t}function Zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Su(t){return!!t&&"mapValue"in t}function PL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Za(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Su(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=It.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Za(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Su(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Su(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){qo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new An(Za(this.value))}}function Jk(t){const e=[];return qo(t.fields,(n,r)=>{const s=new It([n]);if(Su(r)){const i=Jk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ft(e,0,ce.min(),ce.min(),ce.min(),An.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,ce.min(),ce.min(),An.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ce.min(),ce.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.position=e,this.inclusive=n}}function ew(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Ro(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function tw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n="asc"){this.field=e,this.dir=n}}function DL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{}class dt extends Zk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ML(e,n,r):n==="array-contains"?new VL(e,r):n==="in"?new FL(e,r):n==="not-in"?new UL(e,r):n==="array-contains-any"?new BL(e,r):new dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LL(e,r):new jL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ro(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends Zk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zn(e,n)}matches(e){return eI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eI(t){return t.op==="and"}function tI(t){return OL(t)&&eI(t)}function OL(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function nm(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+Po(t.value);if(tI(t))return t.filters.map(e=>nm(e)).join(",");{const e=t.filters.map(n=>nm(n)).join(",");return`${t.op}(${e})`}}function nI(t,e){return t instanceof dt?function(r,s){return s instanceof dt&&r.op===s.op&&r.field.isEqual(s.field)&&mr(r.value,s.value)}(t,e):t instanceof Zn?function(r,s){return s instanceof Zn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&nI(o,s.filters[a]),!0):!1}(t,e):void le()}function rI(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(rI).join(" ,")+"}"}(t):"Filter"}class ML extends dt{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class LL extends dt{constructor(e,n){super(e,"in",n),this.keys=sI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jL extends dt{constructor(e,n){super(e,"not-in",n),this.keys=sI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class VL extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xg(n)&&Ml(n.arrayValue,this.value)}}class FL extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ml(this.value.arrayValue,n)}}class UL extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ml(this.value.arrayValue,n)}}class BL extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ml(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function nw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new zL(t,e,n,r,s,i,o)}function Jg(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Po(r)).join(",")),e.ue=n}return e.ue}function Zg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tw(t.startAt,e.startAt)&&tw(t.endAt,e.endAt)}function rm(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $L(t,e,n,r,s,i,o,a){return new Ko(t,e,n,r,s,i,o,a)}function ey(t){return new Ko(t)}function rw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iI(t){return t.collectionGroup!==null}function el(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new At(It.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ll(i,r))}),n.has(It.keyField().canonicalString())||e.ce.push(new Ll(It.keyField(),r))}return e.ce}function hr(t){const e=ue(t);return e.le||(e.le=WL(e,el(t))),e.le}function WL(t,e){if(t.limitType==="F")return nw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ll(s.field,i)});const n=t.endAt?new _h(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _h(t.startAt.position,t.startAt.inclusive):null;return nw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sm(t,e){const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vh(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fd(t,e){return Zg(hr(t),hr(e))&&t.limitType===e.limitType}function oI(t){return`${Jg(hr(t))}|lt:${t.limitType}`}function Hi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rI(s)).join(", ")}]`),dd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Po(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Po(s)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function pd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of el(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ew(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,el(r),s)||r.endAt&&!function(o,a,l){const c=ew(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,el(r),s))}(t,e)}function HL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aI(t){return(e,n)=>{let r=!1;for(const s of el(t)){const i=qL(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qL(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ro(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Yk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new Je(se.comparator);function Fr(){return KL}const lI=new Je(se.comparator);function Da(...t){let e=lI;for(const n of t)e=e.insert(n.key,n);return e}function cI(t){let e=lI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oi(){return tl()}function uI(){return tl()}function tl(){return new Go(t=>t.toString(),(t,e)=>t.isEqual(e))}const GL=new Je(se.comparator),QL=new At(se.comparator);function we(...t){let e=QL;for(const n of t)e=e.add(n);return e}const YL=new At(Se);function XL(){return YL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function hI(t){return{integerValue:""+t}}function JL(t,e){return CL(e)?hI(e):ty(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this._=void 0}}function ZL(t,e,n){return t instanceof jl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Qg(i)&&(i=Yg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Vl?fI(t,e):t instanceof Fl?pI(t,e):function(s,i){const o=dI(s,i),a=sw(o)+sw(s.Pe);return tm(o)&&tm(s.Pe)?hI(a):ty(s.serializer,a)}(t,e)}function ej(t,e,n){return t instanceof Vl?fI(t,e):t instanceof Fl?pI(t,e):n}function dI(t,e){return t instanceof wh?function(r){return tm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class jl extends md{}class Vl extends md{constructor(e){super(),this.elements=e}}function fI(t,e){const n=mI(e);for(const r of t.elements)n.some(s=>mr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fl extends md{constructor(e){super(),this.elements=e}}function pI(t,e){let n=mI(e);for(const r of t.elements)n=n.filter(s=>!mr(s,r));return{arrayValue:{values:n}}}class wh extends md{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function sw(t){return ot(t.integerValue||t.doubleValue)}function mI(t){return Xg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.field=e,this.transform=n}}function nj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vl&&s instanceof Vl||r instanceof Fl&&s instanceof Fl?Ao(r.elements,s.elements,mr):r instanceof wh&&s instanceof wh?mr(r.Pe,s.Pe):r instanceof jl&&s instanceof jl}(t.transform,e.transform)}class rj{constructor(e,n){this.version=e,this.transformResults=n}}class dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gd{}function gI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _I(t.key,dr.none()):new nc(t.key,t.data,dr.none());{const n=t.data,r=An.empty();let s=new At(It.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Oi(t.key,r,new qn(s.toArray()),dr.none())}}function sj(t,e,n){t instanceof nc?function(s,i,o){const a=s.value.clone(),l=ow(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(s,i,o){if(!Cu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ow(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(yI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function nl(t,e,n,r){return t instanceof nc?function(i,o,a,l){if(!Cu(i.precondition,o))return a;const c=i.value.clone(),h=aw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oi?function(i,o,a,l){if(!Cu(i.precondition,o))return a;const c=aw(i.fieldTransforms,l,o),h=o.data;return h.setAll(yI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Cu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ij(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dI(r.transform,s||null);i!=null&&(n===null&&(n=An.empty()),n.set(r.field,i))}return n||null}function iw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ao(r,s,(i,o)=>nj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nc extends gd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oi extends gd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ow(t,e,n){const r=new Map;De(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,ej(o,a,n[s]))}return r}function aw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ZL(i,o,e))}return r}class _I extends gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oj extends gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=gI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(n,r)=>iw(n,r))&&Ao(this.baseMutations,e.baseMutations,(n,r)=>iw(n,r))}}class ny{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length);let s=function(){return GL}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ny(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,be;function uj(t){switch(t){default:return le();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function vI(t){if(t===void 0)return Vr("GRPC error has no .code"),F.UNKNOWN;switch(t){case ct.OK:return F.OK;case ct.CANCELLED:return F.CANCELLED;case ct.UNKNOWN:return F.UNKNOWN;case ct.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ct.INTERNAL:return F.INTERNAL;case ct.UNAVAILABLE:return F.UNAVAILABLE;case ct.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ct.NOT_FOUND:return F.NOT_FOUND;case ct.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ct.ABORTED:return F.ABORTED;case ct.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ct.DATA_LOSS:return F.DATA_LOSS;default:return le()}}(be=ct||(ct={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new di([4294967295,4294967295],0);function lw(t){const e=hj().encode(t),n=new zk;return n.update(e),new Uint8Array(n.digest())}function cw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new di([n,r],0),new di([s,i],0)]}class ry{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oa(`Invalid padding: ${n}`);if(r<0)throw new Oa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=di.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(di.fromNumber(r)));return s.compare(dj)===1&&(s=new di([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=lw(e),[r,s]=cw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ry(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=lw(e),[r,s]=cw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new yd(ce.min(),s,new Je(Se),Fr(),we())}}class rc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rc(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class wI{constructor(e,n){this.targetId=e,this.me=n}}class xI{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class uw{constructor(){this.fe=0,this.ge=dw(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le()}}),new rc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=hw(),this.Qe=new Je(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(rm(i))if(r===0){const o=new se(i.path);this.Ue(n,o,Ft.newNoDocument(o,ce.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ki(r).toUint8Array()}catch(l){if(l instanceof Xk)return Co("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ry(o,s,i)}catch(l){return Co(l instanceof Oa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&rm(a.target)){const l=new se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ft.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=we();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new yd(e,n,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=hw(),this.Qe=new Je(Se),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new At(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hw(){return new Je(se.comparator)}function dw(){return new Je(se.comparator)}const pj={asc:"ASCENDING",desc:"DESCENDING"},mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gj={and:"AND",or:"OR"};class yj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function im(t,e){return t.useProto3Json||dd(e)?e:{value:e}}function xh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _j(t,e){return xh(t,e.toTimestamp())}function fr(t){return De(!!t),ce.fromTimestamp(function(n){const r=Cs(n);return new nt(r.seconds,r.nanos)}(t))}function sy(t,e){return om(t,e).canonicalString()}function om(t,e){const n=function(s){return new We(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EI(t){const e=We.fromString(t);return De(CI(e)),e}function am(t,e){return sy(t.databaseId,e.path)}function Nf(t,e){const n=EI(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(kI(n))}function TI(t,e){return sy(t.databaseId,e)}function vj(t){const e=EI(t);return e.length===4?We.emptyPath():kI(e)}function lm(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kI(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fw(t,e,n){return{name:am(t,e),fields:n.value.mapValue.fields}}function wj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string"),Pt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:vI(c.code);return new Q(h,c.message||"")}(o);n=new xI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nf(t,r.document.name),i=fr(r.document.updateTime),o=r.document.createTime?fr(r.document.createTime):ce.min(),a=new An({mapValue:{fields:r.document.fields}}),l=Ft.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Au(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Nf(t,r.document),i=r.readTime?fr(r.readTime):ce.min(),o=Ft.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Au([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Nf(t,r.document),i=r.removedTargetIds||[];n=new Au([],i,s,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new cj(s,i),a=r.targetId;n=new wI(a,o)}}return n}function xj(t,e){let n;if(e instanceof nc)n={update:fw(t,e.key,e.value)};else if(e instanceof _I)n={delete:am(t,e.key)};else if(e instanceof Oi)n={update:fw(t,e.key,e.data),updateMask:Rj(e.fieldMask)};else{if(!(e instanceof oj))return le();n={verify:am(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof jl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:_j(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le()}(t,e.precondition)),n}function bj(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?fr(s.updateTime):fr(i);return o.isEqual(ce.min())&&(o=fr(i)),new rj(o,s.transformResults||[])}(n,e))):[]}function Ej(t,e){return{documents:[TI(t,e.path)]}}function Tj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TI(t,s);const i=function(c){if(c.length!==0)return SI(Zn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:qi(m.field),direction:Sj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=im(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function kj(t){let e=vj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=II(f);return m instanceof Zn&&tI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new Ll(Ki(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,dd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new _h(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new _h(y,m)}(n.endAt)),$L(e,s,o,i,a,"F",l,c)}function Ij(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function II(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ki(n.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ki(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ki(n.unaryFilter.field);return dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ki(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return dt.create(Ki(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(r=>II(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function Sj(t){return pj[t]}function Cj(t){return mj[t]}function Aj(t){return gj[t]}function qi(t){return{fieldPath:t.canonicalString()}}function Ki(t){return It.fromServerFormat(t.fieldPath)}function SI(t){return t instanceof dt?function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(n.field),op:Cj(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const r=n.getFilters().map(s=>SI(s));return r.length===1?r[0]:{compositeFilter:{op:Aj(n.op),filters:r}}}(t):le()}function Rj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.ct=e}}function Nj(t){const e=kj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.un=new Oj}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ss.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class Oj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new At(We.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new At(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new No(0)}static kn(){return new No(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.changes=new Go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&nl(r.mutation,s,qn.empty(),nt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const s=oi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Da();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Fr();const o=tl(),a=function(){return tl()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Oi)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),nl(h.mutation,c,h.mutation.getFieldMask(),nt.now())):o.set(c.key,qn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new Lj(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=tl();let s=new Je((o,a)=>o-a),i=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||qn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(s.get(a.batchId)||we()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=uI();h.forEach(m=>{if(!i.has(m)){const y=gI(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(oi());let a=-1,l=i;return o.next(c=>z.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,we())).next(h=>({batchId:a,changes:cI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=Da();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Da();return this.indexManager.getCollectionParents(e,i).next(a=>z.forEach(a,l=>{const c=function(f,m){return new Ko(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ft.newInvalidDocument(h)))});let a=Da();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&nl(h.mutation,c,qn.empty(),nt.now()),pd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fr(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Nj(s.bundledQuery),readTime:fr(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.overlays=new Je(se.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oi();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=oi(),i=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Je((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=oi(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=oi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return z.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lj(n,r));let i=this.Ir.get(n);i===void 0&&(i=we(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.Tr=new At(yt.Er),this.dr=new At(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new We([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new We([])),r=new yt(n,e),s=new yt(n,e+1);let i=we();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new At(yt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aj(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Se);return n.forEach(s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new yt(new se(i),0);let a=new At(Se);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.Mr=e,this.docs=function(){return new Je(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ft.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fr();const o=n.path,a=new se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||TL(EL(h),r)<=0||(s.has(h.key)||pd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){le()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $j(this)}getSize(e){return z.resolve(this.size)}}class $j extends Mj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.persistence=e,this.Nr=new Go(n=>Jg(n),Zg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new iy,this.targetCount=0,this.kr=No.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new No(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Gg(0),this.Kr=!1,this.Kr=!0,this.$r=new Uj,this.referenceDelegate=e(this),this.Ur=new Wj(this),this.indexManager=new Dj,this.remoteDocumentCache=function(s){return new zj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Pj(n),this.Gr=new Vj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Bj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new qj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class qj extends IL{constructor(e){super(),this.currentSequenceNumber=e}}class oy{constructor(e){this.persistence=e,this.Jr=new iy,this.Yr=null}static Zr(e){return new oy(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=se.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=we(),s=we();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ay(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qP()?8:SL(zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Kj;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(_a()<=xe.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Hi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(_a()<=xe.DEBUG&&J("QueryEngine","Query:",Hi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(_a()<=xe.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Hi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):z.resolve())}Yi(e,n){if(rw(n))return z.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vh(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=we(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,vh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return rw(n)||s.isEqual(ce.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(_a()<=xe.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hi(n)),this.rs(e,o,n,bL(s,-1)).next(a=>a))})}ts(e,n){let r=new At(aI(e));return n.forEach((s,i)=>{pd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return _a()<=xe.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Hi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ss.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Je(Se),this._s=new Go(i=>Jg(i),Zg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Yj(t,e,n,r){return new Qj(t,e,n,r)}async function AI(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=we();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Xj(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,m=f.keys();let y=z.resolve();return m.forEach(x=>{y=y.next(()=>h.getEntry(l,x)).next(E=>{const T=c.docVersions.get(x);De(T!==null),E.version.compareTo(T)<0&&(f.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function RI(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Jj(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Pt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(E,T,v){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=Fr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Zj(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function Zj(t,e,n){let r=we(),s=we();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function eV(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tV(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function cm(t,e,n){const r=ue(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!tc(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function pw(t,e,n){const r=ue(t);let s=ce.min(),i=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ue(l),m=f._s.get(h);return m!==void 0?z.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,hr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:we())).next(a=>(nV(r,HL(e),a),{documents:a,Ts:i})))}function nV(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class mw{constructor(){this.activeTargetIds=XL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rV{constructor(){this.so=new mw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new mw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc=null;function Df(){return qc===null?qc=function(){return 268435456+Math.round(2147483648*Math.random())}():qc++,"0x"+qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class aV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Df(),l=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(J("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Co("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=iV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Df();return new Promise((o,a)=>{const l=new $k;l.setWithCredentials(!0),l.listenOnce(Wk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Iu.NO_ERROR:const h=l.getResponseJson();J(Lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Iu.TIMEOUT:J(Lt,`RPC '${e}' ${i} timed out`),a(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:const f=l.getStatus();if(J(Lt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const x=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(y.status);a(new Q(x,y.message))}else a(new Q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q(F.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{J(Lt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(Lt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Df(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kk(),a=qk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");J(Lt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,y=!1;const x=new oV({Io:T=>{y?J(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(J(Lt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),J(Lt,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},To:()=>f.close()}),E=(T,v,_)=>{T.listen(v,b=>{try{_(b)}catch(R){setTimeout(()=>{throw R},0)}})};return E(f,Na.EventType.OPEN,()=>{y||(J(Lt,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),E(f,Na.EventType.CLOSE,()=>{y||(y=!0,J(Lt,`RPC '${e}' stream ${s} transport closed`),x.So())}),E(f,Na.EventType.ERROR,T=>{y||(y=!0,Co(Lt,`RPC '${e}' stream ${s} transport errored:`,T),x.So(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),E(f,Na.EventType.MESSAGE,T=>{var v;if(!y){const _=T.data[0];De(!!_);const b=_,R=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(R){J(Lt,`RPC '${e}' stream ${s} received error:`,R);const P=R.status;let M=function(I){const A=ct[I];if(A!==void 0)return vI(A)}(P),k=R.message;M===void 0&&(M=F.INTERNAL,k="Unknown error status: "+P+" with message "+R.message),y=!0,x.So(new Q(M,k)),f.close()}else J(Lt,`RPC '${e}' stream ${s} received:`,_),x.bo(_)}}),E(a,Hk.STAT_EVENT,T=>{T.stat===Zp.PROXY?J(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Zp.NOPROXY&&J(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function Of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){return new yj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new PI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Vr(n.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lV extends NI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=wj(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?fr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=lm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=rm(l)?{documents:Ej(i,l)}:{query:Tj(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bI(i,o.resumeToken);const c=im(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=xh(i,o.snapshotVersion.toTimestamp());const c=im(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Ij(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=lm(this.serializer),n.removeTarget=e,this.a_(n)}}class cV extends NI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bj(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=lm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>xj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,om(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,om(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vr(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Mi(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await sc(c),c.q_.set("Unknown"),c.L_.delete(4),await vd(c)}(this))})}),this.q_=new hV(r,s)}}async function vd(t){if(Mi(t))for(const e of t.B_)await e(!0)}async function sc(t){for(const e of t.B_)await e(!1)}function DI(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),hy(n)?uy(n):Qo(n).r_()&&cy(n,e))}function ly(t,e){const n=ue(t),r=Qo(n);n.N_.delete(e),r.r_()&&OI(n,e),n.N_.size===0&&(r.r_()?r.o_():Mi(n)&&n.q_.set("Unknown"))}function cy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qo(t).A_(e)}function OI(t,e){t.Q_.xe(e),Qo(t).R_(e)}function uy(t){t.Q_=new fj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qo(t).start(),t.q_.v_()}function hy(t){return Mi(t)&&!Qo(t).n_()&&t.N_.size>0}function Mi(t){return ue(t).L_.size===0}function MI(t){t.Q_=void 0}async function fV(t){t.q_.set("Online")}async function pV(t){t.N_.forEach((e,n)=>{cy(t,e)})}async function mV(t,e){MI(t),hy(t)?(t.q_.M_(e),uy(t)):t.q_.set("Unknown")}async function gV(t,e,n){if(t.q_.set("Online"),e instanceof xI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(t,r)}else if(e instanceof Au?t.Q_.Ke(e):e instanceof wI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await RI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),OI(i,l);const f=new cs(h.target,l,c,h.sequenceNumber);cy(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await bh(t,r)}}async function bh(t,e,n){if(!tc(e))throw e;t.L_.add(1),await sc(t),t.q_.set("Offline"),n||(n=()=>RI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vd(t)})}function LI(t,e){return e().catch(n=>bh(t,n,e))}async function wd(t){const e=ue(t),n=As(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yV(e);)try{const s=await eV(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,_V(e,s)}catch(s){await bh(e,s)}jI(e)&&VI(e)}function yV(t){return Mi(t)&&t.O_.length<10}function _V(t,e){t.O_.push(e);const n=As(t);n.r_()&&n.V_&&n.m_(e.mutations)}function jI(t){return Mi(t)&&!As(t).n_()&&t.O_.length>0}function VI(t){As(t).start()}async function vV(t){As(t).p_()}async function wV(t){const e=As(t);for(const n of t.O_)e.m_(n.mutations)}async function xV(t,e,n){const r=t.O_.shift(),s=ny.from(r,e,n);await LI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await wd(t)}async function bV(t,e){e&&As(t).V_&&await async function(r,s){if(function(o){return uj(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();As(r).s_(),await LI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await wd(r)}}(t,e),jI(t)&&VI(t)}async function yw(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Mi(n);n.L_.add(3),await sc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vd(n)}async function EV(t,e){const n=ue(t);e?(n.L_.delete(2),await vd(n)):e||(n.L_.add(2),await sc(n),n.q_.set("Unknown"))}function Qo(t){return t.K_||(t.K_=function(n,r,s){const i=ue(n);return i.w_(),new lV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:fV.bind(null,t),Ro:pV.bind(null,t),mo:mV.bind(null,t),d_:gV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),hy(t)?uy(t):t.q_.set("Unknown")):(await t.K_.stop(),MI(t))})),t.K_}function As(t){return t.U_||(t.U_=function(n,r,s){const i=ue(n);return i.w_(),new cV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vV.bind(null,t),mo:bV.bind(null,t),f_:wV.bind(null,t),g_:xV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await wd(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new dy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(t,e){if(Vr("AsyncQueue",`${e}: ${t}`),tc(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Da(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.W_=new Je(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Do{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Do(e,n,go.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kV{constructor(){this.queries=vw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),i=s.queries;s.queries=vw(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function vw(){return new Go(t=>oI(t),fd)}async function FI(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new TV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=fy(o,`Initialization of query '${Hi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&py(n)}async function UI(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IV(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&py(n)}function SV(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function py(t){t.Y_.forEach(e=>{e.next()})}var um,ww;(ww=um||(um={})).ea="default",ww.Cache="cache";class BI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Do(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==um.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.key=e}}class $I{constructor(e){this.key=e}}class CV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=aI(e),this.Ra=new go(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _w,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=pd(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;m&&y?m.data.isEqual(y.data)?x!==E&&(r.track({type:3,doc:y}),T=!0):this.ga(m,y)||(r.track({type:2,doc:y}),T=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),T=!0):m&&!y&&(r.track({type:1,doc:m}),T=!0,(l||c)&&(a=!0)),T&&(y?(o=o.add(y),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,x){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return E(y)-E(x)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Do(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _w,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=we(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new $I(r))}),this.da.forEach(r=>{e.has(r)||n.push(new zI(r))}),n}ba(e){this.Ta=e.Ts,this.da=we();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Do.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RV{constructor(e){this.key=e,this.va=!1}}class PV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Go(a=>oI(a),fd),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(se.comparator),this.Na=new Map,this.La=new iy,this.Ba={},this.ka=new Map,this.qa=No.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function NV(t,e,n=!0){const r=QI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await WI(r,e,n,!0),s}async function DV(t,e){const n=QI(t);await WI(n,e,!0,!1)}async function WI(t,e,n,r){const s=await tV(t.localStore,hr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await OV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&DI(t.remoteStore,s),a}async function OV(t,e,n,r,s){t.Ka=(f,m,y)=>async function(E,T,v,_){let b=T.view.ma(v);b.ns&&(b=await pw(E.localStore,T.query,!1).then(({documents:k})=>T.view.ma(k,b)));const R=_&&_.targetChanges.get(T.targetId),P=_&&_.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(b,E.isPrimaryClient,R,P);return bw(E,T.targetId,M.wa),M.snapshot}(t,f,m,y);const i=await pw(t.localStore,e,!0),o=new CV(e,i.Ts),a=o.ma(i.documents),l=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);bw(t,n,c.wa);const h=new AV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function MV(t,e,n){const r=ue(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!fd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ly(r.remoteStore,s.targetId),hm(r,s.targetId)}).catch(ec)):(hm(r,s.targetId),await cm(r.localStore,s.targetId,!0))}async function LV(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ly(n.remoteStore,r.targetId))}async function jV(t,e,n){const r=WV(t);try{const s=await function(o,a){const l=ue(o),c=nt.now(),h=a.reduce((y,x)=>y.add(x.key),we());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=Fr(),E=we();return l.cs.getEntries(y,h).next(T=>{x=T,x.forEach((v,_)=>{_.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(T=>{f=T;const v=[];for(const _ of a){const b=ij(_,f.get(_.key).overlayedDocument);b!=null&&v.push(new Oi(_.key,b,Jk(b.value.mapValue),dr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(T=>{m=T;const v=T.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(y,T.batchId,v)})}).then(()=>({batchId:m.batchId,changes:cI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Je(Se)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await ic(r,s.changes),await wd(r.remoteStore)}catch(s){const i=fy(s,"Failed to persist write");n.reject(i)}}async function HI(t,e){const n=ue(t);try{const r=await Jj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?De(o.va):s.removedDocuments.size>0&&(De(o.va),o.va=!1))}),await ic(n,r,e)}catch(r){await ec(r)}}function xw(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&py(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VV(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Je(se.comparator);o=o.insert(i,Ft.newNoDocument(i,ce.min()));const a=we().add(i),l=new yd(ce.min(),new Map,new Je(Se),o,a);await HI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),my(r)}else await cm(r.localStore,e,!1).then(()=>hm(r,e,n)).catch(ec)}async function FV(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await Xj(n.localStore,e);KI(n,r,null),qI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ic(n,s)}catch(s){await ec(s)}}async function UV(t,e,n){const r=ue(t);try{const s=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(De(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);KI(r,e,n),qI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ic(r,s)}catch(s){await ec(s)}}function qI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function KI(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function hm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||GI(t,r)})}function GI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ly(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),my(t))}function bw(t,e,n){for(const r of n)r instanceof zI?(t.La.addReference(r.key,e),BV(t,r)):r instanceof $I?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||GI(t,r.key)):le()}function BV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),my(t))}function my(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(We.fromString(e)),r=t.qa.next();t.Na.set(r,new RV(n)),t.Oa=t.Oa.insert(n,r),DI(t.remoteStore,new cs(hr(ey(n.path)),r,"TargetPurposeLimboResolution",Gg.oe))}}async function ic(t,e,n){const r=ue(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=ay.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=ue(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>z.forEach(c,m=>z.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>z.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!tc(f))throw f;J("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.os.get(m),x=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(m,E)}}}(r.localStore,i))}async function zV(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await AI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Q(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ic(n,r.hs)}}function $V(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return we().add(r.key);{let s=we();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function QI(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$V.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VV.bind(null,e),e.Ca.d_=IV.bind(null,e.eventManager),e.Ca.$a=SV.bind(null,e.eventManager),e}function WV(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UV.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Yj(this.persistence,new Gj,e.initialUser,this.serializer)}Ga(e){return new Hj(oy.Zr,this.serializer)}Wa(e){return new rV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zV.bind(null,this.syncEngine),await EV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kV}()}createDatastore(e){const n=_d(e.databaseInfo.databaseId),r=function(i){return new aV(i)}(e.databaseInfo);return function(i,o,a,l){return new uV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new dV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>xw(this.syncEngine,n,0),function(){return gw.D()?new gw:new sV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const f=new PV(s,i,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ue(s);J("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await sc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=Qk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mf(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await AI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ew(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qV(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>yw(e.remoteStore,s)),t._onlineComponents=e}async function qV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Co("Error using user provided cache. Falling back to memory cache: "+n),await Mf(t,new Eh)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Mf(t,new Eh);return t._offlineComponents}async function XI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await Ew(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await Ew(t,new dm))),t._onlineComponents}function KV(t){return XI(t).then(e=>e.syncEngine)}async function JI(t){const e=await XI(t),n=e.eventManager;return n.onListen=NV.bind(null,e.syncEngine),n.onUnlisten=MV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LV.bind(null,e.syncEngine),n}function GV(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new YI({next:m=>{h.Za(),o.enqueueAndForget(()=>UI(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new BI(ey(a.path),h,{includeMetadataChanges:!0,_a:!0});return FI(i,f)}(await JI(t),t.asyncQueue,e,n,r)),r.promise}function QV(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new YI({next:m=>{h.Za(),o.enqueueAndForget(()=>UI(i,f)),m.fromCache&&l.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new BI(a,h,{includeMetadataChanges:!0,_a:!0});return FI(i,f)}(await JI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YV(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kw(t){if(!se.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Iw(t){if(se.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function Rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xd(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fL;switch(r.type){case"firstParty":return new yL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tw.get(n);r&&(J("ComponentProvider","Removing Datastore"),Tw.delete(n),r.terminate())}(this),Promise.resolve()}}function XV(t,e,n,r={}){var s;const i=(t=Rs(t,bd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=jt.MOCK_USER;else{a=ST(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new jt(c)}t._authCredentials=new pL(new Gk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Es extends Us{constructor(e,n,r){super(e,n,ey(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new se(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function Ru(t,e,...n){if(t=Xe(t),eS("collection","path",e),t instanceof bd){const r=We.fromString(e,...n);return Iw(r),new Es(t,null,r)}{if(!(t instanceof cn||t instanceof Es))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return Iw(r),new Es(t.firestore,null,r)}}function Th(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Qk.newId()),eS("doc","path",e),t instanceof bd){const r=We.fromString(e,...n);return kw(r),new cn(t,null,new se(r))}{if(!(t instanceof cn||t instanceof Es))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return kw(r),new cn(t.firestore,t instanceof Es?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new PI(this,"async_queue_retry"),this.Vu=()=>{const r=Of();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!tc(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Vr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=dy.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class oc extends bd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Cw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cw(e),this._firestoreClient=void 0,await e}}}function JV(t,e){const n=typeof t=="object"?t:id(),r=typeof t=="string"?t:"(default)",s=Vs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=TT("firestore");i&&XV(s,...i)}return s}function gy(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZV(t),t._firestoreClient}function ZV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new RL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ZI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new HV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oo(Pt.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Oo(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=/^__.*__$/;class tF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new nc(e,this.data,n,this.fieldTransforms)}}function tS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class xy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(tS(this.Cu)&&eF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_d(e)}Qu(e,n,r,s=!1){return new xy({Cu:e,methodName:n,qu:r,path:It.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function by(t){const e=t._freezeSettings(),n=_d(t._databaseId);return new nF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nS(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);iS("Data must be an object, but it was:",o,r);const a=rS(r,o);let l,c;if(i.merge)l=new qn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=sF(e,f,n);if(!o.contains(m))throw new Q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oF(h,m)||h.push(m)}l=new qn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new tF(new An(a),l,c)}class Ey extends _y{_toFieldTransform(e){return new tj(e.path,new jl)}isEqual(e){return e instanceof Ey}}function rF(t,e,n,r=!1){return Ty(n,t.Qu(r?4:3,e))}function Ty(t,e){if(sS(t=Xe(t)))return iS("Unsupported field value:",e,t),rS(t,e);if(t instanceof _y)return function(r,s){if(!tS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ty(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=nt.fromDate(r);return{timestampValue:xh(s.serializer,i)}}if(r instanceof nt){const i=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xh(s.serializer,i)}}if(r instanceof vy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oo)return{bytesValue:bI(s.serializer,r._byteString)};if(r instanceof cn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof wy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ty(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${xd(r)}`)}(t,e)}function rS(t,e){const n={};return Yk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(t,(r,s)=>{const i=Ty(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function sS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof vy||t instanceof Oo||t instanceof cn||t instanceof _y||t instanceof wy)}function iS(t,e,n){if(!sS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=xd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sF(t,e,n){if((e=Xe(e))instanceof yy)return e._internalPath;if(typeof e=="string")return oS(t,e);throw kh("Field path arguments must be of type string or ",t,!1,void 0,n)}const iF=new RegExp("[~\\*/\\[\\]]");function oS(t,e,n){if(e.search(iF)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yy(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q(F.INVALID_ARGUMENT,a+t+l)}function oF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aF extends aS{data(){return super.data()}}function Ed(t,e){return typeof e=="string"?oS(t,e):e instanceof yy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ky{}class Iy extends ky{}function fm(t,e,...n){let r=[];e instanceof ky&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Sy).length,a=i.filter(l=>l instanceof Td).length;if(o>1||o>0&&a>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Td extends Iy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Td(e,n,r)}_apply(e){const n=this._parse(e);return uS(e._query,n),new Us(e.firestore,e.converter,sm(e._query,n))}_parse(e){const n=by(e.firestore);return function(i,o,a,l,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Pw(f,h);const y=[];for(const x of f)y.push(Rw(l,i,x));m={arrayValue:{values:y}}}else m=Rw(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Pw(f,h),m=rF(a,o,f,h==="in"||h==="not-in");return dt.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Aw(t,e,n){const r=e,s=Ed("where",t);return Td._create(s,r,n)}class Sy extends ky{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)uS(o,l),o=sm(o,l)}(e._query,n),new Us(e.firestore,e.converter,sm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cy extends Iy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ll(i,o)}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ko(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function lS(t,e="asc"){const n=e,r=Ed("orderBy",t);return Cy._create(r,n)}class Ay extends Iy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ay(e,n,r)}_apply(e){return new Us(e.firestore,e.converter,vh(e._query,this._limit,this._limitType))}}function cS(t){return Ay._create("limit",t,"F")}function Rw(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iI(e)&&n.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!se.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xv(t,new se(r))}if(n instanceof cn)return Xv(t,n._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(n)}.`)}function Pw(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cF{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ot(o.doubleValue));return new wy(i)}convertGeoPoint(e){return new vy(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const n=Cs(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);De(CI(r));const s=new Ol(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||Vr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dS extends aS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ed("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pu extends dS{data(e={}){return super.data(e)}}class uF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ma(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pu(this._firestore,this._userDataWriter,r.key,r,new Ma(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ma(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ma(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:hF(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){t=Rs(t,cn);const e=Rs(t.firestore,oc);return GV(gy(e),t._key).then(n=>fF(e,t,n))}class pS extends cF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function pm(t){t=Rs(t,Us);const e=Rs(t.firestore,oc),n=gy(e),r=new pS(e);return lF(t._query),QV(n,t._query).then(s=>new uF(e,r,t,s))}function mm(t,e,n){t=Rs(t,cn);const r=Rs(t.firestore,oc),s=hS(t.converter,e,n);return mS(r,[nS(by(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,dr.none())])}function dF(t,e){const n=Rs(t.firestore,oc),r=Th(t),s=hS(t.converter,e);return mS(n,[nS(by(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}function mS(t,e){return function(r,s){const i=new Pr;return r.asyncQueue.enqueueAndForget(async()=>jV(await KV(r),s,i)),i.promise}(gy(t),e)}function fF(t,e,n){const r=n.docs.get(e._key),s=new pS(t);return new dS(t,s,e._key,r,new Ma(n.hasPendingWrites,n.fromCache),e.converter)}function Ih(){return new Ey("serverTimestamp")}(function(e,n=!0){(function(s){Ho=s})(Di),Jn(new Mn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new oc(new mL(r.getProvider("auth-internal")),new vL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),on(qv,"4.7.3",e),on(qv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="firebasestorage.googleapis.com",yS="storageBucket",pF=2*60*1e3,mF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st extends Vn{constructor(e,n,r=0){super(Lf(e),`Firebase Storage: ${n} (${Lf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,st.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function Lf(t){return"storage/"+t}function Ry(){const t="An unknown error occurred, please check the error payload for server response.";return new st(rt.UNKNOWN,t)}function gF(t){return new st(rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yF(t){return new st(rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _F(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new st(rt.UNAUTHENTICATED,t)}function vF(){return new st(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wF(t){return new st(rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function xF(){return new st(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bF(){return new st(rt.CANCELED,"User canceled the upload/download.")}function EF(t){return new st(rt.INVALID_URL,"Invalid URL '"+t+"'.")}function TF(t){return new st(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function kF(){return new st(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yS+"' property when initializing the app?")}function IF(){return new st(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SF(){return new st(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CF(t){return new st(rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gm(t){return new st(rt.INVALID_ARGUMENT,t)}function _S(){return new st(rt.APP_DELETED,"The Firebase app was deleted.")}function AF(t){return new st(rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rl(t,e){return new st(rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function va(t){throw new st(rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=vn.makeFromUrl(e,n)}catch{return new vn(e,"")}if(r.path==="")return r;throw TF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},E=n===gS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",v=new RegExp(`^https?://${E}/${s}/${T}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:y,indices:x,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<b.length;R++){const P=b[R],M=P.regex.exec(e);if(M){const k=M[P.indices.bucket];let w=M[P.indices.path];w||(w=""),r=new vn(k,w),P.postModify(r);break}}if(r==null)throw EF(e);return r}}class RF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function f(T){s=setTimeout(()=>{s=null,t(y,l())},T)}function m(){i&&clearTimeout(i)}function y(T,...v){if(c){m();return}if(T){m(),h.call(null,T,...v);return}if(l()||o){m(),h.call(null,T,...v);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let x=!1;function E(T){x||(x=!0,m(),!c&&(s!==null?(T||(a=2),clearTimeout(s),f(0)):T||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function NF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){return t!==void 0}function OF(t){return typeof t=="object"&&!Array.isArray(t)}function Py(t){return typeof t=="string"||t instanceof String}function Nw(t){return Ny()&&t instanceof Blob}function Ny(){return typeof Blob<"u"}function Dw(t,e,n,r){if(r<e)throw gm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw gm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function vS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var fi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fi||(fi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n,r,s,i,o,a,l,c,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,x)=>{this.resolve_=y,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Kc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===fi.NO_ERROR,l=i.getStatus();if(!a||MF(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===fi.ABORT;r(!1,new Kc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Kc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());DF(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Ry();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?_S():bF();o(l)}else{const l=xF();o(l)}};this.canceled_?n(!1,new Kc(!1,null,!0)):this.backoffId_=PF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function jF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function VF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function UF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function BF(t,e,n,r,s,i,o=!0){const a=vS(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return FF(c,e),jF(c,n),VF(c,i),UF(c,r),new LF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $F(...t){const e=zF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ny())return new Blob(t);throw new st(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t){if(typeof atob>"u")throw CF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jf{constructor(e,n){this.data=e,this.contentType=n||null}}function qF(t,e){switch(t){case lr.RAW:return new jf(wS(e));case lr.BASE64:case lr.BASE64URL:return new jf(xS(t,e));case lr.DATA_URL:return new jf(GF(e),QF(e))}throw Ry()}function wS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function KF(t){let e;try{e=decodeURIComponent(t)}catch{throw rl(lr.DATA_URL,"Malformed data URL.")}return wS(e)}function xS(t,e){switch(t){case lr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw rl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case lr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw rl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HF(e)}catch(s){throw s.message.includes("polyfill")?s:rl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class bS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw rl(lr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=YF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function GF(t){const e=new bS(t);return e.base64?xS(lr.BASE64,e.rest):KF(e.rest)}function QF(t){return new bS(t).contentType}function YF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){let r=0,s="";Nw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Nw(this.data_)){const r=this.data_,s=WF(r,e,n);return s===null?null:new is(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new is(r,!0)}}static getBlob(...e){if(Ny()){const n=e.map(r=>r instanceof is?r.data_:r);return new is($F.apply(null,n))}else{const n=e.map(o=>Py(o)?qF(lr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new is(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){let e;try{e=JSON.parse(t)}catch{return null}return OF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function JF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function TS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t,e){return e}class Ht{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||ZF}}let Gc=null;function e4(t){return!Py(t)||t.length<2?t:TS(t)}function kS(){if(Gc)return Gc;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(i,o){return e4(o)}const n=new Ht("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Ht("size");return s.xform=r,t.push(s),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),Gc=t,Gc}function t4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new vn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function n4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return t4(r,t),r}function IS(t,e,n){const r=ES(e);return r===null?null:n4(t,r,n)}function r4(t,e,n,r){const s=ES(e);if(s===null||!Py(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),y=Dy(m,n,r),x=vS({alt:"media",token:c});return y+x})[0]}function s4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class SS{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){if(!t)throw Ry()}function i4(t,e){function n(r,s){const i=IS(t,s,e);return CS(i!==null),i}return n}function o4(t,e){function n(r,s){const i=IS(t,s,e);return CS(i!==null),r4(i,s,t.host,t._protocol)}return n}function AS(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=vF():s=_F():n.getStatus()===402?s=yF(t.bucket):n.getStatus()===403?s=wF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function a4(t){const e=AS(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=gF(t.path)),i.serverResponse=s.serverResponse,i}return n}function l4(t,e,n){const r=e.fullServerUrl(),s=Dy(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new SS(s,i,o4(t,n),o);return a.errorHandler=a4(e),a}function c4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function u4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=c4(null,e)),r}function h4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let R=0;R<2;R++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=u4(e,r,s),h=s4(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=is.getBlob(f,r,m);if(y===null)throw IF();const x={name:c.fullPath},E=Dy(i,t.host,t._protocol),T="POST",v=t.maxUploadRetryTime,_=new SS(E,T,i4(t,n),v);return _.urlParams=x,_.headers=o,_.body=y.uploadData(),_.errorHandler=AS(e),_}class d4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw va("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw va("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw va("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw va("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw va("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class f4 extends d4{initXhr(){this.xhr_.responseType="text"}}function RS(){return new f4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this._service=e,n instanceof vn?this._location=n:this._location=vn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Si(e,n)}get root(){const e=new vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TS(this._location.path)}get storage(){return this._service}get parent(){const e=XF(this._location.path);if(e===null)return null;const n=new vn(this._location.bucket,e);return new Si(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AF(e)}}function p4(t,e,n){t._throwIfRoot("uploadBytes");const r=h4(t.storage,t._location,kS(),new is(e,!0),n);return t.storage.makeRequestWithTokens(r,RS).then(s=>({metadata:s,ref:t}))}function m4(t){t._throwIfRoot("getDownloadURL");const e=l4(t.storage,t._location,kS());return t.storage.makeRequestWithTokens(e,RS).then(n=>{if(n===null)throw SF();return n})}function g4(t,e){const n=JF(t._location.path,e),r=new vn(t._location.bucket,n);return new Si(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return/^[A-Za-z]+:\/\//.test(t)}function _4(t,e){return new Si(t,e)}function PS(t,e){if(t instanceof Oy){const n=t;if(n._bucket==null)throw kF();const r=new Si(n,n._bucket);return e!=null?PS(r,e):r}else return e!==void 0?g4(t,e):t}function v4(t,e){if(e&&y4(e)){if(t instanceof Oy)return _4(t,e);throw gm("To use ref(service, url), the first argument must be a Storage instance.")}else return PS(t,e)}function Ow(t,e){const n=e==null?void 0:e[yS];return n==null?null:vn.makeFromBucketSpec(n,t)}function w4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:ST(s,t.app.options.projectId))}class Oy{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=gS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pF,this._maxUploadRetryTime=mF,this._requests=new Set,s!=null?this._bucket=vn.makeFromBucketSpec(s,this._host):this._bucket=Ow(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vn.makeFromBucketSpec(this._url,e):this._bucket=Ow(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Si(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new RF(_S());{const o=BF(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Mw="@firebase/storage",Lw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="storage";function x4(t,e,n){return t=Xe(t),p4(t,e,n)}function b4(t){return t=Xe(t),m4(t)}function E4(t,e){return t=Xe(t),v4(t,e)}function jw(t=id(),e){t=Xe(t);const r=Vs(t,NS).getImmediate({identifier:e}),s=TT("storage");return s&&T4(r,...s),r}function T4(t,e,n,r={}){w4(t,e,n,r)}function k4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Oy(n,r,s,e,Di)}function I4(){Jn(new Mn(NS,k4,"PUBLIC").setMultipleInstances(!0)),on(Mw,Lw,""),on(Mw,Lw,"esm2017")}I4();let DS=null,OS=null;try{({initializeAppCheck:DS,ReCaptchaV3Provider:OS}=require("firebase/app-check"))}catch{}const $i={apiKey:"AIzaSyAgRnS9ugijuxF1qMCfr-USXe5AkYAnLME",authDomain:"agentic-hackthon.firebaseapp.com",projectId:"agentic-hackthon",appId:"1:1063716672043:web:681fd771d31ad548f6106e",storageBucket:"agentic-hackthon.firebasestorage.app",messagingSenderId:"1063716672043",measurementId:"G-S3ZEB9M54W"};function S4(t){try{let e=String(t).trim();if(/^https?:\/\//i.test(e))try{e=new URL(e).hostname}catch{}return/\.firebasestorage\.app$/i.test(e)&&(e=e.replace(/\.firebasestorage\.app$/i,".appspot.com")),e=e.split("/")[0],e}catch{return t}}function C4(t){return!!(t&&t.apiKey&&t.authDomain&&t.projectId&&t.appId)}let Yr,Tt,A4,Kt,Sh;try{if(!C4($i))throw new Error("Missing Firebase env configuration");const t=S4($i.storageBucket)||($i.projectId?`${$i.projectId}.appspot.com`:void 0),e={...$i,storageBucket:t};Yr=NT(e),Tt=HO(Yr),Kt=JV(Yr),Sh=t?jw(Yr,`gs://${t}`):jw(Yr);try{}catch{}if($i.measurementId)try{uL().then(n=>{n&&(A4=lL(Yr))}).catch(()=>{})}catch{}}catch(t){console.error("[Firebase] Initialization failed:",(t==null?void 0:t.message)||t),Yr=null,Tt={currentUser:null},Kt=null,Sh=null}function R4(t){return Yr&&Tt?gD(Tt,t):(t(null),()=>{})}function P4(){const[t,e]=D.useState(null),[n,r]=D.useState(!0),[s,i]=D.useState(null),o=D.useCallback(async v=>{try{if(!v||!Kt)return;const _=Th(Kt,"users",v.uid),b=await fS(_),R={uid:v.uid,email:v.email||null,displayName:v.displayName||null,photoURL:v.photoURL||null,phoneNumber:v.phoneNumber||null,providerIds:(v.providerData||[]).map(P=>P.providerId),updatedAt:Ih()};b.exists()?await mm(_,R,{merge:!0}):await mm(_,{...R,createdAt:Ih(),role:"user"},{merge:!0})}catch{}},[]);D.useEffect(()=>{const v=R4(async _=>{e(_||null),r(!1)});return aO(Tt).then(async _=>{_&&_.user&&(await o(_.user),e(_.user))}).catch(()=>{}).finally(()=>{}),()=>v&&v()},[o]);const a=D.useCallback(async({email:v,password:_})=>{const b=await dD(Tt,v,_);return e(b.user),b.user},[]),l=D.useCallback(async({email:v,password:_,name:b})=>{const R=await hD(Tt,v,_);if(b)try{await ok(R.user,{displayName:b})}catch{}return await o(R.user),e({...R.user}),R.user},[o]),c=D.useCallback(async()=>{await yD(Tt),e(null)},[]),h=D.useCallback(async()=>Tt.currentUser?Tt.currentUser.getIdToken():null,[]),f=D.useCallback(async()=>{const v=new Tr;v.setCustomParameters({prompt:"select_account"});const _=typeof navigator<"u"&&navigator.userAgent||"",b=/iPad|iPhone|iPod/.test(_),R=/Android/.test(_),P=typeof window<"u"&&window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,M=/FBAN|FBAV|Instagram|Line|MicroMessenger|Twitter|FB_IAB|VKClient|Snapchat/.test(_);try{if(b||R||P||M)return await Av(Tt,v),null;const k=await eO(Tt,v);return await o(k.user),e(k.user),k.user}catch(k){const w=k&&k.code?String(k.code):"";if(w==="auth/popup-closed-by-user"||w==="auth/popup-blocked"||w==="auth/cancelled-popup-request")return await Av(Tt,v),null;throw console.error("[Auth] Google sign-in failed:",k),k}},[o]),m=D.useCallback(()=>{if(typeof window>"u")return null;if(!window.recaptchaVerifier){const v="recaptcha-container";let _=document.getElementById(v);_||(_=document.createElement("div"),_.id=v,_.style.display="inline-block",document.body.appendChild(_)),window.recaptchaVerifier=new HD(Tt,v,{size:"invisible"})}return window.recaptchaVerifier},[]);function y(v){if(!v)return"";let b=String(v).replace(/[^0-9]/g,"");return b.startsWith("91")&&b.length>10&&(b=b.slice(b.length-10)),b.length===11&&b.startsWith("0")&&(b=b.slice(1)),b}function x(v){return/^[6-9][0-9]{9}$/.test(v)}const E=D.useCallback(async v=>{const _=m();try{_&&typeof _.render=="function"&&await _.render()}catch{}const b=y(v);if(!x(b)){const M=new Error("Please enter a valid Indian mobile number (10 digits starting with 6-9).");throw M.code="auth/invalid-india-number",M}const R=`+91${b}`,P=await GD(Tt,R,_);return i(P),P},[m]),T=D.useCallback(async v=>{const _=s;if(!_)throw new Error("No phone confirmation in progress");const b=await _.confirm(v);return await o(b.user),e(b.user),i(null),b.user},[s,o]);return{user:t,loading:n,login:a,signup:l,logout:c,getIdToken:h,loginWithGoogle:f,sendPhoneCode:E,confirmPhoneCode:T,phoneConfirmation:s}}const MS=D.createContext(null);function N4({children:t}){const e=P4();return d.jsx(MS.Provider,{value:e,children:t})}function Bs(){return D.useContext(MS)}function Ee({variant:t="primary",className:e="",disabled:n=!1,children:r,...s}){const i="inline-flex items-center justify-center rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed px-3.5 py-2.5 text-sm font-medium shadow-sm focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900",o={primary:"bg-gradient-to-tr from-brand-600 to-brand-700 text-white hover:from-brand-600 hover:to-brand-800 focus:ring-brand-600",secondary:"bg-blue-50 text-blue-900 hover:bg-blue-100 focus:ring-blue-300 dark:bg-slate-800 dark:text-blue-100 dark:hover:bg-slate-700",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",ghost:"bg-transparent text-slate-700 hover:bg-brand-50 dark:text-slate-200 dark:hover:bg-slate-800 focus:ring-brand-300"},a=`${i} ${o[t]||o.primary} ${e}`.trim();return d.jsx("button",{className:a,disabled:n,...s,children:r})}function D4(){const{theme:t,toggleTheme:e}=NP(),{user:n,logout:r,loading:s,loginWithGoogle:i}=Bs(),[o,a]=D.useState(!1),[l,c]=D.useState(!1),h=({isActive:f})=>`px-3 py-2 rounded-md transition-colors hover:text-brand-700 hover:bg-brand-50 dark:hover:bg-slate-800 ${f?"text-brand-700 bg-brand-50 dark:text-blue-300 dark:bg-slate-800":"text-slate-700 dark:text-slate-200"}`;return d.jsx("nav",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/70 bg-white dark:bg-slate-900 border-b border-brand-100 dark:border-slate-800 shadow-subtle",children:d.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"mr-auto flex items-center gap-3",children:[d.jsx("div",{className:"w-7 h-7 rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 shadow ring-1 ring-brand-500/30"}),d.jsx("span",{className:"font-semibold tracking-wide text-slate-900 dark:text-slate-100",children:"AgenticSprit"})]}),d.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[d.jsx(nr,{className:h,to:"/",children:"Dashboard"}),d.jsx(nr,{className:h,to:"/daily-checkin",children:"Daily Check-in"}),d.jsx(nr,{className:h,to:"/upload-report",children:"Upload Report"})]}),d.jsxs("div",{className:"flex items-center gap-2 relative",children:[d.jsxs("button",{onClick:e,"aria-label":"Toggle theme","aria-pressed":t==="dark",className:`relative inline-flex w-14 h-8 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900\r
                bg-blue-50 dark:bg-slate-700`,children:[d.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-amber-500 ${theme === 'dark' ? 'opacity-0' : 'opacity-100'}",children:d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M12 4a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1Zm0 13a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm7-6a1 1 0 0 1 1 1h1a1 1 0 1 1 0 2h-1a1 1 0 1 1-2 0 1 1 0 0 1 1-1ZM4 12a1 1 0 0 1 1-1H6a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm12.95-6.364a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414ZM4.929 17.657a1 1 0 0 1 1.414 0l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414Zm12.021 2.121a1 1 0 0 1 0-1.414l.707-.707a1 1 0 1 1 1.414 1.414l-.707.707a1 1 0 0 1-1.414 0ZM6.05 5.636a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 3.929 6.343l.707-.707A1 1 0 0 1 6.05 5.636Z"})})}),d.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-blue-400 ${theme === 'dark' ? 'opacity-100' : 'opacity-0'}",children:d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"})})}),d.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 rounded-full bg-white shadow transition-transform duration-300 ${t==="dark"?"translate-x-6":"translate-x-0"}`})]}),!s&&(n?d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>c(f=>!f),className:"relative inline-flex items-center gap-2 px-2 py-1 rounded-md border border-brand-100 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-brand-50 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600","aria-haspopup":"menu","aria-expanded":l,children:[d.jsxs("span",{className:"relative inline-block",children:[n.photoURL?d.jsx("img",{src:n.photoURL,alt:"avatar",className:"w-8 h-8 rounded-full ring-2 ring-brand-500/40"}):d.jsx("span",{className:"w-8 h-8 rounded-full grid place-items-center text-white text-sm font-medium bg-gradient-to-tr from-brand-600 to-blue-500 ring-2 ring-brand-500/40",children:(n.displayName||n.email||"?").slice(0,1).toUpperCase()}),d.jsx("span",{className:"absolute -right-0.5 -bottom-0.5 block w-3 h-3 rounded-full bg-emerald-500 ring-2 ring-white dark:ring-slate-900","aria-hidden":"true"})]}),d.jsx("span",{className:"hidden sm:inline text-sm max-w-[10rem] truncate",children:n.displayName||n.email}),d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-70",children:d.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l&&d.jsxs("div",{role:"menu",className:"absolute right-0 mt-2 w-60 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg z-50",children:[d.jsxs("div",{className:"px-3 py-2 text-sm text-slate-700 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700",children:[d.jsx("div",{className:"font-medium truncate",children:n.displayName||"Signed in"}),d.jsx("div",{className:"text-xs text-slate-500 truncate",children:n.email})]}),d.jsx("a",{href:"/profile",className:"block px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",onClick:()=>c(!1),children:"Profile"}),d.jsx("button",{onClick:async()=>{c(!1);try{await r()}catch{}},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",children:"Log out"})]})]}):d.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[d.jsx(nr,{className:h,to:"/login",children:"Log in"}),d.jsx(nr,{className:h,to:"/signup",children:"Sign up"}),d.jsx(Ee,{variant:"secondary",onClick:()=>{try{i()}catch{}},children:"Continue with Google"})]})),d.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200",onClick:()=>a(f=>!f),"aria-expanded":o,"aria-controls":"mobile-nav","aria-label":"Toggle navigation",children:d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),d.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),d.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),o&&d.jsxs("div",{id:"mobile-nav",className:"md:hidden mt-3 grid gap-1",children:[d.jsx(nr,{onClick:()=>a(!1),className:h,to:"/",children:"Dashboard"}),d.jsx(nr,{onClick:()=>a(!1),className:h,to:"/daily-checkin",children:"Daily Check-in"}),d.jsx(nr,{onClick:()=>a(!1),className:h,to:"/upload-report",children:"Upload Report"}),!s&&(n?d.jsx("button",{onClick:async()=>{a(!1);try{await r()}catch{}},className:"text-left px-3 py-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Log out"}):d.jsxs(d.Fragment,{children:[d.jsx(nr,{onClick:()=>a(!1),className:h,to:"/login",children:"Log in"}),d.jsx(nr,{onClick:()=>a(!1),className:h,to:"/signup",children:"Sign up"}),d.jsx("button",{onClick:()=>{a(!1);try{i()}catch{}},className:"text-left px-3 py-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800",children:"Continue with Google"})]}))]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ac(t){return t+.5|0}const us=(t,e,n)=>Math.max(Math.min(t,n),e);function La(t){return us(ac(t*2.55),0,255)}function Ts(t){return us(ac(t*255),0,255)}function Er(t){return us(ac(t/2.55)/100,0,1)}function Vw(t){return us(ac(t*100),0,100)}const In={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ym=[..."0123456789ABCDEF"],O4=t=>ym[t&15],M4=t=>ym[(t&240)>>4]+ym[t&15],Qc=t=>(t&240)>>4===(t&15),L4=t=>Qc(t.r)&&Qc(t.g)&&Qc(t.b)&&Qc(t.a);function j4(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&In[t[1]]*17,g:255&In[t[2]]*17,b:255&In[t[3]]*17,a:e===5?In[t[4]]*17:255}:(e===7||e===9)&&(n={r:In[t[1]]<<4|In[t[2]],g:In[t[3]]<<4|In[t[4]],b:In[t[5]]<<4|In[t[6]],a:e===9?In[t[7]]<<4|In[t[8]]:255})),n}const V4=(t,e)=>t<255?e(t):"";function F4(t){var e=L4(t)?O4:M4;return t?"#"+e(t.r)+e(t.g)+e(t.b)+V4(t.a,e):void 0}const U4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function LS(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function B4(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function z4(t,e,n){const r=LS(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function $4(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function My(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,h;return i!==o&&(h=i-o,c=a>.5?h/(2-i-o):h/(i+o),l=$4(n,r,s,h,i),l=l*60+.5),[l|0,c||0,a]}function Ly(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ts)}function jy(t,e,n){return Ly(LS,t,e,n)}function W4(t,e,n){return Ly(z4,t,e,n)}function H4(t,e,n){return Ly(B4,t,e,n)}function jS(t){return(t%360+360)%360}function q4(t){const e=U4.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?La(+e[5]):Ts(+e[5]));const s=jS(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=W4(s,i,o):e[1]==="hsv"?r=H4(s,i,o):r=jy(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function K4(t,e){var n=My(t);n[0]=jS(n[0]+e),n=jy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function G4(t){if(!t)return;const e=My(t),n=e[0],r=Vw(e[1]),s=Vw(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Er(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Fw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Uw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Q4(){const t={},e=Object.keys(Uw),n=Object.keys(Fw);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Fw[i]);i=parseInt(Uw[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Yc;function Y4(t){Yc||(Yc=Q4(),Yc.transparent=[0,0,0,0]);const e=Yc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const X4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function J4(t){const e=X4.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?La(o):us(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?La(r):us(r,0,255)),s=255&(e[4]?La(s):us(s,0,255)),i=255&(e[6]?La(i):us(i,0,255)),{r,g:s,b:i,a:n}}}function Z4(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Er(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Vf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Wi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function eU(t,e,n){const r=Wi(Er(t.r)),s=Wi(Er(t.g)),i=Wi(Er(t.b));return{r:Ts(Vf(r+n*(Wi(Er(e.r))-r))),g:Ts(Vf(s+n*(Wi(Er(e.g))-s))),b:Ts(Vf(i+n*(Wi(Er(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Xc(t,e,n){if(t){let r=My(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=jy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function VS(t,e){return t&&Object.assign(e||{},t)}function Bw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ts(t[3]))):(e=VS(t,{r:0,g:0,b:0,a:1}),e.a=Ts(e.a)),e}function tU(t){return t.charAt(0)==="r"?J4(t):q4(t)}class Ul{constructor(e){if(e instanceof Ul)return e;const n=typeof e;let r;n==="object"?r=Bw(e):n==="string"&&(r=j4(e)||Y4(e)||tU(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=VS(this._rgb);return e&&(e.a=Er(e.a)),e}set rgb(e){this._rgb=Bw(e)}rgbString(){return this._valid?Z4(this._rgb):void 0}hexString(){return this._valid?F4(this._rgb):void 0}hslString(){return this._valid?G4(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=eU(this._rgb,e._rgb,n)),this}clone(){return new Ul(this.rgb)}alpha(e){return this._rgb.a=Ts(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ac(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xc(this._rgb,2,e),this}darken(e){return Xc(this._rgb,2,-e),this}saturate(e){return Xc(this._rgb,1,e),this}desaturate(e){return Xc(this._rgb,1,-e),this}rotate(e){return K4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function _r(){}const nU=(()=>{let t=0;return()=>t++})();function Fe(t){return t==null}function St(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function jn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function rr(t,e){return jn(t)?t:e}function Te(t,e){return typeof t>"u"?e:t}const rU=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function $e(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Pe(t,e,n,r){let s,i,o;if(St(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Ce(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Ch(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Ah(t){if(St(t))return t.map(Ah);if(Ce(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Ah(t[n[s]]);return e}return t}function FS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function sU(t,e,n,r){if(!FS(t))return;const s=e[t],i=n[t];Ce(s)&&Ce(i)?Bl(s,i,r):e[t]=Ah(i)}function Bl(t,e,n){const r=St(e)?e:[e],s=r.length;if(!Ce(t))return t;n=n||{};const i=n.merger||sU;let o;for(let a=0;a<s;++a){if(o=r[a],!Ce(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)i(l[c],t,o,n)}return t}function sl(t,e){return Bl(t,e,{merger:iU})}function iU(t,e,n){if(!FS(t))return;const r=e[t],s=n[t];Ce(r)&&Ce(s)?sl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ah(s))}const zw={"":t=>t,x:t=>t.x,y:t=>t.y};function oU(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function aU(t){const e=oU(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Rh(t,e){return(zw[e]||(zw[e]=aU(e)))(t)}function Vy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ph=t=>typeof t<"u",Ps=t=>typeof t=="function",$w=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function lU(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ut=Math.PI,pr=2*Ut,cU=pr+Ut,Nh=Number.POSITIVE_INFINITY,uU=Ut/180,Kn=Ut/2,Ks=Ut/4,Ww=Ut*2/3,US=Math.log10,Mo=Math.sign;function il(t,e,n){return Math.abs(t-e)<n}function Hw(t){const e=Math.round(t);t=il(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(US(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function hU(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function dU(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function zl(t){return!dU(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function fU(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function pU(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ai(t){return t*(Ut/180)}function mU(t){return t*(180/Ut)}function qw(t){if(!jn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function gU(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Ut&&(i+=pr),{angle:i,distance:s}}function _m(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yU(t,e){return(t-e+cU)%pr-Ut}function Xr(t){return(t%pr+pr)%pr}function BS(t,e,n,r){const s=Xr(t),i=Xr(e),o=Xr(n),a=Xr(i-s),l=Xr(o-s),c=Xr(s-i),h=Xr(s-o);return s===i||s===o||r&&i===o||a>l&&c<h}function Pn(t,e,n){return Math.max(e,Math.min(n,t))}function _U(t){return Pn(t,-32768,32767)}function ja(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Fy(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const li=(t,e,n,r)=>Fy(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),vU=(t,e,n)=>Fy(t,n,r=>t[r][e]>=n);function wU(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const zS=["push","pop","shift","splice","unshift"];function xU(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),zS.forEach(n=>{const r="_onData"+Vy(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Kw(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(zS.forEach(i=>{delete t[i]}),delete t._chartjs)}function bU(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const $S=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function WS(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,$S.call(window,()=>{r=!1,t.apply(e,n)}))}}function EU(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const HS=t=>t==="start"?"left":t==="end"?"right":"center",fn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,TU=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function kU(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:f,max:m,minDefined:y,maxDefined:x}=o.getUserBounds();if(y){if(s=Math.min(li(l,h,f).lo,n?r:li(e,h,o.getPixelForValue(f)).lo),c){const E=l.slice(0,s+1).reverse().findIndex(T=>!Fe(T[a.axis]));s-=Math.max(0,E)}s=Pn(s,0,r-1)}if(x){let E=Math.max(li(l,o.axis,m,!0).hi+1,n?0:li(e,h,o.getPixelForValue(m),!0).hi+1);if(c){const T=l.slice(E-1).findIndex(v=>!Fe(v[a.axis]));E+=Math.max(0,T)}i=Pn(E,s,r)-s}else i=r-s}return{start:s,count:i}}function IU(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Jc=t=>t===0||t===1,Gw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*pr/n)),Qw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*pr/n)+1,ol={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Kn)+1,easeOutSine:t=>Math.sin(t*Kn),easeInOutSine:t=>-.5*(Math.cos(Ut*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Jc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Jc(t)?t:Gw(t,.075,.3),easeOutElastic:t=>Jc(t)?t:Qw(t,.075,.3),easeInOutElastic(t){return Jc(t)?t:t<.5?.5*Gw(t*2,.1125,.45):.5+.5*Qw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ol.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ol.easeInBounce(t*2)*.5:ol.easeOutBounce(t*2-1)*.5+.5};function Uy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Yw(t){return Uy(t)?t:new Ul(t)}function Ff(t){return Uy(t)?t:new Ul(t).saturate(.5).darken(.1).hexString()}const SU=["x","y","borderWidth","radius","tension"],CU=["color","borderColor","backgroundColor"];function AU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:CU},numbers:{type:"number",properties:SU}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function RU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xw=new Map;function PU(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Xw.get(n);return r||(r=new Intl.NumberFormat(t,e),Xw.set(n,r)),r}function qS(t,e,n){return PU(e,n).format(t)}const NU={values(t){return St(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=DU(t,n)}const o=US(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),qS(t,r,l)}};function DU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var KS={formatters:NU};function OU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:KS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ci=Object.create(null),vm=Object.create(null);function al(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Uf(t,e,n){return typeof e=="string"?Bl(al(t,e),n):Bl(al(t,""),e)}class MU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Ff(s.backgroundColor),this.hoverBorderColor=(r,s)=>Ff(s.borderColor),this.hoverColor=(r,s)=>Ff(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Uf(this,e,n)}get(e){return al(this,e)}describe(e,n){return Uf(vm,e,n)}override(e,n){return Uf(Ci,e,n)}route(e,n,r,s){const i=al(this,e),o=al(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Ce(l)?Object.assign({},c,l):Te(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var lt=new MU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[AU,RU,OU]);function LU(t){return!t||Fe(t.size)||Fe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Jw(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Gs(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Zw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function wm(t,e,n,r){GS(t,e,n,r,null)}function GS(t,e,n,r,s){let i,o,a,l,c,h,f,m;const y=e.pointStyle,x=e.rotation,E=e.radius;let T=(x||0)*uU;if(y&&typeof y=="object"&&(i=y.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),y){default:s?t.ellipse(n,r,s/2,E,0,0,pr):t.arc(n,r,E,0,pr),t.closePath();break;case"triangle":h=s?s/2:E,t.moveTo(n+Math.sin(T)*h,r-Math.cos(T)*E),T+=Ww,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*E),T+=Ww,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(T+Ks)*l,f=Math.cos(T+Ks)*(s?s/2-c:l),a=Math.sin(T+Ks)*l,m=Math.sin(T+Ks)*(s?s/2-c:l),t.arc(n-f,r-a,c,T-Ut,T-Kn),t.arc(n+m,r-o,c,T-Kn,T),t.arc(n+f,r+a,c,T,T+Kn),t.arc(n-m,r+o,c,T+Kn,T+Ut),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,h=s?s/2:l,t.rect(n-h,r-l,2*h,2*l);break}T+=Ks;case"rectRot":f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":T+=Ks;case"cross":f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),T+=Ks,f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(T)*E,a=Math.sin(T)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(s?s/2:E),r+Math.sin(T)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function $l(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function By(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function zy(t){t.restore()}function jU(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function VU(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function FU(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Fe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function UU(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function BU(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Dh(t,e,n,r,s,i={}){const o=St(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,FU(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&BU(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Fe(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),UU(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function xm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ut,Ut,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Ut,Kn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Kn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Kn,!0),t.lineTo(n+o.topLeft,r)}const zU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$U=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function WU(t,e){const n=(""+t).match(zU);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const HU=t=>+t||0;function QS(t,e){const n={},r=Ce(e),s=r?Object.keys(e):e,i=Ce(t)?r?o=>Te(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=HU(i(o));return n}function qU(t){return QS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ll(t){return QS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function er(t){const e=qU(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function tn(t,e){t=t||{},e=e||lt.font;let n=Te(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Te(t.style,e.style);r&&!(""+r).match($U)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Te(t.family,e.family),lineHeight:WU(Te(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Te(t.weight,e.weight),string:""};return s.string=LU(s),s}function Zc(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function KU(t,e,n){const{min:r,max:s}=t,i=rU(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Li(t,e){return Object.assign(Object.create(t),e)}function $y(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=ZS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>$y([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return XS(a,l,()=>t5(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return tx(a).includes(l)},ownKeys(a){return tx(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Lo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:YS(t,r),setContext:i=>Lo(t,i,n,r),override:i=>Lo(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return XS(i,o,()=>QU(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function YS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ps(n)?n:()=>n,isIndexable:Ps(r)?r:()=>r}}const GU=(t,e)=>t?t+Vy(e):e,Wy=(t,e)=>Ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function XS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function QU(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Ps(a)&&o.isScriptable(e)&&(a=YU(e,a,t,n)),St(a)&&a.length&&(a=XU(e,a,t,o.isIndexable)),Wy(e,a)&&(a=Lo(a,s,i&&i[e],o)),a}function YU(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Wy(t,l)&&(l=Hy(s._scopes,s,t,l)),l}function XU(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Ce(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const f=Hy(c,s,t,h);e.push(Lo(f,i,o&&o[t],a))}}return e}function JS(t,e,n){return Ps(t)?t(e,n):t}const JU=(t,e)=>t===!0?e:typeof t=="string"?Rh(e,t):void 0;function ZU(t,e,n,r,s){for(const i of e){const o=JU(n,i);if(o){t.add(o);const a=JS(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Hy(t,e,n,r){const s=e._rootScopes,i=JS(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=ex(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=ex(a,o,i,l,r),l===null)?!1:$y(Array.from(a),[""],s,i,()=>e5(e,n,r))}function ex(t,e,n,r,s){for(;n;)n=ZU(t,e,n,r,s);return n}function e5(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return St(s)&&Ce(n)?n:s||{}}function t5(t,e,n,r){let s;for(const i of e)if(s=ZS(GU(i,t),n),typeof s<"u")return Wy(t,s)?Hy(n,r,t,s):s}function ZS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function tx(t){let e=t._keys;return e||(e=t._keys=n5(t._scopes)),e}function n5(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const r5=Number.EPSILON||1e-14,jo=(t,e)=>e<t.length&&!t[e].skip&&t[e],e1=t=>t==="x"?"y":"x";function s5(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=_m(i,s),l=_m(o,i);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const f=r*c,m=r*h;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function i5(t,e,n){const r=t.length;let s,i,o,a,l,c=jo(t,0);for(let h=0;h<r-1;++h)if(l=c,c=jo(t,h+1),!(!l||!c)){if(il(e[h],0,r5)){n[h]=n[h+1]=0;continue}s=n[h]/e[h],i=n[h+1]/e[h],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=s*o*e[h],n[h+1]=i*o*e[h])}}function o5(t,e,n="x"){const r=e1(n),s=t.length;let i,o,a,l=jo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=jo(t,c+1),!a)continue;const h=a[n],f=a[r];o&&(i=(h-o[n])/3,a[`cp1${n}`]=h-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-h)/3,a[`cp2${n}`]=h+i,a[`cp2${r}`]=f+i*e[c])}}function a5(t,e="x"){const n=e1(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=jo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=jo(t,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[n]-l[n])/h:0}i[o]=a?c?Mo(s[o-1])!==Mo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}i5(t,s,i),o5(t,i,e)}function eu(t,e,n){return Math.max(Math.min(t,n),e)}function l5(t,e){let n,r,s,i,o,a=$l(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&$l(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=eu(s.cp1x,e.left,e.right),s.cp1y=eu(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=eu(s.cp2x,e.left,e.right),s.cp2y=eu(s.cp2y,e.top,e.bottom)))}function c5(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")a5(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=s5(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&l5(t,n)}function qy(){return typeof window<"u"&&typeof document<"u"}function Ky(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Oh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const kd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function u5(t,e){return kd(t).getPropertyValue(e)}const h5=["top","right","bottom","left"];function pi(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=h5[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const d5=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function f5(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(d5(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Zs(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=kd(n),i=s.boxSizing==="border-box",o=pi(s,"padding"),a=pi(s,"border","width"),{x:l,y:c,box:h}=f5(t,n),f=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:y,height:x}=e;return i&&(y-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-f)/y*n.width/r),y:Math.round((c-m)/x*n.height/r)}}function p5(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Ky(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=kd(i),l=pi(a,"border","width"),c=pi(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Oh(a.maxWidth,i,"clientWidth"),s=Oh(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Nh,maxHeight:s||Nh}}const tu=t=>Math.round(t*10)/10;function m5(t,e,n,r){const s=kd(t),i=pi(s,"margin"),o=Oh(s.maxWidth,t,"clientWidth")||Nh,a=Oh(s.maxHeight,t,"clientHeight")||Nh,l=p5(t,e,n);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const m=pi(s,"border","width"),y=pi(s,"padding");c-=y.width+m.width,h-=y.height+m.height}return c=Math.max(0,c-i.width),h=Math.max(0,r?c/r:h-i.height),c=tu(Math.min(c,o,l.maxWidth)),h=tu(Math.min(h,a,l.maxHeight)),c&&!h&&(h=tu(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=tu(Math.floor(h*r))),{width:c,height:h}}function nx(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const g5=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};qy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function rx(t,e){const n=u5(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ei(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function y5(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function _5(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ei(t,s,n),a=ei(s,i,n),l=ei(i,e,n),c=ei(o,a,n),h=ei(a,l,n);return ei(c,h,n)}const v5=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},w5=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function yo(t,e,n){return t?v5(e,n):w5()}function t1(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function n1(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function r1(t){return t==="angle"?{between:BS,compare:yU,normalize:Xr}:{between:ja,compare:(e,n)=>e-n,normalize:e=>e}}function sx({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function x5(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=r1(r),l=e.length;let{start:c,end:h,loop:f}=t,m,y;if(f){for(c+=l,h+=l,m=0,y=l;m<y&&o(a(e[c%l][r]),s,i);++m)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:f,style:t.style}}function b5(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=r1(r),{start:h,end:f,loop:m,style:y}=x5(t,e,n),x=[];let E=!1,T=null,v,_,b;const R=()=>l(s,b,v)&&a(s,b)!==0,P=()=>a(i,v)===0||l(i,b,v),M=()=>E||R(),k=()=>!E||P();for(let w=h,I=h;w<=f;++w)_=e[w%o],!_.skip&&(v=c(_[r]),v!==b&&(E=l(v,s,i),T===null&&M()&&(T=a(v,s)===0?w:I),T!==null&&k()&&(x.push(sx({start:T,end:w,loop:m,count:o,style:y})),T=null),I=w,b=v));return T!==null&&x.push(sx({start:T,end:f,loop:m,count:o,style:y})),x}function E5(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=b5(r[s],t.points,e);i.length&&n.push(...i)}return n}function T5(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function k5(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function I5(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=T5(n,s,i,r);if(r===!0)return ix(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return ix(t,k5(n,o,l,c),n,e)}function ix(t,e,n,r){return!r||!r.setContext||!n?e:S5(t,e,n,r)}function S5(t,e,n,r){const s=t._chart.getContext(),i=ox(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=i,f=e[0].start,m=f;function y(x,E,T,v){const _=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=_;for(;n[E%l].skip;)E+=_;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:T,style:v}),h=v,f=E%l)}}for(const x of e){f=a?f:x.start;let E=n[f%l],T;for(m=f+1;m<=x.end;m++){const v=n[m%l];T=ox(r.setContext(Li(s,{type:"segment",p0:E,p1:v,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),C5(T,h)&&y(f,m-1,x.loop,h),E=v,h=T}f<m-1&&y(f,m-1,x.loop,h)}return c}function ox(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function C5(t,e){if(!e)return!1;const n=[],r=function(s,i){return Uy(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function nu(t,e,n){return t.options.clip?t[n]:e[n]}function A5(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:nu(n,e,"left"),right:nu(n,e,"right"),top:nu(r,e,"top"),bottom:nu(r,e,"bottom")}:e}function R5(t,e){const n=e._clip;if(n.disabled)return!1;const r=A5(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class P5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=$S.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var vr=new P5;const ax="transparent",N5={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Yw(t||ax),s=r.valid&&Yw(e||ax);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class D5{constructor(e,n,r,s){const i=n[r];s=Zc([e.to,s,i,e.from]);const o=Zc([e.from,i,s]);this._active=!0,this._fn=e.fn||N5[e.type||typeof o],this._easing=ol[e.easing]||ol.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Zc([e.to,n,s,e.from]),this._from=Zc([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class s1{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ce(e))return;const n=Object.keys(lt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Ce(i))return;const o={};for(const a of n)o[a]=i[a];(St(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=M5(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&O5(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[c];let f=i[c];const m=r.get(c);if(f)if(m&&f.active()){f.update(m,h,a);continue}else f.cancel();if(!m||!m.duration){e[c]=h;continue}i[c]=f=new D5(m,e,c,h),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return vr.add(this._chart,r),!0}}function O5(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function M5(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function L5(t,e,n){if(n===!1)return!1;const r=lx(t,n),s=lx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function j5(t){let e,n,r,s;return Ce(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function i1(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function cx(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],jn(c)&&(i||e===0||Mo(e)===Mo(c))&&(e+=c)}return!h&&!r.all?0:e}function V5(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[i]:t[h]};return a}function Bf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function F5(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function U5(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function B5(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function ux(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function hx(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,h=F5(i,o,r),f=e.length;let m;for(let y=0;y<f;++y){const x=e[y],{[l]:E,[c]:T}=x,v=x._stacks||(x._stacks={});m=v[c]=B5(s,h,E),m[a]=T,m._top=ux(m,o,!0,r.type),m._bottom=ux(m,o,!1,r.type);const _=m._visualValues||(m._visualValues={});_[a]=T}}function zf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function z5(t,e){return Li(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $5(t,e,n){return Li(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function wa(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const $f=t=>t==="reset"||t==="none",dx=(t,e)=>e?t:Object.assign({},t),W5=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:i1(n,!0),values:null};class cl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&wa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,y,x)=>f==="x"?m:f==="r"?x:y,i=n.xAxisID=Te(r.xAxisID,zf(e,"x")),o=n.yAxisID=Te(r.yAxisID,zf(e,"y")),a=n.rAxisID=Te(r.rAxisID,zf(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),h=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Kw(this._data,this),e._stacked&&wa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ce(n)){const s=this._cachedMeta;this._data=V5(n,s)}else if(r!==n){if(r){Kw(r,this);const s=this._cachedMeta;wa(s),s._parsed=[]}n&&Object.isExtensible(n)&&xU(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Bf(n.vScale,n),n.stack!==r.stack&&(s=!0,wa(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(hx(this,n._parsed),n._stacked=Bf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{St(s[e])?m=this.parseArrayData(r,s,e,n):Ce(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const y=()=>f[a]===null||c&&f[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=f=m[h],l&&(y()&&(l=!1),c=f);r._sorted=l}o&&hx(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),h=i===o,f=new Array(s);let m,y,x;for(m=0,y=s;m<y;++m)x=m+r,f[m]={[a]:h||i.parse(c[x],x),[l]:o.parse(n[x],x)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,h,f;for(l=0,c=s;l<c;++l)h=l+r,f=n[h],a[l]={x:i.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,f,m,y;for(h=0,f=s;h<f;++h)m=h+r,y=n[m],c[h]={x:i.parse(Rh(y,a),m),y:o.parse(Rh(y,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:i1(s,!0),values:n._stacks[e.axis]._visualValues};return cx(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=cx(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=W5(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=U5(a);let m,y;function x(){y=s[m];const E=y[a.axis];return!jn(y[e.axis])||h>E||f<E}for(m=0;m<o&&!(!x()&&(this.updateRangeFromParsed(c,e,y,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(c,e,y,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],jn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=j5(Te(this.options.clip,L5(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const f=s[h];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=$5(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=z5(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Ph(r);if(a)return dx(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),h),y=Object.keys(lt.elements[e]),x=()=>this.getContext(r,s,n),E=c.resolveNamedOptions(m,y,x,f);return E.$shared&&(E.$shared=l,i[o]=Object.freeze(dx(E,l))),E}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(m,this.getContext(e,r,n))}const c=new s1(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||$f(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){$f(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!$f(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&wa(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ge(cl,"defaults",{}),ge(cl,"datasetElementType",null),ge(cl,"dataElementType",null);class Nu extends cl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=kU(n,s,o);this._drawStart=a,this._drawCount=l,IU(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s),m=o.axis,y=a.axis,{spanGaps:x,segment:E}=this.options,T=zl(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||s==="none",_=n+r,b=e.length;let R=n>0&&this.getParsed(n-1);for(let P=0;P<b;++P){const M=e[P],k=v?M:{};if(P<n||P>=_){k.skip=!0;continue}const w=this.getParsed(P),I=Fe(w[y]),A=k[m]=o.getPixelForValue(w[m],P),N=k[y]=i||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[y],P);k.skip=isNaN(A)||isNaN(N)||I,k.stop=P>0&&Math.abs(w[m]-R[m])>T,E&&(k.parsed=w,k.raw=c.data[P]),f&&(k.options=h||this.resolveDataElementOptions(P,M.active?"active":s)),v||this.updateElement(M,P,k,s),R=w}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ge(Nu,"id","line"),ge(Nu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ge(Nu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Qs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Gy{constructor(e){ge(this,"options");this.options=e||{}}static override(e){Object.assign(Gy.prototype,e)}init(){}formats(){return Qs()}parse(){return Qs()}format(){return Qs()}add(){return Qs()}diff(){return Qs()}startOf(){return Qs()}endOf(){return Qs()}}var H5={_date:Gy};function q5(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?vU:li;if(r){if(s._sharedOptions){const h=i[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const m=c(i,e,n-f),y=c(i,e,n+f);return{lo:m.lo,hi:y.hi}}}}else{const h=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,y=m.slice(0,h.lo+1).reverse().findIndex(E=>!Fe(E[f.axis]));h.lo-=Math.max(0,y);const x=m.slice(h.hi).findIndex(E=>!Fe(E[f.axis]));h.hi+=Math.max(0,x)}return h}}return{lo:0,hi:i.length-1}}function Id(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:h}=i[a],{lo:f,hi:m}=q5(i[a],e,o,s);for(let y=f;y<=m;++y){const x=h[y];x.skip||r(x,c,y)}}}function K5(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Wf(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Id(t,n,e,function(a,l,c){!s&&!$l(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function G5(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:f}=gU(o,{x:e.x,y:e.y});BS(f,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return Id(t,n,e,i),s}function Q5(t,e,n,r,s,i){let o=[];const a=K5(n);let l=Number.POSITIVE_INFINITY;function c(h,f,m){const y=h.inRange(e.x,e.y,s);if(r&&!y)return;const x=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!y)return;const T=a(e,x);T<l?(o=[{element:h,datasetIndex:f,index:m}],l=T):T===l&&o.push({element:h,datasetIndex:f,index:m})}return Id(t,n,e,c),o}function Hf(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?G5(t,e,n,s):Q5(t,e,n,r,s,i)}function fx(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Id(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var Y5={modes:{index(t,e,n,r){const s=Zs(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Wf(t,s,i,r,o):Hf(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,f=c.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const s=Zs(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Wf(t,s,i,r,o):Hf(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const s=Zs(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Wf(t,s,i,r,o)},nearest(t,e,n,r){const s=Zs(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Hf(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Zs(e,t);return fx(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Zs(e,t);return fx(t,s,"y",n.intersect,r)}}};const o1=["left","top","right","bottom"];function xa(t,e){return t.filter(n=>n.pos===e)}function px(t,e){return t.filter(n=>o1.indexOf(n.pos)===-1&&n.box.axis===e)}function ba(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function X5(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function J5(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!o1.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function Z5(t,e){const n=J5(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return n}function e3(t){const e=X5(t),n=ba(e.filter(c=>c.box.fullSize),!0),r=ba(xa(e,"left"),!0),s=ba(xa(e,"right")),i=ba(xa(e,"top"),!0),o=ba(xa(e,"bottom")),a=px(e,"x"),l=px(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:xa(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function mx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function a1(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function t3(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Ce(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&a1(o,i.getPadding());const a=Math.max(0,e.outerWidth-mx(o,t,"left","right")),l=Math.max(0,e.outerHeight-mx(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function n3(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function r3(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Va(t,e,n,r){const s=[];let i,o,a,l,c,h;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,r3(a.horizontal,e));const{same:f,other:m}=t3(e,n,a,r);c|=f&&s.length,h=h||m,l.fullSize||s.push(a)}return c&&Va(s,e,n,r)||h}function ru(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function gx(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*h,m=c.size||l.height;Ph(c.start)&&(o=c.start),l.fullSize?ru(l,s.left,o,n.outerWidth-s.right-s.left,m):ru(l,e.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*h,m=c.size||l.width;Ph(c.start)&&(i=c.start),l.fullSize?ru(l,i,s.top,m,n.outerHeight-s.bottom-s.top):ru(l,i,e.top+c.placed,m,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var hs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=er(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=e3(t.boxes),l=a.vertical,c=a.horizontal;Pe(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,T)=>T.box.options&&T.box.options.display===!1?E:E+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},s);a1(m,er(r));const y=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),x=Z5(l.concat(c),f);Va(a.fullSize,y,f,x),Va(l,y,f,x),Va(c,y,f,x)&&Va(l,y,f,x),n3(y),gx(a.leftAndTop,y,f,x),y.x+=y.w,y.y+=y.h,gx(a.rightAndBottom,y,f,x),t.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Pe(a.chartArea,E=>{const T=E.box;Object.assign(T,t.chartArea),T.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class l1{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class s3 extends l1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Du="$chartjs",i3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yx=t=>t===null||t==="";function o3(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Du]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",yx(s)){const i=rx(t,"width");i!==void 0&&(t.width=i)}if(yx(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=rx(t,"height");i!==void 0&&(t.height=i)}return t}const c1=g5?{passive:!0}:!1;function a3(t,e,n){t&&t.addEventListener(e,n,c1)}function l3(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,c1)}function c3(t,e){const n=i3[t.type]||t.type,{x:r,y:s}=Zs(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Mh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function u3(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Mh(a.addedNodes,r),o=o&&!Mh(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function h3(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Mh(a.removedNodes,r),o=o&&!Mh(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Wl=new Map;let _x=0;function u1(){const t=window.devicePixelRatio;t!==_x&&(_x=t,Wl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function d3(t,e){Wl.size||window.addEventListener("resize",u1),Wl.set(t,e)}function f3(t){Wl.delete(t),Wl.size||window.removeEventListener("resize",u1)}function p3(t,e,n){const r=t.canvas,s=r&&Ky(r);if(!s)return;const i=WS((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||i(c,h)});return o.observe(s),d3(t,i),o}function qf(t,e,n){n&&n.disconnect(),e==="resize"&&f3(t)}function m3(t,e,n){const r=t.canvas,s=WS(i=>{t.ctx!==null&&n(c3(i,t))},t);return a3(r,e,s),s}class g3 extends l1{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(o3(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Du])return!1;const r=n[Du].initial;["height","width"].forEach(i=>{const o=r[i];Fe(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Du],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:u3,detach:h3,resize:p3}[n]||m3;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:qf,detach:qf,resize:qf}[n]||l3)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return m5(e,n,r,s)}isAttached(e){const n=e&&Ky(e);return!!(n&&n.isConnected)}}function y3(t){return!qy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?s3:g3}class Ns{constructor(){ge(this,"x");ge(this,"y");ge(this,"active",!1);ge(this,"options");ge(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return zl(this.x)&&zl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}ge(Ns,"defaults",{}),ge(Ns,"defaultRoutes");function _3(t,e){const n=t.options.ticks,r=v3(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?x3(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return b3(e,c,i,o/s),c;const h=w3(i,e,s);if(o>0){let f,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(su(e,c,h,Fe(y)?0:a-y,a),f=0,m=o-1;f<m;f++)su(e,c,h,i[f],i[f+1]);return su(e,c,h,l,Fe(y)?e.length:l+y),c}return su(e,c,h),c}function v3(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function w3(t,e,n){const r=E3(t),s=e.length/n;if(!r)return Math.max(s,1);const i=hU(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function x3(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function b3(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function su(t,e,n,r,s){const i=Te(r,0),o=Math.min(Te(s,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(i+a*n))}function E3(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const T3=t=>t==="left"?"right":t==="right"?"left":t,vx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,wx=(t,e)=>Math.min(e||t,t);function xx(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function k3(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function I3(t,e){Pe(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Ea(t){return t.drawTicks?t.tickLength:0}function bx(t,e){if(!t.display)return 0;const n=tn(t.font,e),r=er(t.padding);return(St(t.text)?t.text.length:1)*n.lineHeight+r.height}function S3(t,e){return Li(t,{scale:e,type:"scale"})}function C3(t,e,n){return Li(t,{tick:n,index:e,type:"tick"})}function A3(t,e,n){let r=HS(t);return(n&&e!=="right"||!n&&e==="right")&&(r=T3(r)),r}function R3(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let f=0,m,y,x;const E=o-s,T=a-i;if(t.isHorizontal()){if(y=fn(r,i,a),Ce(n)){const v=Object.keys(n)[0],_=n[v];x=h[v].getPixelForValue(_)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=vx(t,n,e);m=a-i}else{if(Ce(n)){const v=Object.keys(n)[0],_=n[v];y=h[v].getPixelForValue(_)-T+e}else n==="center"?y=(c.left+c.right)/2-T+e:y=vx(t,n,e);x=fn(r,o,s),f=n==="left"?-Kn:Kn}return{titleX:y,titleY:x,maxWidth:m,rotation:f}}class Yo extends Ns{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=rr(e,Number.POSITIVE_INFINITY),n=rr(n,Number.NEGATIVE_INFINITY),r=rr(r,Number.POSITIVE_INFINITY),s=rr(s,Number.NEGATIVE_INFINITY),{min:rr(e,r),max:rr(n,s),minDefined:jn(e),maxDefined:jn(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:rr(n,rr(r,n)),max:rr(r,rr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$e(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=KU(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?xx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$e(this.options.afterUpdate,[this])}beforeSetDimensions(){$e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$e(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),$e(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=$e(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){$e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=wx(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),f=h.widest.width,m=h.highest.height,y=Pn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),f+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-Ea(e.grid)-n.padding-bx(e.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=mU(Math.min(Math.asin(Pn((h.highest.height+6)/a,-1,1)),Math.asin(Pn(l/c,-1,1))-Math.asin(Pn(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){$e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$e(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bx(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ea(i)+l):(e.height=this.maxHeight,e.width=Ea(i)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:f,highest:m}=this._getLabelSizes(),y=r.padding*2,x=ai(this.labelRotation),E=Math.cos(x),T=Math.sin(x);if(a){const v=r.mirror?0:T*f.width+E*m.height;e.height=Math.min(this.maxHeight,e.height+v+y)}else{const v=r.mirror?0:E*f.width+T*m.height;e.width=Math.min(this.maxWidth,e.width+v+y)}this._calculatePadding(c,h,T,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?c?(m=s*e.width,y=r*n.height):(m=r*e.height,y=s*n.width):i==="start"?y=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,y=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((y-f+o)*this.width/(this.width-f),0)}else{let h=n.height/2,f=e.height/2;i==="start"?(h=0,f=e.height):i==="end"&&(h=n.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$e(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Fe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=xx(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/wx(n,r));let c=0,h=0,f,m,y,x,E,T,v,_,b,R,P;for(f=0;f<n;f+=l){if(x=e[f].label,E=this._resolveTickFontOptions(f),s.font=T=E.string,v=i[T]=i[T]||{data:{},gc:[]},_=E.lineHeight,b=R=0,!Fe(x)&&!St(x))b=Jw(s,v.data,v.gc,b,x),R=_;else if(St(x))for(m=0,y=x.length;m<y;++m)P=x[m],!Fe(P)&&!St(P)&&(b=Jw(s,v.data,v.gc,b,P),R+=_);o.push(b),a.push(R),c=Math.max(b,c),h=Math.max(R,h)}I3(i,n);const M=o.indexOf(c),k=a.indexOf(h),w=I=>({width:o[I]||0,height:a[I]||0});return{first:w(0),last:w(n-1),widest:w(M),highest:w(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return _U(this._alignToPixels?Gs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=C3(this.getContext(),e,r))}return this.$context||(this.$context=S3(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ai(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=Ea(i),y=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,T=E/2,v=function(ee){return Gs(r,ee,E)};let _,b,R,P,M,k,w,I,A,N,O,S;if(o==="top")_=v(this.bottom),k=this.bottom-m,I=_-T,N=v(e.top)+T,S=e.bottom;else if(o==="bottom")_=v(this.top),N=e.top,S=v(e.bottom)-T,k=_+T,I=this.top+m;else if(o==="left")_=v(this.right),M=this.right-m,w=_-T,A=v(e.left)+T,O=e.right;else if(o==="right")_=v(this.left),A=e.left,O=v(e.right)-T,M=_+T,w=this.left+m;else if(n==="x"){if(o==="center")_=v((e.top+e.bottom)/2+.5);else if(Ce(o)){const ee=Object.keys(o)[0],de=o[ee];_=v(this.chart.scales[ee].getPixelForValue(de))}N=e.top,S=e.bottom,k=_+T,I=k+m}else if(n==="y"){if(o==="center")_=v((e.left+e.right)/2);else if(Ce(o)){const ee=Object.keys(o)[0],de=o[ee];_=v(this.chart.scales[ee].getPixelForValue(de))}M=_-T,w=M-m,A=e.left,O=e.right}const te=Te(s.ticks.maxTicksLimit,f),ne=Math.max(1,Math.ceil(f/te));for(b=0;b<f;b+=ne){const ee=this.getContext(b),de=i.setContext(ee),$=a.setContext(ee),G=de.lineWidth,H=de.color,fe=$.dash||[],ie=$.dashOffset,pe=de.tickWidth,Oe=de.tickColor,Ue=de.tickBorderDash||[],Ae=de.tickBorderDashOffset;R=k3(this,b,l),R!==void 0&&(P=Gs(r,R,G),c?M=w=A=O=P:k=I=N=S=P,y.push({tx1:M,ty1:k,tx2:w,ty2:I,x1:A,y1:N,x2:O,y2:S,width:G,color:H,borderDash:fe,borderDashOffset:ie,tickWidth:pe,tickColor:Oe,tickBorderDash:Ue,tickBorderDashOffset:Ae}))}return this._ticksLength=f,this._borderValue=_,y}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:f}=i,m=Ea(r.grid),y=m+h,x=f?-h:y,E=-ai(this.labelRotation),T=[];let v,_,b,R,P,M,k,w,I,A,N,O,S="middle";if(s==="top")M=this.bottom-x,k=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+x,k=this._getXAxisLabelAlignment();else if(s==="left"){const ne=this._getYAxisLabelAlignment(m);k=ne.textAlign,P=ne.x}else if(s==="right"){const ne=this._getYAxisLabelAlignment(m);k=ne.textAlign,P=ne.x}else if(n==="x"){if(s==="center")M=(e.top+e.bottom)/2+y;else if(Ce(s)){const ne=Object.keys(s)[0],ee=s[ne];M=this.chart.scales[ne].getPixelForValue(ee)+y}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")P=(e.left+e.right)/2-y;else if(Ce(s)){const ne=Object.keys(s)[0],ee=s[ne];P=this.chart.scales[ne].getPixelForValue(ee)}k=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const te=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){b=a[v],R=b.label;const ne=i.setContext(this.getContext(v));w=this.getPixelForTick(v)+i.labelOffset,I=this._resolveTickFontOptions(v),A=I.lineHeight,N=St(R)?R.length:1;const ee=N/2,de=ne.color,$=ne.textStrokeColor,G=ne.textStrokeWidth;let H=k;o?(P=w,k==="inner"&&(v===_-1?H=this.options.reverse?"left":"right":v===0?H=this.options.reverse?"right":"left":H="center"),s==="top"?c==="near"||E!==0?O=-N*A+A/2:c==="center"?O=-te.highest.height/2-ee*A+A:O=-te.highest.height+A/2:c==="near"||E!==0?O=A/2:c==="center"?O=te.highest.height/2-ee*A:O=te.highest.height-N*A,f&&(O*=-1),E!==0&&!ne.showLabelBackdrop&&(P+=A/2*Math.sin(E))):(M=w,O=(1-N)*A/2);let fe;if(ne.showLabelBackdrop){const ie=er(ne.backdropPadding),pe=te.heights[v],Oe=te.widths[v];let Ue=O-ie.top,Ae=0-ie.left;switch(S){case"middle":Ue-=pe/2;break;case"bottom":Ue-=pe;break}switch(k){case"center":Ae-=Oe/2;break;case"right":Ae-=Oe;break;case"inner":v===_-1?Ae-=Oe:v>0&&(Ae-=Oe/2);break}fe={left:Ae,top:Ue,width:Oe+ie.width,height:pe+ie.height,color:ne.backdropColor}}T.push({label:R,font:I,textOffset:O,options:{rotation:E,color:de,strokeColor:$,strokeWidth:G,textAlign:H,textBaseline:S,translation:[P,M],backdrop:fe}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ai(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,h;return n==="left"?s?(h=this.right+i,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?s?(h=this.left+i,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,f,m;this.isHorizontal()?(c=Gs(e,this.left,o)-o/2,h=Gs(e,this.right,a)+a/2,f=m=l):(f=Gs(e,this.top,o)-o/2,m=Gs(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&By(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Dh(r,c,0,h,l,a)}s&&zy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=tn(r.font),o=er(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Ce(n)?(l+=o.bottom,St(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:f,rotation:m}=R3(this,l,n,a);Dh(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:A3(a,n,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Te(e.grid&&e.grid.z,-1),s=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Yo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return tn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class iu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;D3(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,P3(e,o,r),this.override&&lt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in lt[s]&&(delete lt[s][r],this.override&&delete Ci[r])}}function P3(t,e,n){const r=Bl(Object.create(null),[n?lt.get(n):{},lt.get(e),t.defaults]);lt.set(e,r),t.defaultRoutes&&N3(e,t.defaultRoutes),t.descriptors&&lt.describe(e,t.descriptors)}function N3(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");lt.route(i,s,l,a)})}function D3(t){return"id"in t&&"defaults"in t}class O3{constructor(){this.controllers=new iu(cl,"datasets",!0),this.elements=new iu(Ns,"elements"),this.plugins=new iu(Object,"plugins"),this.scales=new iu(Yo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Pe(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Vy(e);$e(r["before"+s],[],r),n[e](r),$e(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var or=new O3;class M3{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if($e(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Fe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Te(r.options&&r.options.plugins,{}),i=L3(r);return s===!1&&!n?[]:V3(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function L3(t){const e={},n=[],r=Object.keys(or.plugins.items);for(let i=0;i<r.length;i++)n.push(or.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function j3(t,e){return!e&&t===!1?null:t===!0?{}:t}function V3(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=j3(r[l],s);c!==null&&i.push({plugin:a,options:F3(t.config,{plugin:a,local:n[l]},c,o)})}return i}function F3(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bm(t,e){const n=lt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function U3(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function B3(t,e){return t===e?"_index_":"_value_"}function Ex(t){if(t==="x"||t==="y"||t==="r")return t}function z3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Em(t,...e){if(Ex(t))return t;for(const n of e){const r=n.axis||z3(n.position)||t.length>1&&Ex(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Tx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function $3(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Tx(t,"x",n[0])||Tx(t,"y",n[0])}return{}}function W3(t,e){const n=Ci[t.type]||{scales:{}},r=e.scales||{},s=bm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Em(o,a,$3(o,t),lt.scales[a.type]),c=B3(l,s),h=n.scales||{};i[o]=sl(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||bm(a,e),h=(Ci[a]||{}).scales||{};Object.keys(h).forEach(f=>{const m=U3(f,l),y=o[m+"AxisID"]||m;i[y]=i[y]||Object.create(null),sl(i[y],[{axis:m},r[y],h[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];sl(a,[lt.scales[a.type],lt.scale])}),i}function h1(t){const e=t.options||(t.options={});e.plugins=Te(e.plugins,{}),e.scales=W3(t,e)}function d1(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function H3(t){return t=t||{},t.data=d1(t.data),h1(t),t}const kx=new Map,f1=new Set;function ou(t,e){let n=kx.get(t);return n||(n=e(),kx.set(t,n),f1.add(n)),n}const Ta=(t,e,n)=>{const r=Rh(e,n);r!==void 0&&t.add(r)};class q3{constructor(e){this._config=H3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=d1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),h1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ou(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return ou(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return ou(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return ou(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(f=>Ta(l,e,f))),h.forEach(f=>Ta(l,s,f)),h.forEach(f=>Ta(l,Ci[i]||{},f)),h.forEach(f=>Ta(l,lt,f)),h.forEach(f=>Ta(l,vm,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),f1.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ci[n]||{},lt.datasets[n]||{},{type:n},lt,vm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Ix(this._resolverCache,e,s);let l=o;if(G3(o,n)){i.$shared=!1,r=Ps(r)?r():r;const c=this.createResolver(e,r,a);l=Lo(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Ix(this._resolverCache,e,r);return Ce(n)?Lo(i,n,void 0,s):i}}function Ix(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:$y(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const K3=t=>Ce(t)&&Object.getOwnPropertyNames(t).some(e=>Ps(t[e]));function G3(t,e){const{isScriptable:n,isIndexable:r}=YS(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Ps(a)||K3(a))||o&&St(a))return!0}return!1}var Q3="4.5.0";const Y3=["top","bottom","left","right","chartArea"];function Sx(t,e){return t==="top"||t==="bottom"||Y3.indexOf(t)===-1&&e==="x"}function Cx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Ax(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),$e(n&&n.onComplete,[t],e)}function X3(t){const e=t.chart,n=e.options.animation;$e(n&&n.onProgress,[t],e)}function p1(t){return qy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ou={},Rx=t=>{const e=p1(t);return Object.values(Ou).filter(n=>n.canvas===e).pop()};function J3(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function Z3(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Gr;let Sd=(Gr=class{static register(...e){or.add(...e),Px()}static unregister(...e){or.remove(...e),Px()}constructor(e,n){const r=this.config=new q3(n),s=p1(e),i=Rx(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||y3(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=nU(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new M3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=EU(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Ou[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}vr.listen(this,"complete",Ax),vr.listen(this,"progress",X3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Fe(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return or}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zw(this.canvas,this.ctx),this}stop(){return vr.stop(this),this}resize(e,n){vr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,nx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),$e(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Pe(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Em(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Pe(i,o=>{const a=o.options,l=a.id,c=Em(l,a),h=Te(a.type,o.dtype);(a.position===void 0||Sx(a.position,c)!==Sx(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===h)f=r[l];else{const m=or.getScale(h);f=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Pe(s,(o,a)=>{o||delete r[a]}),Pe(r,o=>{hs.configure(this,o,o.options),hs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Cx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||bm(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=or.getController(a),{datasetElementType:c,dataElementType:h}=lt.datasets[a];Object.assign(l,{dataElementType:or.getElement(h),datasetElementType:c&&or.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Pe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:f}=this.getDatasetMeta(c),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Pe(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Cx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Pe(this.scales,e=>{hs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!$w(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;J3(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!$w(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hs.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Pe(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ps(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vr.has(this)?this.attached&&!vr.running(this)&&vr.start(this):(this.draw(),Ax({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=R5(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&By(n,s),e.controller.draw(),s&&zy(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return $l(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Y5.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Li(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Ph(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),vr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Zw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ou[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Pe(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Pe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Pe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Ch(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(h=>!c.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=lU(e),c=Z3(e,this._lastEvent,r,l);r&&(this._lastEvent=null,$e(i.onHover,[e,a,this],this),l&&$e(i.onClick,[e,a,this],this));const h=!Ch(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},ge(Gr,"defaults",lt),ge(Gr,"instances",Ou),ge(Gr,"overrides",Ci),ge(Gr,"registry",or),ge(Gr,"version",Q3),ge(Gr,"getChart",Rx),Gr);function Px(){return Pe(Sd.instances,t=>t._plugins.invalidate())}function m1(t,e,n=e){t.lineCap=Te(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Te(n.borderDash,e.borderDash)),t.lineDashOffset=Te(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Te(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Te(n.borderWidth,e.borderWidth),t.strokeStyle=Te(n.borderColor,e.borderColor)}function e6(t,e,n){t.lineTo(n.x,n.y)}function t6(t){return t.stepped?jU:t.tension||t.cubicInterpolationMode==="monotone"?VU:e6}function g1(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),h=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function n6(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=g1(s,n,r),h=t6(i);let{move:f=!0,reverse:m}=r||{},y,x,E;for(y=0;y<=c;++y)x=s[(a+(m?c-y:y))%o],!x.skip&&(f?(t.moveTo(x.x,x.y),f=!1):h(t,E,x,m,i.stepped),E=x);return l&&(x=s[(a+(m?c:0))%o],h(t,E,x,m,i.stepped)),!!l}function r6(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=g1(s,n,r),{move:l=!0,reverse:c}=r||{};let h=0,f=0,m,y,x,E,T,v;const _=R=>(o+(c?a-R:R))%i,b=()=>{E!==T&&(t.lineTo(h,T),t.lineTo(h,E),t.lineTo(h,v))};for(l&&(y=s[_(0)],t.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=s[_(m)],y.skip)continue;const R=y.x,P=y.y,M=R|0;M===x?(P<E?E=P:P>T&&(T=P),h=(f*h+R)/++f):(b(),t.lineTo(R,P),x=M,f=0,E=T=P),v=P}b()}function Tm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?r6:n6}function s6(t){return t.stepped?y5:t.tension||t.cubicInterpolationMode==="monotone"?_5:ei}function i6(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),m1(t,e.options),t.stroke(s)}function o6(t,e,n,r){const{segments:s,options:i}=e,o=Tm(e);for(const a of s)m1(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const a6=typeof Path2D=="function";function l6(t,e,n,r){a6&&!e.options.segment?i6(t,e,n,r):o6(t,e,n,r)}class Fa extends Ns{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;c5(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=I5(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=E5(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=s6(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:f,end:m}=o[c],y=i[f],x=i[m];if(y===x){a.push(y);continue}const E=Math.abs((s-y[n])/(x[n]-y[n])),T=l(y,x,E,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Tm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=Tm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),l6(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ge(Fa,"id","line"),ge(Fa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ge(Fa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ge(Fa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Nx(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Mu extends Ns{constructor(n){super();ge(this,"parsed");ge(this,"skip");ge(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Nx(this,n,"x",r)}inYRange(n,r){return Nx(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!$l(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,wm(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ge(Mu,"id","point"),ge(Mu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ge(Mu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Dx=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},c6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ox extends Ns{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=$e(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=tn(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Dx(r,i);let c,h;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,y=-h;return this.legendItems.forEach((x,E)=>{const T=r+n/2+i.measureText(x.text).width;(E===0||c[c.length-1]+T+2*a>o)&&(f+=h,c[c.length-(E>0?0:1)]=0,y+=h,m++),l[E]={left:0,top:y,row:m,width:T,height:s},c[c.length-1]+=T+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let f=a,m=0,y=0,x=0,E=0;return this.legendItems.forEach((T,v)=>{const{itemWidth:_,itemHeight:b}=u6(r,n,i,T,s);v>0&&y+b+2*a>h&&(f+=m+a,c.push({width:m,height:y}),x+=m+a,E++,m=y=0),l[v]={left:x,top:y,col:E,width:_,height:b},m=Math.max(m,_),y+=b+a}),f+=m,c.push({width:m,height:y}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=yo(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=fn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=fn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=fn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=fn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;By(e,this),this._draw(),zy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=lt.color,l=yo(e.rtl,this.left,this.width),c=tn(o.font),{padding:h}=o,f=c.size,m=f/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:T}=Dx(o,f),v=function(M,k,w){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;s.save();const I=Te(w.lineWidth,1);if(s.fillStyle=Te(w.fillStyle,a),s.lineCap=Te(w.lineCap,"butt"),s.lineDashOffset=Te(w.lineDashOffset,0),s.lineJoin=Te(w.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=Te(w.strokeStyle,a),s.setLineDash(Te(w.lineDash,[])),o.usePointStyle){const A={radius:E*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:I},N=l.xPlus(M,x/2),O=k+m;GS(s,A,N,O,o.pointStyleWidth&&x)}else{const A=k+Math.max((f-E)/2,0),N=l.leftForLtr(M,x),O=ll(w.borderRadius);s.beginPath(),Object.values(O).some(S=>S!==0)?xm(s,{x:N,y:A,w:x,h:E,radius:O}):s.rect(N,A,x,E),s.fill(),I!==0&&s.stroke()}s.restore()},_=function(M,k,w){Dh(s,w.text,M,k+T/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?y={x:fn(i,this.left+h,this.right-r[0]),y:this.top+h+R,line:0}:y={x:this.left+h,y:fn(i,this.top+R+h,this.bottom-n[0].height),line:0},t1(this.ctx,e.textDirection);const P=T+h;this.legendItems.forEach((M,k)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const w=s.measureText(M.text).width,I=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),A=x+m+w;let N=y.x,O=y.y;l.setWidth(this.width),b?k>0&&N+A+h>this.right&&(O=y.y+=P,y.line++,N=y.x=fn(i,this.left+h,this.right-r[y.line])):k>0&&O+P>this.bottom&&(N=y.x=N+n[y.line].width+h,y.line++,O=y.y=fn(i,this.top+R+h,this.bottom-n[y.line].height));const S=l.x(N);if(v(S,O,M),N=TU(I,N+x+m,b?N+A:this.right,e.rtl),_(l.x(N),O,M),b)y.x+=A+h;else if(typeof M.text!="string"){const te=c.lineHeight;y.y+=y1(M,te)+h}else y.y+=P}),n1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=tn(n.font),s=er(n.padding);if(!n.display)return;const i=yo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let h,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+c,f=fn(e.align,f,this.right-m);else{const x=this.columnSizes.reduce((E,T)=>Math.max(E,T.height),0);h=c+fn(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const y=fn(a,f,f+m);o.textAlign=i.textAlign(HS(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Dh(o,n.text,y,h,r)}_computeTitleHeight(){const e=this.options.title,n=tn(e.font),r=er(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(ja(e,this.left,this.right)&&ja(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],ja(e,s.left,s.left+s.width)&&ja(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!f6(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=c6(s,r);s&&!i&&$e(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&$e(n.onHover,[e,r,this],this)}else r&&$e(n.onClick,[e,r,this],this)}}function u6(t,e,n,r,s){const i=h6(r,t,e,n),o=d6(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function h6(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function d6(t,e,n){let r=t;return typeof e.text!="string"&&(r=y1(e,n)),r}function y1(t,e){const n=t.text?t.text.length:0;return e*n}function f6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var p6={id:"legend",_element:Ox,start(t,e,n){const r=t.legend=new Ox({ctx:t.ctx,options:n,chart:t});hs.configure(t,r,n),hs.addBox(t,r)},stop(t){hs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;hs.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=er(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Ua={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=_m(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function sr(t,e){return e&&(St(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function wr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function m6(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Mx(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=tn(e.bodyFont),c=tn(e.titleFont),h=tn(e.footerFont),f=i.length,m=s.length,y=r.length,x=er(e.padding);let E=x.height,T=0,v=r.reduce((R,P)=>R+P.before.length+P.lines.length+P.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(E+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=y*R+(v-y)*l.lineHeight+(v-1)*e.bodySpacing}m&&(E+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let _=0;const b=function(R){T=Math.max(T,n.measureText(R).width+_)};return n.save(),n.font=c.string,Pe(t.title,b),n.font=l.string,Pe(t.beforeBody.concat(t.afterBody),b),_=e.displayColors?o+2+e.boxPadding:0,Pe(r,R=>{Pe(R.before,b),Pe(R.lines,b),Pe(R.after,b)}),_=0,n.font=h.string,Pe(t.footer,b),n.restore(),T+=x.width,{width:T,height:E}}function g6(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function y6(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function _6(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),y6(c,t,e,n)&&(c="center"),c}function Lx(t,e,n){const r=n.yAlign||e.yAlign||g6(t,n);return{xAlign:n.xAlign||e.xAlign||_6(t,e,n,r),yAlign:r}}function v6(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function w6(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function jx(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:y}=ll(o);let x=v6(e,a);const E=w6(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(h,m)+s:a==="right"&&(x+=Math.max(f,y)+s),{x:Pn(x,0,r.width-e.width),y:Pn(E,0,r.height-e.height)}}function au(t,e,n){const r=er(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Vx(t){return sr([],wr(t))}function x6(t,e,n){return Li(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Fx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const _1={beforeTitle:_r,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_r,beforeBody:_r,beforeLabel:_r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Fe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_r,afterBody:_r,beforeFooter:_r,footer:_r,afterFooter:_r};function Xt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?_1[e].call(n,r):s}class km extends Ns{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new s1(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=x6(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Xt(r,"beforeTitle",this,e),i=Xt(r,"title",this,e),o=Xt(r,"afterTitle",this,e);let a=[];return a=sr(a,wr(s)),a=sr(a,wr(i)),a=sr(a,wr(o)),a}getBeforeBody(e,n){return Vx(Xt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Pe(e,i=>{const o={before:[],lines:[],after:[]},a=Fx(r,i);sr(o.before,wr(Xt(a,"beforeLabel",this,i))),sr(o.lines,Xt(a,"label",this,i)),sr(o.after,wr(Xt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Vx(Xt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Xt(r,"beforeFooter",this,e),i=Xt(r,"footer",this,e),o=Xt(r,"afterFooter",this,e);let a=[];return a=sr(a,wr(s)),a=sr(a,wr(i)),a=sr(a,wr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(m6(this.chart,n[l]));return e.filter&&(a=a.filter((h,f,m)=>e.filter(h,f,m,r))),e.itemSort&&(a=a.sort((h,f)=>e.itemSort(h,f,r))),Pe(a,h=>{const f=Fx(e.callbacks,h);s.push(Xt(f,"labelColor",this,h)),i.push(Xt(f,"labelPointStyle",this,h)),o.push(Xt(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Ua[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Mx(this,r),c=Object.assign({},a,l),h=Lx(this.chart,r,c),f=jx(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:f}=ll(a),{x:m,y}=e,{width:x,height:E}=n;let T,v,_,b,R,P;return i==="center"?(R=y+E/2,s==="left"?(T=m,v=T-o,b=R+o,P=R-o):(T=m+x,v=T+o,b=R-o,P=R+o),_=T):(s==="left"?v=m+Math.max(l,h)+o:s==="right"?v=m+x-Math.max(c,f)-o:v=this.caretX,i==="top"?(b=y,R=b-o,T=v-o,_=v+o):(b=y+E,R=b+o,T=v+o,_=v-o),P=b),{x1:T,x2:v,x3:_,y1:b,y2:R,y3:P}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=yo(r.rtl,this.x,this.width);for(e.x=au(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=tn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,h=tn(i.bodyFont),f=au(this,"left",i),m=s.x(f),y=l<h.lineHeight?(h.lineHeight-l)/2:0,x=n.y+y;if(i.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=s.leftForLtr(m,c)+c/2,v=x+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,wm(e,E,T,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,wm(e,E,T,v)}else{e.lineWidth=Ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=s.leftForLtr(m,c),T=s.leftForLtr(s.xPlus(m,1),c-2),v=ll(o.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,xm(e,{x:E,y:x,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),xm(e,{x:T,y:x+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,f=tn(r.bodyFont);let m=f.lineHeight,y=0;const x=yo(r.rtl,this.x,this.width),E=function(w){n.fillText(w,x.x(e.x+y),e.y+m/2),e.y+=m+i},T=x.textAlign(o);let v,_,b,R,P,M,k;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=au(this,T,r),n.fillStyle=r.bodyColor,Pe(this.beforeBody,E),y=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,M=s.length;R<M;++R){for(v=s[R],_=this.labelTextColors[R],n.fillStyle=_,Pe(v.before,E),b=v.lines,a&&b.length&&(this._drawColorBox(n,e,R,x,r),m=Math.max(f.lineHeight,l)),P=0,k=b.length;P<k;++P)E(b[P]),m=f.lineHeight;Pe(v.after,E)}y=0,m=f.lineHeight,Pe(this.afterBody,E),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=yo(r.rtl,this.x,this.width);for(e.x=au(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=tn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:f,topRight:m,bottomLeft:y,bottomRight:x}=ll(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+h-x),n.quadraticCurveTo(a+c,l+h,a+c-x,l+h),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+y,l+h),n.quadraticCurveTo(a,l+h,a,l+h-y),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Ua[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Mx(this,e),l=Object.assign({},o,this._size),c=Lx(n,e,l),h=jx(e,l,c,n);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=er(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),t1(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),n1(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Ch(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Ch(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Ua[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}ge(km,"positioners",Ua);var b6={id:"tooltip",_element:km,positioners:Ua,afterInit(t,e,n){n&&(t.tooltip=new km({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:_1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const E6=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function T6(t,e,n,r){const s=t.indexOf(e);if(s===-1)return E6(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const k6=(t,e)=>t===null?null:Pn(Math.round(t),0,e);function Ux(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Im extends Yo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Fe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:T6(r,e,Te(n,e),this._addedLabels),k6(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Ux.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ge(Im,"id","category"),ge(Im,"defaults",{ticks:{callback:Ux}});function I6(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:f,includeBounds:m}=t,y=i||1,x=h-1,{min:E,max:T}=e,v=!Fe(o),_=!Fe(a),b=!Fe(c),R=(T-E)/(f+1);let P=Hw((T-E)/x/y)*y,M,k,w,I;if(P<1e-14&&!v&&!_)return[{value:E},{value:T}];I=Math.ceil(T/P)-Math.floor(E/P),I>x&&(P=Hw(I*P/x/y)*y),Fe(l)||(M=Math.pow(10,l),P=Math.ceil(P*M)/M),s==="ticks"?(k=Math.floor(E/P)*P,w=Math.ceil(T/P)*P):(k=E,w=T),v&&_&&i&&fU((a-o)/i,P/1e3)?(I=Math.round(Math.min((a-o)/P,h)),P=(a-o)/I,k=o,w=a):b?(k=v?o:k,w=_?a:w,I=c-1,P=(w-k)/I):(I=(w-k)/P,il(I,Math.round(I),P/1e3)?I=Math.round(I):I=Math.ceil(I));const A=Math.max(qw(P),qw(k));M=Math.pow(10,Fe(l)?A:l),k=Math.round(k*M)/M,w=Math.round(w*M)/M;let N=0;for(v&&(m&&k!==o?(n.push({value:o}),k<o&&N++,il(Math.round((k+N*P)*M)/M,o,Bx(o,R,t))&&N++):k<o&&N++);N<I;++N){const O=Math.round((k+N*P)*M)/M;if(_&&O>a)break;n.push({value:O})}return _&&m&&w!==a?n.length&&il(n[n.length-1].value,a,Bx(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!_||w===a)&&n.push({value:w}),n}function Bx(t,e,{horizontal:n,minRotation:r}){const s=ai(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class S6 extends Yo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Fe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Mo(s),c=Mo(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=I6(s,i);return e.bounds==="ticks"&&pU(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return qS(e,this.chart.options.locale,this.options.ticks.format)}}class Sm extends S6{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=jn(e)?e:0,this.max=jn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ai(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ge(Sm,"id","linear"),ge(Sm,"defaults",{ticks:{callback:KS.formatters.numeric}});const Cd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Zt=Object.keys(Cd);function zx(t,e){return t-e}function $x(t,e){if(Fe(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),jn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(zl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Wx(t,e,n,r){const s=Zt.length;for(let i=Zt.indexOf(t);i<s-1;++i){const o=Cd[Zt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Zt[i]}return Zt[s-1]}function C6(t,e,n,r,s){for(let i=Zt.length-1;i>=Zt.indexOf(n);i--){const o=Zt[i];if(Cd[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Zt[n?Zt.indexOf(n):0]}function A6(t){for(let e=Zt.indexOf(t)+1,n=Zt.length;e<n;++e)if(Cd[Zt[e]].common)return Zt[e]}function Hx(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Fy(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function R6(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function qx(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:R6(t,r,s,n)}class Lh extends Yo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new H5._date(e.adapters.date);s.init(n),sl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:$x(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=jn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=jn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=wU(s,i,o);return this._unit=n.unit||(r.autoSkip?Wx(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):C6(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:A6(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),qx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Pn(n,0,o),r=Pn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Wx(i.minUnit,n,r,this._getLabelCapacity(n)),a=Te(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=zl(l)||l===!0,h={};let f=n,m,y;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,y=0;m<r;m=+e.add(m,a,o),y++)Hx(h,m,x);return(m===r||s.bounds==="ticks"||y===1)&&Hx(h,m,x),Object.keys(h).sort(zx).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return $e(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],f=c&&a[c],m=r[n],y=c&&f&&m&&m.major;return this._adapter.format(e,s||(y?f:h))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ai(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,qx(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push($x(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bU(e.sort(zx))}}ge(Lh,"id","time"),ge(Lh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function lu(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=li(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=li(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class Kx extends Lh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=lu(n,this.min),this._tableRange=lu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(lu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return lu(this._table,r*this._tableRange+this._minPos,!0)}}ge(Kx,"id","timeseries"),ge(Kx,"defaults",Lh.defaults);const v1="label";function Gx(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function P6(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function w1(t,e){t.labels=e}function x1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v1;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function N6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v1;const n={labels:[],datasets:[]};return w1(n,t.labels),x1(n,t.datasets,e),n}function D6(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:f,...m}=t,y=D.useRef(null),x=D.useRef(null),E=()=>{y.current&&(x.current=new Sd(y.current,{type:o,data:N6(a,i),options:l&&{...l},plugins:c}),Gx(e,x.current))},T=()=>{Gx(e,null),x.current&&(x.current.destroy(),x.current=null)};return D.useEffect(()=>{!s&&x.current&&l&&P6(x.current,l)},[s,l]),D.useEffect(()=>{!s&&x.current&&w1(x.current.config.data,a.labels)},[s,a.labels]),D.useEffect(()=>{!s&&x.current&&a.datasets&&x1(x.current.config.data,a.datasets,i)},[s,a.datasets]),D.useEffect(()=>{x.current&&(s?(T(),setTimeout(E)):x.current.update(f))},[s,l,a.labels,a.datasets,f]),D.useEffect(()=>{x.current&&(T(),setTimeout(E))},[o]),D.useEffect(()=>(E(),()=>T()),[]),ci.createElement("canvas",{ref:y,role:"img",height:n,width:r,...m},h)}const O6=D.forwardRef(D6);function M6(t,e){return Sd.register(e),D.forwardRef((n,r)=>ci.createElement(O6,{...n,ref:r,type:t}))}const L6=M6("line",Nu);Sd.register(Im,Sm,Mu,Fa,b6,p6);function b1({points:t=[],labels:e,yRange:n={min:0,max:1},title:r}){const i={labels:Array.isArray(e)&&e.length===t.length?e:t.map((a,l)=>`T${l+1}`),datasets:[{label:r||"Risk",data:t,borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.2)"}]},o={responsive:!0,plugins:{legend:{display:!1}},scales:{y:{min:(n==null?void 0:n.min)??0,max:(n==null?void 0:n.max)??1}}};return d.jsx(L6,{data:i,options:o})}function j6({alerts:t=[]}){return t.length?d.jsxs("div",{className:"rounded border border-red-300 bg-red-50 p-4",children:[d.jsx("h3",{className:"text-red-800 font-medium mb-2",children:"Urgent Alerts"}),d.jsx("ul",{className:"list-disc pl-6 text-red-900",children:t.map((e,n)=>d.jsx("li",{children:e.condition},n))})]}):null}const zr="",Xo={"x-user-id":"demo"};async function E1(){try{const t=Tt.currentUser;if(t)return{Authorization:`Bearer ${await t.getIdToken()}`}}catch{}return{...Xo}}async function V6(t){return(await fetch(`${zr}/api/analyze`,{method:"POST",headers:{"Content-Type":"application/json",...Xo},body:JSON.stringify(t)})).json()}async function T1(){return(await fetch(`${zr}/api/ai/health`)).json()}async function F6(t,{useOcr:e,lang:n}={}){const r=await fetch(`${zr}/api/pdf-extract`,{method:"POST",headers:{"Content-Type":"application/json",...Xo},body:JSON.stringify({url:t,useOcr:e,lang:n})}),s=await r.text();let i={};try{i=s?JSON.parse(s):{}}catch{i={}}if(!r.ok){const o=(i==null?void 0:i.error)||(i==null?void 0:i.message)||`HTTP ${r.status}`,a=new Error(o);throw a.status=r.status,a.body=i,a}return i}function U6(t,{onProgress:e,signal:n}={}){return new Promise((r,s)=>{try{const i=new XMLHttpRequest,o=new FormData;if(o.append("file",t),i.open("POST",`${zr}/functions/processReport`,!0),i.setRequestHeader("x-user-id",Xo["x-user-id"]),i.upload&&typeof e=="function"&&(i.upload.onprogress=a=>{if(!a.lengthComputable)return;const l=Math.min(99,Math.round(a.loaded/a.total*100));e(l)}),i.onreadystatechange=()=>{if(i.readyState===4)if(i.status>=200&&i.status<300)try{const a=JSON.parse(i.responseText||"{}");r(a)}catch{r({ok:!0})}else{let a="Upload failed";try{const c=JSON.parse(i.responseText||"{}");a=(c==null?void 0:c.error)||(c==null?void 0:c.message)||a;const h=new Error(a);return h.status=i.status,h.body=c,s(h)}catch{}const l=new Error(a);l.status=i.status,s(l)}},i.onerror=()=>s(new Error("Network error during upload")),i.onabort=()=>s(new Error("Upload canceled")),n)if(n.aborted)i.abort();else{const a=()=>i.abort();n.addEventListener("abort",a,{once:!0})}i.send(o)}catch(i){s(i)}})}async function B6(t){return(await fetch(`${zr}/functions/analyzeCheckin`,{method:"POST",headers:{"Content-Type":"application/json",...Xo},body:JSON.stringify(t)})).json()}async function z6(t,e,n){const r=new URL(`${zr}/functions/findNearbyAmbulance`);return r.searchParams.set("lat",String(t)),r.searchParams.set("lng",String(e)),Number.isFinite(n)&&r.searchParams.set("radiusMeters",String(n)),(await fetch(r.toString())).json()}async function $6(t,e="demo"){return(await fetch(`${zr}/functions/submitFeedback`,{method:"POST",headers:{"Content-Type":"application/json",...Xo},body:JSON.stringify({userId:e,feedback:t})})).json()}async function W6(t,{signal:e}={}){const n=await fetch(`${zr}/functions/chat`,{method:"POST",headers:{"Content-Type":"application/json",...await E1()},body:JSON.stringify(t),signal:e}),r=await n.text();let s=null;try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function H6(t){const e=new URL(`${zr}/functions/riskSeries`);t&&e.searchParams.set("userId",String(t));const n=await fetch(e.toString(),{headers:{...await E1()}}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}const Qy=ci.forwardRef(function({className:e="",rows:n=4,...r},s){return d.jsx("textarea",{ref:s,rows:n,className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-brand-600 focus:ring-2 focus:ring-brand-600 focus:ring-offset-0 outline-none ${e}`.trim(),...r})});function q6({onSubmit:t}){const[e,n]=D.useState("");return d.jsxs("form",{onSubmit:r=>{r.preventDefault(),t==null||t(e),n("")},className:"space-y-2",children:[d.jsx(Qy,{value:e,onChange:r=>n(r.target.value),placeholder:"Share corrections or context for clinicians"}),d.jsx(Ee,{type:"submit",children:"Submit Feedback"})]})}function pt({className:t="",children:e}){return d.jsx("div",{className:`bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm ${t}`.trim(),children:e})}function mn({className:t="",children:e}){return d.jsx("div",{className:`px-5 py-4 border-b border-slate-200 dark:border-slate-800 ${t}`.trim(),children:e})}function gn({className:t="",children:e}){return d.jsx("h2",{className:`text-base font-semibold tracking-tight text-slate-900 dark:text-slate-100 ${t}`.trim(),children:e})}function mt({className:t="",children:e}){return d.jsx("div",{className:`p-5 text-slate-800 dark:text-slate-200 ${t}`.trim(),children:e})}function Ai({size:t=16,className:e=""}){const n={width:t,height:t};return d.jsxs("svg",{className:`animate-spin text-blue-600 ${e}`,style:n,viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}const k1=D.createContext({notify:()=>{}});function K6({children:t}){const[e,n]=D.useState([]),r=D.useCallback((i,o="info",a=3e3)=>{const l=Math.random().toString(36).slice(2);n(c=>c.concat({id:l,message:i,type:o})),setTimeout(()=>n(c=>c.filter(h=>h.id!==l)),a)},[]),s=D.useMemo(()=>({notify:r}),[r]);return d.jsxs(k1.Provider,{value:s,children:[t,d.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map(i=>d.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-900"}`,children:i.message},i.id))})]})}function Ad(){return D.useContext(k1)}function G6({title:t,subtitle:e,cta:n}){return d.jsxs("section",{className:"mb-6 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6",children:[d.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-100",children:t}),e&&d.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:e}),n&&d.jsx("div",{className:"mt-4",children:n})]})}function _o({label:t,value:e,hint:n,accent:r="blue"}){const s={blue:"bg-blue-50 text-blue-700 dark:bg-slate-800 dark:text-blue-300",emerald:"bg-emerald-50 text-emerald-700 dark:bg-slate-800 dark:text-emerald-300",amber:"bg-amber-50 text-amber-700 dark:bg-slate-800 dark:text-amber-300",red:"bg-red-50 text-red-700 dark:bg-slate-800 dark:text-red-300"};return d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[d.jsx("div",{className:`inline-block rounded px-2 py-0.5 text-xs ${s[r]}`,children:t}),d.jsx("div",{className:"mt-2 text-2xl font-semibold text-slate-900 dark:text-slate-100",children:e}),n&&d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:n})]})}function Q6({onAnalyze:t,onLocate:e}){return d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Quick actions"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx(Ee,{onClick:t,children:"Run Analysis"}),d.jsx(Ee,{variant:"secondary",onClick:e,children:"Find Ambulance"})]})]})}function Y6({items:t=[]}){const e=t.length?t:[{type:"info",text:"Welcome! Start by running an analysis."},{type:"tip",text:"Upload a report to extract structured insights."}];return d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Recent activity"}),d.jsx("ul",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300",children:e.map((n,r)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:`mt-1 w-2 h-2 rounded-full ${n.type==="tip"?"bg-emerald-500":"bg-slate-400"}`}),d.jsx("span",{children:n.text})]},r))})]})}function X6(){var ie,pe,Oe,Ue,Ae,j,oe,me,Me,Ze,it,K;const{notify:t}=Ad(),{user:e}=Bs(),[n,r]=D.useState(null),[s,i]=D.useState(!1),[o,a]=D.useState(null),[l,c]=D.useState(null),[h,f]=D.useState(!1),[m,y]=D.useState(null),[x,E]=D.useState(3),[T,v]=D.useState("auto"),[_,b]=D.useState(!0),[R,P]=D.useState(!1),[M,k]=D.useState(null),[w,I]=D.useState(!1),[A,N]=D.useState([]),[O,S]=D.useState([]),[te,ne]=D.useState([]),[ee,de]=D.useState({level:"Low",reason:"No data yet.",score:0});function $(U){if(!U)return .5;const B=ae=>({None:1,Normal:1,"None – no unusual warmth":1,"Slept well – no trouble falling or staying asleep":1,Mild:.7,"Mild – occasional discomfort":.7,"Mild – didn’t interfere with work":.7,"Mild – occasional queasiness":.7,"Mild – slightly tired":.7,"Mild – slight temperature fluctuation":.7,"Mild – occasional cough or shortness of breath":.7,"Slight irregularity – mild constipation/diarrhea":.7,"Slight – minor discomfort or frequency change":.7,"Minor – small rashes, bruises, or pimples":.7,"Mild – occasional lightheadedness":.7,"Mild difficulty – took longer than usual to fall asleep":.7,"Mild – occasional warmth or flushing":.7,Moderate:.4,"Moderate – noticeable, affects tasks":.4,"Moderate – interfered with tasks":.4,"Moderate – affected meals":.4,"Moderate – noticeable fatigue":.4,"Moderate – measurable fever (100–102°F / 37.7–38.8°C)":.4,"Moderate – daily cough or breathing difficulty":.4,"Moderate – frequent or loose stools":.4,"Moderate – frequent or painful urination":.4,"Noticeable – persistent rash, sores, or swelling":.4,"Moderate – dizziness affecting tasks":.4,"Moderate difficulty – frequent waking or poor sleep quality":.4,"Moderate – noticeable episodes affecting comfort":.4,Severe:.2,"Severe – persistent pain":.2,"Severe – unable to perform daily activities":.2,"Severe – persistent vomiting":.2,"Severe – could barely perform activities":.2,"Severe – high fever (>102°F / 38.8°C)":.2,"Severe – persistent cough or severe breathing issues":.2,"Severe – persistent diarrhea/constipation":.2,"Severe – inability to urinate normally or severe discomfort":.2,"Severe – bleeding, large lesions, or non-healing wounds":.2,"Severe – fainting or inability to stand":.2,"Severe – frequent or intense hot flashes":.2})[ae]??.5,Z=[B(U.ns_q1),B(U.ns_q2),B(U.ns_q3),B(U.ns_q4),B(U.ns_q5),B(U.ns_q6),B(U.ns_q7),B(U.ns_q8),B(U.ns_q9),B(U.ns_q10),B(U.ns_q11),B(U.ns_q12)],ye=Z.reduce((ae,re)=>ae+(typeof re=="number"?re:.5),0)/Z.length;return Math.max(0,Math.min(1,Number(ye.toFixed(3))))}function G(U){var $t,hn;let B=0,Z=0,ye=0,ae=0,re=0,je=0;for(const wt of U){const ve=(wt==null?void 0:wt.answers)||{},xt=ve.ns_q2&&ve.ns_q2.toLowerCase().startsWith("mild")||(($t=ve.ns_q2)==null?void 0:$t.toLowerCase().startsWith("moderate"))||((hn=ve.ns_q2)==null?void 0:hn.toLowerCase().startsWith("severe")),ji=ve.ns_q11&&(ve.ns_q11.toLowerCase().includes("hardly")||ve.ns_q11.toLowerCase().includes("moderate difficulty")),lc=ve.ns_q5&&(ve.ns_q5.toLowerCase().includes("very low")||ve.ns_q5.toLowerCase()==="low"),cc=ve.ns_q5&&ve.ns_q5.toLowerCase().includes("fever"),Rd=ve.ns_q3&&!ve.ns_q3.toLowerCase().startsWith("none"),zs=ve.ns_q4&&!ve.ns_q4.toLowerCase().startsWith("none");xt&&(B+=2,Z+=1),ji&&(B+=3,ye+=1),lc?(B+=4,re+=1):re=0,re>=5&&(ae=Math.max(ae,re)),(cc?1:0)+(Rd?1:0)+(zs?1:0)>=2&&(B+=6,je+=1)}let Re="Low",he="No major recurring symptoms.";return Z>=3&&ye>=3&&(Re="Mid",he="Frequent headaches with low sleep across several days."),ae>=5&&(Re="Mid",he="Sustained low mood/stress for 5+ days."),je>=2&&(Re="High",he="Multiple symptoms clustered (e.g., nausea + weakness) on several days."),B>=20?(Re="High",(!he||he==="No major recurring symptoms.")&&(he="Multiple risk factors accumulated in recent logs.")):B>=10&&Re!=="High"&&(Re="Mid",(!he||he==="No major recurring symptoms.")&&(he="Some recurring issues detected (sleep/mood/symptoms).")),{level:Re,reason:he,score:B}}D.useEffect(()=>{async function U(){if(!(!Kt||!e))try{const B=Ru(Kt,"users",e.uid,"dailyCheckins"),Z=fm(B,lS("date","desc"),cS(30)),ae=(await pm(Z)).docs.map(wt=>({id:wt.id,...wt.data()})),re=ae.slice().reverse(),je=re.map(wt=>1-$(wt.answers)),Re=re.map(wt=>{var ve;return(ve=wt==null?void 0:wt.date)!=null&&ve.toDate?wt.date.toDate().toLocaleDateString():""});N(ae),S(je),ne(Re);const he=ae.slice(0,7).reverse(),hn=G(ae);de(hn)}catch(B){console.error("[Dashboard] loadCheckins error:",B)}}U()},[e]),ci.useEffect(()=>{try{const U=JSON.parse(localStorage.getItem("analysisPrefs")||"{}");U&&typeof U=="object"&&(U.topK&&E(U.topK),U.explainMethod&&v(U.explainMethod),typeof U.useScipyWinsorize=="boolean"&&b(U.useScipyWinsorize),typeof U.forceLocal=="boolean"&&P(U.forceLocal))}catch{}},[]),ci.useEffect(()=>{let U=!0;return(async()=>{try{I(!0);const B=await T1();U&&k(B)}catch{U&&k({ok:!0,python:{available:!1}})}finally{U&&I(!1)}})(),()=>{U=!1}},[]),ci.useEffect(()=>{try{localStorage.setItem("analysisPrefs",JSON.stringify({topK:x,explainMethod:T,useScipyWinsorize:_,forceLocal:R}))}catch{}},[x,T,_,R]);async function H(){try{i(!0),a(null);const U=await V6({notes:"fever and headache",vitals:{temperature:38.5},topK:Number(x),explainMethod:T,useScipyWinsorize:_,forceLocal:R});r(U),R&&M&&M.python&&M.python.available===!1&&t("Python AI unavailable. Used local analysis.","info")}catch(U){a(String((U==null?void 0:U.message)||U))}finally{i(!1)}}async function fe(){try{if(y(null),f(!0),!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");t("Finding nearby ambulance services...","info"),await new Promise((U,B)=>{navigator.geolocation.getCurrentPosition(async Z=>{try{const{latitude:ye,longitude:ae}=Z.coords,re=await z6(ye,ae);if(!re||re.ok===!1){const Re=re&&re.error?re.error:"Failed to fetch nearby services";throw new Error(Re)}c(re);const je=Array.isArray(re.data)?re.data.length:0;t(`Found ${je} ambulance service${je===1?"":"s"}`,"success"),U()}catch(ye){B(ye)}},Z=>{const ye=Z&&Z.message?Z.message:"Unable to retrieve location.";B(new Error(ye))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}catch(U){const B=(U==null?void 0:U.message)||"Failed to find nearby ambulances";y(B),t(B,"error")}finally{f(!1)}}return d.jsxs("div",{children:[d.jsx(G6,{title:"AI Diagnostic & Triage Dashboard",subtitle:"Run a quick analysis, review trends, and act on red flags.",cta:d.jsxs("div",{className:"flex gap-3 items-center",children:[d.jsx(Ee,{onClick:H,children:"Run Analysis"}),d.jsx(Ee,{variant:"secondary",onClick:fe,children:"Find Ambulance"})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d.jsx(pt,{className:`${ee.level==="High"?"bg-rose-50 dark:bg-rose-900/20 border-rose-200 dark:border-rose-800":ee.level==="Mid"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800"}`,children:d.jsxs(mt,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Health Risk"}),d.jsx("div",{className:`text-xl font-semibold ${ee.level==="High"?"text-rose-700 dark:text-rose-300":ee.level==="Mid"?"text-amber-700 dark:text-amber-300":"text-emerald-700 dark:text-emerald-300"}`,children:ee.level})]}),d.jsx("div",{className:`px-3 py-1 rounded-full text-xs border ${ee.level==="High"?"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/30 dark:text-rose-300 dark:border-rose-800":ee.level==="Mid"?"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800":"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800"}`,children:"Last 30 days"})]}),d.jsx("p",{className:"mt-2 text-sm text-slate-700 dark:text-slate-300",children:ee.reason})]})}),d.jsxs(pt,{className:"md:col-span-2",children:[d.jsx(mn,{children:d.jsxs(gn,{children:["Risk Trend (last ",te.length," check-ins)"]})}),d.jsx(mt,{children:O.length>0?d.jsx("div",{className:"max-h-[220px]",children:d.jsx(b1,{points:O,labels:te,yRange:{min:0,max:1},title:"Rule-based risk"})}):d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No check-ins yet. Your risk trend will appear here."})})]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsx(_o,{label:"Patients analyzed",value:n!=null&&n.data?((ie=n.data.diagnoses)==null?void 0:ie.length)||1:0,hint:"From last session",accent:"blue"}),d.jsx(_o,{label:"Active alerts",value:((Oe=(pe=n==null?void 0:n.data)==null?void 0:pe.redFlags)==null?void 0:Oe.length)||0,hint:"Requires attention",accent:"red"}),d.jsx(_o,{label:"Avg. risk",value:n!=null&&n.data?`${Math.round(52)}%`:"—",hint:"Across current sample",accent:"amber"})]}),s&&d.jsxs("div",{className:"mb-4 text-slate-600 inline-flex items-center gap-2",children:[d.jsx(Ai,{})," Analyzing..."]}),o&&d.jsx("div",{className:"mb-4 text-red-600",children:o}),!(n!=null&&n.data)&&!s&&d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx(Q6,{onAnalyze:H,onLocate:fe}),d.jsx(Y6,{})]})}),(n==null?void 0:n.data)&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsx(pt,{className:"md:col-span-2",children:d.jsx(mt,{children:d.jsx(j6,{alerts:n.data.redFlags})})}),((Ae=(Ue=n==null?void 0:n.data)==null?void 0:Ue.explainability)==null?void 0:Ae.available)&&d.jsxs(pt,{className:"md:col-span-2",children:[d.jsx(mn,{children:d.jsx(gn,{children:"Explainability"})}),d.jsxs(mt,{children:[d.jsxs("div",{className:"text-sm text-slate-600 mb-3",children:["Method: ",n.data.explainability.method,((oe=(j=n==null?void 0:n.data)==null?void 0:j.explainability)==null?void 0:oe.method)==="captum"&&d.jsx("span",{className:"ml-2 inline-block text-xs px-2 py-0.5 rounded bg-emerald-100 text-emerald-700",children:"Captum"}),((Me=(me=n==null?void 0:n.data)==null?void 0:me.explainability)==null?void 0:Me.method)==="shap"&&d.jsx("span",{className:"ml-2 inline-block text-xs px-2 py-0.5 rounded bg-indigo-100 text-indigo-700",children:"SHAP"}),((it=(Ze=n==null?void 0:n.data)==null?void 0:Ze.explainability)==null?void 0:it.method)==="auto"&&d.jsx("span",{className:"ml-2 inline-block text-xs px-2 py-0.5 rounded bg-slate-100 text-slate-700",children:"Auto"})]}),d.jsx("div",{className:"overflow-auto",children:d.jsxs("table",{className:"min-w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-left text-slate-500",children:[d.jsx("th",{className:"py-1 pr-4",children:"Feature"}),d.jsx("th",{className:"py-1",children:"Attribution"})]})}),d.jsx("tbody",{children:(n.data.explainability.features||[]).map((U,B)=>{const Z=Array.isArray(n.data.explainability.attributions)?Number(n.data.explainability.attributions[B]||0):0,ye=Math.min(1,Math.abs(Z)),ae=`${Math.round(ye*100)}%`,re=Z>=0?"bg-emerald-500":"bg-rose-500";return d.jsxs("tr",{className:"border-t",children:[d.jsx("td",{className:"py-1 pr-4",children:U}),d.jsx("td",{className:"py-1",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-40 h-2 bg-slate-200 rounded",children:d.jsx("div",{className:`${re} h-2 rounded`,style:{width:ae}})}),d.jsx("span",{className:"tabular-nums",children:Z.toFixed(4)})]})})]},B)})})]})}),Number.isFinite((K=n==null?void 0:n.data)==null?void 0:K.latencyMs)&&d.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:["Python analysis latency: ",n.data.latencyMs," ms"]})]})]}),d.jsxs(pt,{className:"md:col-span-2",children:[d.jsx(mn,{children:d.jsx(gn,{children:"Clinician Feedback"})}),d.jsx(mt,{children:d.jsx(q6,{onSubmit:async U=>{var Z;const B=await $6({text:U,advisory:n.data});t(`Feedback submitted: ${((Z=B==null?void 0:B.data)==null?void 0:Z.id)||"ok"}`,"success")}})})]}),l&&d.jsxs(pt,{className:"md:col-span-2",children:[d.jsx(mn,{children:d.jsx(gn,{children:"Nearby Ambulance Services"})}),d.jsx(mt,{children:d.jsx("ul",{className:"list-disc pl-6",children:(l.data||[]).map((U,B)=>d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:U.name})," — ",U.address," (rating: ",U.rating||"N/A",")"]},B))})})]})]}),(h||m||l&&Array.isArray(l.data))&&d.jsx("div",{className:"mt-6",children:d.jsxs(pt,{children:[d.jsx(mn,{children:d.jsx(gn,{children:"Nearby Ambulance Services"})}),d.jsxs(mt,{children:[h&&d.jsxs("div",{className:"text-slate-600 inline-flex items-center gap-2",children:[d.jsx(Ai,{})," Locating services..."]}),m&&d.jsx("div",{className:"text-red-600",children:m}),!h&&!m&&d.jsxs("ul",{className:"list-disc pl-6",children:[((l==null?void 0:l.data)||[]).map((U,B)=>d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:U.name})," — ",U.address||"Address N/A",typeof U.distance_meters=="number"?` • ${U.distance_meters} m`:"",U.rating?` • rating: ${U.rating}`:""]},B)),((l==null?void 0:l.data)||[]).length===0&&d.jsx("li",{children:"No ambulance services found nearby."})]})]})]})})]})}function Hn({className:t="",...e}){return d.jsx("input",{className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:ring-offset-0 outline-none ${t}`.trim(),...e})}function J6(){var A,N;const{user:t,login:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Bs(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,h]=D.useState(""),[f,m]=D.useState(""),[y,x]=D.useState("enter"),[E,T]=D.useState(!1),[v,_]=D.useState(""),b=td(),P=((N=(A=js().state)==null?void 0:A.from)==null?void 0:N.pathname)||"/";D.useEffect(()=>{t&&b(P,{replace:!0})},[t,P,b]);async function M(O){O.preventDefault(),_(""),T(!0);try{await e({email:i,password:a}),b(P,{replace:!0})}catch(S){_((S==null?void 0:S.message)||"Login failed")}finally{T(!1)}}async function k(){_(""),T(!0);try{await n()&&b(P,{replace:!0})}catch(O){_((O==null?void 0:O.message)||"Google sign-in failed")}finally{T(!1)}}async function w(O){O.preventDefault(),_(""),T(!0);try{await r(c),x("verify")}catch(S){_((S==null?void 0:S.message)||"Failed to send OTP")}finally{T(!1)}}async function I(O){O.preventDefault(),_(""),T(!0);try{await s(f),b(P,{replace:!0})}catch(S){_((S==null?void 0:S.message)||"Invalid OTP")}finally{T(!1)}}return t?null:d.jsx("div",{className:"grid place-items-center",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Welcome back"}),d.jsx(pt,{children:d.jsxs(mt,{children:[d.jsxs("form",{className:"space-y-4",onSubmit:M,children:[d.jsx(Hn,{type:"email",placeholder:"Email",value:i,onChange:O=>o(O.target.value),disabled:E}),d.jsx(Hn,{type:"password",placeholder:"Password",value:a,onChange:O=>l(O.target.value),disabled:E}),v&&d.jsx("p",{className:"text-red-600 text-sm",children:v}),d.jsx(Ee,{type:"submit",className:"w-full",disabled:E,children:E?"Signing in…":"Sign in"})]}),d.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),d.jsx("span",{children:"or"}),d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),d.jsx(Ee,{variant:"secondary",onClick:k,disabled:E,children:"Continue with Google"}),d.jsx("div",{id:"recaptcha-container",className:"mt-3"}),y==="enter"&&d.jsxs("form",{className:"space-y-2 mt-2",onSubmit:w,children:[d.jsx(Hn,{type:"tel",placeholder:"Indian mobile (10 digits)",value:c,onChange:O=>h(O.target.value),disabled:E}),d.jsx(Ee,{type:"submit",variant:"secondary",disabled:E||!c,children:"Send OTP"})]}),y==="verify"&&d.jsxs("form",{className:"space-y-2 mt-2",onSubmit:I,children:[d.jsx(Hn,{type:"text",placeholder:"Enter OTP",value:f,onChange:O=>m(O.target.value),disabled:E}),d.jsx(Ee,{type:"submit",variant:"secondary",disabled:E||!f,children:"Verify OTP"})]}),d.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:["No account? ",d.jsx(kg,{className:"text-blue-600",to:"/signup",children:"Sign up"})]})]})})]})})}function Z6(){const{user:t,signup:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Bs(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,h]=D.useState(""),[f,m]=D.useState(""),[y,x]=D.useState(""),[E,T]=D.useState("enter"),[v,_]=D.useState(""),[b,R]=D.useState(!1),P=td();D.useEffect(()=>{t&&P("/")},[t,P]);async function M(I){I.preventDefault(),_(""),R(!0);try{const A=await e({email:i,password:a,name:c});f?(await r(f),T("verify")):P("/")}catch(A){_((A==null?void 0:A.message)||"Signup failed")}finally{R(!1)}}async function k(I){I.preventDefault(),_(""),R(!0);try{await s(y),P("/")}catch(A){_((A==null?void 0:A.message)||"Invalid OTP")}finally{R(!1)}}async function w(){_(""),R(!0);try{await n()&&P("/")}catch(I){_((I==null?void 0:I.message)||"Google sign-in failed")}finally{R(!1)}}return t?null:d.jsx("div",{className:"grid place-items-center",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Create your account"}),d.jsx(pt,{children:d.jsxs(mt,{children:[E==="enter"?d.jsxs("form",{className:"space-y-4",onSubmit:M,children:[d.jsx(Hn,{type:"text",placeholder:"Name",value:c,onChange:I=>h(I.target.value),disabled:b}),d.jsx(Hn,{type:"email",placeholder:"Email",value:i,onChange:I=>o(I.target.value),disabled:b}),d.jsx(Hn,{type:"password",placeholder:"Password",value:a,onChange:I=>l(I.target.value),disabled:b}),d.jsx(Hn,{type:"tel",placeholder:"Indian phone (optional)",value:f,onChange:I=>m(I.target.value),disabled:b}),v&&d.jsx("p",{className:"text-red-600 text-sm",children:v}),d.jsx(Ee,{type:"submit",className:"w-full",disabled:b,children:b?"Creating…":"Create Account"})]}):d.jsxs("form",{className:"space-y-2",onSubmit:k,children:[d.jsx(Hn,{type:"text",placeholder:"Enter OTP",value:y,onChange:I=>x(I.target.value),disabled:b}),v&&d.jsx("p",{className:"text-red-600 text-sm",children:v}),d.jsx(Ee,{type:"submit",className:"w-full",disabled:b||!y,children:"Verify OTP"})]}),d.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),d.jsx("span",{children:"or"}),d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),d.jsx(Ee,{variant:"secondary",onClick:w,disabled:b,children:"Continue with Google"}),d.jsx("div",{id:"recaptcha-container"})]})})]})})}function eB(){var ie,pe,Oe,Ue,Ae;const{notify:t}=Ad(),{user:e,loading:n}=Bs(),[r,s]=D.useState({q1:"",q2:"",q2_specify:"",q3:"",q3_severity:"",q4:"",q4_specify:"",q5:"",q6_activity:"",q6_hydration:"",q6_diet:""}),[i,o]=D.useState(!1),[a,l]=D.useState(!1),[c,h]=D.useState(null),[f,m]=D.useState([]),[y,x]=D.useState([]),[E,T]=D.useState(""),[v,_]=D.useState([]),[b,R]=D.useState(""),[P,M]=D.useState(null),[k,w]=D.useState(!1),[I,A]=D.useState(3),[N,O]=D.useState("auto"),[S,te]=D.useState(!0),[ne,ee]=D.useState(!1);D.useEffect(()=>{try{const j=JSON.parse(localStorage.getItem("analysisPrefs")||"{}");j&&typeof j=="object"&&(j.topK&&A(j.topK),j.explainMethod&&O(j.explainMethod),typeof j.useScipyWinsorize=="boolean"&&te(j.useScipyWinsorize),typeof j.forceLocal=="boolean"&&ee(j.forceLocal))}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("analysisPrefs",JSON.stringify({topK:I,explainMethod:N,useScipyWinsorize:S,forceLocal:ne}))}catch{}},[I,N,S,ne]);const de=D.useMemo(()=>{const j=["ns_q1","ns_q2","ns_q3","ns_q4","ns_q5","ns_q6","ns_q7","ns_q8","ns_q9","ns_q10","ns_q11","ns_q12"];for(const oe of j)if(!r[oe])return!1;return!0},[r]);function $(){const j=new Date,oe=new Date(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0,0),me=new Date(j.getFullYear(),j.getMonth(),j.getDate()+1,0,0,0,0);return{start:nt.fromDate(oe),end:nt.fromDate(me)}}D.useEffect(()=>{async function j(){if(!Kt||!e)return;const{start:oe,end:me}=$(),Me=Ru(Kt,"users",e.uid,"dailyCheckins"),Ze=fm(Me,Aw("date",">=",oe),Aw("date","<",me));try{const it=await pm(Ze);it.empty?(l(!1),h(null)):(l(!0),h(it.docs[0].data()))}catch(it){console.error("[DailyCheckin] checkToday error:",it)}}j()},[e]);function G(j){if(!j)return .5;const oe=Ze=>({None:1,Normal:1,Mild:.7,"Slight irregularity – mild constipation/diarrhea":.7,"Slight – minor discomfort or frequency change":.7,Moderate:.4,"Moderate – noticeable, affects tasks":.4,"Moderate – interfered with tasks":.4,"Moderate – affected meals":.4,"Moderate – frequent or loose stools":.4,"Moderate – frequent or painful urination":.4,Severe:.2,"Severe – persistent pain":.2,"Severe – unable to perform daily activities":.2,"Severe – persistent vomiting":.2,"Severe – could barely perform activities":.2,"Severe – high fever (>102°F / 38.8°C)":.2,"Severe – persistent cough or severe breathing issues":.2,"Severe – persistent diarrhea/constipation":.2,"Severe – inability to urinate normally or severe discomfort":.2,"Severe – bleeding, large lesions, or non-healing wounds":.2,"Severe – fainting or inability to stand":.2})[Ze]??.5,me=[oe(j.ns_q1),oe(j.ns_q2),oe(j.ns_q3),oe(j.ns_q4),oe(j.ns_q5),oe(j.ns_q6),oe(j.ns_q7),oe(j.ns_q8),oe(j.ns_q9),oe(j.ns_q10),oe(j.ns_q11),oe(j.ns_q12)],Me=me.reduce((Ze,it)=>Ze+it,0)/me.length;return Math.max(0,Math.min(1,Number(Me.toFixed(3))))}D.useEffect(()=>{async function j(){var oe;if(!(!Kt||!e))try{const me=Ru(Kt,"users",e.uid,"dailyCheckins"),Me=fm(me,lS("date","desc"),cS(30)),it=(await pm(Me)).docs.map(ae=>({id:ae.id,...ae.data()})),K=it.slice().reverse();let U=K.map(ae=>G(ae.answers)),B=K.map(ae=>{var re;return(re=ae==null?void 0:ae.date)!=null&&re.toDate?ae.date.toDate().toLocaleDateString():""});try{if((oe=P==null?void 0:P.python)!=null&&oe.available){const ae=await H6(e.uid);ae&&ae.ok&&Array.isArray(ae.points)&&ae.points.length===K.length&&(U=ae.points,Array.isArray(ae.labels)&&ae.labels.length===K.length&&(B=ae.labels.map(re=>{try{return new Date(re).toLocaleDateString()}catch{return re}})))}}catch{}const Z=U.length;let ye="";if(Z>=6){const ae=U.slice(Z-6,Z-3).reduce((Re,he)=>Re+he,0)/3,je=U.slice(Z-3).reduce((Re,he)=>Re+he,0)/3-ae;je>.06?ye="Improving":je<-.06?ye="Worsening":ye="Stable"}m(it),x(U),_(B),T(ye)}catch(me){console.error("[DailyCheckin] loadHistory error:",me)}}j()},[e,a]),D.useEffect(()=>{let j=!0;return(async()=>{try{w(!0);const oe=await T1();j&&M(oe)}catch{j&&M({ok:!0,python:{available:!1}})}finally{j&&w(!1)}})(),()=>{j=!1}},[]);function H(j,oe){s(me=>({...me,[j]:oe}))}async function fe(j){if(j.preventDefault(),!e){t("Please log in first!","error");return}if(!Kt){t("App is not connected to Firestore. Check Firebase config.","error");return}if(a){t("You've already completed today's check-in.","info");return}if(!de){t("Please answer all required questions.","error");return}o(!0);try{const oe=Ru(Kt,"users",e.uid,"dailyCheckins"),me={date:nt.now(),dateServer:Ih(),answers:{ns_q1:r.ns_q1,ns_q2:r.ns_q2,ns_q3:r.ns_q3,ns_q4:r.ns_q4,ns_q5:r.ns_q5,ns_q6:r.ns_q6,ns_q7:r.ns_q7,ns_q8:r.ns_q8,ns_q9:r.ns_q9,ns_q10:r.ns_q10,ns_q11:r.ns_q11,ns_q12:r.ns_q12},analyzed:!1,notes:b||null,topK:Number(I),explainMethod:N,useScipyWinsorize:S,forceLocal:ne};console.log("[DailyCheckin] Submitting payload:",me),await dF(oe,me),t("Daily check-in saved!","success"),l(!0);try{B6({userId:e.uid,payload:me})}catch{}}catch(oe){console.error("[DailyCheckin] Firestore addDoc error:",oe);const me=(oe==null?void 0:oe.message)||"Error saving check-in. Please try again.";t(me,"error")}finally{o(!1)}}return d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Daily Check-in"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs(pt,{children:[d.jsx(mn,{children:d.jsx(gn,{children:"AI Service"})}),d.jsxs(mt,{children:[k?d.jsxs("div",{className:"text-slate-600 inline-flex items-center gap-2",children:[d.jsx(Ai,{size:16})," Checking service..."]}):d.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Python service: ",(ie=P==null?void 0:P.python)!=null&&ie.available?d.jsx("span",{className:"text-emerald-600 font-medium",children:"Available"}):d.jsx("span",{className:"text-slate-500",children:"Unavailable"}),((pe=P==null?void 0:P.python)==null?void 0:pe.available)&&d.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["Torch: ",String(!!((Oe=P==null?void 0:P.python)!=null&&Oe.torchAvailable))," • CUDA: ",String(!!((Ue=P==null?void 0:P.python)!=null&&Ue.cudaAvailable))]})]}),d.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Top K"}),d.jsx("input",{type:"number",min:1,max:3,value:I,onChange:j=>A(j.target.value),className:"border rounded px-2 py-1 w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Explainability"}),d.jsxs("select",{value:N,onChange:j=>O(j.target.value),className:"border rounded px-2 py-1 w-full",children:[d.jsx("option",{value:"auto",children:"Auto"}),d.jsx("option",{value:"captum",children:"Captum"}),d.jsx("option",{value:"shap",children:"SHAP"}),d.jsx("option",{value:"none",children:"None"})]})]}),d.jsxs("label",{className:"flex items-center gap-2 mt-6 md:mt-0",children:[d.jsx("input",{type:"checkbox",checked:S,onChange:j=>te(j.target.checked),className:"h-4 w-4"}),d.jsx("span",{className:"text-sm text-slate-700",children:"Use SciPy winsorization"})]})]})]})]}),d.jsxs(pt,{children:[d.jsx(mn,{children:d.jsx(gn,{children:"Today's Check-in"})}),d.jsx(mt,{children:a?d.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[d.jsx("p",{className:"font-medium",children:"You've already submitted today's check-in. Come back tomorrow."}),c&&c.answers&&d.jsxs("div",{className:"mt-2",children:[d.jsx("p",{className:"text-xs text-slate-500",children:"Your last responses:"}),d.jsxs("ul",{className:"list-disc ml-5 mt-1 space-y-1",children:[d.jsxs("li",{children:["Sleep & Energy: ",c.answers.q1]}),d.jsxs("li",{children:["Pain/Discomfort: ",c.answers.q2,c.answers.q2_specify?` (${c.answers.q2_specify})`:""]}),d.jsxs("li",{children:["Heart/Respiratory: ",c.answers.q3,c.answers.q3==="Yes"&&c.answers.q3_severity?` (${c.answers.q3_severity})`:""]}),d.jsxs("li",{children:["Digestive/Temperature: ",c.answers.q4,c.answers.q4_specify?` (${c.answers.q4_specify})`:""]}),d.jsxs("li",{children:["Mental & Emotional: ",c.answers.q5]}),d.jsxs("li",{children:["Activity: ",c.answers.q6_activity,", Hydration: ",c.answers.q6_hydration,", Diet: ",c.answers.q6_diet]})]})]})]}):d.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[d.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Daily Symptom Tracking MCQs"}),[{key:"ns_q1",title:"Stomach / Abdominal Pain Today",opts:["None","Mild – occasional discomfort","Moderate – noticeable, affects tasks","Severe – persistent pain"]},{key:"ns_q2",title:"Headache or Migraine Today",opts:["None","Mild – didn’t interfere with work","Moderate – interfered with tasks","Severe – unable to perform daily activities"]},{key:"ns_q3",title:"Nausea or Vomiting Today",opts:["None","Mild – occasional queasiness","Moderate – affected meals","Severe – persistent vomiting"]},{key:"ns_q4",title:"Fatigue or Weakness Today",opts:["None – felt energetic","Mild – slightly tired","Moderate – noticeable fatigue","Severe – could barely perform activities"]},{key:"ns_q5",title:"Fever or Chills Today",opts:["None","Mild – slight temperature fluctuation","Moderate – measurable fever (100–102°F / 37.7–38.8°C)","Severe – high fever (>102°F / 38.8°C)"]},{key:"ns_q6",title:"Cough or Shortness of Breath Today",opts:["None","Mild – occasional cough or shortness of breath","Moderate – daily cough or breathing difficulty","Severe – persistent cough or severe breathing issues"]},{key:"ns_q7",title:"Changes in Bowel Movements Today",opts:["Normal","Slight irregularity – mild constipation/diarrhea","Moderate – frequent or loose stools","Severe – persistent diarrhea/constipation"]},{key:"ns_q8",title:"Changes in Urination Today",opts:["Normal","Slight – minor discomfort or frequency change","Moderate – frequent or painful urination","Severe – inability to urinate normally or severe discomfort"]},{key:"ns_q9",title:"Skin Changes / Wounds Today",opts:["None","Minor – small rashes, bruises, or pimples","Noticeable – persistent rash, sores, or swelling","Severe – bleeding, large lesions, or non-healing wounds"]},{key:"ns_q10",title:"Dizziness or Fainting Today",opts:["None","Mild – occasional lightheadedness","Moderate – dizziness affecting tasks","Severe – fainting or inability to stand"]},{key:"ns_q11",title:"Sleep / Insomnia Today",opts:["Slept well – no trouble falling or staying asleep","Mild difficulty – took longer than usual to fall asleep","Moderate difficulty – frequent waking or poor sleep quality","Severe – hardly slept or very restless night"]},{key:"ns_q12",title:"Hot Flashes / Sudden Warmth Today",opts:["None – no unusual warmth","Mild – occasional warmth or flushing","Moderate – noticeable episodes affecting comfort","Severe – frequent or intense hot flashes"]}].map((j,oe)=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:oe+1}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:j.title})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-2",children:j.opts.map(me=>d.jsx("button",{type:"button",onClick:()=>H(j.key,me),className:`px-3 py-2 rounded-md border text-sm text-left transition ${r[j.key]===me?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:me},me))})]},j.key)),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Add notes for today (optional)"}),d.jsx(Qy,{value:b,onChange:j=>R(j.target.value),placeholder:"Type anything noteworthy about your health today..."})]}),d.jsxs("div",{className:"hidden",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"1"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sleep & Energy"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How well did you sleep last night, and how energetic do you feel today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Moderate","High","Very high"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q1",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q1===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"2"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pain or Discomfort"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you experience any unusual pain, discomfort, or bodily symptoms today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q2",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q2===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q2==="Mild"||r.q2==="Moderate"||r.q2==="Severe")&&d.jsx("input",{type:"text",placeholder:"Specify location (optional)",value:r.q2_specify,onChange:j=>H("q2_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"3"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Heart & Respiratory Health"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Chest pain, palpitations, shortness of breath, or rapid heartbeat today?"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:["No","Yes"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q3",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),r.q3==="Yes"&&d.jsx("div",{className:"mt-2 grid grid-cols-3 md:grid-cols-6 gap-2",children:["Mild","Moderate","Severe"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q3_severity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3_severity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"4"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Digestive & Temperature Symptoms"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Digestive issues (nausea, vomiting, diarrhea, constipation, heartburn) or fever/chills today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q4",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q4===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q4==="Mild"||r.q4==="Moderate"||r.q4==="Severe")&&d.jsx("input",{type:"text",placeholder:"Specify (optional)",value:r.q4_specify,onChange:j=>H("q4_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"5"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Mental & Emotional Well-being"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How would you rate your mood and stress levels today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Neutral","Good","Very good"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q5",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q5===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"6"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Physical Activity & Lifestyle"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you maintain physical activity, hydration, and balanced meals today?"}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Activity"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Light","Moderate","Intense"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q6_activity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_activity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Hydration"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q6_hydration",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_hydration===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Diet"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q6_diet",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_diet===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d.jsx("div",{className:"text-xs text-slate-500",children:"Complete all sections to enable saving."}),d.jsx(Ee,{type:"submit",disabled:i||!de||n,children:i?d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx(Ai,{size:16})," Saving..."]}):"Save today's check-in"})]})]})})]}),d.jsxs(pt,{children:[d.jsx(mn,{children:d.jsx(gn,{children:"Your recent check-ins"})}),d.jsx(mt,{children:y.length>0?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Overall trend: ",d.jsx("span",{className:`font-medium ${E==="Worsening"?"text-red-600":E==="Improving"?"text-emerald-600":"text-slate-700 dark:text-slate-200"}`,children:E||"Not enough data"})]}),d.jsx("div",{className:"bg-white dark:bg-slate-950 rounded-md p-3 border border-slate-200 dark:border-slate-800",children:d.jsx(b1,{points:y,labels:v,title:(Ae=P==null?void 0:P.python)!=null&&Ae.available?"AI risk":"Risk",yRange:{min:0,max:1}})}),d.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 text-sm",children:f.slice(0,10).map((j,oe)=>{var me;return d.jsxs("li",{className:"py-2 flex items-center justify-between",children:[d.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:(me=j==null?void 0:j.date)!=null&&me.toDate?j.date.toDate().toLocaleDateString():""}),d.jsx("span",{className:"font-medium",children:G(j.answers)})]},j.id||oe)})})]}):d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No history yet. Your check-ins will appear here."})})]}),d.jsxs(pt,{children:[d.jsx(mn,{children:d.jsx(gn,{children:"Why this matters"})}),d.jsx(mt,{children:d.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 space-y-2",children:[d.jsx("p",{children:"Your daily responses help track trends in sleep, mood, pain, and lifestyle. If you report concerning symptoms, your clinician or AI assistant can prioritize guidance."}),d.jsx("p",{children:"We limit to one check-in per day to keep insights consistent. You can update tomorrow if anything changes."})]})})]})]})]})}function tB(){var j,oe,me,Me,Ze,it;const{notify:t}=Ad(),[e,n]=D.useState(null),[r,s]=D.useState(null),[i,o]=D.useState(null),[a,l]=D.useState(!1),[c,h]=D.useState(!1),[f,m]=D.useState(0),y=D.useRef(null),[x,E]=D.useState(""),[T,v]=D.useState(!0),[_,b]=D.useState("Idle"),R=D.useRef(null),[P,M]=D.useState(""),[k,w]=D.useState(null),[I,A]=D.useState(""),[N,O]=D.useState(!1),[S,te]=D.useState("eng"),[ne,ee]=D.useState(!1);function de(K){try{const U=Array.isArray(K==null?void 0:K.labs)?K.labs:[],B=(K==null?void 0:K.meta)||{},Z=Re=>U.find(he=>(he.name||"").toLowerCase()===Re.toLowerCase()),ye=Z("hemoglobin"),ae=Z("glucose"),re=Z("creatinine"),je=[];if(B!=null&&B.date&&je.push(`Report date: ${B.date}.`),ye&&typeof ye.value=="number"){const Re=ye.value,he=ye.unit||"g/dL";je.push(`Hemoglobin is ${Re} ${he}, which reflects your blood's oxygen-carrying protein.`)}if(ae&&typeof ae.value=="number"){const Re=ae.value,he=ae.unit||"mg/dL";je.push(`Glucose is ${Re} ${he}, a snapshot of blood sugar at the time of test.`)}if(re&&typeof re.value=="number"){const Re=re.value,he=re.unit||"mg/dL";je.push(`Creatinine is ${Re} ${he}, which helps indicate kidney function.`)}return je.length?je.join(" "):"We parsed the report and extracted key details. Values will appear here once identified."}catch{return"We parsed the report and extracted key details."}}const $=D.useMemo(()=>["application/pdf","image/jpeg","image/png","image/heic","image/heif"],[]),G=10*1024*1024,H=D.useCallback(K=>K?$.includes(K.type)?K.size>G?"File is too large. Max 10MB.":null:"Unsupported file type. Use PDF, JPG, or PNG.":"No file selected",[$]),fe=D.useCallback(K=>{var Z;K.preventDefault(),K.stopPropagation(),l(!1);const U=(Z=K.dataTransfer.files)==null?void 0:Z[0],B=H(U);if(B){t(B,"error");return}n(U||null)},[t,H]),ie=D.useCallback(K=>{var Z;const U=(Z=K.target.files)==null?void 0:Z[0],B=H(U);if(B){t(B,"error"),K.target.value="";return}n(U||null)},[t,H]);D.useEffect(()=>{if(e&&e.type.startsWith("image/")){const K=URL.createObjectURL(e);return E(K),()=>URL.revokeObjectURL(K)}E("")},[e]),D.useEffect(()=>{const K=async U=>{var B;try{const Z=Array.from(((B=U.clipboardData)==null?void 0:B.items)||[]).find(re=>re.type.startsWith("image/"));if(!Z)return;const ye=Z.getAsFile();if(!ye)return;const ae=H(ye);if(ae){t(ae,"error");return}n(new File([ye],ye.name||"pasted-image.png",{type:ye.type})),t("Image pasted from clipboard","success")}catch{}};return window.addEventListener("paste",K),()=>window.removeEventListener("paste",K)},[t,H]);async function pe(K){if(K.preventDefault(),!e){t("Please select a file to process.","error");return}h(!0),m(0),M(""),b("Uploading…");try{const U=new AbortController;R.current=U;const B=await U6(e,{onProgress:Z=>m(Z),signal:U.signal});m(100),s((B==null?void 0:B.ocr)||B),o((B==null?void 0:B.extracted)||null),b("Completed"),t("Report processed successfully.","success")}catch(U){const B=(U==null?void 0:U.message)||"Failed to process the report.";M(B),w(U&&U.body?U.body:null),b(B.toLowerCase().includes("canceled")?"Canceled":"Failed"),t(B,"error")}finally{R.current=null,setTimeout(()=>h(!1),200)}}async function Oe(K){K.preventDefault();const U=(I||"").trim();if(!U){t("Enter a PDF URL to process.","error");return}h(!0),m(0),M(""),w(null),b("Processing URL…");try{const B=await F6(U,{useOcr:N?!0:null,lang:S});s((B==null?void 0:B.ocr)||B),o((B==null?void 0:B.extracted)||null),b("Completed"),t("PDF URL processed successfully.","success")}catch(B){const Z=(B==null?void 0:B.message)||"Failed to process the PDF URL.";M(Z),w(B&&B.body?B.body:null),b("Failed"),t(Z,"error")}finally{setTimeout(()=>h(!1),200)}}const Ue=D.useCallback(()=>{R.current&&R.current.abort()},[]),Ae=D.useCallback(()=>{if(!e)return;s(null),m(0),b("Retrying…"),pe({preventDefault:()=>{}})},[e]);return d.jsxs("div",{children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-1 text-transparent bg-clip-text bg-gradient-to-r from-brand-600 via-blue-600 to-blue-500",children:"Upload Report"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload a medical report to extract key details with OCR. We support PDF and image formats."})]}),d.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[d.jsxs(pt,{children:[d.jsx(mn,{className:"bg-blue-50 dark:bg-slate-800/50 border-b border-blue-100 dark:border-slate-700",children:d.jsx(gn,{className:"text-blue-900 dark:text-slate-100",children:"Select file"})}),d.jsxs(mt,{children:[d.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[d.jsxs("div",{className:`relative flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed px-6 py-10 text-center transition-colors bg-gradient-to-r ${a?"from-blue-50 via-sky-50 to-indigo-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800 border-blue-600 dark:border-blue-500":"from-brand-50 via-blue-50 to-blue-50 dark:from-slate-900 dark:via-slate-900 dark:to-slate-900 border-slate-300 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-400"}`,onDragOver:K=>{K.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:fe,role:"button",tabIndex:0,"aria-label":"Drag and drop a report file here or choose a file",onKeyDown:K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),y.current&&y.current.click())},children:[a&&d.jsx("div",{className:"absolute inset-0 bg-blue-600/10 dark:bg-blue-500/10 border-2 border-blue-600 dark:border-blue-500 rounded pointer-events-none"}),d.jsxs("div",{className:"flex items-center gap-3",children:[c?d.jsx(Ai,{size:20}):d.jsxs("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-300",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("path",{d:"M12 16V4m0 12l-4-4m4 4l4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("rect",{x:"3",y:"16",width:"18",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]}),d.jsxs("div",{className:"text-slate-800 dark:text-slate-100",children:[d.jsx("div",{className:"font-medium",children:"Drag and drop your report"}),d.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"PDF, JPG, or PNG up to 10MB. Paste an image with Ctrl/Cmd+V."})]})]}),d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"or"}),d.jsx("input",{ref:y,type:"file",accept:$.join(","),onChange:ie,className:"hidden"}),d.jsx(Ee,{type:"button",variant:"secondary",onClick:()=>y.current&&y.current.click(),disabled:c,className:"hover:bg-indigo-100",children:"Choose file"}),e&&d.jsx("div",{className:"mt-3 w-full max-w-md",children:x?d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:x,alt:"preview",className:"h-20 w-20 object-cover rounded border border-emerald-200 dark:border-emerald-700"}),d.jsxs("div",{className:"text-left",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:e.name}),d.jsx("span",{className:"rounded-full bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300 text-[10px] px-2 py-0.5 border border-emerald-200 dark:border-emerald-800",children:"IMAGE"})]}),d.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(e.size/1024)," KB"]})]})]}):d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-10 w-10 rounded bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 flex items-center justify-center font-semibold border border-rose-200 dark:border-rose-800",children:"PDF"}),d.jsxs("div",{className:"text-left",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:e.name}),d.jsx("span",{className:"rounded-full bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 text-[10px] px-2 py-0.5 border border-rose-200 dark:border-rose-800",children:"PDF"})]}),d.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(e.size/1024)," KB"]})]})]})}),c&&d.jsx("div",{className:"absolute inset-x-0 bottom-0",children:d.jsx("div",{className:"h-1 w-full bg-blue-100 dark:bg-slate-800",children:d.jsx("div",{className:"h-1 bg-brand-600 dark:bg-blue-500 transition-all",style:{width:`${f}%`}})})})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx(Ee,{type:"button",variant:"secondary",onClick:()=>{n(null),s(null),o(null),b("Idle"),y.current&&(y.current.value="")},disabled:c,children:"Remove"}),d.jsx(Ee,{type:"button",variant:"ghost",onClick:()=>y.current&&y.current.click(),disabled:c,children:"Replace"}),d.jsx("div",{className:"ml-auto"}),c?d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ee,{type:"button",variant:"danger",onClick:Ue,children:"Cancel"}),d.jsx(Ee,{type:"button",variant:"primary",disabled:!0,className:"bg-brand-600 dark:bg-brand-600",children:d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx(Ai,{size:16})," Uploading…"]})})]}):d.jsx(Ee,{type:"submit",disabled:!e,className:"bg-brand-600 hover:bg-brand-700 focus:ring-brand-600",children:"Process report"})]})]}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Or process a PDF by URL"}),d.jsxs("form",{onSubmit:Oe,className:"flex items-stretch gap-2",children:[d.jsx("input",{type:"url",placeholder:"https://example.com/report.pdf",className:"flex-1 rounded border px-3 py-2 text-sm border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-brand-200 dark:focus:ring-blue-300",value:I,onChange:K=>A(K.target.value),disabled:c}),d.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[d.jsx("input",{type:"checkbox",checked:N,onChange:K=>O(K.target.checked),disabled:c}),"Force OCR"]}),d.jsxs("select",{className:"rounded border px-2 py-2 text-xs border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",value:S,onChange:K=>te(K.target.value),disabled:c,title:"OCR language",children:[d.jsx("option",{value:"eng",children:"English (eng)"}),d.jsx("option",{value:"hin",children:"Hindi (hin)"}),d.jsx("option",{value:"eng+hin",children:"English+Hindi (eng+hin)"})]}),d.jsx(Ee,{type:"submit",variant:"secondary",disabled:c||!I.trim(),className:"hover:bg-indigo-100",children:"Process URL"})]})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 border ${_==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-200":_==="Failed"||_==="Canceled"?"bg-rose-50 text-rose-700 border-rose-200":"bg-sky-50 text-sky-700 border-sky-200"}`,children:[d.jsx("span",{className:`h-2 w-2 rounded-full ${_==="Completed"?"bg-emerald-600":_==="Failed"||_==="Canceled"?"bg-rose-600":"bg-sky-600"}`}),_]}),!!P&&!c&&d.jsx("button",{className:"text-rose-700 underline",onClick:Ae,children:"Retry"})]}),!!P&&k&&d.jsxs("div",{className:"mt-2 text-xs text-rose-700",children:[(k==null?void 0:k.acceptedTypes)&&d.jsxs("div",{children:["Supported types: ",(k.acceptedTypes||[]).join(", ")]}),(k==null?void 0:k.maxSizeMb)&&d.jsxs("div",{children:["Max file size: ",k.maxSizeMb," MB"]})]})]})]})]}),d.jsxs(pt,{children:[d.jsx(mn,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:d.jsx(gn,{className:"text-slate-900 dark:text-slate-100",children:"Summary"})}),d.jsx(mt,{className:"bg-white dark:bg-slate-900/40",children:i?d.jsx("div",{className:"space-y-4",children:(()=>{const K=Array.isArray(i==null?void 0:i.labs)?i.labs:[],U=he=>K.find($t=>($t.name||"").toLowerCase()===he.toLowerCase()),B=U("hemoglobin"),Z=U("glucose"),ye=U("creatinine"),ae=K.length,re={hemoglobin:{min:12,max:16,unit:"g/dL"},glucose:{min:70,max:140,unit:"mg/dL"},creatinine:{min:.6,max:1.3,unit:"mg/dL"}};function je(he,{min:$t,max:hn}){return typeof he!="number"?{text:"—",cls:"bg-slate-100 text-slate-700"}:he<$t?{text:"Low",cls:"bg-amber-100 text-amber-800"}:he>hn?{text:"High",cls:"bg-rose-100 text-rose-800"}:{text:"Normal",cls:"bg-emerald-100 text-emerald-800"}}function Re(he,{min:$t,max:hn}){return typeof he!="number"?.5:(Math.max($t,Math.min(hn,he))-$t)/(hn-$t)}return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[d.jsx(_o,{label:"Labs detected",value:String(ae),hint:"Parsed from OCR",accent:"blue"}),d.jsx(_o,{label:"Hemoglobin",value:B?`${B.value??"—"} ${B.unit||""}`:"—",hint:"g/dL",accent:"emerald"}),d.jsx(_o,{label:"Glucose",value:Z?`${Z.value??"—"} ${Z.unit||""}`:"—",hint:"mg/dL",accent:"amber"})]}),d.jsx("div",{className:"text-[13px] leading-6 text-slate-800 dark:text-slate-200 bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 rounded p-3",children:de(i)}),d.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Hemoglobin"}),(()=>{const he=je(B==null?void 0:B.value,re.hemoglobin);return d.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${he.cls}`,children:he.text})})()]}),d.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:d.jsx("div",{className:"h-2 bg-emerald-500 dark:bg-emerald-400 rounded",style:{width:`${Math.round(Re(B==null?void 0:B.value,re.hemoglobin)*100)}%`}})}),d.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",re.hemoglobin.min,"-",re.hemoglobin.max," ",re.hemoglobin.unit]})]}),d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Glucose"}),(()=>{const he=je(Z==null?void 0:Z.value,re.glucose);return d.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${he.cls}`,children:he.text})})()]}),d.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:d.jsx("div",{className:"h-2 bg-blue-500 dark:bg-blue-400 rounded",style:{width:`${Math.round(Re(Z==null?void 0:Z.value,re.glucose)*100)}%`}})}),d.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",re.glucose.min,"-",re.glucose.max," ",re.glucose.unit]})]}),d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Creatinine"}),(()=>{const he=je(ye==null?void 0:ye.value,re.creatinine);return d.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${he.cls}`,children:he.text})})()]}),d.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:d.jsx("div",{className:"h-2 bg-indigo-500 dark:bg-indigo-400 rounded",style:{width:`${Math.round(Re(ye==null?void 0:ye.value,re.creatinine)*100)}%`}})}),d.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",re.creatinine.min,"-",re.creatinine.max," ",re.creatinine.unit]})]})]})]})})()}):d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload or process a report to see a quick summary."})})]}),d.jsxs(pt,{children:[d.jsx(mn,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:d.jsx(gn,{className:"text-slate-900 dark:text-slate-100",children:"Extracted Fields"})}),d.jsx(mt,{className:"bg-white dark:bg-slate-900/40",children:i?d.jsxs("div",{className:"space-y-4 text-base text-slate-900 dark:text-slate-100",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Meta"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient:"})," ",d.jsx("span",{className:"font-medium",children:((j=i==null?void 0:i.meta)==null?void 0:j.patientName)||"—"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient ID:"})," ",d.jsx("span",{className:"font-medium",children:((oe=i==null?void 0:i.meta)==null?void 0:oe.patientId)||"—"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Date:"})," ",d.jsx("span",{className:"font-medium",children:((me=i==null?void 0:i.meta)==null?void 0:me.date)||"—"})]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Labs"}),(Me=i==null?void 0:i.labs)!=null&&Me.length?d.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded",children:d.jsxs("table",{className:"min-w-full text-left",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Name"}),d.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Value"}),d.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Unit"}),d.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Confidence"})]})}),d.jsx("tbody",{children:i.labs.map((K,U)=>d.jsxs("tr",{className:U%2===0?"bg-white dark:bg-slate-900":"bg-slate-50 dark:bg-slate-800/60",children:[d.jsx("td",{className:"px-3 py-2 capitalize text-slate-900 dark:text-slate-100",children:K.name}),d.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:K.value??"—"}),d.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:K.unit||"—"}),d.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:typeof K.confidence=="number"?`${Math.round(K.confidence*100)}%`:"—"})]},U))})]})}):d.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:"No labs found"})]}),(Ze=i==null?void 0:i.diagnoses)!=null&&Ze.length||(it=i==null?void 0:i.medications)!=null&&it.length?d.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Diagnoses"}),d.jsx("ul",{className:"list-disc pl-5",children:(i.diagnoses||[]).map((K,U)=>d.jsx("li",{children:K},U))})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Medications"}),d.jsx("ul",{className:"list-disc pl-5",children:(i.medications||[]).map((K,U)=>d.jsx("li",{children:K},U))})]})]}):null,d.jsx("div",{className:"flex items-center gap-3",children:d.jsx(Ee,{type:"button",variant:"primary",className:"bg-emerald-600 hover:bg-emerald-700",disabled:!i,onClick:()=>{try{const K=JSON.stringify(i,null,2);navigator.clipboard.writeText(K),t("Extracted fields copied","success")}catch{t("Copy failed","error")}},children:"Copy extracted JSON"})})]}):d.jsx("div",{className:"text-base text-slate-700 dark:text-slate-300",children:"No structured fields extracted yet."})})]}),d.jsxs(pt,{children:[d.jsxs(mn,{className:"flex items-center justify-between bg-fuchsia-50 border-b border-fuchsia-200",children:[d.jsx(gn,{className:"text-fuchsia-900",children:"OCR Result"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ee,{type:"button",variant:"ghost",onClick:async()=>{if(r)try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),t("Copied to clipboard","success")}catch{t("Copy failed","error")}},disabled:!r,children:"Copy"}),d.jsx(Ee,{type:"button",variant:"ghost",className:"hover:bg-fuchsia-100",onClick:()=>v(K=>!K),children:T?"Collapse":"Expand"})]})]}),d.jsx(mt,{children:r?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-xs text-slate-700",children:["Preview ",r!=null&&r.method?`(method: ${r.method}${typeof r.pageCount=="number"?`, pages: ${r.pageCount}`:""}${r!=null&&r.lang?`, lang: ${r.lang}`:""})`:""]}),d.jsx("div",{className:"bg-white border rounded p-3 border-slate-300 text-base leading-6 text-slate-900 whitespace-pre-wrap max-h-96 overflow-auto select-text",children:(()=>{const K=r&&(r.text||r.ocr&&r.ocr.text)||"";return(K?K.trim().slice(0,600):"")||"No text extracted"})()}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ee,{type:"button",variant:"ghost",onClick:async()=>{if(r)try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),t("Copied to clipboard","success")}catch{t("Copy failed","error")}},disabled:!r,children:"Copy JSON"}),d.jsx(Ee,{type:"button",variant:"ghost",className:"hover:bg-fuchsia-100",onClick:()=>ee(!0),disabled:!r,children:"Fullscreen"}),d.jsx(Ee,{type:"button",variant:"ghost",className:"hover:bg-fuchsia-100",onClick:()=>v(K=>!K),children:T?"Hide full JSON":"Show full JSON"})]}),T&&d.jsx("pre",{className:"bg-slate-50 dark:bg-slate-950 border rounded p-3 overflow-auto max-h-[520px] border-fuchsia-200",children:JSON.stringify(r,null,2)})]}):d.jsx("div",{className:"text-sm text-slate-600",children:"No result yet. Upload a report to see extracted data."})})]})]}),d.jsx(nB,{open:ne,onClose:()=>ee(!1),ocr:r})]})}function nB({open:t,onClose:e,ocr:n}){if(!t)return null;const r=n&&(n.text||n.ocr&&n.ocr.text)||"";return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:d.jsxs("div",{className:"bg-white rounded shadow-xl w-[90vw] h-[80vh] flex flex-col",children:[d.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[d.jsx("div",{className:"text-sm text-slate-700",children:"OCR Fullscreen Viewer"}),d.jsx("button",{className:"text-slate-700 text-sm hover:underline",onClick:e,children:"Close"})]}),d.jsx("div",{className:"p-4 overflow-auto whitespace-pre-wrap text-slate-900 text-base leading-6 select-text",children:r||"No text extracted"})]})})}function rB(){return d.jsx("footer",{className:"mt-10 border-t border-slate-200 dark:border-slate-800 py-8 text-center text-sm text-slate-500 dark:text-slate-400 bg-white/60 dark:bg-slate-900/60 backdrop-blur",children:d.jsxs("div",{className:"mx-auto max-w-7xl px-4",children:["© ",new Date().getFullYear()," AgenticSprit"]})})}function sB(){return d.jsxs("div",{className:"text-center py-16",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Page not found"}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"The page you are looking for doesn’t exist."}),d.jsx(kg,{className:"text-blue-600 hover:underline",to:"/",children:"Go back home"})]})}function cu({children:t}){const{user:e,loading:n}=Bs(),r=js();return n?d.jsx("div",{className:"flex items-center justify-center py-16",children:d.jsx(Ai,{size:24})}):e?t:d.jsx(mP,{to:"/login",replace:!0,state:{from:r}})}function Cm(t){return new Date(t).toLocaleString()}function iB({compact:t=!1}){const{user:e}=Bs(),{notify:n}=Ad(),r=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:messages`,[e==null?void 0:e.uid]),s=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useCheckins`,[e==null?void 0:e.uid]),i=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useAllCheckins`,[e==null?void 0:e.uid]),[o,a]=D.useState([]),[l,c]=D.useState(""),[h,f]=D.useState(!1),[m,y]=D.useState(null),[x,E]=D.useState({}),T=D.useRef(null),v=D.useRef(null),_=D.useMemo(()=>["Summarize my last diagnosis","What red flags should I watch?","Explain this lab result in simple terms","What are next steps for follow-up?"],[]),[b,R]=D.useState(!0),[P,M]=D.useState(!1);D.useEffect(()=>{try{const S=localStorage.getItem(r);if(S){const ee=JSON.parse(S);Array.isArray(ee)?a(ee):a([])}else a([]);const te=localStorage.getItem(s);R(te==="true"||te==="false"?te==="true":!0);const ne=localStorage.getItem(i);M(ne==="true"||ne==="false"?ne==="true":!1)}catch{a([])}E({})},[r,s,i]),D.useEffect(()=>{var S;(S=T.current)==null||S.scrollTo({top:T.current.scrollHeight});try{localStorage.setItem(r,JSON.stringify(o))}catch{}},[o,r]),D.useEffect(()=>{try{localStorage.setItem(s,String(b))}catch{}},[b,s]),D.useEffect(()=>{try{localStorage.setItem(i,String(P))}catch{}},[P,i]);const k=D.useMemo(()=>l.trim().length>0&&!h,[l,h]),w=D.useMemo(()=>{const S=[...o].reverse().find(te=>te.role==="assistant");return!!(S&&typeof S.content=="string"&&S.content.toLowerCase().includes("gemini api key missing"))},[o]);async function I(){var te,ne;if(!k)return;const S=[...o,{role:"user",content:l,createdAt:Date.now()}];a(S),c(""),f(!0);try{const ee={messages:S,options:{maxOutputTokens:512,useCheckins:b,checkinLimit:7,useAllCheckins:P,checkinMax:365,userId:(e==null?void 0:e.uid)||void 0}},de=new AbortController;y(de);const $=await W6(ee,{signal:de.signal}),G=((te=$==null?void 0:$.data)==null?void 0:te.error)||((ne=$==null?void 0:$.data)==null?void 0:ne.reply)||"...";a(H=>H.concat({role:"assistant",content:G,createdAt:Date.now()}))}catch(ee){const de=(ee==null?void 0:ee.message)||"Network error";n(de,"error")}finally{f(!1),y(null)}}function A(){a([])}function N(S){var te;try{(te=navigator.clipboard)==null||te.writeText(S)}catch{}}D.useEffect(()=>{const S=v.current;S&&(S.style.height="auto",S.style.height=Math.min(S.scrollHeight,120)+"px")},[l]);function O(S){if(typeof S!="string"||S.length===0)return null;const te=S.split(/\r?\n/);function ne(G,H){const fe=[];let ie=G,pe=0;const Oe=/\*\*([^*]+)\*\*/,Ue=/(^|[^*])\*([^*]+)\*(?!\*)/;for(;ie.length>0;){const Ae=Oe.exec(ie),j=Ue.exec(ie);let oe=ie.length,me=null,Me=null;if(Ae&&(!j||Ae.index<=j.index)?(oe=Ae.index,me="bold",Me=Ae):j&&(oe=j.index+(j[1]?j[1].length:0),me="italic",Me=j),!me){fe.push(d.jsx("span",{children:ie},`${H}-t-${pe++}`));break}if(oe>0&&fe.push(d.jsx("span",{children:ie.slice(0,oe)},`${H}-t-${pe++}`)),me==="bold")fe.push(d.jsx("strong",{children:Me[1]},`${H}-b-${pe++}`)),ie=ie.slice(Me.index+Me[0].length);else if(me==="italic"){const Ze=Me[1]||"";Ze&&fe.push(d.jsx("span",{children:Ze},`${H}-l-${pe++}`)),fe.push(d.jsx("em",{children:Me[2]},`${H}-i-${pe++}`));const it=Me.index+Ze.length+Me[0].length-(Ze?0:1);ie=ie.slice(it)}}return fe}const ee=[];let de=[];const $=()=>{de.length>0&&(ee.push(d.jsx("ul",{className:"list-disc pl-5 my-2 space-y-1",children:de.map((G,H)=>d.jsx("li",{children:ne(G.replace(/^\s*[*-]\s+/,""),`li-${H}`)},`li-${H}`))},`ul-${ee.length}`)),de=[])};for(let G=0;G<te.length;G++){const H=te[G];if(/^\s*[*-]\s+/.test(H)){de.push(H);continue}$(),H.trim()===""?ee.push(d.jsx("div",{className:"h-2"},`br-${G}`)):ee.push(d.jsx("p",{children:ne(H,`p-${G}`)},`p-${G}`))}return $(),d.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:ee})}return d.jsxs("div",{className:`${t?"flex h-full flex-col gap-0":"flex flex-col gap-3"}`,children:[w&&d.jsxs("div",{className:"rounded-md border border-amber-300 bg-amber-50 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200 px-3 py-2 text-xs",children:["Gemini API key is not configured on the backend. Set ",d.jsx("code",{children:"GEMINI_API_KEY"})," and restart the server."]}),!t&&d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),"Gemini · Online"]})}),d.jsxs("div",{className:"flex items-center gap-2",children:[h?d.jsx(Ee,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>m==null?void 0:m.abort(),children:"Stop"}):null,d.jsx(Ee,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:A,disabled:o.length===0&&!h,children:"Clear"})]})]}),d.jsxs("div",{ref:T,className:`${t?"flex-1 min-h-0 overflow-auto p-3":"max-h-[70vh] min-h-[55vh] overflow-auto p-4"} rounded-lg border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-950/70 backdrop-blur`,children:[o.length===0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-500 mb-3",children:"Start the conversation by asking a question, or try one of these:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map((S,te)=>d.jsx("button",{onClick:()=>c(S),className:"px-3 py-1.5 rounded-full text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-100 border border-slate-200 dark:border-slate-700",children:S},te))})]}),o.map((S,te)=>d.jsx("div",{className:`mb-3 flex ${S.role==="user"?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`flex items-end gap-2 ${S.role==="user"?"flex-row-reverse":"flex-row"}`,children:[d.jsx("div",{className:`hidden lg:flex h-8 w-8 shrink-0 rounded-full items-center justify-center text-xs font-semibold ${S.role==="user"?"bg-brand-600 text-white":"bg-slate-200 text-slate-700 dark:bg-slate-800 dark:text-slate-100"}`,children:S.role==="user"?"You":"AI"}),d.jsxs("div",{children:[(()=>{const ne=`${S.createdAt||te}-${te}`;S.role==="assistant"&&typeof S.content=="string"&&S.content.length>500;const ee=!!x[ne];return d.jsxs("div",{className:`group relative max-w-[95%] sm:max-w-[92%] md:max-w-[90%] lg:max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-subtle break-words whitespace-pre-wrap leading-normal ${S.role==="user"?"bg-brand-600 text-white rounded-br-md":"bg-slate-100/90 dark:bg-slate-900/80 text-slate-900 dark:text-slate-100 rounded-bl-md"}`,children:[d.jsx("div",{className:"max-h-60 overflow-y-auto pr-1",children:S.role==="assistant"?d.jsx("div",{className:`chat-content select-text ${ee?"":"line-clamp-10"}`,children:O(S.content)}):d.jsx("div",{className:"break-words whitespace-pre-wrap",children:S.content})}),d.jsx("button",{onClick:()=>N(S.content),title:"Copy",className:`absolute -top-2 ${S.role==="user"?"-left-2":"-right-2"} hidden group-hover:inline-flex items-center justify-center h-6 w-6 rounded-full bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600`,children:"⧉"})]})})(),d.jsxs("div",{className:`mt-1 flex items-center gap-2 ${S.role==="user"?"justify-end":"justify-start"}`,children:[d.jsx("div",{className:`text-[10px] ${S.role==="user"?"text-slate-300":"text-slate-500 dark:text-slate-400"}`,children:S.createdAt?Cm(S.createdAt):""}),S.role==="assistant"&&typeof S.content=="string"&&S.content.length>500&&(()=>{const ne=`${S.createdAt||te}-${te}`,ee=!!x[ne];return d.jsx("button",{className:"text-[10px] px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>E(de=>({...de,[ne]:!de[ne]})),children:ee?"Collapse":"Expand"})})()]})]})]})},te)),h&&d.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-500 text-sm",children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-600"})]}),"Thinking…"]})]}),d.jsxs("div",{className:`${t?"sticky bottom-0 z-10 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur pt-3":""}`,children:[d.jsxs("div",{className:"flex gap-2 items-end",children:[d.jsx(Qy,{ref:v,value:l,onChange:S=>c(S.target.value.slice(0,1e3)),onKeyDown:S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),I())},placeholder:"Type your message",rows:t?2:3}),d.jsxs("div",{className:"flex flex-col items-end gap-1",children:[d.jsx(Ee,{onClick:I,disabled:!k,children:"Send"}),d.jsxs("div",{className:"text-[10px] text-slate-500",children:[l.length,"/1000"]})]})]}),d.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[d.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:b,onChange:S=>R(S.target.checked)}),"Use my daily check-ins for answers"]}),d.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[d.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:P,onChange:S=>M(S.target.checked),disabled:!b}),"Include all check-ins (compact)"]})]}),t?d.jsxs("div",{className:"flex items-center gap-2",children:[h?d.jsx(Ee,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>m==null?void 0:m.abort(),children:"Stop"}):null,d.jsx(Ee,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:A,disabled:o.length===0&&!h,children:"Clear"})]}):null]})]})]})}function oB(){const[t,e]=D.useState(!1),[n,r]=D.useState(!1);D.useEffect(()=>{try{const o=localStorage.getItem("chat:widgetOpen");o!=null&&e(o==="true");const a=localStorage.getItem("chat:messages");if(a){const l=JSON.parse(a);r(Array.isArray(l)&&l.length>0)}}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("chat:widgetOpen",String(t))}catch{}},[t]);const s=D.useCallback(()=>e(o=>!o),[]),i=D.useCallback(()=>e(!1),[]);return D.useEffect(()=>{const o=a=>{a.key==="Escape"&&i(),(a.altKey||a.metaKey)&&a.key==="/"&&s()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,i]),d.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!t&&d.jsx(Ee,{onClick:s,className:`h-14 w-14 rounded-full shadow-lg p-0 ring-2 ring-brand-600 bg-brand-600 text-white hover:bg-brand-700 focus:outline-none focus:ring-4 focus:ring-brand-300 transition ${n?"":"animate-pulse"}`,"aria-label":"Open chat",title:"Open chat (Alt+/)",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-7 w-7 m-auto",children:[d.jsx("path",{d:"M7.5 8.25h9a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1 0-1.5Zm0 4.5h5.25a.75.75 0 0 1 0 1.5H7.5a.75.75 0 0 1 0-1.5Z"}),d.jsx("path",{fillRule:"evenodd",d:"M4.5 3.75A2.25 2.25 0 0 0 2.25 6v8.25A2.25 2.25 0 0 0 4.5 16.5H6v3.19a.75.75 0 0 0 1.28.53l3.72-3.72h6.5A2.25 2.25 0 0 0 20.25 14.25V6A2.25 2.25 0 0 0 18 3.75h-13.5Z",clipRule:"evenodd"})]})}),t&&d.jsxs("div",{className:"relative w-[500px] max-w-[96vw] h-[60vh] sm:h-[65vh] md:h-[72vh] lg:h-[75vh] rounded-xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),d.jsx("span",{className:"font-medium",children:"Assistive Chat"})]}),d.jsx("button",{onClick:i,"aria-label":"Close chat",className:"h-7 w-7 rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 flex items-center justify-center text-xs",title:"Close",children:"✕"})]}),d.jsx("div",{className:"h-full flex flex-col",children:d.jsx("div",{className:"flex-1 p-4 overflow-auto",children:d.jsx(iB,{compact:!0})})})]})]})}function aB(){const{user:t}=Bs(),[e,n]=D.useState(""),[r,s]=D.useState(""),[i,o]=D.useState(!1),[a,l]=D.useState(""),[c,h]=D.useState(null),[f,m]=D.useState(!1),[y,x]=D.useState(""),[E,T]=D.useState(""),[v,_]=D.useState(null);function b(P){try{if(!P)return null;if(typeof P.toDate=="function")return P.toDate();if(typeof P.seconds=="number")return new Date(P.seconds*1e3);const M=new Date(P);return Number.isNaN(M.getTime())?null:M}catch{return null}}D.useEffect(()=>{let P=!0;async function M(){if(!(!t||!Kt))try{const k=Th(Kt,"users",t.uid),w=await fS(k),I=w.exists()?w.data():{};if(!P)return;n(t.displayName||I.displayName||""),s(t.photoURL||I.photoURL||""),_({uid:t.uid,email:t.email||I.email||null,phoneNumber:t.phoneNumber||I.phoneNumber||null,providerIds:(t.providerData||[]).map(A=>A.providerId),role:I.role||"user",createdAt:b(I.createdAt)||null,updatedAt:b(I.updatedAt)||null})}catch{}}return M(),()=>{P=!1}},[t]);async function R(P){if(P.preventDefault(),!!t){o(!0),l("");try{let M=r||null;if(c&&Sh){m(!0);try{const w=c.name&&c.name.includes(".")?c.name.split(".").pop():"jpg",I=`avatars/${t.uid}/${Date.now()}.${w}`,A=E4(Sh,I);await x4(A,c,{contentType:c.type||"image/jpeg"}),M=await b4(A)}catch(w){throw console.error("[Profile] Upload failed:",w),w}finally{m(!1)}}await ok(Tt.currentUser,{displayName:e||null,photoURL:M});const k=Th(Kt,"users",t.uid);await mm(k,{displayName:e||null,photoURL:M,updatedAt:Ih()},{merge:!0}),l("Profile updated")}catch(M){l((M==null?void 0:M.message)||"Failed to update"),console.error("[Profile] Save failed:",M)}finally{o(!1)}}}return d.jsx("div",{className:"grid place-items-center",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Your profile"}),d.jsx(pt,{children:d.jsx(mt,{children:d.jsxs("form",{className:"space-y-4",onSubmit:R,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[r?d.jsx("img",{src:r,alt:"avatar",className:"w-12 h-12 rounded-full border border-slate-200 dark:border-slate-700"}):d.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-600 text-white grid place-items-center text-lg",children:(e||(t==null?void 0:t.email)||"?").slice(0,1).toUpperCase()}),d.jsx("div",{className:"text-sm text-slate-500",children:"Update your display info"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Display name"}),d.jsx(Hn,{type:"text",value:e,onChange:P=>n(P.target.value),disabled:i})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Upload photo"}),d.jsx("input",{type:"file",accept:"image/*",onChange:P=>{x("");const M=P.target.files&&P.target.files[0]?P.target.files[0]:null;if(!M){h(null),T("");return}const k=["image/jpeg","image/png","image/webp"],w=5*1024*1024;if(!k.includes(M.type)){x("Only JPG, PNG or WebP images are allowed."),h(null),T("");return}if(M.size>w){x("File too large. Max size is 5MB."),h(null),T("");return}h(M);const I=new FileReader;I.onload=()=>T(String(I.result||"")),I.readAsDataURL(M)},disabled:i,className:"block w-full text-sm text-slate-700 dark:text-slate-200"}),d.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPEG/PNG up to ~5MB."}),E?d.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[d.jsx("img",{src:E,alt:"preview",className:"w-16 h-16 rounded-full border border-slate-200 dark:border-slate-700 object-cover"}),d.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>{h(null),T(""),x("")},children:"Remove"})]}):null,y?d.jsx("p",{className:"text-sm text-red-600 mt-1",children:y}):null]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Or photo URL"}),d.jsx(Hn,{type:"url",value:r,onChange:P=>s(P.target.value),disabled:i})]}),f?d.jsx("p",{className:"text-sm text-slate-500",children:"Uploading photo…"}):null,a?d.jsx("p",{className:`text-sm ${a==="Profile updated"?"text-green-600":"text-red-600"}`,children:a}):null,d.jsx(Ee,{type:"submit",className:"w-full",disabled:i||f,children:i?"Saving…":"Save changes"})]})})}),v?d.jsx(pt,{className:"mt-4",children:d.jsx(mt,{children:d.jsxs("div",{className:"space-y-2 text-sm text-slate-700 dark:text-slate-300",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Email"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.email||"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"User ID"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.uid})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Phone"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.phoneNumber||"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Providers"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:(v.providerIds||[]).length?v.providerIds.join(", "):"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Role"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.role})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Created"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.createdAt?Cm(v.createdAt):"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Updated"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.updatedAt?Cm(v.updatedAt):"—"})]})]})})}):null]})})}function lB(){return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[d.jsx(D4,{}),d.jsx("main",{className:"mx-auto max-w-7xl px-4 py-6",children:d.jsxs(yP,{children:[d.jsx(Qr,{path:"/",element:d.jsx(cu,{children:d.jsx(X6,{})})}),d.jsx(Qr,{path:"/daily-checkin",element:d.jsx(cu,{children:d.jsx(eB,{})})}),d.jsx(Qr,{path:"/upload-report",element:d.jsx(cu,{children:d.jsx(tB,{})})}),d.jsx(Qr,{path:"/profile",element:d.jsx(cu,{children:d.jsx(aB,{})})}),d.jsx(Qr,{path:"/login",element:d.jsx(J6,{})}),d.jsx(Qr,{path:"/signup",element:d.jsx(Z6,{})}),d.jsx(Qr,{path:"*",element:d.jsx(sB,{})})]})}),d.jsx(rB,{}),d.jsx(oB,{})]})}aT(document.getElementById("root")).render(d.jsx(PP,{children:d.jsx(K6,{children:d.jsx(N4,{children:d.jsx(kP,{children:d.jsx(lB,{})})})})}));
