var W1=Object.defineProperty;var H1=(t,e,n)=>e in t?W1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>H1(t,typeof e!="symbol"?e+"":e,n);function q1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function K1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $x={exports:{}},_h={},Wx={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),G1=Symbol.for("react.portal"),Q1=Symbol.for("react.fragment"),Y1=Symbol.for("react.strict_mode"),X1=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),Z1=Symbol.for("react.context"),eA=Symbol.for("react.forward_ref"),tA=Symbol.for("react.suspense"),nA=Symbol.for("react.memo"),rA=Symbol.for("react.lazy"),M_=Symbol.iterator;function iA(t){return t===null||typeof t!="object"?null:(t=M_&&t[M_]||t["@@iterator"],typeof t=="function"?t:null)}var Hx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qx=Object.assign,Kx={};function vo(t,e,n){this.props=t,this.context=e,this.refs=Kx,this.updater=n||Hx}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gx(){}Gx.prototype=vo.prototype;function mm(t,e,n){this.props=t,this.context=e,this.refs=Kx,this.updater=n||Hx}var gm=mm.prototype=new Gx;gm.constructor=mm;qx(gm,vo.prototype);gm.isPureReactComponent=!0;var L_=Array.isArray,Qx=Object.prototype.hasOwnProperty,ym={current:null},Yx={key:!0,ref:!0,__self:!0,__source:!0};function Xx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Qx.call(e,r)&&!Yx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Al,type:t,key:s,ref:o,props:i,_owner:ym.current}}function sA(t,e){return{$$typeof:Al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _m(t){return typeof t=="object"&&t!==null&&t.$$typeof===Al}function oA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var V_=/\/+/g;function Dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oA(""+t.key):e.toString(36)}function qc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Al:case G1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Dd(o,0):r,L_(i)?(n="",t!=null&&(n=t.replace(V_,"$&/")+"/"),qc(i,e,n,"",function(c){return c})):i!=null&&(_m(i)&&(i=sA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(V_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",L_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Dd(s,a);o+=qc(s,e,n,l,i)}else if(l=iA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Dd(s,a++),o+=qc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ac(t,e,n){if(t==null)return t;var r=[],i=0;return qc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function aA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ot={current:null},Kc={transition:null},lA={ReactCurrentDispatcher:Ot,ReactCurrentBatchConfig:Kc,ReactCurrentOwner:ym};function Jx(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:ac,forEach:function(t,e,n){ac(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ac(t,function(){e++}),e},toArray:function(t){return ac(t,function(e){return e})||[]},only:function(t){if(!_m(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=vo;se.Fragment=Q1;se.Profiler=X1;se.PureComponent=mm;se.StrictMode=Y1;se.Suspense=tA;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA;se.act=Jx;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ym.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Qx.call(e,l)&&!Yx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Al,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:Z1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:J1,_context:t},t.Consumer=t};se.createElement=Xx;se.createFactory=function(t){var e=Xx.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:eA,render:t}};se.isValidElement=_m;se.lazy=function(t){return{$$typeof:rA,_payload:{_status:-1,_result:t},_init:aA}};se.memo=function(t,e){return{$$typeof:nA,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Kc.transition;Kc.transition={};try{t()}finally{Kc.transition=e}};se.unstable_act=Jx;se.useCallback=function(t,e){return Ot.current.useCallback(t,e)};se.useContext=function(t){return Ot.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Ot.current.useDeferredValue(t)};se.useEffect=function(t,e){return Ot.current.useEffect(t,e)};se.useId=function(){return Ot.current.useId()};se.useImperativeHandle=function(t,e,n){return Ot.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Ot.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Ot.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Ot.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Ot.current.useReducer(t,e,n)};se.useRef=function(t){return Ot.current.useRef(t)};se.useState=function(t){return Ot.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Ot.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Ot.current.useTransition()};se.version="18.3.1";Wx.exports=se;var O=Wx.exports;const vh=K1(O),cA=q1({__proto__:null,default:vh},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA=O,hA=Symbol.for("react.element"),dA=Symbol.for("react.fragment"),fA=Object.prototype.hasOwnProperty,pA=uA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mA={key:!0,ref:!0,__self:!0,__source:!0};function Zx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fA.call(e,r)&&!mA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hA,type:t,key:s,ref:o,props:i,_owner:pA.current}}_h.Fragment=dA;_h.jsx=Zx;_h.jsxs=Zx;$x.exports=_h;var m=$x.exports,eE={exports:{}},on={},tE={exports:{}},nE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var V=z.length;z.push(Q);e:for(;0<V;){var J=V-1>>>1,Y=z[J];if(0<i(Y,Q))z[J]=Q,z[V]=Y,V=J;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],V=z.pop();if(V!==Q){z[0]=V;e:for(var J=0,Y=z.length,he=Y>>>1;J<he;){var Ce=2*(J+1)-1,Re=z[Ce],be=Ce+1,ft=z[be];if(0>i(Re,V))be<Y&&0>i(ft,Re)?(z[J]=ft,z[be]=V,J=be):(z[J]=Re,z[Ce]=V,J=Ce);else if(be<Y&&0>i(ft,V))z[J]=ft,z[be]=V,J=be;else break e}}return Q}function i(z,Q){var V=z.sortIndex-Q.sortIndex;return V!==0?V:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,_=!1,E=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=z)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function R(z){if(b=!1,w(z),!E)if(n(l)!==null)E=!0,re(D);else{var Q=n(c);Q!==null&&ue(R,Q.startTime-z)}}function D(z,Q){E=!1,b&&(b=!1,v(x),x=-1),_=!0;var V=p;try{for(w(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||z&&!P());){var J=d.callback;if(typeof J=="function"){d.callback=null,p=d.priorityLevel;var Y=J(d.expirationTime<=Q);Q=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(l)&&r(l),w(Q)}else r(l);d=n(l)}if(d!==null)var he=!0;else{var Ce=n(c);Ce!==null&&ue(R,Ce.startTime-Q),he=!1}return he}finally{d=null,p=V,_=!1}}var M=!1,I=null,x=-1,k=5,A=-1;function P(){return!(t.unstable_now()-A<k)}function N(){if(I!==null){var z=t.unstable_now();A=z;var Q=!0;try{Q=I(!0,z)}finally{Q?C():(M=!1,I=null)}}else M=!1}var C;if(typeof y=="function")C=function(){y(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,G=Z.port2;Z.port1.onmessage=N,C=function(){G.postMessage(null)}}else C=function(){T(N,0)};function re(z){I=z,M||(M=!0,C())}function ue(z,Q){x=T(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){E||_||(E=!0,re(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var V=p;p=Q;try{return z()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=p;p=z;try{return Q()}finally{p=V}},t.unstable_scheduleCallback=function(z,Q,V){var J=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=V+Y,z={id:h++,callback:Q,priorityLevel:z,startTime:V,expirationTime:Y,sortIndex:-1},V>J?(z.sortIndex=V,e(c,z),n(l)===null&&z===n(c)&&(b?(v(x),x=-1):b=!0,ue(R,V-J))):(z.sortIndex=Y,e(l,z),E||_||(E=!0,re(D))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var Q=p;return function(){var V=p;p=Q;try{return z.apply(this,arguments)}finally{p=V}}}})(nE);tE.exports=nE;var gA=tE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA=O,sn=gA;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rE=new Set,Ka={};function fs(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(Ka[t]=e,t=0;t<e.length;t++)rE.add(e[t])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=Object.prototype.hasOwnProperty,_A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j_={},F_={};function vA(t){return Lf.call(F_,t)?!0:Lf.call(j_,t)?!1:_A.test(t)?F_[t]=!0:(j_[t]=!0,!1)}function wA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xA(t,e,n,r){if(e===null||typeof e>"u"||wA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vm=/[\-:]([a-z])/g;function wm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vm,wm);ht[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vm,wm);ht[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vm,wm);ht[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xm(t,e,n,r){var i=ht.hasOwnProperty(e)?ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xA(e,n,i,r)&&(n=null),r||i===null?vA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tr=yA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lc=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),Ps=Symbol.for("react.fragment"),Em=Symbol.for("react.strict_mode"),Vf=Symbol.for("react.profiler"),iE=Symbol.for("react.provider"),sE=Symbol.for("react.context"),bm=Symbol.for("react.forward_ref"),jf=Symbol.for("react.suspense"),Ff=Symbol.for("react.suspense_list"),Tm=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),oE=Symbol.for("react.offscreen"),U_=Symbol.iterator;function Ko(t){return t===null||typeof t!="object"?null:(t=U_&&t[U_]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Od;function la(t){if(Od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Od=e&&e[1]||""}return`
`+Od+t}var Md=!1;function Ld(t,e){if(!t||Md)return"";Md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?la(t):""}function EA(t){switch(t.tag){case 5:return la(t.type);case 16:return la("Lazy");case 13:return la("Suspense");case 19:return la("SuspenseList");case 0:case 2:case 15:return t=Ld(t.type,!1),t;case 11:return t=Ld(t.type.render,!1),t;case 1:return t=Ld(t.type,!0),t;default:return""}}function Uf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ps:return"Fragment";case Rs:return"Portal";case Vf:return"Profiler";case Em:return"StrictMode";case jf:return"Suspense";case Ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sE:return(t.displayName||"Context")+".Consumer";case iE:return(t._context.displayName||"Context")+".Provider";case bm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tm:return e=t.displayName||null,e!==null?e:Uf(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return Uf(t(e))}catch{}}return null}function bA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uf(e);case 8:return e===Em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TA(t){var e=aE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cc(t){t._valueTracker||(t._valueTracker=TA(t))}function lE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bf(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function B_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ai(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cE(t,e){e=e.checked,e!=null&&xm(t,"checked",e,!1)}function zf(t,e){cE(t,e);var n=ai(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$f(t,e.type,n):e.hasOwnProperty("defaultValue")&&$f(t,e.type,ai(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function z_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $f(t,e,n){(e!=="number"||yu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ca=Array.isArray;function zs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ai(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ca(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ai(n)}}function uE(t,e){var n=ai(e.value),r=ai(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function W_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uc,dE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uc=uc||document.createElement("div"),uc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IA=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(t){IA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ta[e]=Ta[t]})});function fE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ta.hasOwnProperty(t)&&Ta[t]?(""+e).trim():e+"px"}function pE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var SA=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qf(t,e){if(e){if(SA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Kf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gf=null;function Im(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qf=null,$s=null,Ws=null;function H_(t){if(t=Pl(t)){if(typeof Qf!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Th(e),Qf(t.stateNode,t.type,e))}}function mE(t){$s?Ws?Ws.push(t):Ws=[t]:$s=t}function gE(){if($s){var t=$s,e=Ws;if(Ws=$s=null,H_(t),e)for(t=0;t<e.length;t++)H_(e[t])}}function yE(t,e){return t(e)}function _E(){}var Vd=!1;function vE(t,e,n){if(Vd)return t(e,n);Vd=!0;try{return yE(t,e,n)}finally{Vd=!1,($s!==null||Ws!==null)&&(_E(),gE())}}function Qa(t,e){var n=t.stateNode;if(n===null)return null;var r=Th(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Yf=!1;if(gr)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Yf=!1}function kA(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ia=!1,_u=null,vu=!1,Xf=null,AA={onError:function(t){Ia=!0,_u=t}};function CA(t,e,n,r,i,s,o,a,l){Ia=!1,_u=null,kA.apply(AA,arguments)}function RA(t,e,n,r,i,s,o,a,l){if(CA.apply(this,arguments),Ia){if(Ia){var c=_u;Ia=!1,_u=null}else throw Error(B(198));vu||(vu=!0,Xf=c)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q_(t){if(ps(t)!==t)throw Error(B(188))}function PA(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return q_(i),t;if(s===r)return q_(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function xE(t){return t=PA(t),t!==null?EE(t):null}function EE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EE(t);if(e!==null)return e;t=t.sibling}return null}var bE=sn.unstable_scheduleCallback,K_=sn.unstable_cancelCallback,NA=sn.unstable_shouldYield,DA=sn.unstable_requestPaint,We=sn.unstable_now,OA=sn.unstable_getCurrentPriorityLevel,Sm=sn.unstable_ImmediatePriority,TE=sn.unstable_UserBlockingPriority,wu=sn.unstable_NormalPriority,MA=sn.unstable_LowPriority,IE=sn.unstable_IdlePriority,wh=null,Kn=null;function LA(t){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(wh,t,void 0,(t.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:FA,VA=Math.log,jA=Math.LN2;function FA(t){return t>>>=0,t===0?32:31-(VA(t)/jA|0)|0}var hc=64,dc=4194304;function ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ua(a):(s&=o,s!==0&&(r=ua(s)))}else o=n&~i,o!==0?r=ua(o):s!==0&&(r=ua(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pn(e),i=1<<n,r|=t[n],e&=~i;return r}function UA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=UA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SE(){var t=hc;return hc<<=1,!(hc&4194240)&&(hc=64),t}function jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pn(e),t[e]=n}function zA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Pn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function km(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function kE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AE,Am,CE,RE,PE,Zf=!1,fc=[],Gr=null,Qr=null,Yr=null,Ya=new Map,Xa=new Map,Lr=[],$A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G_(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(e.pointerId)}}function Qo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pl(e),e!==null&&Am(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WA(t,e,n,r,i){switch(e){case"focusin":return Gr=Qo(Gr,t,e,n,r,i),!0;case"dragenter":return Qr=Qo(Qr,t,e,n,r,i),!0;case"mouseover":return Yr=Qo(Yr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ya.set(s,Qo(Ya.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xa.set(s,Qo(Xa.get(s)||null,t,e,n,r,i)),!0}return!1}function NE(t){var e=Fi(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=wE(n),e!==null){t.blockedOn=e,PE(t.priority,function(){CE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ep(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gf=r,n.target.dispatchEvent(r),Gf=null}else return e=Pl(n),e!==null&&Am(e),t.blockedOn=n,!1;e.shift()}return!0}function Q_(t,e,n){Gc(t)&&n.delete(e)}function HA(){Zf=!1,Gr!==null&&Gc(Gr)&&(Gr=null),Qr!==null&&Gc(Qr)&&(Qr=null),Yr!==null&&Gc(Yr)&&(Yr=null),Ya.forEach(Q_),Xa.forEach(Q_)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,Zf||(Zf=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,HA)))}function Ja(t){function e(i){return Yo(i,t)}if(0<fc.length){Yo(fc[0],t);for(var n=1;n<fc.length;n++){var r=fc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gr!==null&&Yo(Gr,t),Qr!==null&&Yo(Qr,t),Yr!==null&&Yo(Yr,t),Ya.forEach(e),Xa.forEach(e),n=0;n<Lr.length;n++)r=Lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)NE(n),n.blockedOn===null&&Lr.shift()}var Hs=Tr.ReactCurrentBatchConfig,Eu=!0;function qA(t,e,n,r){var i=ye,s=Hs.transition;Hs.transition=null;try{ye=1,Cm(t,e,n,r)}finally{ye=i,Hs.transition=s}}function KA(t,e,n,r){var i=ye,s=Hs.transition;Hs.transition=null;try{ye=4,Cm(t,e,n,r)}finally{ye=i,Hs.transition=s}}function Cm(t,e,n,r){if(Eu){var i=ep(t,e,n,r);if(i===null)Gd(t,e,r,bu,n),G_(t,r);else if(WA(i,t,e,n,r))r.stopPropagation();else if(G_(t,r),e&4&&-1<$A.indexOf(t)){for(;i!==null;){var s=Pl(i);if(s!==null&&AE(s),s=ep(t,e,n,r),s===null&&Gd(t,e,r,bu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Gd(t,e,r,null,n)}}var bu=null;function ep(t,e,n,r){if(bu=null,t=Im(r),t=Fi(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bu=t,null}function DE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OA()){case Sm:return 1;case TE:return 4;case wu:case MA:return 16;case IE:return 536870912;default:return 16}default:return 16}}var zr=null,Rm=null,Qc=null;function OE(){if(Qc)return Qc;var t,e=Rm,n=e.length,r,i="value"in zr?zr.value:zr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Qc=i.slice(t,1<r?1-r:void 0)}function Yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pc(){return!0}function Y_(){return!1}function an(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pc:Y_,this.isPropagationStopped=Y_,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pm=an(wo),Rl=Me({},wo,{view:0,detail:0}),GA=an(Rl),Fd,Ud,Xo,xh=Me({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xo&&(Xo&&t.type==="mousemove"?(Fd=t.screenX-Xo.screenX,Ud=t.screenY-Xo.screenY):Ud=Fd=0,Xo=t),Fd)},movementY:function(t){return"movementY"in t?t.movementY:Ud}}),X_=an(xh),QA=Me({},xh,{dataTransfer:0}),YA=an(QA),XA=Me({},Rl,{relatedTarget:0}),Bd=an(XA),JA=Me({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),ZA=an(JA),eC=Me({},wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tC=an(eC),nC=Me({},wo,{data:0}),J_=an(nC),rC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sC[t])?!!e[t]:!1}function Nm(){return oC}var aC=Me({},Rl,{key:function(t){if(t.key){var e=rC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nm,charCode:function(t){return t.type==="keypress"?Yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lC=an(aC),cC=Me({},xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z_=an(cC),uC=Me({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nm}),hC=an(uC),dC=Me({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),fC=an(dC),pC=Me({},xh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mC=an(pC),gC=[9,13,27,32],Dm=gr&&"CompositionEvent"in window,Sa=null;gr&&"documentMode"in document&&(Sa=document.documentMode);var yC=gr&&"TextEvent"in window&&!Sa,ME=gr&&(!Dm||Sa&&8<Sa&&11>=Sa),ev=" ",tv=!1;function LE(t,e){switch(t){case"keyup":return gC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function _C(t,e){switch(t){case"compositionend":return VE(e);case"keypress":return e.which!==32?null:(tv=!0,ev);case"textInput":return t=e.data,t===ev&&tv?null:t;default:return null}}function vC(t,e){if(Ns)return t==="compositionend"||!Dm&&LE(t,e)?(t=OE(),Qc=Rm=zr=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ME&&e.locale!=="ko"?null:e.data;default:return null}}var wC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wC[t.type]:e==="textarea"}function jE(t,e,n,r){mE(r),e=Tu(e,"onChange"),0<e.length&&(n=new Pm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ka=null,Za=null;function xC(t){QE(t,0)}function Eh(t){var e=Ms(t);if(lE(e))return t}function EC(t,e){if(t==="change")return e}var FE=!1;if(gr){var zd;if(gr){var $d="oninput"in document;if(!$d){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),$d=typeof rv.oninput=="function"}zd=$d}else zd=!1;FE=zd&&(!document.documentMode||9<document.documentMode)}function iv(){ka&&(ka.detachEvent("onpropertychange",UE),Za=ka=null)}function UE(t){if(t.propertyName==="value"&&Eh(Za)){var e=[];jE(e,Za,t,Im(t)),vE(xC,e)}}function bC(t,e,n){t==="focusin"?(iv(),ka=e,Za=n,ka.attachEvent("onpropertychange",UE)):t==="focusout"&&iv()}function TC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eh(Za)}function IC(t,e){if(t==="click")return Eh(e)}function SC(t,e){if(t==="input"||t==="change")return Eh(e)}function kC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var On=typeof Object.is=="function"?Object.is:kC;function el(t,e){if(On(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lf.call(e,i)||!On(t[i],e[i]))return!1}return!0}function sv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ov(t,e){var n=sv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sv(n)}}function BE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zE(){for(var t=window,e=yu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yu(t.document)}return e}function Om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AC(t){var e=zE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BE(n.ownerDocument.documentElement,n)){if(r!==null&&Om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ov(n,s);var o=ov(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CC=gr&&"documentMode"in document&&11>=document.documentMode,Ds=null,tp=null,Aa=null,np=!1;function av(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;np||Ds==null||Ds!==yu(r)||(r=Ds,"selectionStart"in r&&Om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Aa&&el(Aa,r)||(Aa=r,r=Tu(tp,"onSelect"),0<r.length&&(e=new Pm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function mc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Os={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},Wd={},$E={};gr&&($E=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function bh(t){if(Wd[t])return Wd[t];if(!Os[t])return t;var e=Os[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $E)return Wd[t]=e[n];return t}var WE=bh("animationend"),HE=bh("animationiteration"),qE=bh("animationstart"),KE=bh("transitionend"),GE=new Map,lv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(t,e){GE.set(t,e),fs(e,[t])}for(var Hd=0;Hd<lv.length;Hd++){var qd=lv[Hd],RC=qd.toLowerCase(),PC=qd[0].toUpperCase()+qd.slice(1);mi(RC,"on"+PC)}mi(WE,"onAnimationEnd");mi(HE,"onAnimationIteration");mi(qE,"onAnimationStart");mi("dblclick","onDoubleClick");mi("focusin","onFocus");mi("focusout","onBlur");mi(KE,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function cv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RA(r,e,void 0,t),t.currentTarget=null}function QE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;cv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;cv(i,a,c),s=l}}}if(vu)throw t=Xf,vu=!1,Xf=null,t}function Ie(t,e){var n=e[ap];n===void 0&&(n=e[ap]=new Set);var r=t+"__bubble";n.has(r)||(YE(e,t,2,!1),n.add(r))}function Kd(t,e,n){var r=0;e&&(r|=4),YE(n,t,r,e)}var gc="_reactListening"+Math.random().toString(36).slice(2);function tl(t){if(!t[gc]){t[gc]=!0,rE.forEach(function(n){n!=="selectionchange"&&(NC.has(n)||Kd(n,!1,t),Kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gc]||(e[gc]=!0,Kd("selectionchange",!1,e))}}function YE(t,e,n,r){switch(DE(e)){case 1:var i=qA;break;case 4:i=KA;break;default:i=Cm}n=i.bind(null,e,n,t),i=void 0,!Yf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Fi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vE(function(){var c=s,h=Im(n),d=[];e:{var p=GE.get(t);if(p!==void 0){var _=Pm,E=t;switch(t){case"keypress":if(Yc(n)===0)break e;case"keydown":case"keyup":_=lC;break;case"focusin":E="focus",_=Bd;break;case"focusout":E="blur",_=Bd;break;case"beforeblur":case"afterblur":_=Bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=X_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=YA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=hC;break;case WE:case HE:case qE:_=ZA;break;case KE:_=fC;break;case"scroll":_=GA;break;case"wheel":_=mC;break;case"copy":case"cut":case"paste":_=tC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Z_}var b=(e&4)!==0,T=!b&&t==="scroll",v=b?p!==null?p+"Capture":null:p;b=[];for(var y=c,w;y!==null;){w=y;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,v!==null&&(R=Qa(y,v),R!=null&&b.push(nl(y,R,w)))),T)break;y=y.return}0<b.length&&(p=new _(p,E,null,n,h),d.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Gf&&(E=n.relatedTarget||n.fromElement)&&(Fi(E)||E[yr]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(E=n.relatedTarget||n.toElement,_=c,E=E?Fi(E):null,E!==null&&(T=ps(E),E!==T||E.tag!==5&&E.tag!==6)&&(E=null)):(_=null,E=c),_!==E)){if(b=X_,R="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=Z_,R="onPointerLeave",v="onPointerEnter",y="pointer"),T=_==null?p:Ms(_),w=E==null?p:Ms(E),p=new b(R,y+"leave",_,n,h),p.target=T,p.relatedTarget=w,R=null,Fi(h)===c&&(b=new b(v,y+"enter",E,n,h),b.target=w,b.relatedTarget=T,R=b),T=R,_&&E)t:{for(b=_,v=E,y=0,w=b;w;w=Is(w))y++;for(w=0,R=v;R;R=Is(R))w++;for(;0<y-w;)b=Is(b),y--;for(;0<w-y;)v=Is(v),w--;for(;y--;){if(b===v||v!==null&&b===v.alternate)break t;b=Is(b),v=Is(v)}b=null}else b=null;_!==null&&uv(d,p,_,b,!1),E!==null&&T!==null&&uv(d,T,E,b,!0)}}e:{if(p=c?Ms(c):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var D=EC;else if(nv(p))if(FE)D=SC;else{D=TC;var M=bC}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=IC);if(D&&(D=D(t,c))){jE(d,D,n,h);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&$f(p,"number",p.value)}switch(M=c?Ms(c):window,t){case"focusin":(nv(M)||M.contentEditable==="true")&&(Ds=M,tp=c,Aa=null);break;case"focusout":Aa=tp=Ds=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,av(d,n,h);break;case"selectionchange":if(CC)break;case"keydown":case"keyup":av(d,n,h)}var I;if(Dm)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ns?LE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(ME&&n.locale!=="ko"&&(Ns||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ns&&(I=OE()):(zr=h,Rm="value"in zr?zr.value:zr.textContent,Ns=!0)),M=Tu(c,x),0<M.length&&(x=new J_(x,t,null,n,h),d.push({event:x,listeners:M}),I?x.data=I:(I=VE(n),I!==null&&(x.data=I)))),(I=yC?_C(t,n):vC(t,n))&&(c=Tu(c,"onBeforeInput"),0<c.length&&(h=new J_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}QE(d,e)})}function nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qa(t,n),s!=null&&r.unshift(nl(t,s,i)),s=Qa(t,e),s!=null&&r.push(nl(t,s,i))),t=t.return}return r}function Is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Qa(n,s),l!=null&&o.unshift(nl(n,l,a))):i||(l=Qa(n,s),l!=null&&o.push(nl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DC=/\r\n?/g,OC=/\u0000|\uFFFD/g;function hv(t){return(typeof t=="string"?t:""+t).replace(DC,`
`).replace(OC,"")}function yc(t,e,n){if(e=hv(e),hv(t)!==e&&n)throw Error(B(425))}function Iu(){}var rp=null,ip=null;function sp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var op=typeof setTimeout=="function"?setTimeout:void 0,MC=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,LC=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(t){return dv.resolve(null).then(t).catch(VC)}:op;function VC(t){setTimeout(function(){throw t})}function Qd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ja(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ja(e)}function Xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+xo,rl="__reactProps$"+xo,yr="__reactContainer$"+xo,ap="__reactEvents$"+xo,jC="__reactListeners$"+xo,FC="__reactHandles$"+xo;function Fi(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yr]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fv(t);t!==null;){if(n=t[Hn])return n;t=fv(t)}return e}t=n,n=t.parentNode}return null}function Pl(t){return t=t[Hn]||t[yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Th(t){return t[rl]||null}var lp=[],Ls=-1;function gi(t){return{current:t}}function Ae(t){0>Ls||(t.current=lp[Ls],lp[Ls]=null,Ls--)}function xe(t,e){Ls++,lp[Ls]=t.current,t.current=e}var li={},It=gi(li),Bt=gi(!1),Ji=li;function eo(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function Su(){Ae(Bt),Ae(It)}function pv(t,e,n){if(It.current!==li)throw Error(B(168));xe(It,e),xe(Bt,n)}function XE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,bA(t)||"Unknown",i));return Me({},n,r)}function ku(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,Ji=It.current,xe(It,t),xe(Bt,Bt.current),!0}function mv(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=XE(t,e,Ji),r.__reactInternalMemoizedMergedChildContext=t,Ae(Bt),Ae(It),xe(It,t)):Ae(Bt),xe(Bt,n)}var or=null,Ih=!1,Yd=!1;function JE(t){or===null?or=[t]:or.push(t)}function UC(t){Ih=!0,JE(t)}function yi(){if(!Yd&&or!==null){Yd=!0;var t=0,e=ye;try{var n=or;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}or=null,Ih=!1}catch(i){throw or!==null&&(or=or.slice(t+1)),bE(Sm,yi),i}finally{ye=e,Yd=!1}}return null}var Vs=[],js=0,Au=null,Cu=0,un=[],hn=0,Zi=null,cr=1,ur="";function Di(t,e){Vs[js++]=Cu,Vs[js++]=Au,Au=t,Cu=e}function ZE(t,e,n){un[hn++]=cr,un[hn++]=ur,un[hn++]=Zi,Zi=t;var r=cr;t=ur;var i=32-Pn(r)-1;r&=~(1<<i),n+=1;var s=32-Pn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cr=1<<32-Pn(e)+i|n<<i|r,ur=s+t}else cr=1<<s|n<<i|r,ur=t}function Mm(t){t.return!==null&&(Di(t,1),ZE(t,1,0))}function Lm(t){for(;t===Au;)Au=Vs[--js],Vs[js]=null,Cu=Vs[--js],Vs[js]=null;for(;t===Zi;)Zi=un[--hn],un[hn]=null,ur=un[--hn],un[hn]=null,cr=un[--hn],un[hn]=null}var nn=null,Zt=null,Pe=!1,kn=null;function eb(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,Zt=Xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zi!==null?{id:cr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,Zt=null,!0):!1;default:return!1}}function cp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function up(t){if(Pe){var e=Zt;if(e){var n=e;if(!gv(t,e)){if(cp(t))throw Error(B(418));e=Xr(n.nextSibling);var r=nn;e&&gv(t,e)?eb(r,n):(t.flags=t.flags&-4097|2,Pe=!1,nn=t)}}else{if(cp(t))throw Error(B(418));t.flags=t.flags&-4097|2,Pe=!1,nn=t}}}function yv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function _c(t){if(t!==nn)return!1;if(!Pe)return yv(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sp(t.type,t.memoizedProps)),e&&(e=Zt)){if(cp(t))throw tb(),Error(B(418));for(;e;)eb(t,e),e=Xr(e.nextSibling)}if(yv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=Xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=nn?Xr(t.stateNode.nextSibling):null;return!0}function tb(){for(var t=Zt;t;)t=Xr(t.nextSibling)}function to(){Zt=nn=null,Pe=!1}function Vm(t){kn===null?kn=[t]:kn.push(t)}var BC=Tr.ReactCurrentBatchConfig;function Jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function vc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _v(t){var e=t._init;return e(t._payload)}function nb(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=ti(v,y),v.index=0,v.sibling=null,v}function s(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,R){return y===null||y.tag!==6?(y=rf(w,v.mode,R),y.return=v,y):(y=i(y,w),y.return=v,y)}function l(v,y,w,R){var D=w.type;return D===Ps?h(v,y,w.props.children,R,w.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Or&&_v(D)===y.type)?(R=i(y,w.props),R.ref=Jo(v,y,w),R.return=v,R):(R=ru(w.type,w.key,w.props,null,v.mode,R),R.ref=Jo(v,y,w),R.return=v,R)}function c(v,y,w,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=sf(w,v.mode,R),y.return=v,y):(y=i(y,w.children||[]),y.return=v,y)}function h(v,y,w,R,D){return y===null||y.tag!==7?(y=Gi(w,v.mode,R,D),y.return=v,y):(y=i(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rf(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case lc:return w=ru(y.type,y.key,y.props,null,v.mode,w),w.ref=Jo(v,null,y),w.return=v,w;case Rs:return y=sf(y,v.mode,w),y.return=v,y;case Or:var R=y._init;return d(v,R(y._payload),w)}if(ca(y)||Ko(y))return y=Gi(y,v.mode,w,null),y.return=v,y;vc(v,y)}return null}function p(v,y,w,R){var D=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:a(v,y,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lc:return w.key===D?l(v,y,w,R):null;case Rs:return w.key===D?c(v,y,w,R):null;case Or:return D=w._init,p(v,y,D(w._payload),R)}if(ca(w)||Ko(w))return D!==null?null:h(v,y,w,R,null);vc(v,w)}return null}function _(v,y,w,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(w)||null,a(y,v,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case lc:return v=v.get(R.key===null?w:R.key)||null,l(y,v,R,D);case Rs:return v=v.get(R.key===null?w:R.key)||null,c(y,v,R,D);case Or:var M=R._init;return _(v,y,w,M(R._payload),D)}if(ca(R)||Ko(R))return v=v.get(w)||null,h(y,v,R,D,null);vc(y,R)}return null}function E(v,y,w,R){for(var D=null,M=null,I=y,x=y=0,k=null;I!==null&&x<w.length;x++){I.index>x?(k=I,I=null):k=I.sibling;var A=p(v,I,w[x],R);if(A===null){I===null&&(I=k);break}t&&I&&A.alternate===null&&e(v,I),y=s(A,y,x),M===null?D=A:M.sibling=A,M=A,I=k}if(x===w.length)return n(v,I),Pe&&Di(v,x),D;if(I===null){for(;x<w.length;x++)I=d(v,w[x],R),I!==null&&(y=s(I,y,x),M===null?D=I:M.sibling=I,M=I);return Pe&&Di(v,x),D}for(I=r(v,I);x<w.length;x++)k=_(I,v,x,w[x],R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?x:k.key),y=s(k,y,x),M===null?D=k:M.sibling=k,M=k);return t&&I.forEach(function(P){return e(v,P)}),Pe&&Di(v,x),D}function b(v,y,w,R){var D=Ko(w);if(typeof D!="function")throw Error(B(150));if(w=D.call(w),w==null)throw Error(B(151));for(var M=D=null,I=y,x=y=0,k=null,A=w.next();I!==null&&!A.done;x++,A=w.next()){I.index>x?(k=I,I=null):k=I.sibling;var P=p(v,I,A.value,R);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(v,I),y=s(P,y,x),M===null?D=P:M.sibling=P,M=P,I=k}if(A.done)return n(v,I),Pe&&Di(v,x),D;if(I===null){for(;!A.done;x++,A=w.next())A=d(v,A.value,R),A!==null&&(y=s(A,y,x),M===null?D=A:M.sibling=A,M=A);return Pe&&Di(v,x),D}for(I=r(v,I);!A.done;x++,A=w.next())A=_(I,v,x,A.value,R),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?x:A.key),y=s(A,y,x),M===null?D=A:M.sibling=A,M=A);return t&&I.forEach(function(N){return e(v,N)}),Pe&&Di(v,x),D}function T(v,y,w,R){if(typeof w=="object"&&w!==null&&w.type===Ps&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case lc:e:{for(var D=w.key,M=y;M!==null;){if(M.key===D){if(D=w.type,D===Ps){if(M.tag===7){n(v,M.sibling),y=i(M,w.props.children),y.return=v,v=y;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Or&&_v(D)===M.type){n(v,M.sibling),y=i(M,w.props),y.ref=Jo(v,M,w),y.return=v,v=y;break e}n(v,M);break}else e(v,M);M=M.sibling}w.type===Ps?(y=Gi(w.props.children,v.mode,R,w.key),y.return=v,v=y):(R=ru(w.type,w.key,w.props,null,v.mode,R),R.ref=Jo(v,y,w),R.return=v,v=R)}return o(v);case Rs:e:{for(M=w.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=i(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=sf(w,v.mode,R),y.return=v,v=y}return o(v);case Or:return M=w._init,T(v,y,M(w._payload),R)}if(ca(w))return E(v,y,w,R);if(Ko(w))return b(v,y,w,R);vc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,w),y.return=v,v=y):(n(v,y),y=rf(w,v.mode,R),y.return=v,v=y),o(v)):n(v,y)}return T}var no=nb(!0),rb=nb(!1),Ru=gi(null),Pu=null,Fs=null,jm=null;function Fm(){jm=Fs=Pu=null}function Um(t){var e=Ru.current;Ae(Ru),t._currentValue=e}function hp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qs(t,e){Pu=t,jm=Fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(jm!==t)if(t={context:t,memoizedValue:e,next:null},Fs===null){if(Pu===null)throw Error(B(308));Fs=t,Pu.dependencies={lanes:0,firstContext:t}}else Fs=Fs.next=t;return e}var Ui=null;function Bm(t){Ui===null?Ui=[t]:Ui.push(t)}function ib(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bm(e)):(n.next=i.next,i.next=n),e.interleaved=n,_r(t,r)}function _r(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mr=!1;function zm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_r(t,n)}return i=r.interleaved,i===null?(e.next=e,Bm(r)):(e.next=i.next,i.next=e),r.interleaved=e,_r(t,n)}function Xc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,km(t,n)}}function vv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nu(t,e,n,r){var i=t.updateQueue;Mr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,b=a;switch(p=e,_=n,b.tag){case 1:if(E=b.payload,typeof E=="function"){d=E.call(_,d,p);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=b.payload,p=typeof E=="function"?E.call(_,d,p):E,p==null)break e;d=Me({},d,p);break e;case 2:Mr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=d):h=h.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ts|=o,t.lanes=o,t.memoizedState=d}}function wv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Nl={},Gn=gi(Nl),il=gi(Nl),sl=gi(Nl);function Bi(t){if(t===Nl)throw Error(B(174));return t}function $m(t,e){switch(xe(sl,e),xe(il,t),xe(Gn,Nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hf(e,t)}Ae(Gn),xe(Gn,e)}function ro(){Ae(Gn),Ae(il),Ae(sl)}function ob(t){Bi(sl.current);var e=Bi(Gn.current),n=Hf(e,t.type);e!==n&&(xe(il,t),xe(Gn,n))}function Wm(t){il.current===t&&(Ae(Gn),Ae(il))}var Ne=gi(0);function Du(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xd=[];function Hm(){for(var t=0;t<Xd.length;t++)Xd[t]._workInProgressVersionPrimary=null;Xd.length=0}var Jc=Tr.ReactCurrentDispatcher,Jd=Tr.ReactCurrentBatchConfig,es=0,De=null,Je=null,nt=null,Ou=!1,Ca=!1,ol=0,zC=0;function yt(){throw Error(B(321))}function qm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!On(t[n],e[n]))return!1;return!0}function Km(t,e,n,r,i,s){if(es=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jc.current=t===null||t.memoizedState===null?qC:KC,t=n(r,i),Ca){s=0;do{if(Ca=!1,ol=0,25<=s)throw Error(B(301));s+=1,nt=Je=null,e.updateQueue=null,Jc.current=GC,t=n(r,i)}while(Ca)}if(Jc.current=Mu,e=Je!==null&&Je.next!==null,es=0,nt=Je=De=null,Ou=!1,e)throw Error(B(300));return t}function Gm(){var t=ol!==0;return ol=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?De.memoizedState=nt=t:nt=nt.next=t,nt}function yn(){if(Je===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=nt===null?De.memoizedState:nt.next;if(e!==null)nt=e,Je=t;else{if(t===null)throw Error(B(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},nt===null?De.memoizedState=nt=t:nt=nt.next=t}return nt}function al(t,e){return typeof e=="function"?e(t):e}function Zd(t){var e=yn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((es&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,De.lanes|=h,ts|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,On(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,ts|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ef(t){var e=yn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);On(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ab(){}function lb(t,e){var n=De,r=yn(),i=e(),s=!On(r.memoizedState,i);if(s&&(r.memoizedState=i,Ft=!0),r=r.queue,Qm(hb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,ll(9,ub.bind(null,n,r,i,e),void 0,null),rt===null)throw Error(B(349));es&30||cb(n,e,i)}return i}function cb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ub(t,e,n,r){e.value=n,e.getSnapshot=r,db(e)&&fb(t)}function hb(t,e,n){return n(function(){db(e)&&fb(t)})}function db(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!On(t,n)}catch{return!0}}function fb(t){var e=_r(t,1);e!==null&&Nn(e,t,1,-1)}function xv(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:t},e.queue=t,t=t.dispatch=HC.bind(null,De,t),[e.memoizedState,t]}function ll(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pb(){return yn().memoizedState}function Zc(t,e,n,r){var i=$n();De.flags|=t,i.memoizedState=ll(1|e,n,void 0,r===void 0?null:r)}function Sh(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(Je!==null){var o=Je.memoizedState;if(s=o.destroy,r!==null&&qm(r,o.deps)){i.memoizedState=ll(e,n,s,r);return}}De.flags|=t,i.memoizedState=ll(1|e,n,s,r)}function Ev(t,e){return Zc(8390656,8,t,e)}function Qm(t,e){return Sh(2048,8,t,e)}function mb(t,e){return Sh(4,2,t,e)}function gb(t,e){return Sh(4,4,t,e)}function yb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _b(t,e,n){return n=n!=null?n.concat([t]):null,Sh(4,4,yb.bind(null,e,t),n)}function Ym(){}function vb(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wb(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xb(t,e,n){return es&21?(On(n,e)||(n=SE(),De.lanes|=n,ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function $C(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Jd.transition;Jd.transition={};try{t(!1),e()}finally{ye=n,Jd.transition=r}}function Eb(){return yn().memoizedState}function WC(t,e,n){var r=ei(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bb(t))Tb(e,n);else if(n=ib(t,e,n,r),n!==null){var i=Dt();Nn(n,t,r,i),Ib(n,e,r)}}function HC(t,e,n){var r=ei(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bb(t))Tb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,On(a,o)){var l=e.interleaved;l===null?(i.next=i,Bm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=ib(t,e,i,r),n!==null&&(i=Dt(),Nn(n,t,r,i),Ib(n,e,r))}}function bb(t){var e=t.alternate;return t===De||e!==null&&e===De}function Tb(t,e){Ca=Ou=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ib(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,km(t,n)}}var Mu={readContext:gn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},qC={readContext:gn,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:Ev,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zc(4194308,4,yb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zc(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WC.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:xv,useDebugValue:Ym,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=xv(!1),e=t[0];return t=$C.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=$n();if(Pe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),rt===null)throw Error(B(349));es&30||cb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ev(hb.bind(null,r,s,t),[t]),r.flags|=2048,ll(9,ub.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$n(),e=rt.identifierPrefix;if(Pe){var n=ur,r=cr;n=(r&~(1<<32-Pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ol++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KC={readContext:gn,useCallback:vb,useContext:gn,useEffect:Qm,useImperativeHandle:_b,useInsertionEffect:mb,useLayoutEffect:gb,useMemo:wb,useReducer:Zd,useRef:pb,useState:function(){return Zd(al)},useDebugValue:Ym,useDeferredValue:function(t){var e=yn();return xb(e,Je.memoizedState,t)},useTransition:function(){var t=Zd(al)[0],e=yn().memoizedState;return[t,e]},useMutableSource:ab,useSyncExternalStore:lb,useId:Eb,unstable_isNewReconciler:!1},GC={readContext:gn,useCallback:vb,useContext:gn,useEffect:Qm,useImperativeHandle:_b,useInsertionEffect:mb,useLayoutEffect:gb,useMemo:wb,useReducer:ef,useRef:pb,useState:function(){return ef(al)},useDebugValue:Ym,useDeferredValue:function(t){var e=yn();return Je===null?e.memoizedState=t:xb(e,Je.memoizedState,t)},useTransition:function(){var t=ef(al)[0],e=yn().memoizedState;return[t,e]},useMutableSource:ab,useSyncExternalStore:lb,useId:Eb,unstable_isNewReconciler:!1};function In(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kh={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=ei(t),s=pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Jr(t,s,i),e!==null&&(Nn(e,t,i,r),Xc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=ei(t),s=pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Jr(t,s,i),e!==null&&(Nn(e,t,i,r),Xc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=ei(t),i=pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jr(t,i,r),e!==null&&(Nn(e,t,r,n),Xc(e,t,r))}};function bv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!el(n,r)||!el(i,s):!0}function Sb(t,e,n){var r=!1,i=li,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=zt(e)?Ji:It.current,r=e.contextTypes,s=(r=r!=null)?eo(t,i):li),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Tv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kh.enqueueReplaceState(e,e.state,null)}function fp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=zt(e)?Ji:It.current,i.context=eo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kh.enqueueReplaceState(i,i.state,null),Nu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function io(t,e){try{var n="",r=e;do n+=EA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QC=typeof WeakMap=="function"?WeakMap:Map;function kb(t,e,n){n=pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vu||(Vu=!0,Tp=r),pp(t,e)},n}function Ab(t,e,n){n=pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pp(t,e),typeof r!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Iv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cR.bind(null,t,e,n),e.then(t,t))}function Sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pr(-1,1),e.tag=2,Jr(n,e,1))),n.lanes|=1),t)}var YC=Tr.ReactCurrentOwner,Ft=!1;function Rt(t,e,n,r){e.child=t===null?rb(e,null,n,r):no(e,t.child,n,r)}function Av(t,e,n,r,i){n=n.render;var s=e.ref;return qs(e,i),r=Km(t,e,n,r,s,i),n=Gm(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vr(t,e,i)):(Pe&&n&&Mm(e),e.flags|=1,Rt(t,e,r,i),e.child)}function Cv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ig(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Cb(t,e,s,r,i)):(t=ru(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(o,r)&&t.ref===e.ref)return vr(t,e,i)}return e.flags|=1,t=ti(s,r),t.ref=e.ref,t.return=e,e.child=t}function Cb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(el(s,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,vr(t,e,i)}return mp(t,e,n,r,i)}function Rb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Bs,Xt),Xt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Bs,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(Bs,Xt),Xt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xe(Bs,Xt),Xt|=r;return Rt(t,e,i,n),e.child}function Pb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mp(t,e,n,r,i){var s=zt(n)?Ji:It.current;return s=eo(e,s),qs(e,i),n=Km(t,e,n,r,s,i),r=Gm(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vr(t,e,i)):(Pe&&r&&Mm(e),e.flags|=1,Rt(t,e,n,i),e.child)}function Rv(t,e,n,r,i){if(zt(n)){var s=!0;ku(e)}else s=!1;if(qs(e,i),e.stateNode===null)eu(t,e),Sb(e,n,r),fp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gn(c):(c=zt(n)?Ji:It.current,c=eo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Tv(e,o,r,c),Mr=!1;var p=e.memoizedState;o.state=p,Nu(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Bt.current||Mr?(typeof h=="function"&&(dp(e,n,h,r),l=e.memoizedState),(a=Mr||bv(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:In(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gn(l):(l=zt(n)?Ji:It.current,l=eo(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&Tv(e,o,r,l),Mr=!1,p=e.memoizedState,o.state=p,Nu(e,r,o,i);var E=e.memoizedState;a!==d||p!==E||Bt.current||Mr?(typeof _=="function"&&(dp(e,n,_,r),E=e.memoizedState),(c=Mr||bv(e,n,c,r,p,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return gp(t,e,n,r,s,i)}function gp(t,e,n,r,i,s){Pb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mv(e,n,!1),vr(t,e,s);r=e.stateNode,YC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=no(e,t.child,null,s),e.child=no(e,null,a,s)):Rt(t,e,a,s),e.memoizedState=r.state,i&&mv(e,n,!0),e.child}function Nb(t){var e=t.stateNode;e.pendingContext?pv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pv(t,e.context,!1),$m(t,e.containerInfo)}function Pv(t,e,n,r,i){return to(),Vm(i),e.flags|=256,Rt(t,e,n,r),e.child}var yp={dehydrated:null,treeContext:null,retryLane:0};function _p(t){return{baseLanes:t,cachePool:null,transitions:null}}function Db(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(Ne,i&1),t===null)return up(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Rh(o,r,0,null),t=Gi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_p(n),e.memoizedState=yp,t):Xm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return XC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ti(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ti(a,s):(s=Gi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?_p(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yp,r}return s=t.child,t=s.sibling,r=ti(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xm(t,e){return e=Rh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wc(t,e,n,r){return r!==null&&Vm(r),no(e,t.child,null,n),t=Xm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=tf(Error(B(422))),wc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Rh({mode:"visible",children:r.children},i,0,null),s=Gi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&no(e,t.child,null,o),e.child.memoizedState=_p(o),e.memoizedState=yp,s);if(!(e.mode&1))return wc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=tf(s,r,void 0),wc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ft||a){if(r=rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_r(t,i),Nn(r,t,i,-1))}return rg(),r=tf(Error(B(421))),wc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Zt=Xr(i.nextSibling),nn=e,Pe=!0,kn=null,t!==null&&(un[hn++]=cr,un[hn++]=ur,un[hn++]=Zi,cr=t.id,ur=t.overflow,Zi=e),e=Xm(e,r.children),e.flags|=4096,e)}function Nv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hp(t.return,e,n)}function nf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ob(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nv(t,n,e);else if(t.tag===19)Nv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Du(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Du(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nf(e,!0,n,null,s);break;case"together":nf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JC(t,e,n){switch(e.tag){case 3:Nb(e),to();break;case 5:ob(e);break;case 1:zt(e.type)&&ku(e);break;case 4:$m(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(Ru,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Db(t,e,n):(xe(Ne,Ne.current&1),t=vr(t,e,n),t!==null?t.sibling:null);xe(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ob(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Rb(t,e,n)}return vr(t,e,n)}var Mb,vp,Lb,Vb;Mb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vp=function(){};Lb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Bi(Gn.current);var s=null;switch(n){case"input":i=Bf(t,i),r=Bf(t,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=Wf(t,i),r=Wf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Iu)}qf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ka.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ka.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ie("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Vb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZC(t,e,n){var r=e.pendingProps;switch(Lm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return zt(e.type)&&Su(),_t(e),null;case 3:return r=e.stateNode,ro(),Ae(Bt),Ae(It),Hm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_c(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(kp(kn),kn=null))),vp(t,e),_t(e),null;case 5:Wm(e);var i=Bi(sl.current);if(n=e.type,t!==null&&e.stateNode!=null)Lb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return _t(e),null}if(t=Bi(Gn.current),_c(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[rl]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<ha.length;i++)Ie(ha[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":B_(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":$_(r,s),Ie("invalid",r)}qf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&yc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&yc(r.textContent,a,t),i=["children",""+a]):Ka.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":cc(r),z_(r,s,!0);break;case"textarea":cc(r),W_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Iu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[rl]=r,Mb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kf(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<ha.length;i++)Ie(ha[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":B_(t,r),i=Bf(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":$_(t,r),i=Wf(t,r),Ie("invalid",t);break;default:i=r}qf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?pE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ga(t,l):typeof l=="number"&&Ga(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ka.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ie("scroll",t):l!=null&&xm(t,s,l,o))}switch(n){case"input":cc(t),z_(t,r,!1);break;case"textarea":cc(t),W_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ai(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?zs(t,!!r.multiple,s,!1):r.defaultValue!=null&&zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Iu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)Vb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Bi(sl.current),Bi(Gn.current),_c(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:yc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return _t(e),null;case 13:if(Ae(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Zt!==null&&e.mode&1&&!(e.flags&128))tb(),to(),e.flags|=98560,s=!1;else if(s=_c(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Hn]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else kn!==null&&(kp(kn),kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ze===0&&(Ze=3):rg())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return ro(),vp(t,e),t===null&&tl(e.stateNode.containerInfo),_t(e),null;case 10:return Um(e.type._context),_t(e),null;case 17:return zt(e.type)&&Su(),_t(e),null;case 19:if(Ae(Ne),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Zo(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Du(t),o!==null){for(e.flags|=128,Zo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>so&&(e.flags|=128,r=!0,Zo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Du(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pe)return _t(e),null}else 2*We()-s.renderingStartTime>so&&n!==1073741824&&(e.flags|=128,r=!0,Zo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=Ne.current,xe(Ne,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return ng(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function eR(t,e){switch(Lm(e),e.tag){case 1:return zt(e.type)&&Su(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),Ae(Bt),Ae(It),Hm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wm(e),null;case 13:if(Ae(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ne),null;case 4:return ro(),null;case 10:return Um(e.type._context),null;case 22:case 23:return ng(),null;case 24:return null;default:return null}}var xc=!1,Et=!1,tR=typeof WeakSet=="function"?WeakSet:Set,H=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function wp(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Dv=!1;function nR(t,e){if(rp=Eu,t=zE(),Om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var _;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)p=d,d=_;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(_=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ip={focusedElem:t,selectionRange:n},Eu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var b=E.memoizedProps,T=E.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:In(e.type,b),T);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(R){Fe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return E=Dv,Dv=!1,E}function Ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wp(e,n,s)}i=i.next}while(i!==r)}}function Ah(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jb(t){var e=t.alternate;e!==null&&(t.alternate=null,jb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[rl],delete e[ap],delete e[jC],delete e[FC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fb(t){return t.tag===5||t.tag===3||t.tag===4}function Ov(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ep(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Iu));else if(r!==4&&(t=t.child,t!==null))for(Ep(t,e,n),t=t.sibling;t!==null;)Ep(t,e,n),t=t.sibling}function bp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bp(t,e,n),t=t.sibling;t!==null;)bp(t,e,n),t=t.sibling}var st=null,Sn=!1;function Cr(t,e,n){for(n=n.child;n!==null;)Ub(t,e,n),n=n.sibling}function Ub(t,e,n){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(wh,n)}catch{}switch(n.tag){case 5:Et||Us(n,e);case 6:var r=st,i=Sn;st=null,Cr(t,e,n),st=r,Sn=i,st!==null&&(Sn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Sn?(t=st,n=n.stateNode,t.nodeType===8?Qd(t.parentNode,n):t.nodeType===1&&Qd(t,n),Ja(t)):Qd(st,n.stateNode));break;case 4:r=st,i=Sn,st=n.stateNode.containerInfo,Sn=!0,Cr(t,e,n),st=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wp(n,e,o),i=i.next}while(i!==r)}Cr(t,e,n);break;case 1:if(!Et&&(Us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,Cr(t,e,n),Et=r):Cr(t,e,n);break;default:Cr(t,e,n)}}function Mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tR),e.forEach(function(r){var i=hR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,Sn=!1;break e;case 3:st=a.stateNode.containerInfo,Sn=!0;break e;case 4:st=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(st===null)throw Error(B(160));Ub(s,o,i),st=null,Sn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Fe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bb(e,t),e=e.sibling}function Bb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),Fn(t),r&4){try{Ra(3,t,t.return),Ah(3,t)}catch(b){Fe(t,t.return,b)}try{Ra(5,t,t.return)}catch(b){Fe(t,t.return,b)}}break;case 1:Tn(e,t),Fn(t),r&512&&n!==null&&Us(n,n.return);break;case 5:if(Tn(e,t),Fn(t),r&512&&n!==null&&Us(n,n.return),t.flags&32){var i=t.stateNode;try{Ga(i,"")}catch(b){Fe(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cE(i,s),Kf(a,o);var c=Kf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?pE(i,d):h==="dangerouslySetInnerHTML"?dE(i,d):h==="children"?Ga(i,d):xm(i,h,d,c)}switch(a){case"input":zf(i,s);break;case"textarea":uE(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?zs(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?zs(i,!!s.multiple,s.defaultValue,!0):zs(i,!!s.multiple,s.multiple?[]:"",!1))}i[rl]=s}catch(b){Fe(t,t.return,b)}}break;case 6:if(Tn(e,t),Fn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){Fe(t,t.return,b)}}break;case 3:if(Tn(e,t),Fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ja(e.containerInfo)}catch(b){Fe(t,t.return,b)}break;case 4:Tn(e,t),Fn(t);break;case 13:Tn(e,t),Fn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eg=We())),r&4&&Mv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(c=Et)||h,Tn(e,t),Et=c):Tn(e,t),Fn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(p=H,_=p.child,p.tag){case 0:case 11:case 14:case 15:Ra(4,p,p.return);break;case 1:Us(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(b){Fe(r,n,b)}}break;case 5:Us(p,p.return);break;case 22:if(p.memoizedState!==null){Vv(d);continue}}_!==null?(_.return=p,H=_):Vv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fE("display",o))}catch(b){Fe(t,t.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){Fe(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Tn(e,t),Fn(t),r&4&&Mv(t);break;case 21:break;default:Tn(e,t),Fn(t)}}function Fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fb(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ga(i,""),r.flags&=-33);var s=Ov(t);bp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ov(t);Ep(t,a,o);break;default:throw Error(B(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rR(t,e,n){H=t,zb(t)}function zb(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Et;a=xc;var c=Et;if(xc=o,(Et=l)&&!c)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?jv(i):l!==null?(l.return=o,H=l):jv(i);for(;s!==null;)H=s,zb(s),s=s.sibling;H=i,xc=a,Et=c}Lv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):Lv(t)}}function Lv(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||Ah(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ja(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Et||e.flags&512&&xp(e)}catch(p){Fe(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Vv(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function jv(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ah(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Fe(e,i,l)}}var s=e.return;try{xp(e)}catch(l){Fe(e,s,l)}break;case 5:var o=e.return;try{xp(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var iR=Math.ceil,Lu=Tr.ReactCurrentDispatcher,Jm=Tr.ReactCurrentOwner,mn=Tr.ReactCurrentBatchConfig,de=0,rt=null,Ge=null,ct=0,Xt=0,Bs=gi(0),Ze=0,cl=null,ts=0,Ch=0,Zm=0,Pa=null,Vt=null,eg=0,so=1/0,sr=null,Vu=!1,Tp=null,Zr=null,Ec=!1,$r=null,ju=0,Na=0,Ip=null,tu=-1,nu=0;function Dt(){return de&6?We():tu!==-1?tu:tu=We()}function ei(t){return t.mode&1?de&2&&ct!==0?ct&-ct:BC.transition!==null?(nu===0&&(nu=SE()),nu):(t=ye,t!==0||(t=window.event,t=t===void 0?16:DE(t.type)),t):1}function Nn(t,e,n,r){if(50<Na)throw Na=0,Ip=null,Error(B(185));Cl(t,n,r),(!(de&2)||t!==rt)&&(t===rt&&(!(de&2)&&(Ch|=n),Ze===4&&Vr(t,ct)),$t(t,r),n===1&&de===0&&!(e.mode&1)&&(so=We()+500,Ih&&yi()))}function $t(t,e){var n=t.callbackNode;BA(t,e);var r=xu(t,t===rt?ct:0);if(r===0)n!==null&&K_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&K_(n),e===1)t.tag===0?UC(Fv.bind(null,t)):JE(Fv.bind(null,t)),LC(function(){!(de&6)&&yi()}),n=null;else{switch(kE(r)){case 1:n=Sm;break;case 4:n=TE;break;case 16:n=wu;break;case 536870912:n=IE;break;default:n=wu}n=Yb(n,$b.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $b(t,e){if(tu=-1,nu=0,de&6)throw Error(B(327));var n=t.callbackNode;if(Ks()&&t.callbackNode!==n)return null;var r=xu(t,t===rt?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fu(t,r);else{e=r;var i=de;de|=2;var s=Hb();(rt!==t||ct!==e)&&(sr=null,so=We()+500,Ki(t,e));do try{aR();break}catch(a){Wb(t,a)}while(!0);Fm(),Lu.current=s,de=i,Ge!==null?e=0:(rt=null,ct=0,e=Ze)}if(e!==0){if(e===2&&(i=Jf(t),i!==0&&(r=i,e=Sp(t,i))),e===1)throw n=cl,Ki(t,0),Vr(t,r),$t(t,We()),n;if(e===6)Vr(t,r);else{if(i=t.current.alternate,!(r&30)&&!sR(i)&&(e=Fu(t,r),e===2&&(s=Jf(t),s!==0&&(r=s,e=Sp(t,s))),e===1))throw n=cl,Ki(t,0),Vr(t,r),$t(t,We()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Oi(t,Vt,sr);break;case 3:if(Vr(t,r),(r&130023424)===r&&(e=eg+500-We(),10<e)){if(xu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=op(Oi.bind(null,t,Vt,sr),e);break}Oi(t,Vt,sr);break;case 4:if(Vr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Pn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iR(r/1960))-r,10<r){t.timeoutHandle=op(Oi.bind(null,t,Vt,sr),r);break}Oi(t,Vt,sr);break;case 5:Oi(t,Vt,sr);break;default:throw Error(B(329))}}}return $t(t,We()),t.callbackNode===n?$b.bind(null,t):null}function Sp(t,e){var n=Pa;return t.current.memoizedState.isDehydrated&&(Ki(t,e).flags|=256),t=Fu(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&kp(e)),t}function kp(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function sR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!On(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vr(t,e){for(e&=~Zm,e&=~Ch,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pn(e),r=1<<n;t[n]=-1,e&=~r}}function Fv(t){if(de&6)throw Error(B(327));Ks();var e=xu(t,0);if(!(e&1))return $t(t,We()),null;var n=Fu(t,e);if(t.tag!==0&&n===2){var r=Jf(t);r!==0&&(e=r,n=Sp(t,r))}if(n===1)throw n=cl,Ki(t,0),Vr(t,e),$t(t,We()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oi(t,Vt,sr),$t(t,We()),null}function tg(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(so=We()+500,Ih&&yi())}}function ns(t){$r!==null&&$r.tag===0&&!(de&6)&&Ks();var e=de;de|=1;var n=mn.transition,r=ye;try{if(mn.transition=null,ye=1,t)return t()}finally{ye=r,mn.transition=n,de=e,!(de&6)&&yi()}}function ng(){Xt=Bs.current,Ae(Bs)}function Ki(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MC(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Lm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Su();break;case 3:ro(),Ae(Bt),Ae(It),Hm();break;case 5:Wm(r);break;case 4:ro();break;case 13:Ae(Ne);break;case 19:Ae(Ne);break;case 10:Um(r.type._context);break;case 22:case 23:ng()}n=n.return}if(rt=t,Ge=t=ti(t.current,null),ct=Xt=e,Ze=0,cl=null,Zm=Ch=ts=0,Vt=Pa=null,Ui!==null){for(e=0;e<Ui.length;e++)if(n=Ui[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ui=null}return t}function Wb(t,e){do{var n=Ge;try{if(Fm(),Jc.current=Mu,Ou){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ou=!1}if(es=0,nt=Je=De=null,Ca=!1,ol=0,Jm.current=null,n===null||n.return===null){Ze=1,cl=e,Ge=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Sv(o);if(_!==null){_.flags&=-257,kv(_,o,a,s,e),_.mode&1&&Iv(s,c,e),e=_,l=c;var E=e.updateQueue;if(E===null){var b=new Set;b.add(l),e.updateQueue=b}else E.add(l);break e}else{if(!(e&1)){Iv(s,c,e),rg();break e}l=Error(B(426))}}else if(Pe&&a.mode&1){var T=Sv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),kv(T,o,a,s,e),Vm(io(l,a));break e}}s=l=io(l,a),Ze!==4&&(Ze=2),Pa===null?Pa=[s]:Pa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=kb(s,l,e);vv(s,v);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Zr===null||!Zr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=Ab(s,a,e);vv(s,R);break e}}s=s.return}while(s!==null)}Kb(n)}catch(D){e=D,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Hb(){var t=Lu.current;return Lu.current=Mu,t===null?Mu:t}function rg(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),rt===null||!(ts&268435455)&&!(Ch&268435455)||Vr(rt,ct)}function Fu(t,e){var n=de;de|=2;var r=Hb();(rt!==t||ct!==e)&&(sr=null,Ki(t,e));do try{oR();break}catch(i){Wb(t,i)}while(!0);if(Fm(),de=n,Lu.current=r,Ge!==null)throw Error(B(261));return rt=null,ct=0,Ze}function oR(){for(;Ge!==null;)qb(Ge)}function aR(){for(;Ge!==null&&!NA();)qb(Ge)}function qb(t){var e=Qb(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?Kb(t):Ge=e,Jm.current=null}function Kb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eR(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ge=null;return}}else if(n=ZC(n,e,Xt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Ze===0&&(Ze=5)}function Oi(t,e,n){var r=ye,i=mn.transition;try{mn.transition=null,ye=1,lR(t,e,n,r)}finally{mn.transition=i,ye=r}return null}function lR(t,e,n,r){do Ks();while($r!==null);if(de&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zA(t,s),t===rt&&(Ge=rt=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ec||(Ec=!0,Yb(wu,function(){return Ks(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=ye;ye=1;var a=de;de|=4,Jm.current=null,nR(t,n),Bb(n,t),AC(ip),Eu=!!rp,ip=rp=null,t.current=n,rR(n),DA(),de=a,ye=o,mn.transition=s}else t.current=n;if(Ec&&(Ec=!1,$r=t,ju=i),s=t.pendingLanes,s===0&&(Zr=null),LA(n.stateNode),$t(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vu)throw Vu=!1,t=Tp,Tp=null,t;return ju&1&&t.tag!==0&&Ks(),s=t.pendingLanes,s&1?t===Ip?Na++:(Na=0,Ip=t):Na=0,yi(),null}function Ks(){if($r!==null){var t=kE(ju),e=mn.transition,n=ye;try{if(mn.transition=null,ye=16>t?16:t,$r===null)var r=!1;else{if(t=$r,$r=null,ju=0,de&6)throw Error(B(331));var i=de;for(de|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Ra(8,h,s)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var p=h.sibling,_=h.return;if(jb(h),h===c){H=null;break}if(p!==null){p.return=_,H=p;break}H=_}}}var E=s.alternate;if(E!==null){var b=E.child;if(b!==null){E.child=null;do{var T=b.sibling;b.sibling=null,b=T}while(b!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,H=v;break e}H=s.return}}var y=t.current;for(H=y;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else e:for(o=y;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ah(9,a)}}catch(D){Fe(a,a.return,D)}if(a===o){H=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break e}H=a.return}}if(de=i,yi(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(wh,t)}catch{}r=!0}return r}finally{ye=n,mn.transition=e}}return!1}function Uv(t,e,n){e=io(n,e),e=kb(t,e,1),t=Jr(t,e,1),e=Dt(),t!==null&&(Cl(t,1,e),$t(t,e))}function Fe(t,e,n){if(t.tag===3)Uv(t,t,n);else for(;e!==null;){if(e.tag===3){Uv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zr===null||!Zr.has(r))){t=io(n,t),t=Ab(e,t,1),e=Jr(e,t,1),t=Dt(),e!==null&&(Cl(e,1,t),$t(e,t));break}}e=e.return}}function cR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(ct&n)===n&&(Ze===4||Ze===3&&(ct&130023424)===ct&&500>We()-eg?Ki(t,0):Zm|=n),$t(t,e)}function Gb(t,e){e===0&&(t.mode&1?(e=dc,dc<<=1,!(dc&130023424)&&(dc=4194304)):e=1);var n=Dt();t=_r(t,e),t!==null&&(Cl(t,e,n),$t(t,n))}function uR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gb(t,n)}function hR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Gb(t,n)}var Qb;Qb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,JC(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Pe&&e.flags&1048576&&ZE(e,Cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;eu(t,e),t=e.pendingProps;var i=eo(e,It.current);qs(e,n),i=Km(null,e,r,t,i,n);var s=Gm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(s=!0,ku(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zm(e),i.updater=kh,e.stateNode=i,i._reactInternals=e,fp(e,r,t,n),e=gp(null,e,r,!0,s,n)):(e.tag=0,Pe&&s&&Mm(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(eu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fR(r),t=In(r,t),i){case 0:e=mp(null,e,r,t,n);break e;case 1:e=Rv(null,e,r,t,n);break e;case 11:e=Av(null,e,r,t,n);break e;case 14:e=Cv(null,e,r,In(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),mp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Rv(t,e,r,i,n);case 3:e:{if(Nb(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,sb(t,e),Nu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=io(Error(B(423)),e),e=Pv(t,e,r,n,i);break e}else if(r!==i){i=io(Error(B(424)),e),e=Pv(t,e,r,n,i);break e}else for(Zt=Xr(e.stateNode.containerInfo.firstChild),nn=e,Pe=!0,kn=null,n=rb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===i){e=vr(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return ob(e),t===null&&up(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sp(r,i)?o=null:s!==null&&sp(r,s)&&(e.flags|=32),Pb(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&up(e),null;case 13:return Db(t,e,n);case 4:return $m(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Av(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xe(Ru,r._currentValue),r._currentValue=o,s!==null)if(On(s.value,o)){if(s.children===i.children&&!Bt.current){e=vr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=pr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qs(e,n),i=gn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=In(r,e.pendingProps),i=In(r.type,i),Cv(t,e,r,i,n);case 15:return Cb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),eu(t,e),e.tag=1,zt(r)?(t=!0,ku(e)):t=!1,qs(e,n),Sb(e,r,i),fp(e,r,i,n),gp(null,e,r,!0,t,n);case 19:return Ob(t,e,n);case 22:return Rb(t,e,n)}throw Error(B(156,e.tag))};function Yb(t,e){return bE(t,e)}function dR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new dR(t,e,n,r)}function ig(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fR(t){if(typeof t=="function")return ig(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bm)return 11;if(t===Tm)return 14}return 2}function ti(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ru(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ig(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ps:return Gi(n.children,i,s,e);case Em:o=8,i|=8;break;case Vf:return t=fn(12,n,e,i|2),t.elementType=Vf,t.lanes=s,t;case jf:return t=fn(13,n,e,i),t.elementType=jf,t.lanes=s,t;case Ff:return t=fn(19,n,e,i),t.elementType=Ff,t.lanes=s,t;case oE:return Rh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iE:o=10;break e;case sE:o=9;break e;case bm:o=11;break e;case Tm:o=14;break e;case Or:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Gi(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function Rh(t,e,n,r){return t=fn(22,t,r,e),t.elementType=oE,t.lanes=n,t.stateNode={isHidden:!1},t}function rf(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function sf(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sg(t,e,n,r,i,s,o,a,l){return t=new pR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zm(s),t}function mR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Xb(t){if(!t)return li;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(zt(n))return XE(t,n,e)}return e}function Jb(t,e,n,r,i,s,o,a,l){return t=sg(n,r,!0,t,i,s,o,a,l),t.context=Xb(null),n=t.current,r=Dt(),i=ei(n),s=pr(r,i),s.callback=e??null,Jr(n,s,i),t.current.lanes=i,Cl(t,i,r),$t(t,r),t}function Ph(t,e,n,r){var i=e.current,s=Dt(),o=ei(i);return n=Xb(n),e.context===null?e.context=n:e.pendingContext=n,e=pr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jr(i,e,o),t!==null&&(Nn(t,i,o,s),Xc(t,i,o)),o}function Uu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function og(t,e){Bv(t,e),(t=t.alternate)&&Bv(t,e)}function gR(){return null}var Zb=typeof reportError=="function"?reportError:function(t){console.error(t)};function ag(t){this._internalRoot=t}Nh.prototype.render=ag.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Ph(t,e,null,null)};Nh.prototype.unmount=ag.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ns(function(){Ph(null,t,null,null)}),e[yr]=null}};function Nh(t){this._internalRoot=t}Nh.prototype.unstable_scheduleHydration=function(t){if(t){var e=RE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&NE(t)}};function lg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zv(){}function yR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Uu(o);s.call(c)}}var o=Jb(e,r,t,0,null,!1,!1,"",zv);return t._reactRootContainer=o,t[yr]=o.current,tl(t.nodeType===8?t.parentNode:t),ns(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Uu(l);a.call(c)}}var l=sg(t,0,!1,null,null,!1,!1,"",zv);return t._reactRootContainer=l,t[yr]=l.current,tl(t.nodeType===8?t.parentNode:t),ns(function(){Ph(e,l,n,r)}),l}function Oh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Uu(o);a.call(l)}}Ph(e,o,t,i)}else o=yR(n,e,t,i,r);return Uu(o)}AE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ua(e.pendingLanes);n!==0&&(km(e,n|1),$t(e,We()),!(de&6)&&(so=We()+500,yi()))}break;case 13:ns(function(){var r=_r(t,1);if(r!==null){var i=Dt();Nn(r,t,1,i)}}),og(t,1)}};Am=function(t){if(t.tag===13){var e=_r(t,134217728);if(e!==null){var n=Dt();Nn(e,t,134217728,n)}og(t,134217728)}};CE=function(t){if(t.tag===13){var e=ei(t),n=_r(t,e);if(n!==null){var r=Dt();Nn(n,t,e,r)}og(t,e)}};RE=function(){return ye};PE=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Qf=function(t,e,n){switch(e){case"input":if(zf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Th(r);if(!i)throw Error(B(90));lE(r),zf(r,i)}}}break;case"textarea":uE(t,n);break;case"select":e=n.value,e!=null&&zs(t,!!n.multiple,e,!1)}};yE=tg;_E=ns;var _R={usingClientEntryPoint:!1,Events:[Pl,Ms,Th,mE,gE,tg]},ea={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vR={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xE(t),t===null?null:t.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||gR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{wh=bc.inject(vR),Kn=bc}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_R;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lg(e))throw Error(B(200));return mR(t,e,null,n)};on.createRoot=function(t,e){if(!lg(t))throw Error(B(299));var n=!1,r="",i=Zb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sg(t,1,!1,null,null,n,!1,r,i),t[yr]=e.current,tl(t.nodeType===8?t.parentNode:t),new ag(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=xE(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return ns(t)};on.hydrate=function(t,e,n){if(!Dh(e))throw Error(B(200));return Oh(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!lg(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Zb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Jb(e,null,t,1,n??null,i,!1,s,o),t[yr]=e.current,tl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nh(e)};on.render=function(t,e,n){if(!Dh(e))throw Error(B(200));return Oh(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Dh(t))throw Error(B(40));return t._reactRootContainer?(ns(function(){Oh(null,null,t,!1,function(){t._reactRootContainer=null,t[yr]=null})}),!0):!1};on.unstable_batchedUpdates=tg;on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dh(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Oh(t,e,n,!1,r)};on.version="18.3.1-next-f1338f8080-20240426";function eT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eT)}catch(t){console.error(t)}}eT(),eE.exports=on;var wR=eE.exports,tT,$v=wR;tT=$v.createRoot,$v.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ul.apply(this,arguments)}var Wr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wr||(Wr={}));const Wv="popstate";function xR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Ap("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bu(i)}return bR(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ER(){return Math.random().toString(36).substr(2,8)}function Hv(t,e){return{usr:t.state,key:t.key,idx:e}}function Ap(t,e,n,r){return n===void 0&&(n=null),ul({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Eo(e):e,{state:n,key:e&&e.key||r||ER()})}function Bu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function bR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Wr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(ul({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Wr.Pop;let T=h(),v=T==null?null:T-c;c=T,l&&l({action:a,location:b.location,delta:v})}function p(T,v){a=Wr.Push;let y=Ap(b.location,T,v);c=h()+1;let w=Hv(y,c),R=b.createHref(y);try{o.pushState(w,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(R)}s&&l&&l({action:a,location:b.location,delta:1})}function _(T,v){a=Wr.Replace;let y=Ap(b.location,T,v);c=h();let w=Hv(y,c),R=b.createHref(y);o.replaceState(w,"",R),s&&l&&l({action:a,location:b.location,delta:0})}function E(T){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof T=="string"?T:Bu(T);return y=y.replace(/ $/,"%20"),Oe(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let b={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Wv,d),l=T,()=>{i.removeEventListener(Wv,d),l=null}},createHref(T){return e(i,T)},createURL:E,encodeLocation(T){let v=E(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:_,go(T){return o.go(T)}};return b}var qv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qv||(qv={}));function TR(t,e,n){return n===void 0&&(n="/"),IR(t,e,n)}function IR(t,e,n,r){let i=typeof e=="string"?Eo(e):e,s=oo(i.pathname||"/",n);if(s==null)return null;let o=rT(t);SR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=VR(s);a=MR(o[l],c)}return a}function rT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ni([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Oe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:DR(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of iT(s.path))i(s,o,l)}),e}function iT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function SR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kR=/^:[\w-]+$/,AR=3,CR=2,RR=1,PR=10,NR=-2,Kv=t=>t==="*";function DR(t,e){let n=t.split("/"),r=n.length;return n.some(Kv)&&(r+=NR),e&&(r+=CR),n.filter(i=>!Kv(i)).reduce((i,s)=>i+(kR.test(s)?AR:s===""?RR:PR),r)}function OR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function MR(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Cp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ni([s,d.pathname]),pathnameBase:BR(ni([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=ni([s,d.pathnameBase]))}return o}function Cp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=LR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:_}=h;if(p==="*"){let b=a[d]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const E=a[d];return _&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function LR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function VR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function oo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Eo(t):t;return{pathname:n?n.startsWith("/")?n:FR(n,e):e,search:zR(r),hash:$R(i)}}function FR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function of(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cg(t,e){let n=UR(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ug(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Eo(t):(i=ul({},t),Oe(!i.pathname||!i.pathname.includes("?"),of("?","pathname","search",i)),Oe(!i.pathname||!i.pathname.includes("#"),of("#","pathname","hash",i)),Oe(!i.search||!i.search.includes("#"),of("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=jR(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ni=t=>t.join("/").replace(/\/\/+/g,"/"),BR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$R=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sT=["post","put","patch","delete"];new Set(sT);const HR=["get",...sT];new Set(HR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hl.apply(this,arguments)}const Mh=O.createContext(null),oT=O.createContext(null),Ir=O.createContext(null),Lh=O.createContext(null),_i=O.createContext({outlet:null,matches:[],isDataRoute:!1}),aT=O.createContext(null);function qR(t,e){let{relative:n}=e===void 0?{}:e;bo()||Oe(!1);let{basename:r,navigator:i}=O.useContext(Ir),{hash:s,pathname:o,search:a}=jh(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ni([r,o])),i.createHref({pathname:l,search:a,hash:s})}function bo(){return O.useContext(Lh)!=null}function vi(){return bo()||Oe(!1),O.useContext(Lh).location}function lT(t){O.useContext(Ir).static||O.useLayoutEffect(t)}function Vh(){let{isDataRoute:t}=O.useContext(_i);return t?sP():KR()}function KR(){bo()||Oe(!1);let t=O.useContext(Mh),{basename:e,future:n,navigator:r}=O.useContext(Ir),{matches:i}=O.useContext(_i),{pathname:s}=vi(),o=JSON.stringify(cg(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return lT(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=ug(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ni([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function jh(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Ir),{matches:i}=O.useContext(_i),{pathname:s}=vi(),o=JSON.stringify(cg(i,r.v7_relativeSplatPath));return O.useMemo(()=>ug(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function GR(t,e){return QR(t,e)}function QR(t,e,n,r){bo()||Oe(!1);let{navigator:i}=O.useContext(Ir),{matches:s}=O.useContext(_i),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=vi(),h;if(e){var d;let T=typeof e=="string"?Eo(e):e;l==="/"||(d=T.pathname)!=null&&d.startsWith(l)||Oe(!1),h=T}else h=c;let p=h.pathname||"/",_=p;if(l!=="/"){let T=l.replace(/^\//,"").split("/");_="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let E=TR(t,{pathname:_}),b=eP(E&&E.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ni([l,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ni([l,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&b?O.createElement(Lh.Provider,{value:{location:hl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Wr.Pop}},b):b}function YR(){let t=iP(),e=WR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const XR=O.createElement(YR,null);class JR extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(_i.Provider,{value:this.props.routeContext},O.createElement(aT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZR(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Mh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(_i.Provider,{value:e},r)}function eP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Oe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:_}=n,E=d.route.loader&&p[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let _,E=!1,b=null,T=null;n&&(_=a&&d.route.id?a[d.route.id]:void 0,b=d.route.errorElement||XR,l&&(c<0&&p===0?(oP("route-fallback"),E=!0,T=null):c===p&&(E=!0,T=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),y=()=>{let w;return _?w=b:E?w=T:d.route.Component?w=O.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=h,O.createElement(ZR,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?O.createElement(JR,{location:n.location,revalidation:n.revalidation,component:b,error:_,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var cT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cT||{}),uT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(uT||{});function tP(t){let e=O.useContext(Mh);return e||Oe(!1),e}function nP(t){let e=O.useContext(oT);return e||Oe(!1),e}function rP(t){let e=O.useContext(_i);return e||Oe(!1),e}function hT(t){let e=rP(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function iP(){var t;let e=O.useContext(aT),n=nP(),r=hT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sP(){let{router:t}=tP(cT.UseNavigateStable),e=hT(uT.UseNavigateStable),n=O.useRef(!1);return lT(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,hl({fromRouteId:e},s)))},[t,e])}const Gv={};function oP(t,e,n){Gv[t]||(Gv[t]=!0)}function aP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lP(t){let{to:e,replace:n,state:r,relative:i}=t;bo()||Oe(!1);let{future:s,static:o}=O.useContext(Ir),{matches:a}=O.useContext(_i),{pathname:l}=vi(),c=Vh(),h=ug(e,cg(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Nr(t){Oe(!1)}function cP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Wr.Pop,navigator:s,static:o=!1,future:a}=t;bo()&&Oe(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:hl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Eo(r));let{pathname:h="/",search:d="",hash:p="",state:_=null,key:E="default"}=r,b=O.useMemo(()=>{let T=oo(h,l);return T==null?null:{location:{pathname:T,search:d,hash:p,state:_,key:E},navigationType:i}},[l,h,d,p,_,E,i]);return b==null?null:O.createElement(Ir.Provider,{value:c},O.createElement(Lh.Provider,{children:n,value:b}))}function uP(t){let{children:e,location:n}=t;return GR(Rp(e),n)}new Promise(()=>{});function Rp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,Rp(r.props.children,s));return}r.type!==Nr&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zu.apply(this,arguments)}function dT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dP(t,e){return t.button===0&&(!e||e==="_self")&&!hP(t)}const fP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mP="6";try{window.__reactRouterVersion=mP}catch{}const gP=O.createContext({isTransitioning:!1}),yP="startTransition",Qv=cA[yP];function _P(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=xR({window:i,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=O.useCallback(d=>{c&&Qv?Qv(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>aP(r),[r]),O.createElement(cP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const vP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hg=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=dT(e,fP),{basename:_}=O.useContext(Ir),E,b=!1;if(typeof c=="string"&&wP.test(c)&&(E=c,vP))try{let w=new URL(window.location.href),R=c.startsWith("//")?new URL(w.protocol+c):new URL(c),D=oo(R.pathname,_);R.origin===w.origin&&D!=null?c=D+R.search+R.hash:b=!0}catch{}let T=qR(c,{relative:i}),v=EP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function y(w){r&&r(w),w.defaultPrevented||v(w)}return O.createElement("a",zu({},p,{href:E||T,onClick:b||s?r:y,ref:n,target:l}))}),Un=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=dT(e,pP),p=jh(l,{relative:d.relative}),_=vi(),E=O.useContext(oT),{navigator:b,basename:T}=O.useContext(Ir),v=E!=null&&bP(p)&&c===!0,y=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,w=_.pathname,R=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(w=w.toLowerCase(),R=R?R.toLowerCase():null,y=y.toLowerCase()),R&&T&&(R=oo(R,T)||R);const D=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let M=w===y||!o&&w.startsWith(y)&&w.charAt(D)==="/",I=R!=null&&(R===y||!o&&R.startsWith(y)&&R.charAt(y.length)==="/"),x={isActive:M,isPending:I,isTransitioning:v},k=M?r:void 0,A;typeof s=="function"?A=s(x):A=[s,M?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(x):a;return O.createElement(hg,zu({},d,{"aria-current":k,className:A,ref:n,style:P,to:l,viewTransition:c}),typeof h=="function"?h(x):h)});var Pp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Pp||(Pp={}));var Yv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yv||(Yv={}));function xP(t){let e=O.useContext(Mh);return e||Oe(!1),e}function EP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Vh(),c=vi(),h=jh(t,{relative:o});return O.useCallback(d=>{if(dP(d,n)){d.preventDefault();let p=r!==void 0?r:Bu(c)===Bu(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function bP(t,e){e===void 0&&(e={});let n=O.useContext(gP);n==null&&Oe(!1);let{basename:r}=xP(Pp.useViewTransitionState),i=jh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=oo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=oo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Cp(i.pathname,o)!=null||Cp(i.pathname,s)!=null}const fT=O.createContext({theme:"light",toggleTheme:()=>{}});function TP({children:t}){const[e,n]=O.useState(()=>{const i=typeof window<"u"?localStorage.getItem("theme"):null;return i==="light"||i==="dark"?i:"light"});O.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=O.useMemo(()=>({theme:e,toggleTheme:()=>n(i=>i==="dark"?"light":"dark")}),[e]);return m.jsx(fT.Provider,{value:r,children:t})}function IP(){return O.useContext(fT)}var Xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},SP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(p=64)),r.push(n[h],n[d],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new kP;const p=s<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),d!==64){const E=c<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AP=function(t){const e=pT(t);return mT.encodeByteArray(e,!0)},$u=function(t){return AP(t).replace(/\./g,"")},gT=function(t){try{return mT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=()=>CP().__FIREBASE_DEFAULTS__,PP=()=>{if(typeof process>"u"||typeof Xv>"u")return;const t=Xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gT(t[1]);return e&&JSON.parse(e)},Fh=()=>{try{return RP()||PP()||NP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yT=t=>{var e,n;return(n=(e=Fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_T=t=>{const e=yT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vT=()=>{var t;return(t=Fh())===null||t===void 0?void 0:t.config},wT=t=>{var e;return(e=Fh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$u(JSON.stringify(n)),$u(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function MP(){var t;const e=(t=Fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jP(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FP(){return!MP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fg(){try{return typeof indexedDB=="object"}catch{return!1}}function pg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function ET(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="FirebaseError";class xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UP,Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ms.prototype.create)}}class ms{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?BP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new xn(i,a,r)}}function BP(t,e){return t.replace(zP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zP=/\{\$([^}]+)}/g;function $P(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Jv(s)&&Jv(o)){if(!dl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function da(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WP(t,e){const n=new HP(t,e);return n.subscribe.bind(n)}class HP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=af),i.error===void 0&&(i.error=af),i.complete===void 0&&(i.complete=af);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function af(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=1e3,GP=2,QP=4*60*60*1e3,YP=.5;function Zv(t,e=KP,n=GP){const r=e*Math.pow(n,t),i=Math.round(YP*r*(Math.random()-.5)*2);return Math.min(QP,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t){return t&&t._delegate?t._delegate:t}class _n{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZP(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JP(t){return t===Mi?void 0:t}function ZP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const tN={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},nN=ae.INFO,rN={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},iN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=rN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uh{constructor(e){this.name=e,this._logLevel=nN,this._logHandler=iN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const sN=(t,e)=>e.some(n=>t instanceof n);let e0,t0;function oN(){return e0||(e0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aN(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bT=new WeakMap,Np=new WeakMap,TT=new WeakMap,lf=new WeakMap,mg=new WeakMap;function lN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ri(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bT.set(n,t)}).catch(()=>{}),mg.set(e,t),e}function cN(t){if(Np.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Np.set(t,e)}let Dp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uN(t){Dp=t(Dp)}function hN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cf(this),e,...n);return TT.set(r,e.sort?e.sort():[e]),ri(r)}:aN().includes(t)?function(...e){return t.apply(cf(this),e),ri(bT.get(this))}:function(...e){return ri(t.apply(cf(this),e))}}function dN(t){return typeof t=="function"?hN(t):(t instanceof IDBTransaction&&cN(t),sN(t,oN())?new Proxy(t,Dp):t)}function ri(t){if(t instanceof IDBRequest)return lN(t);if(lf.has(t))return lf.get(t);const e=dN(t);return e!==t&&(lf.set(t,e),mg.set(e,t)),e}const cf=t=>mg.get(t);function IT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ri(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ri(o.result),l.oldVersion,l.newVersion,ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const fN=["get","getKey","getAll","getAllKeys","count"],pN=["put","add","delete","clear"],uf=new Map;function n0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fN.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return uf.set(e,s),s}uN(t=>({...t,get:(e,n,r)=>n0(e,n)||t.get(e,n,r),has:(e,n)=>!!n0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Op="@firebase/app",r0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Uh("@firebase/app"),yN="@firebase/app-compat",_N="@firebase/analytics-compat",vN="@firebase/analytics",wN="@firebase/app-check-compat",xN="@firebase/app-check",EN="@firebase/auth",bN="@firebase/auth-compat",TN="@firebase/database",IN="@firebase/data-connect",SN="@firebase/database-compat",kN="@firebase/functions",AN="@firebase/functions-compat",CN="@firebase/installations",RN="@firebase/installations-compat",PN="@firebase/messaging",NN="@firebase/messaging-compat",DN="@firebase/performance",ON="@firebase/performance-compat",MN="@firebase/remote-config",LN="@firebase/remote-config-compat",VN="@firebase/storage",jN="@firebase/storage-compat",FN="@firebase/firestore",UN="@firebase/vertexai-preview",BN="@firebase/firestore-compat",zN="firebase",$N="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="[DEFAULT]",WN={[Op]:"fire-core",[yN]:"fire-core-compat",[vN]:"fire-analytics",[_N]:"fire-analytics-compat",[xN]:"fire-app-check",[wN]:"fire-app-check-compat",[EN]:"fire-auth",[bN]:"fire-auth-compat",[TN]:"fire-rtdb",[IN]:"fire-data-connect",[SN]:"fire-rtdb-compat",[kN]:"fire-fn",[AN]:"fire-fn-compat",[CN]:"fire-iid",[RN]:"fire-iid-compat",[PN]:"fire-fcm",[NN]:"fire-fcm-compat",[DN]:"fire-perf",[ON]:"fire-perf-compat",[MN]:"fire-rc",[LN]:"fire-rc-compat",[VN]:"fire-gcs",[jN]:"fire-gcs-compat",[FN]:"fire-fst",[BN]:"fire-fst-compat",[UN]:"fire-vertex","fire-js":"fire-js",[zN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Map,HN=new Map,Lp=new Map;function i0(t,e){try{t.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mn(t){const e=t.name;if(Lp.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Lp.set(e,t);for(const n of Wu.values())i0(n,t);for(const n of HN.values())i0(n,t);return!0}function wi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new ms("app","Firebase",qN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=$N;function ST(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Mp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ii.create("bad-app-name",{appName:String(i)});if(n||(n=vT()),!n)throw ii.create("no-options");const s=Wu.get(i);if(s){if(dl(n,s.options)&&dl(r,s.config))return s;throw ii.create("duplicate-app",{appName:i})}const o=new eN(i);for(const l of Lp.values())o.addComponent(l);const a=new KN(n,r,o);return Wu.set(i,a),a}function Bh(t=Mp){const e=Wu.get(t);if(!e&&t===Mp&&vT())return ST();if(!e)throw ii.create("no-app",{appName:t});return e}function Wt(t,e,n){var r;let i=(r=WN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(a.join(" "));return}Mn(new _n(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="firebase-heartbeat-database",QN=1,fl="firebase-heartbeat-store";let hf=null;function kT(){return hf||(hf=IT(GN,QN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ii.create("idb-open",{originalErrorMessage:t.message})})),hf}async function YN(t){try{const n=(await kT()).transaction(fl),r=await n.objectStore(fl).get(AT(t));return await n.done,r}catch(e){if(e instanceof xn)wr.warn(e.message);else{const n=ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function s0(t,e){try{const r=(await kT()).transaction(fl,"readwrite");await r.objectStore(fl).put(e,AT(t)),await r.done}catch(n){if(n instanceof xn)wr.warn(n.message);else{const r=ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function AT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=1024,JN=30*24*60*60*1e3;class ZN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new t2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=o0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=JN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=o0(),{heartbeatsToSend:r,unsentEntries:i}=e2(this._heartbeatsCache.heartbeats),s=$u(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wr.warn(n),""}}}function o0(){return new Date().toISOString().substring(0,10)}function e2(t,e=XN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),a0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),a0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class t2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fg()?pg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return s0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return s0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function a0(t){return $u(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t){Mn(new _n("platform-logger",e=>new mN(e),"PRIVATE")),Mn(new _n("heartbeat",e=>new ZN(e),"PRIVATE")),Wt(Op,r0,t),Wt(Op,r0,"esm2017"),Wt("fire-js","")}n2("");var r2="firebase",i2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt(r2,i2,"app");function gg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function CT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s2=CT,RT=new ms("auth","Firebase",CT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Uh("@firebase/auth");function o2(t,...e){Hu.logLevel<=ae.WARN&&Hu.warn(`Auth (${gs}): ${t}`,...e)}function iu(t,...e){Hu.logLevel<=ae.ERROR&&Hu.error(`Auth (${gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,...e){throw _g(t,...e)}function Ht(t,...e){return _g(t,...e)}function yg(t,e,n){const r=Object.assign(Object.assign({},s2()),{[e]:n});return new ms("auth","Firebase",r).create(e,{appName:t.name})}function Dn(t){return yg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PT(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vn(t,"argument-error"),yg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _g(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RT.create(t,...e)}function q(t,e,...n){if(!t)throw _g(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function xr(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NT(){return l0()==="http:"||l0()==="https:"}function l0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NT()||dg()||"connection"in navigator)?navigator.onLine:!0}function l2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,xr(n>e,"Short delay should be less than long delay!"),this.isMobile=OP()||VP()}get(){return a2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e){xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Dl(3e4,6e4);function Gt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ln(t,e,n,r,i={}){return OT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=To(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return LP()||(c.referrerPolicy="no-referrer"),DT.fetch()(MT(t,t.config.apiHost,n,a),c)})}async function OT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},c2),e);try{const i=new d2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pa(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw pa(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw yg(t,h,c);vn(t,h)}}catch(i){if(i instanceof xn)throw i;vn(t,"network-request-failed",{message:String(i)})}}async function xi(t,e,n,r,i={}){const s=await ln(t,e,n,r,i);return"mfaPendingCredential"in s&&vn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function MT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?vg(t.config,i):`${t.config.apiScheme}://${i}`}function h2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ht(this.auth,"network-request-failed")),u2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ht(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){return t!==void 0&&t.getResponse!==void 0}function u0(t){return t!==void 0&&t.enterprise!==void 0}class f2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return h2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t){return(await ln(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function m2(t,e){return ln(t,"GET","/v2/recaptchaConfig",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t,e){return ln(t,"POST","/v1/accounts:delete",e)}async function LT(t,e){return ln(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y2(t,e=!1){const n=Le(t),r=await n.getIdToken(e),i=wg(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Da(df(i.auth_time)),issuedAtTime:Da(df(i.iat)),expirationTime:Da(df(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function df(t){return Number(t)*1e3}function wg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const i=gT(n);return i?JSON.parse(i):(iu("Failed to decode base64 JWT payload"),null)}catch(i){return iu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function h0(t){const e=wg(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xn&&_2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Da(this.lastLoginAt),this.creationTime=Da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ao(t,LT(n,{idToken:r}));q(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?VT(s.providerUserInfo):[],a=x2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function w2(t){const e=Le(t);await qu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VT(t){return t.map(e=>{var{providerId:n}=e,r=gg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){const n=await OT(t,{},async()=>{const r=To({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=MT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b2(t,e){return ln(t,"POST","/v2/accounts:revokeToken",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=h0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await E2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gs;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gs,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ao(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return y2(this,e)}reload(){return w2(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Dn(this.auth));const e=await this.getIdToken();return await ao(this,g2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:R,isAnonymous:D,providerData:M,stsTokenManager:I}=n;q(w&&I,e,"internal-error");const x=Gs.fromJSON(this.name,I);q(typeof w=="string",e,"internal-error"),Rr(d,e.name),Rr(p,e.name),q(typeof R=="boolean",e,"internal-error"),q(typeof D=="boolean",e,"internal-error"),Rr(_,e.name),Rr(E,e.name),Rr(b,e.name),Rr(T,e.name),Rr(v,e.name),Rr(y,e.name);const k=new dr({uid:w,auth:e,email:p,emailVerified:R,displayName:d,isAnonymous:D,photoURL:E,phoneNumber:_,tenantId:b,stsTokenManager:x,createdAt:v,lastLoginAt:y});return M&&Array.isArray(M)&&(k.providerData=M.map(A=>Object.assign({},A))),T&&(k._redirectEventId=T),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gs;i.updateFromServerResponse(n);const s=new dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Gs;a.updateFromIdToken(r);const l=new dr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new Map;function fr(t){xr(t instanceof Function,"Expected a class definition");let e=d0.get(t);return e?(xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jT.type="NONE";const f0=jT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e,n){return`firebase:${t}:${e}:${n}`}class Qs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=su(this.userKey,i.apiKey,s),this.fullPersistenceKey=su("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qs(fr(f0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||fr(f0);const o=su(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=dr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Qs(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Qs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WT(e))return"Blackberry";if(HT(e))return"Webos";if(UT(e))return"Safari";if((e.includes("chrome/")||BT(e))&&!e.includes("edge/"))return"Chrome";if($T(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FT(t=St()){return/firefox\//i.test(t)}function UT(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BT(t=St()){return/crios\//i.test(t)}function zT(t=St()){return/iemobile/i.test(t)}function $T(t=St()){return/android/i.test(t)}function WT(t=St()){return/blackberry/i.test(t)}function HT(t=St()){return/webos/i.test(t)}function xg(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function T2(t=St()){var e;return xg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function I2(){return jP()&&document.documentMode===10}function qT(t=St()){return xg(t)||$T(t)||HT(t)||WT(t)||/windows phone/i.test(t)||zT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e=[]){let n;switch(t){case"Browser":n=p0(St());break;case"Worker":n=`${p0(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t,e={}){return ln(t,"GET","/v2/passwordPolicy",Gt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=6;class C2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:A2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m0(this),this.idTokenSubscription=new m0(this),this.beforeStateQueue=new S2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LT(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(en(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Dn(this));const n=e?Le(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Dn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Dn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k2(this),n=new C2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ms("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await b2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&o2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function En(t){return Le(t)}class m0{constructor(e){this.auth=e,this.observer=null,this.addObserver=WP(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P2(t){Ol=t}function Eg(t){return Ol.loadJS(t)}function N2(){return Ol.recaptchaV2Script}function D2(){return Ol.recaptchaEnterpriseScript}function O2(){return Ol.gapiScript}function GT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const M2="recaptcha-enterprise",L2="NO_RECAPTCHA";class V2{constructor(e){this.type=M2,this.auth=En(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{m2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new f2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;u0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(L2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&u0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=D2();l.length!==0&&(l+=a),Eg(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function g0(t,e,n,r=!1){const i=new V2(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Fp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await g0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await g0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t,e){const n=wi(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(dl(s,e??{}))return i;vn(i,"already-initialized")}return n.initialize({options:e})}function F2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function U2(t,e,n){const r=En(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=QT(e),{host:o,port:a}=B2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),z2()}function QT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B2(t){const e=QT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:y0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:y0(o)}}}function y0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function z2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}async function $2(t,e){return ln(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t,e){return xi(t,"POST","/v1/accounts:signInWithPassword",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(t,e){return xi(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}async function q2(t,e){return xi(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends zh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new pl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new pl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fp(e,n,"signInWithPassword",W2);case"emailLink":return H2(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fp(e,r,"signUpPassword",$2);case"emailLink":return q2(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t,e){return xi(t,"POST","/v1/accounts:signInWithIdp",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="http://localhost";class rs extends zh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=gg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new rs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ys(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ys(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ys(e,n)}buildRequest(){const e={requestUri:K2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=To(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(t,e){return ln(t,"POST","/v1/accounts:sendVerificationCode",Gt(t,e))}async function Q2(t,e){return xi(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,e))}async function Y2(t,e){const n=await xi(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,e));if(n.temporaryProof)throw pa(t,"account-exists-with-different-credential",n);return n}const X2={USER_NOT_FOUND:"user-not-found"};async function J2(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return xi(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,n),X2)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends zh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Oa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Oa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Q2(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Y2(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return J2(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Oa({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eD(t){const e=da(fa(t)).link,n=e?da(fa(e)).deep_link_id:null,r=da(fa(t)).deep_link_id;return(r?da(fa(r)).link:null)||r||n||e||t}class bg{constructor(e){var n,r,i,s,o,a;const l=da(fa(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=Z2((i=l.mode)!==null&&i!==void 0?i:null);q(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=eD(e);try{return new bg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bg.parseLink(n);return q(r,"argument-error"),pl._fromEmailAndCode(e,r.code,r.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends $h{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Ml{constructor(){super("facebook.com")}static credential(e){return rs._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Ml{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Ml{constructor(){super("github.com")}static credential(e){return rs._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com";Fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Ml{constructor(){super("twitter.com")}static credential(e,n){return rs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ur.credential(n,r)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t,e){return xi(t,"POST","/v1/accounts:signUp",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await dr._fromIdTokenResponse(e,r,i),o=_0(r);return new is({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_0(r);return new is({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends xn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ku.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ku(e,n,r,i)}}function YT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ku._fromErrorAndOperation(t,s,e,r):s})}async function nD(t,e,n=!1){const r=await ao(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return is._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e,n=!1){const{auth:r}=t;if(en(r.app))return Promise.reject(Dn(r));const i="reauthenticate";try{const s=await ao(t,YT(r,i,e,t),n);q(s.idToken,r,"internal-error");const o=wg(s.idToken);q(o,r,"internal-error");const{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),is._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&vn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(t,e,n=!1){if(en(t.app))return Promise.reject(Dn(t));const r="signIn",i=await YT(t,r,e),s=await is._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function JT(t,e){return XT(En(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t){const e=En(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iD(t,e,n){if(en(t.app))return Promise.reject(Dn(t));const r=En(t),o=await Fp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ZT(t),l}),a=await is._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function sD(t,e,n){return en(t.app)?Promise.reject(Dn(t)):JT(Le(t),Io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e){return ln(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Le(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ao(r,oD(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function aD(t,e,n,r){return Le(t).onIdTokenChanged(e,n,r)}function lD(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}function cD(t,e,n,r){return Le(t).onAuthStateChanged(e,n,r)}function uD(t){return Le(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t,e){return ln(t,"POST","/v2/accounts/mfaEnrollment:start",Gt(t,e))}const Gu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gu,"1"),this.storage.removeItem(Gu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=1e3,fD=10;class nI extends tI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);I2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nI.type="LOCAL";const pD=nI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends tI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rI.type="SESSION";const iI=rI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await mD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Tg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(){return window}function yD(t){Ke().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(){return typeof Ke().WorkerGlobalScope<"u"&&typeof Ke().importScripts=="function"}async function _D(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wD(){return Ig()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebaseLocalStorageDb",xD=1,Qu="firebaseLocalStorage",oI="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(t,e){return t.transaction([Qu],e?"readwrite":"readonly").objectStore(Qu)}function ED(){const t=indexedDB.deleteDatabase(sI);return new Ll(t).toPromise()}function Up(){const t=indexedDB.open(sI,xD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qu,{keyPath:oI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qu)?e(r):(r.close(),await ED(),e(await Up()))})})}async function v0(t,e,n){const r=Hh(t,!0).put({[oI]:e,value:n});return new Ll(r).toPromise()}async function bD(t,e){const n=Hh(t,!1).get(e),r=await new Ll(n).toPromise();return r===void 0?null:r.value}function w0(t,e){const n=Hh(t,!0).delete(e);return new Ll(n).toPromise()}const TD=800,ID=3;class aI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ID)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ig()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wh._getInstance(wD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _D(),!this.activeServiceWorker)return;this.sender=new gD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Up();return await v0(e,Gu,"1"),await w0(e,Gu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>v0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>w0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Hh(i,!1).getAll();return new Ll(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aI.type="LOCAL";const SD=aI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t,e){return ln(t,"POST","/v2/accounts/mfaSignIn:start",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=500,CD=6e4,Tc=1e12;class RD{constructor(e){this.auth=e,this.counter=Tc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new PD(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Tc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Tc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Tc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class PD{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;q(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ND(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},CD)},AD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ND(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=GT("rcb"),DD=new Dl(3e4,6e4);class OD{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ke().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return q(MD(n),e,"argument-error"),this.shouldResolveImmediately(n)&&c0(Ke().grecaptcha)?Promise.resolve(Ke().grecaptcha):new Promise((r,i)=>{const s=Ke().setTimeout(()=>{i(Ht(e,"network-request-failed"))},DD.get());Ke()[ff]=()=>{Ke().clearTimeout(s),delete Ke()[ff];const a=Ke().grecaptcha;if(!a||!c0(a)){i(Ht(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${N2()}?${To({onload:ff,render:"explicit",hl:n})}`;Eg(o).catch(()=>{clearTimeout(s),i(Ht(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Ke().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function MD(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class LD{async load(e){return new RD(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="recaptcha",VD={theme:"light",type:"image"};class jD{constructor(e,n,r=Object.assign({},VD)){this.parameters=r,this.type=lI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(e),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;q(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new LD:new OD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Ke()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(NT()&&!Ig(),this.auth,"internal-error"),await FD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await p2(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function FD(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Oa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function BD(t,e,n){if(en(t.app))return Promise.reject(Dn(t));const r=En(t),i=await zD(r,e,Le(n));return new UD(i,s=>JT(r,s))}async function zD(t,e,n){var r;const i=await n.verify();try{q(typeof i=="string",t,"argument-error"),q(n.type===lI,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return q(o.type==="enroll",t,"internal-error"),(await hD(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{q(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return q(a,t,"missing-multi-factor-info"),(await kD(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await G2(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t,e){return e?fr(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends zh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ys(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ys(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ys(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $D(t){return XT(t.auth,new kg(t),t.bypassAuthState)}function WD(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),rD(n,new kg(t),t.bypassAuthState)}async function HD(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),nD(n,new kg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $D;case"linkViaPopup":case"linkViaRedirect":return HD;case"reauthViaPopup":case"reauthViaRedirect":return WD;default:vn(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new Dl(2e3,1e4);async function KD(t,e,n){if(en(t.app))return Promise.reject(Ht(t,"operation-not-supported-in-this-environment"));const r=En(t);PT(t,e,$h);const i=Sg(r,n);return new zi(r,"signInViaPopup",e,i).executeNotNull()}class zi extends cI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,zi.currentPopupAction&&zi.currentPopupAction.cancel(),zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=Tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ht(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ht(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ht(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qD.get())};e()}}zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="pendingRedirect",ou=new Map;class QD extends cI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ou.get(this.auth._key());if(!e){try{const r=await YD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ou.set(this.auth._key(),e)}return this.bypassAuthState||ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YD(t,e){const n=hI(e),r=uI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function XD(t,e){return uI(t)._set(hI(e),"true")}function JD(t,e){ou.set(t._key(),e)}function uI(t){return fr(t._redirectPersistence)}function hI(t){return su(GD,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t,e,n){return ZD(t,e,n)}async function ZD(t,e,n){if(en(t.app))return Promise.reject(Dn(t));const r=En(t);PT(t,e,$h),await r._initializationPromise;const i=Sg(r,n);return await XD(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function eO(t,e){return await En(t)._initializationPromise,dI(t,e,!1)}async function dI(t,e,n=!1){if(en(t.app))return Promise.reject(Dn(t));const r=En(t),i=Sg(r,e),o=await new QD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=10*60*1e3;class nO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ht(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tO&&this.cachedEventUids.clear(),this.cachedEventUids.has(E0(e))}saveEventToCache(e){this.cachedEventUids.add(E0(e)),this.lastProcessedEventTime=Date.now()}}function E0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(t,e={}){return ln(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oO=/^https?/;async function aO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iO(t);for(const n of e)try{if(lO(n))return}catch{}vn(t,"unauthorized-domain")}function lO(t){const e=Vp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oO.test(n))return!1;if(sO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new Dl(3e4,6e4);function b0(){const t=Ke().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uO(t){return new Promise((e,n)=>{var r,i,s;function o(){b0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b0(),n(Ht(t,"network-request-failed"))},timeout:cO.get()})}if(!((i=(r=Ke().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ke().gapi)===null||s===void 0)&&s.load)o();else{const a=GT("iframefcb");return Ke()[a]=()=>{gapi.load?o():n(Ht(t,"network-request-failed"))},Eg(`${O2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw au=null,e})}let au=null;function hO(t){return au=au||uO(t),au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Dl(5e3,15e3),fO="__/auth/iframe",pO="emulator/auth/iframe",mO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yO(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vg(e,pO):`https://${t.config.authDomain}/${fO}`,r={apiKey:e.apiKey,appName:t.name,v:gs},i=gO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${To(r).slice(1)}`}async function _O(t){const e=await hO(t),n=Ke().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:yO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ht(t,"network-request-failed"),a=Ke().setTimeout(()=>{s(o)},dO.get());function l(){Ke().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wO=500,xO=600,EO="_blank",bO="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TO(t,e,n,r=wO,i=xO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vO),{width:r.toString(),height:i.toString(),top:s,left:o}),c=St().toLowerCase();n&&(a=BT(c)?EO:n),FT(c)&&(e=e||bO,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[_,E])=>`${p}${_}=${E},`,"");if(T2(c)&&a!=="_self")return IO(e||"",a),new T0(null);const d=window.open(e||"",a,h);q(d,t,"popup-blocked");try{d.focus()}catch{}return new T0(d)}function IO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="__/auth/handler",kO="emulator/auth/handler",AO=encodeURIComponent("fac");async function I0(t,e,n,r,i,s){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gs,eventId:i};if(e instanceof $h){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$P(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Ml){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${AO}=${encodeURIComponent(l)}`:"";return`${CO(t)}?${To(a).slice(1)}${c}`}function CO({config:t}){return t.emulator?vg(t,kO):`https://${t.authDomain}/${SO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="webStorageSupport";class RO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iI,this._completeRedirectFn=dI,this._overrideRedirectResult=JD}async _openPopup(e,n,r,i){var s;xr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await I0(e,n,r,Vp(),i);return TO(e,o,Tg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await I0(e,n,r,Vp(),i);return yD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _O(e),r=new nO(e);return n.register("authEvent",i=>(q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pf,{type:pf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[pf];o!==void 0&&n(!!o),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qT()||UT()||xg()}}const PO=RO;var S0="@firebase/auth",k0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OO(t){Mn(new _n("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KT(t)},c=new R2(r,i,s,l);return F2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new _n("auth-internal",e=>{const n=En(e.getProvider("auth").getImmediate());return(r=>new NO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(S0,k0,DO(t)),Wt(S0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=5*60,LO=wT("authIdTokenMaxAge")||MO;let A0=null;const VO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LO)return;const i=n==null?void 0:n.token;A0!==i&&(A0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jO(t=Bh()){const e=wi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=j2(t,{popupRedirectResolver:PO,persistence:[SD,pD,iI]}),r=wT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=VO(s.toString());lD(n,o,()=>o(n.currentUser)),aD(n,a=>o(a))}}const i=yT("auth");return i&&U2(n,`http://${i}`),n}function FO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}P2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ht("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",FO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OO("Browser");const pI="@firebase/installations",Ag="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=1e4,gI=`w:${Ag}`,yI="FIS_v2",UO="https://firebaseinstallations.googleapis.com/v1",BO=60*60*1e3,zO="installations",$O="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ss=new ms(zO,$O,WO);function _I(t){return t instanceof xn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI({projectId:t}){return`${UO}/projects/${t}/installations`}function wI(t){return{token:t.token,requestStatus:2,expiresIn:qO(t.expiresIn),creationTime:Date.now()}}async function xI(t,e){const r=(await e.json()).error;return ss.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function EI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function HO(t,{refreshToken:e}){const n=EI(t);return n.append("Authorization",KO(e)),n}async function bI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function qO(t){return Number(t.replace("s","000"))}function KO(t){return`${yI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=vI(t),i=EI(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:yI,appId:t.appId,sdkVersion:gI},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await bI(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:wI(c.authToken)}}else throw await xI("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=/^[cdef][\w-]{21}$/,Bp="";function XO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=JO(t);return YO.test(n)?n:Bp}catch{return Bp}}function JO(t){return QO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new Map;function SI(t,e){const n=qh(t);kI(n,e),ZO(n,e)}function kI(t,e){const n=II.get(t);if(n)for(const r of n)r(e)}function ZO(t,e){const n=eM();n&&n.postMessage({key:t,fid:e}),tM()}let $i=null;function eM(){return!$i&&"BroadcastChannel"in self&&($i=new BroadcastChannel("[Firebase] FID Change"),$i.onmessage=t=>{kI(t.data.key,t.data.fid)}),$i}function tM(){II.size===0&&$i&&($i.close(),$i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="firebase-installations-database",rM=1,os="firebase-installations-store";let mf=null;function Cg(){return mf||(mf=IT(nM,rM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(os)}}})),mf}async function Yu(t,e){const n=qh(t),i=(await Cg()).transaction(os,"readwrite"),s=i.objectStore(os),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&SI(t,e.fid),e}async function AI(t){const e=qh(t),r=(await Cg()).transaction(os,"readwrite");await r.objectStore(os).delete(e),await r.done}async function Kh(t,e){const n=qh(t),i=(await Cg()).transaction(os,"readwrite"),s=i.objectStore(os),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&SI(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rg(t){let e;const n=await Kh(t.appConfig,r=>{const i=iM(r),s=sM(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Bp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function iM(t){const e=t||{fid:XO(),registrationStatus:0};return CI(e)}function sM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ss.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=oM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:aM(t)}:{installationEntry:e}}async function oM(t,e){try{const n=await GO(t,e);return Yu(t.appConfig,n)}catch(n){throw _I(n)&&n.customData.serverCode===409?await AI(t.appConfig):await Yu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function aM(t){let e=await C0(t.appConfig);for(;e.registrationStatus===1;)await TI(100),e=await C0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Rg(t);return r||n}return e}function C0(t){return Kh(t,e=>{if(!e)throw ss.create("installation-not-found");return CI(e)})}function CI(t){return lM(t)?{fid:t.fid,registrationStatus:0}:t}function lM(t){return t.registrationStatus===1&&t.registrationTime+mI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM({appConfig:t,heartbeatServiceProvider:e},n){const r=uM(t,n),i=HO(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:gI,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await bI(()=>fetch(r,a));if(l.ok){const c=await l.json();return wI(c)}else throw await xI("Generate Auth Token",l)}function uM(t,{fid:e}){return`${vI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pg(t,e=!1){let n;const r=await Kh(t.appConfig,s=>{if(!RI(s))throw ss.create("not-registered");const o=s.authToken;if(!e&&fM(o))return s;if(o.requestStatus===1)return n=hM(t,e),s;{if(!navigator.onLine)throw ss.create("app-offline");const a=mM(s);return n=dM(t,a),a}});return n?await n:r.authToken}async function hM(t,e){let n=await R0(t.appConfig);for(;n.authToken.requestStatus===1;)await TI(100),n=await R0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Pg(t,e):r}function R0(t){return Kh(t,e=>{if(!RI(e))throw ss.create("not-registered");const n=e.authToken;return gM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function dM(t,e){try{const n=await cM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Yu(t.appConfig,r),n}catch(n){if(_I(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await AI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Yu(t.appConfig,r)}throw n}}function RI(t){return t!==void 0&&t.registrationStatus===2}function fM(t){return t.requestStatus===2&&!pM(t)}function pM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+BO}function mM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function gM(t){return t.requestStatus===1&&t.requestTime+mI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(t){const e=t,{installationEntry:n,registrationPromise:r}=await Rg(e);return r?r.catch(console.error):Pg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e=!1){const n=t;return await vM(n),(await Pg(n,e)).token}async function vM(t){const{registrationPromise:e}=await Rg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){if(!t||!t.options)throw gf("App Configuration");if(!t.name)throw gf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw gf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function gf(t){return ss.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="installations",xM="installations-internal",EM=t=>{const e=t.getProvider("app").getImmediate(),n=wM(e),r=wi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},bM=t=>{const e=t.getProvider("app").getImmediate(),n=wi(e,PI).getImmediate();return{getId:()=>yM(n),getToken:i=>_M(n,i)}};function TM(){Mn(new _n(PI,EM,"PUBLIC")),Mn(new _n(xM,bM,"PRIVATE"))}TM();Wt(pI,Ag);Wt(pI,Ag,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="analytics",IM="firebase_id",SM="origin",kM=60*1e3,AM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ng="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt=new Uh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},rn=new ms("analytics","Analytics",CM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){if(!t.startsWith(Ng)){const e=rn.create("invalid-gtag-resource",{gtagURL:t});return qt.warn(e.message),""}return t}function NI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function PM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function NM(t,e){const n=PM("firebase-js-sdk-policy",{createScriptURL:RM}),r=document.createElement("script"),i=`${Ng}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function DM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function OM(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await NI(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){qt.error(a)}t("config",i,s)}async function MM(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await NI(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){qt.error(s)}}function LM(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await MM(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await OM(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){qt.error(a)}}return i}function VM(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=LM(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function jM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ng)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=30,UM=1e3;class BM{constructor(e={},n=UM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const DI=new BM;function zM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function $M(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:zM(r)},s=AM.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw rn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function WM(t,e=DI,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw rn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw rn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new KM;return setTimeout(async()=>{a.abort()},kM),OI({appId:r,apiKey:i,measurementId:s},o,a,e)}async function OI(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=DI){var s;const{appId:o,measurementId:a}=t;try{await HM(r,e)}catch(l){if(a)return qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await $M(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!qM(c)){if(i.deleteThrottleMetadata(o),a)return qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?Zv(n,i.intervalMillis,FM):Zv(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,d),qt.debug(`Calling attemptFetch again in ${h} millis`),OI(t,d,r,i)}}function HM(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(rn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function qM(t){if(!(t instanceof xn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class KM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function GM(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(){if(fg())try{await pg()}catch(t){return qt.warn(rn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return qt.warn(rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function YM(t,e,n,r,i,s,o){var a;const l=WM(t);l.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&qt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>qt.error(_)),e.push(l);const c=QM().then(_=>{if(_)return r.getId()}),[h,d]=await Promise.all([l,c]);jM(s)||NM(s,h.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[SM]="firebase",p.update=!0,d!=null&&(p[IM]=d),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.app=e}_delete(){return delete Ma[this.app.options.appId],Promise.resolve()}}let Ma={},P0=[];const N0={};let yf="dataLayer",JM="gtag",D0,MI,O0=!1;function ZM(){const t=[];if(dg()&&t.push("This is a browser extension environment."),ET()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=rn.create("invalid-analytics-context",{errorInfo:e});qt.warn(n.message)}}function eL(t,e,n){ZM();const r=t.options.appId;if(!r)throw rn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw rn.create("no-api-key");if(Ma[r]!=null)throw rn.create("already-exists",{id:r});if(!O0){DM(yf);const{wrappedGtag:s,gtagCore:o}=VM(Ma,P0,N0,yf,JM);MI=s,D0=o,O0=!0}return Ma[r]=YM(t,P0,N0,e,D0,yf,n),new XM(t)}function tL(t=Bh()){t=Le(t);const e=wi(t,Xu);return e.isInitialized()?e.getImmediate():nL(t)}function nL(t,e={}){const n=wi(t,Xu);if(n.isInitialized()){const i=n.getImmediate();if(dl(e,n.getOptions()))return i;throw rn.create("already-initialized")}return n.initialize({options:e})}async function rL(){if(dg()||!ET()||!fg())return!1;try{return await pg()}catch{return!1}}function iL(t,e,n,r){t=Le(t),GM(MI,Ma[t.app.options.appId],e,n,r).catch(i=>qt.error(i))}const M0="@firebase/analytics",L0="0.10.8";function sL(){Mn(new _n(Xu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return eL(r,i,n)},"PUBLIC")),Mn(new _n("analytics-internal",t,"PRIVATE")),Wt(M0,L0),Wt(M0,L0,"esm2017");function t(e){try{const n=e.getProvider(Xu).getImmediate();return{logEvent:(r,i,s)=>iL(n,r,i,s)}}catch(n){throw rn.create("interop-component-reg-failed",{reason:n})}}}sL();var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,LI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function k(){}k.prototype=x.prototype,I.D=x.prototype,I.prototype=new k,I.prototype.constructor=I,I.C=function(A,P,N){for(var C=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)C[Z-2]=arguments[Z];return x.prototype[P].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,x,k){k||(k=0);var A=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)A[P]=x.charCodeAt(k++)|x.charCodeAt(k++)<<8|x.charCodeAt(k++)<<16|x.charCodeAt(k++)<<24;else for(P=0;16>P;++P)A[P]=x[k++]|x[k++]<<8|x[k++]<<16|x[k++]<<24;x=I.g[0],k=I.g[1],P=I.g[2];var N=I.g[3],C=x+(N^k&(P^N))+A[0]+3614090360&4294967295;x=k+(C<<7&4294967295|C>>>25),C=N+(P^x&(k^P))+A[1]+3905402710&4294967295,N=x+(C<<12&4294967295|C>>>20),C=P+(k^N&(x^k))+A[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(x^P&(N^x))+A[3]+3250441966&4294967295,k=P+(C<<22&4294967295|C>>>10),C=x+(N^k&(P^N))+A[4]+4118548399&4294967295,x=k+(C<<7&4294967295|C>>>25),C=N+(P^x&(k^P))+A[5]+1200080426&4294967295,N=x+(C<<12&4294967295|C>>>20),C=P+(k^N&(x^k))+A[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(x^P&(N^x))+A[7]+4249261313&4294967295,k=P+(C<<22&4294967295|C>>>10),C=x+(N^k&(P^N))+A[8]+1770035416&4294967295,x=k+(C<<7&4294967295|C>>>25),C=N+(P^x&(k^P))+A[9]+2336552879&4294967295,N=x+(C<<12&4294967295|C>>>20),C=P+(k^N&(x^k))+A[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(x^P&(N^x))+A[11]+2304563134&4294967295,k=P+(C<<22&4294967295|C>>>10),C=x+(N^k&(P^N))+A[12]+1804603682&4294967295,x=k+(C<<7&4294967295|C>>>25),C=N+(P^x&(k^P))+A[13]+4254626195&4294967295,N=x+(C<<12&4294967295|C>>>20),C=P+(k^N&(x^k))+A[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(x^P&(N^x))+A[15]+1236535329&4294967295,k=P+(C<<22&4294967295|C>>>10),C=x+(P^N&(k^P))+A[1]+4129170786&4294967295,x=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(x^k))+A[6]+3225465664&4294967295,N=x+(C<<9&4294967295|C>>>23),C=P+(x^k&(N^x))+A[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^x&(P^N))+A[0]+3921069994&4294967295,k=P+(C<<20&4294967295|C>>>12),C=x+(P^N&(k^P))+A[5]+3593408605&4294967295,x=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(x^k))+A[10]+38016083&4294967295,N=x+(C<<9&4294967295|C>>>23),C=P+(x^k&(N^x))+A[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^x&(P^N))+A[4]+3889429448&4294967295,k=P+(C<<20&4294967295|C>>>12),C=x+(P^N&(k^P))+A[9]+568446438&4294967295,x=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(x^k))+A[14]+3275163606&4294967295,N=x+(C<<9&4294967295|C>>>23),C=P+(x^k&(N^x))+A[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^x&(P^N))+A[8]+1163531501&4294967295,k=P+(C<<20&4294967295|C>>>12),C=x+(P^N&(k^P))+A[13]+2850285829&4294967295,x=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(x^k))+A[2]+4243563512&4294967295,N=x+(C<<9&4294967295|C>>>23),C=P+(x^k&(N^x))+A[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^x&(P^N))+A[12]+2368359562&4294967295,k=P+(C<<20&4294967295|C>>>12),C=x+(k^P^N)+A[5]+4294588738&4294967295,x=k+(C<<4&4294967295|C>>>28),C=N+(x^k^P)+A[8]+2272392833&4294967295,N=x+(C<<11&4294967295|C>>>21),C=P+(N^x^k)+A[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^x)+A[14]+4259657740&4294967295,k=P+(C<<23&4294967295|C>>>9),C=x+(k^P^N)+A[1]+2763975236&4294967295,x=k+(C<<4&4294967295|C>>>28),C=N+(x^k^P)+A[4]+1272893353&4294967295,N=x+(C<<11&4294967295|C>>>21),C=P+(N^x^k)+A[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^x)+A[10]+3200236656&4294967295,k=P+(C<<23&4294967295|C>>>9),C=x+(k^P^N)+A[13]+681279174&4294967295,x=k+(C<<4&4294967295|C>>>28),C=N+(x^k^P)+A[0]+3936430074&4294967295,N=x+(C<<11&4294967295|C>>>21),C=P+(N^x^k)+A[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^x)+A[6]+76029189&4294967295,k=P+(C<<23&4294967295|C>>>9),C=x+(k^P^N)+A[9]+3654602809&4294967295,x=k+(C<<4&4294967295|C>>>28),C=N+(x^k^P)+A[12]+3873151461&4294967295,N=x+(C<<11&4294967295|C>>>21),C=P+(N^x^k)+A[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^x)+A[2]+3299628645&4294967295,k=P+(C<<23&4294967295|C>>>9),C=x+(P^(k|~N))+A[0]+4096336452&4294967295,x=k+(C<<6&4294967295|C>>>26),C=N+(k^(x|~P))+A[7]+1126891415&4294967295,N=x+(C<<10&4294967295|C>>>22),C=P+(x^(N|~k))+A[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~x))+A[5]+4237533241&4294967295,k=P+(C<<21&4294967295|C>>>11),C=x+(P^(k|~N))+A[12]+1700485571&4294967295,x=k+(C<<6&4294967295|C>>>26),C=N+(k^(x|~P))+A[3]+2399980690&4294967295,N=x+(C<<10&4294967295|C>>>22),C=P+(x^(N|~k))+A[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~x))+A[1]+2240044497&4294967295,k=P+(C<<21&4294967295|C>>>11),C=x+(P^(k|~N))+A[8]+1873313359&4294967295,x=k+(C<<6&4294967295|C>>>26),C=N+(k^(x|~P))+A[15]+4264355552&4294967295,N=x+(C<<10&4294967295|C>>>22),C=P+(x^(N|~k))+A[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~x))+A[13]+1309151649&4294967295,k=P+(C<<21&4294967295|C>>>11),C=x+(P^(k|~N))+A[4]+4149444226&4294967295,x=k+(C<<6&4294967295|C>>>26),C=N+(k^(x|~P))+A[11]+3174756917&4294967295,N=x+(C<<10&4294967295|C>>>22),C=P+(x^(N|~k))+A[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~x))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var k=x-this.blockSize,A=this.B,P=this.h,N=0;N<x;){if(P==0)for(;N<=k;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<x;)if(A[P++]=I.charCodeAt(N++),P==this.blockSize){i(this,A),P=0;break}}else for(;N<x;)if(A[P++]=I[N++],P==this.blockSize){i(this,A),P=0;break}}this.h=P,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var k=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=k&255,k/=256;for(this.u(I),I=Array(16),x=k=0;4>x;++x)for(var A=0;32>A;A+=8)I[k++]=this.g[x]>>>A&255;return I};function s(I,x){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=x(I)}function o(I,x){this.h=x;for(var k=[],A=!0,P=I.length-1;0<=P;P--){var N=I[P]|0;A&&N==x||(k[P]=N,A=!1)}this.g=k}var a={};function l(I){return-128<=I&&128>I?s(I,function(x){return new o([x|0],0>x?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return T(c(-I));for(var x=[],k=1,A=0;I>=k;A++)x[A]=I/k|0,k*=4294967296;return new o(x,0)}function h(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return T(h(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(x,8)),A=d,P=0;P<I.length;P+=8){var N=Math.min(8,I.length-P),C=parseInt(I.substring(P,P+N),x);8>N?(N=c(Math.pow(x,N)),A=A.j(N).add(c(C))):(A=A.j(k),A=A.add(c(C)))}return A}var d=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-T(this).m();for(var I=0,x=1,k=0;k<this.g.length;k++){var A=this.i(k);I+=(0<=A?A:4294967296+A)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(b(this))return"-"+T(this).toString(I);for(var x=c(Math.pow(I,6)),k=this,A="";;){var P=R(k,x).g;k=v(k,P.j(x));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(I);if(k=P,E(k))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function b(I){return I.h==-1}t.l=function(I){return I=v(this,I),b(I)?-1:E(I)?0:1};function T(I){for(var x=I.g.length,k=[],A=0;A<x;A++)k[A]=~I.g[A];return new o(k,~I.h).add(p)}t.abs=function(){return b(this)?T(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],A=0,P=0;P<=x;P++){var N=A+(this.i(P)&65535)+(I.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);A=C>>>16,N&=65535,C&=65535,k[P]=C<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(I,x){return I.add(T(x))}t.j=function(I){if(E(this)||E(I))return d;if(b(this))return b(I)?T(this).j(T(I)):T(T(this).j(I));if(b(I))return T(this.j(T(I)));if(0>this.l(_)&&0>I.l(_))return c(this.m()*I.m());for(var x=this.g.length+I.g.length,k=[],A=0;A<2*x;A++)k[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<I.g.length;P++){var N=this.i(A)>>>16,C=this.i(A)&65535,Z=I.i(P)>>>16,G=I.i(P)&65535;k[2*A+2*P]+=C*G,y(k,2*A+2*P),k[2*A+2*P+1]+=N*G,y(k,2*A+2*P+1),k[2*A+2*P+1]+=C*Z,y(k,2*A+2*P+1),k[2*A+2*P+2]+=N*Z,y(k,2*A+2*P+2)}for(A=0;A<x;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=x;A<2*x;A++)k[A]=0;return new o(k,0)};function y(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function w(I,x){this.g=I,this.h=x}function R(I,x){if(E(x))throw Error("division by zero");if(E(I))return new w(d,d);if(b(I))return x=R(T(I),x),new w(T(x.g),T(x.h));if(b(x))return x=R(I,T(x)),new w(T(x.g),x.h);if(30<I.g.length){if(b(I)||b(x))throw Error("slowDivide_ only works with positive integers.");for(var k=p,A=x;0>=A.l(I);)k=D(k),A=D(A);var P=M(k,1),N=M(A,1);for(A=M(A,2),k=M(k,2);!E(A);){var C=N.add(A);0>=C.l(I)&&(P=P.add(k),N=C),A=M(A,1),k=M(k,1)}return x=v(I,P.j(x)),new w(P,x)}for(P=d;0<=I.l(x);){for(k=Math.max(1,Math.floor(I.m()/x.m())),A=Math.ceil(Math.log(k)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=c(k),C=N.j(x);b(C)||0<C.l(I);)k-=A,N=c(k),C=N.j(x);E(N)&&(N=p),P=P.add(N),I=v(I,C)}return new w(P,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],A=0;A<x;A++)k[A]=this.i(A)&I.i(A);return new o(k,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],A=0;A<x;A++)k[A]=this.i(A)|I.i(A);return new o(k,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],A=0;A<x;A++)k[A]=this.i(A)^I.i(A);return new o(k,this.h^I.h)};function D(I){for(var x=I.g.length+1,k=[],A=0;A<x;A++)k[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(k,I.h)}function M(I,x){var k=x>>5;x%=32;for(var A=I.g.length-k,P=[],N=0;N<A;N++)P[N]=0<x?I.i(N+k)>>>x|I.i(N+k+1)<<32-x:I.i(N+k);return new o(P,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Qi=o}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VI,ma,jI,lu,zp,FI,UI,BI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in g))break e;g=g[L]}u=u[u.length-1],S=g[u],f=f(S),f!=S&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,S=!1,L={next:function(){if(!S&&g<u.length){var j=g++;return{value:f(j,u[j]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function _(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,L,j){for(var $=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)$[ve-2]=arguments[ve];return f.prototype[L].apply(S,$)}}function b(u){const f=u.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=u[S];return g}return[]}function T(u,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=u.length||0,j=S.length||0;u.length=L+j;for(let $=0;$<j;$++)u[L+$]=S[$]}else u.push(S)}}class v{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(u){return/^[\s\xa0]*$/.test(u)}function w(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var D=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function M(u,f,g){for(const S in u)f.call(g,u[S],S,u)}function I(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function x(u){const f={};for(const g in u)f[g]=u[g];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)u[g]=S[g];for(let j=0;j<k.length;j++)g=k[j],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function P(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function N(u){a.setTimeout(()=>{throw u},0)}function C(){var u=Q;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Z{constructor(){this.h=this.g=null}add(f,g){const S=G.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var G=new v(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,z=!1,Q=new Z,V=()=>{const u=a.Promise.resolve(void 0);ue=()=>{u.then(J)}};var J=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(g){N(g)}var f=G;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}z=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Re(u,f){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(D){e:{try{R(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:be[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Re.aa.h.call(this)}}E(Re,he);var be={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),et=0;function jn(u,f,g,S,L){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=L,this.key=++et,this.da=this.fa=!1}function Do(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function bi(u){this.src=u,this.g={},this.h=0}bi.prototype.add=function(u,f,g,S,L){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var $=Ii(u,f,S,L);return-1<$?(f=u[$],g||(f.fa=!1)):(f=new jn(f,this.src,j,!!S,L),f.fa=g,u.push(f)),f};function Ti(u,f){var g=f.type;if(g in u.g){var S=u.g[g],L=Array.prototype.indexOf.call(S,f,void 0),j;(j=0<=L)&&Array.prototype.splice.call(S,L,1),j&&(Do(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Ii(u,f,g,S){for(var L=0;L<u.length;++L){var j=u[L];if(!j.da&&j.listener==f&&j.capture==!!g&&j.ha==S)return L}return-1}var dd="closure_lm_"+(1e6*Math.random()|0),fd={};function Ly(u,f,g,S,L){if(Array.isArray(f)){for(var j=0;j<f.length;j++)Ly(u,f[j],g,S,L);return null}return g=Fy(g),u&&u[ft]?u.K(f,g,c(S)?!!S.capture:!1,L):m1(u,f,g,!1,S,L)}function m1(u,f,g,S,L,j){if(!f)throw Error("Invalid event type");var $=c(L)?!!L.capture:!!L,ve=md(u);if(ve||(u[dd]=ve=new bi(u)),g=ve.add(f,g,S,$,j),g.proxy)return g;if(S=g1(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)Ce||(L=$),L===void 0&&(L=!1),u.addEventListener(f.toString(),S,L);else if(u.attachEvent)u.attachEvent(jy(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function g1(){function u(g){return f.call(u.src,u.listener,g)}const f=y1;return u}function Vy(u,f,g,S,L){if(Array.isArray(f))for(var j=0;j<f.length;j++)Vy(u,f[j],g,S,L);else S=c(S)?!!S.capture:!!S,g=Fy(g),u&&u[ft]?(u=u.i,f=String(f).toString(),f in u.g&&(j=u.g[f],g=Ii(j,g,S,L),-1<g&&(Do(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete u.g[f],u.h--)))):u&&(u=md(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ii(f,g,S,L)),(g=-1<u?f[u]:null)&&pd(g))}function pd(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[ft])Ti(f.i,u);else{var g=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(g,S,u.capture):f.detachEvent?f.detachEvent(jy(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=md(f))?(Ti(g,u),g.h==0&&(g.src=null,f[dd]=null)):Do(u)}}}function jy(u){return u in fd?fd[u]:fd[u]="on"+u}function y1(u,f){if(u.da)u=!0;else{f=new Re(f,this);var g=u.listener,S=u.ha||u.src;u.fa&&pd(u),u=g.call(S,f)}return u}function md(u){return u=u[dd],u instanceof bi?u:null}var gd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fy(u){return typeof u=="function"?u:(u[gd]||(u[gd]=function(f){return u.handleEvent(f)}),u[gd])}function pt(){Y.call(this),this.i=new bi(this),this.M=this,this.F=null}E(pt,Y),pt.prototype[ft]=!0,pt.prototype.removeEventListener=function(u,f,g,S){Vy(this,u,f,g,S)};function kt(u,f){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new he(f,u);else if(f instanceof he)f.target=f.target||u;else{var L=f;f=new he(S,u),A(f,L)}if(L=!0,g)for(var j=g.length-1;0<=j;j--){var $=f.g=g[j];L=Hl($,S,!0,f)&&L}if($=f.g=u,L=Hl($,S,!0,f)&&L,L=Hl($,S,!1,f)&&L,g)for(j=0;j<g.length;j++)$=f.g=g[j],L=Hl($,S,!1,f)&&L}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],S=0;S<g.length;S++)Do(g[S]);delete u.g[f],u.h--}}this.F=null},pt.prototype.K=function(u,f,g,S){return this.i.add(String(u),f,!1,g,S)},pt.prototype.L=function(u,f,g,S){return this.i.add(String(u),f,!0,g,S)};function Hl(u,f,g,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,j=0;j<f.length;++j){var $=f[j];if($&&!$.da&&$.capture==g){var ve=$.listener,it=$.ha||$.src;$.fa&&Ti(u.i,$),L=ve.call(it,S)!==!1&&L}}return L&&!S.defaultPrevented}function Uy(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function By(u){u.g=Uy(()=>{u.g=null,u.i&&(u.i=!1,By(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class _1 extends Y{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:By(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oo(u){Y.call(this),this.h=u,this.g={}}E(Oo,Y);var zy=[];function $y(u){M(u.g,function(f,g){this.g.hasOwnProperty(g)&&pd(f)},u),u.g={}}Oo.prototype.N=function(){Oo.aa.N.call(this),$y(this)},Oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yd=a.JSON.stringify,v1=a.JSON.parse,w1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function _d(){}_d.prototype.h=null;function Wy(u){return u.h||(u.h=u.i())}function Hy(){}var Mo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vd(){he.call(this,"d")}E(vd,he);function wd(){he.call(this,"c")}E(wd,he);var Si={},qy=null;function ql(){return qy=qy||new pt}Si.La="serverreachability";function Ky(u){he.call(this,Si.La,u)}E(Ky,he);function Lo(u){const f=ql();kt(f,new Ky(f))}Si.STAT_EVENT="statevent";function Gy(u,f){he.call(this,Si.STAT_EVENT,u),this.stat=f}E(Gy,he);function At(u){const f=ql();kt(f,new Gy(f,u))}Si.Ma="timingevent";function Qy(u,f){he.call(this,Si.Ma,u),this.size=f}E(Qy,he);function Vo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function x1(u,f,g,S,L,j){u.info(function(){if(u.g)if(j)for(var $="",ve=j.split("&"),it=0;it<ve.length;it++){var fe=ve[it].split("=");if(1<fe.length){var mt=fe[0];fe=fe[1];var gt=mt.split("_");$=2<=gt.length&&gt[1]=="type"?$+(mt+"="+fe+"&"):$+(mt+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+f+`
`+g+`
`+$})}function E1(u,f,g,S,L,j,$){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+f+`
`+g+`
`+j+" "+$})}function xs(u,f,g,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+T1(u,g)+(S?" "+S:"")})}function b1(u,f){u.info(function(){return"TIMEOUT: "+f})}jo.prototype.info=function(){};function T1(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<L.length;$++)L[$]=""}}}}return yd(g)}catch{return f}}var Kl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xd;function Gl(){}E(Gl,_d),Gl.prototype.g=function(){return new XMLHttpRequest},Gl.prototype.i=function(){return{}},xd=new Gl;function Sr(u,f,g,S){this.j=u,this.i=f,this.l=g,this.R=S||1,this.U=new Oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var Jy={},Ed={};function bd(u,f,g){u.L=1,u.v=Jl(er(f)),u.m=g,u.P=!0,Zy(u,null)}function Zy(u,f){u.F=Date.now(),Ql(u),u.A=er(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),f_(g.i,"t",S),u.C=0,g=u.j.J,u.h=new Xy,u.g=P_(u.j,g?f:null,!u.m),0<u.O&&(u.M=new _1(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(zy[0]=L.toString()),L=zy);for(var j=0;j<L.length;j++){var $=Ly(g,L[j],S||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Lo(),x1(u.i,u.u,u.A,u.l,u.R,u.m)}Sr.prototype.ca=function(u){u=u.target;const f=this.M;f&&tr(u)==3?f.j():this.Y(u)},Sr.prototype.Y=function(u){try{if(u==this.g)e:{const gt=tr(this.g);var f=this.g.Ba();const Ts=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||w_(this.g)))){this.J||gt!=4||f==7||(f==8||0>=Ts?Lo(3):Lo(2)),Td(this);var g=this.g.Z();this.X=g;t:if(e_(this)){var S=w_(this.g);u="";var L=S.length,j=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),Fo(this);var $="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(j&&f==L-1)});S.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,E1(this.i,this.u,this.A,this.l,this.R,gt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,it=this.g;if((ve=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ve)){var fe=ve;break t}}fe=null}if(g=fe)xs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Id(this,g);else{this.o=!1,this.s=3,At(12),ki(this),Fo(this);break e}}if(this.P){g=!0;let bn;for(;!this.J&&this.C<$.length;)if(bn=I1(this,$),bn==Ed){gt==4&&(this.s=4,At(14),g=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==Jy){this.s=4,At(15),xs(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else xs(this.i,this.l,bn,null),Id(this,bn);if(e_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||$.length!=0||this.h.h||(this.s=1,At(16),g=!1),this.o=this.o&&g,!g)xs(this.i,this.l,$,"[Invalid Chunked Response]"),ki(this),Fo(this);else if(0<$.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Pd(mt),mt.M=!0,At(11))}}else xs(this.i,this.l,$,null),Id(this,$);gt==4&&ki(this),this.o&&!this.J&&(gt==4?k_(this.j,this):(this.o=!1,Ql(this)))}else z1(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),ki(this),Fo(this)}}}catch{}finally{}};function e_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function I1(u,f){var g=u.C,S=f.indexOf(`
`,g);return S==-1?Ed:(g=Number(f.substring(g,S)),isNaN(g)?Jy:(S+=1,S+g>f.length?Ed:(f=f.slice(S,S+g),u.C=S+g,f)))}Sr.prototype.cancel=function(){this.J=!0,ki(this)};function Ql(u){u.S=Date.now()+u.I,t_(u,u.I)}function t_(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vo(p(u.ba,u),f)}function Td(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Sr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(b1(this.i,this.A),this.L!=2&&(Lo(),At(17)),ki(this),this.s=2,Fo(this)):t_(this,this.S-u)};function Fo(u){u.j.G==0||u.J||k_(u.j,u)}function ki(u){Td(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,$y(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Id(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Sd(g.h,u))){if(!u.K&&Sd(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)ic(g),nc(g);else break e;Rd(g),At(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Vo(p(g.Za,g),6e3));if(1>=i_(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ci(g,11)}else if((u.K||g.g==u)&&ic(g),!y(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let fe=L[f];if(g.T=fe[0],fe=fe[1],g.G==2)if(fe[0]=="c"){g.K=fe[1],g.ia=fe[2];const mt=fe[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const gt=fe[4];gt!=null&&(g.Aa=gt,g.j.info("SVER="+g.Aa));const Ts=fe[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(S=1.5*Ts,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const bn=u.g;if(bn){const oc=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oc){var j=S.h;j.g||oc.indexOf("spdy")==-1&&oc.indexOf("quic")==-1&&oc.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(kd(j,j.h),j.h=null))}if(S.D){const Nd=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nd&&(S.ya=Nd,Te(S.I,S.D,Nd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var $=u;if(S.qa=R_(S,S.J?S.ia:null,S.W),$.K){s_(S.h,$);var ve=$,it=S.L;it&&(ve.I=it),ve.B&&(Td(ve),Ql(ve)),S.g=$}else I_(S);0<g.i.length&&rc(g)}else fe[0]!="stop"&&fe[0]!="close"||Ci(g,7);else g.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Ci(g,7):Cd(g):fe[0]!="noop"&&g.l&&g.l.ta(fe),g.v=0)}}Lo(4)}catch{}}var S1=class{constructor(u,f){this.g=u,this.map=f}};function n_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function r_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function i_(u){return u.h?1:u.g?u.g.size:0}function Sd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function kd(u,f){u.g?u.g.add(f):u.h=f}function s_(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}n_.prototype.cancel=function(){if(this.i=o_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function o_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return b(u.i)}function k1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,S=0;S<g;S++)f.push(u[S]);return f}f=[],g=0;for(S in u)f[g++]=u[S];return f}function A1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const S in u)f[g++]=S;return f}}}function a_(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=A1(u),S=k1(u),L=S.length,j=0;j<L;j++)f.call(void 0,S[j],g&&g[j],u)}var l_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C1(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),L=null;if(0<=S){var j=u[g].substring(0,S);L=u[g].substring(S+1)}else j=u[g];f(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ai(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ai){this.h=u.h,Yl(this,u.j),this.o=u.o,this.g=u.g,Xl(this,u.s),this.l=u.l;var f=u.i,g=new zo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),c_(this,g),this.m=u.m}else u&&(f=String(u).match(l_))?(this.h=!1,Yl(this,f[1]||"",!0),this.o=Uo(f[2]||""),this.g=Uo(f[3]||"",!0),Xl(this,f[4]),this.l=Uo(f[5]||"",!0),c_(this,f[6]||"",!0),this.m=Uo(f[7]||"")):(this.h=!1,this.i=new zo(null,this.h))}Ai.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Bo(f,u_,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Bo(f,u_,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Bo(g,g.charAt(0)=="/"?N1:P1,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Bo(g,O1)),u.join("")};function er(u){return new Ai(u)}function Yl(u,f,g){u.j=g?Uo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Xl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function c_(u,f,g){f instanceof zo?(u.i=f,M1(u.i,u.h)):(g||(f=Bo(f,D1)),u.i=new zo(f,u.h))}function Te(u,f,g){u.i.set(f,g)}function Jl(u){return Te(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Uo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bo(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,R1),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function R1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var u_=/[#\/\?@]/g,P1=/[#\?:]/g,N1=/[#\?]/g,D1=/[#\?@]/g,O1=/#/g;function zo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function kr(u){u.g||(u.g=new Map,u.h=0,u.i&&C1(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=zo.prototype,t.add=function(u,f){kr(this),this.i=null,u=Es(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function h_(u,f){kr(u),f=Es(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function d_(u,f){return kr(u),f=Es(u,f),u.g.has(f)}t.forEach=function(u,f){kr(this),this.g.forEach(function(g,S){g.forEach(function(L){u.call(f,L,S,this)},this)},this)},t.na=function(){kr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const L=u[S];for(let j=0;j<L.length;j++)g.push(f[S])}return g},t.V=function(u){kr(this);let f=[];if(typeof u=="string")d_(this,u)&&(f=f.concat(this.g.get(Es(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return kr(this),this.i=null,u=Es(this,u),d_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function f_(u,f,g){h_(u,f),0<g.length&&(u.i=null,u.g.set(Es(u,f),b(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const j=encodeURIComponent(String(S)),$=this.V(S);for(S=0;S<$.length;S++){var L=j;$[S]!==""&&(L+="="+encodeURIComponent(String($[S]))),u.push(L)}}return this.i=u.join("&")};function Es(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function M1(u,f){f&&!u.j&&(kr(u),u.i=null,u.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(h_(this,S),f_(this,L,g))},u)),u.j=f}function L1(u,f){const g=new jo;if(a.Image){const S=new Image;S.onload=_(Ar,g,"TestLoadImage: loaded",!0,f,S),S.onerror=_(Ar,g,"TestLoadImage: error",!1,f,S),S.onabort=_(Ar,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=_(Ar,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function V1(u,f){const g=new jo,S=new AbortController,L=setTimeout(()=>{S.abort(),Ar(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(j=>{clearTimeout(L),j.ok?Ar(g,"TestPingServer: ok",!0,f):Ar(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Ar(g,"TestPingServer: error",!1,f)})}function Ar(u,f,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function j1(){this.g=new w1}function F1(u,f,g){const S=g||"";try{a_(u,function(L,j){let $=L;c(L)&&($=yd(L)),f.push(S+j+"="+encodeURIComponent($))})}catch(L){throw f.push(S+"type="+encodeURIComponent("_badmap")),L}}function Zl(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Zl,_d),Zl.prototype.g=function(){return new ec(this.l,this.j)},Zl.prototype.i=function(u){return function(){return u}}({});function ec(u,f){pt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(ec,pt),t=ec.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Wo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;p_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function p_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?$o(this):Wo(this),this.readyState==3&&p_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$o(this))},t.Qa=function(u){this.g&&(this.response=u,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wo(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Wo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function m_(u){let f="";return M(u,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Ad(u,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=m_(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Te(u,f,g))}function je(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(je,pt);var U1=/^https?$/i,B1=["POST","PUT"];t=je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xd.g(),this.v=this.o?Wy(this.o):Wy(xd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(j){g_(this,j);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const j of S.keys())g.set(j,S.get(j));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(B1,f,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of g)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v_(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){g_(this,j)}};function g_(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,y_(u),tc(u)}function y_(u){u.A||(u.A=!0,kt(u,"complete"),kt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,kt(this,"complete"),kt(this,"abort"),tc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tc(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?__(this):this.bb())},t.bb=function(){__(this)};function __(u){if(u.h&&typeof o<"u"&&(!u.v[1]||tr(u)!=4||u.Z()!=2)){if(u.u&&tr(u)==4)Uy(u.Ea,0,u);else if(kt(u,"readystatechange"),tr(u)==4){u.h=!1;try{const $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=$===0){var L=String(u.D).match(l_)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!U1.test(L?L.toLowerCase():"")}g=S}if(g)kt(u,"complete"),kt(u,"success");else{u.m=6;try{var j=2<tr(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",y_(u)}}finally{tc(u)}}}}function tc(u,f){if(u.g){v_(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||kt(u,"ready");try{g.onreadystatechange=S}catch{}}}function v_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function tr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),v1(f)}};function w_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function z1(u){const f={};u=(u.g&&2<=tr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(y(u[S]))continue;var g=P(u[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=f[L]||[];f[L]=j,j.push(g)}I(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function x_(u){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,u),this.cb=Ho("retryDelaySeedMs",1e4,u),this.Wa=Ho("forwardChannelMaxRetries",2,u),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new n_(u&&u.concurrentRequestLimit),this.Da=new j1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=x_.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,S){At(0),this.W=u,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=R_(this,null,this.W),rc(this)};function Cd(u){if(E_(u),u.G==3){var f=u.U++,g=er(u.I);if(Te(g,"SID",u.K),Te(g,"RID",f),Te(g,"TYPE","terminate"),qo(u,g),f=new Sr(u,u.j,f),f.L=2,f.v=Jl(er(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=P_(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ql(f)}C_(u)}function nc(u){u.g&&(Pd(u),u.g.cancel(),u.g=null)}function E_(u){nc(u),u.u&&(a.clearTimeout(u.u),u.u=null),ic(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function rc(u){if(!r_(u.h)&&!u.s){u.s=!0;var f=u.Ga;ue||V(),z||(ue(),z=!0),Q.add(f,u),u.B=0}}function $1(u,f){return i_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vo(p(u.Ga,u,f),A_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Sr(this,this.j,u);let j=this.o;if(this.S&&(j?(j=x(j),A(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=T_(this,L,f),g=er(this.I),Te(g,"RID",u),Te(g,"CVER",22),this.D&&Te(g,"X-HTTP-Session-Id",this.D),qo(this,g),j&&(this.O?f="headers="+encodeURIComponent(String(m_(j)))+"&"+f:this.m&&Ad(g,this.m,j)),kd(this.h,L),this.Ua&&Te(g,"TYPE","init"),this.P?(Te(g,"$req",f),Te(g,"SID","null"),L.T=!0,bd(L,g,null)):bd(L,g,f),this.G=2}}else this.G==3&&(u?b_(this,u):this.i.length==0||r_(this.h)||b_(this))};function b_(u,f){var g;f?g=f.l:g=u.U++;const S=er(u.I);Te(S,"SID",u.K),Te(S,"RID",g),Te(S,"AID",u.T),qo(u,S),u.m&&u.o&&Ad(S,u.m,u.o),g=new Sr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=T_(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),kd(u.h,g),bd(g,S,f)}function qo(u,f){u.H&&M(u.H,function(g,S){Te(f,S,g)}),u.l&&a_({},function(g,S){Te(f,S,g)})}function T_(u,f,g){g=Math.min(u.i.length,g);var S=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let j=-1;for(;;){const $=["count="+g];j==-1?0<g?(j=L[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let ve=!0;for(let it=0;it<g;it++){let fe=L[it].g;const mt=L[it].map;if(fe-=j,0>fe)j=Math.max(0,L[it].g-100),ve=!1;else try{F1(mt,$,"req"+fe+"_")}catch{S&&S(mt)}}if(ve){S=$.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,S}function I_(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ue||V(),z||(ue(),z=!0),Q.add(f,u),u.v=0}}function Rd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vo(p(u.Fa,u),A_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,S_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vo(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),nc(this),S_(this))};function Pd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function S_(u){u.g=new Sr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=er(u.qa);Te(f,"RID","rpc"),Te(f,"SID",u.K),Te(f,"AID",u.T),Te(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Te(f,"TO",u.ja),Te(f,"TYPE","xmlhttp"),qo(u,f),u.m&&u.o&&Ad(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Jl(er(f)),g.m=null,g.P=!0,Zy(g,u)}t.Za=function(){this.C!=null&&(this.C=null,nc(this),Rd(this),At(19))};function ic(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function k_(u,f){var g=null;if(u.g==f){ic(u),Pd(u),u.g=null;var S=2}else if(Sd(u.h,f))g=f.D,s_(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;S=ql(),kt(S,new Qy(S,g)),rc(u)}else I_(u);else if(L=f.s,L==3||L==0&&0<f.X||!(S==1&&$1(u,f)||S==2&&Rd(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),L){case 1:Ci(u,5);break;case 4:Ci(u,10);break;case 3:Ci(u,6);break;default:Ci(u,2)}}}function A_(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Ci(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),S=u.Xa;const L=!S;S=new Ai(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yl(S,"https"),Jl(S),L?L1(S.toString(),g):V1(S.toString(),g)}else At(2);u.G=0,u.l&&u.l.sa(f),C_(u),E_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function C_(u){if(u.G=0,u.ka=[],u.l){const f=o_(u.h);(f.length!=0||u.i.length!=0)&&(T(u.ka,f),T(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function R_(u,f,g){var S=g instanceof Ai?er(g):new Ai(g);if(S.g!="")f&&(S.g=f+"."+S.g),Xl(S,S.s);else{var L=a.location;S=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var j=new Ai(null);S&&Yl(j,S),f&&(j.g=f),L&&Xl(j,L),g&&(j.l=g),S=j}return g=u.D,f=u.ya,g&&f&&Te(S,g,f),Te(S,"VER",u.la),qo(u,S),S}function P_(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new je(new Zl({eb:g})):new je(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function N_(){}t=N_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sc(){}sc.prototype.g=function(u,f){return new Qt(u,f)};function Qt(u,f){pt.call(this),this.g=new x_(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!y(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new bs(this)}E(Qt,pt),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Cd(this.g)},Qt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=yd(u),u=g);f.i.push(new S1(f.Ya++,u)),f.G==3&&rc(f)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Cd(this.g),delete this.g,Qt.aa.N.call(this)};function D_(u){vd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}E(D_,vd);function O_(){wd.call(this),this.status=1}E(O_,wd);function bs(u){this.g=u}E(bs,N_),bs.prototype.ua=function(){kt(this.g,"a")},bs.prototype.ta=function(u){kt(this.g,new D_(u))},bs.prototype.sa=function(u){kt(this.g,new O_)},bs.prototype.ra=function(){kt(this.g,"b")},sc.prototype.createWebChannel=sc.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,BI=function(){return new sc},UI=function(){return ql()},FI=Si,zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kl.NO_ERROR=0,Kl.TIMEOUT=8,Kl.HTTP_ERROR=6,lu=Kl,Yy.COMPLETE="complete",jI=Yy,Hy.EventType=Mo,Mo.OPEN="a",Mo.CLOSE="b",Mo.ERROR="c",Mo.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ma=Hy,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,VI=je}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const j0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Uh("@firebase/firestore");function ta(){return as.logLevel}function K(t,...e){if(as.logLevel<=ae.DEBUG){const n=e.map(Dg);as.debug(`Firestore (${So}): ${t}`,...n)}}function Er(t,...e){if(as.logLevel<=ae.ERROR){const n=e.map(Dg);as.error(`Firestore (${So}): ${t}`,...n)}}function lo(t,...e){if(as.logLevel<=ae.WARN){const n=e.map(Dg);as.warn(`Firestore (${So}): ${t}`,...n)}}function Dg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+t;throw Er(e),new Error(e)}function _e(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class aL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lL{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new zI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new xt(e)}}class cL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new cL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new hL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function co(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ue(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Ue(0,0))}static max(){return new te(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends ml{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const pL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends ml{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return pL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(ke.fromString(e))}static fromName(e){return new X(ke.fromString(e).popFirst(5))}static empty(){return new X(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new ke(e.slice()))}}function mL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new ci(i,X.empty(),e)}function gL(t){return new ci(t.readTime,t.key,-1)}class ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ci(te.min(),X.empty(),-1)}static max(){return new ci(te.max(),X.empty(),-1)}}function yL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==_L)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function wL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Og.oe=-1;function Gh(t){return t==null}function Ju(t){return t===0&&1/t==-1/0}function xL(t){return typeof t=="number"&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=s??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U0(this.data.getIterator())}getIteratorFrom(e){return new U0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class U0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new ut(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HI("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const EL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(t){if(_e(!!t),typeof t=="string"){let e=0;const n=EL.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Lg(t){const e=t.mapValue.fields.__previous_value__;return Mg(e)?Lg(e):e}function gl(t){const e=ui(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class yl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc={mapValue:{}};function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mg(t)?4:IL(t)?9007199254740991:TL(t)?10:11:ee()}function Zn(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ui(i.timestampValue),a=ui(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ls(i.bytesValue).isEqual(ls(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return $e(i.geoPointValue.latitude)===$e(s.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return $e(i.integerValue)===$e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=$e(i.doubleValue),a=$e(s.doubleValue);return o===a?Ju(o)===Ju(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(F0(o)!==F0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Zn(o[l],a[l])))return!1;return!0}(t,e);default:return ee()}}function _l(t,e){return(t.values||[]).find(n=>Zn(n,e))!==void 0}function uo(t,e){if(t===e)return 0;const n=cs(t),r=cs(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=$e(s.integerValue||s.doubleValue),l=$e(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return B0(t.timestampValue,e.timestampValue);case 4:return B0(gl(t),gl(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ls(s),l=ls(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=pe(a[c],l[c]);if(h!==0)return h}return pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=pe($e(s.latitude),$e(o.latitude));return a!==0?a:pe($e(s.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return z0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},_=(a=d.value)===null||a===void 0?void 0:a.arrayValue,E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=pe(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:z0(_,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===kc.mapValue&&o===kc.mapValue)return 0;if(s===kc.mapValue)return 1;if(o===kc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=pe(l[d],h[d]);if(p!==0)return p;const _=uo(a[l[d]],c[h[d]]);if(_!==0)return _}return pe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function B0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=ui(t),r=ui(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function z0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=uo(n[i],r[i]);if(s)return s}return pe(n.length,r.length)}function ho(t){return $p(t)}function $p(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ui(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$p(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$p(n.fields[o])}`;return i+"}"}(t.mapValue):ee()}function $0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wp(t){return!!t&&"integerValue"in t}function Vg(t){return!!t&&"arrayValue"in t}function W0(t){return!!t&&"nullValue"in t}function H0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cu(t){return!!t&&"mapValue"in t}function TL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function La(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=La(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=La(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(n)}setAll(e){let n=at.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=La(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());cu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ko(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dn(La(this.value))}}function qI(t){const e=[];return ko(t.fields,(n,r)=>{const i=new at([n]);if(cu(r)){const s=qI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bt(e,0,te.min(),te.min(),te.min(),dn.empty(),0)}static newFoundDocument(e,n,r,i){return new bt(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new bt(e,2,n,te.min(),te.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,te.min(),te.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.position=e,this.inclusive=n}}function q0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=uo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function K0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function SL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{}class Qe extends KI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AL(e,n,r):n==="array-contains"?new PL(e,r):n==="in"?new NL(e,r):n==="not-in"?new DL(e,r):n==="array-contains-any"?new OL(e,r):new Qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CL(e,r):new RL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uo(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends KI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return GI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function GI(t){return t.op==="and"}function QI(t){return kL(t)&&GI(t)}function kL(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function Hp(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(QI(t))return t.filters.map(e=>Hp(e)).join(",");{const e=t.filters.map(n=>Hp(n)).join(",");return`${t.op}(${e})`}}function YI(t,e){return t instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&Zn(r.value,i.value)}(t,e):t instanceof Ln?function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&YI(o,i.filters[a]),!0):!1}(t,e):void ee()}function XI(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(XI).join(" ,")+"}"}(t):"Filter"}class AL extends Qe{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class CL extends Qe{constructor(e,n){super(e,"in",n),this.keys=JI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RL extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=JI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class PL extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vg(n)&&_l(n.arrayValue,this.value)}}class NL extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_l(this.value.arrayValue,n)}}class DL extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_l(this.value.arrayValue,n)}}class OL extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_l(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function G0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ML(t,e,n,r,i,s,o)}function jg(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ho(r)).join(",")),e.ue=n}return e.ue}function Fg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K0(t.startAt,e.startAt)&&K0(t.endAt,e.endAt)}function qp(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LL(t,e,n,r,i,s,o,a){return new Ao(t,e,n,r,i,s,o,a)}function Ug(t){return new Ao(t)}function Q0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZI(t){return t.collectionGroup!==null}function Va(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ut(at.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vl(s,r))}),n.has(at.keyField().canonicalString())||e.ce.push(new vl(at.keyField(),r))}return e.ce}function Qn(t){const e=ne(t);return e.le||(e.le=VL(e,Va(t))),e.le}function VL(t,e){if(t.limitType==="F")return G0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new vl(i.field,s)});const n=t.endAt?new Zu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zu(t.startAt.position,t.startAt.inclusive):null;return G0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kp(t,e){const n=t.filters.concat([e]);return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eh(t,e,n){return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qh(t,e){return Fg(Qn(t),Qn(e))&&t.limitType===e.limitType}function eS(t){return`${jg(Qn(t))}|lt:${t.limitType}`}function ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XI(i)).join(", ")}]`),Gh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ho(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ho(i)).join(",")),`Target(${r})`}(Qn(t))}; limitType=${t.limitType})`}function Yh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Va(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=q0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Va(r),i)||r.endAt&&!function(o,a,l){const c=q0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Va(r),i))}(t,e)}function jL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tS(t){return(e,n)=>{let r=!1;for(const i of Va(t)){const s=FL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function FL(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?uo(l,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return WI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Ve(X.comparator);function br(){return UL}const nS=new Ve(X.comparator);function ga(...t){let e=nS;for(const n of t)e=e.insert(n.key,n);return e}function rS(t){let e=nS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wi(){return ja()}function iS(){return ja()}function ja(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const BL=new Ve(X.comparator),zL=new ut(X.comparator);function oe(...t){let e=zL;for(const n of t)e=e.add(n);return e}const $L=new ut(pe);function WL(){return $L}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function sS(t){return{integerValue:""+t}}function HL(t,e){return xL(e)?sS(e):Bg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this._=void 0}}function qL(t,e,n){return t instanceof wl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Mg(s)&&(s=Lg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof xl?aS(t,e):t instanceof El?lS(t,e):function(i,s){const o=oS(i,s),a=Y0(o)+Y0(i.Pe);return Wp(o)&&Wp(i.Pe)?sS(a):Bg(i.serializer,a)}(t,e)}function KL(t,e,n){return t instanceof xl?aS(t,e):t instanceof El?lS(t,e):n}function oS(t,e){return t instanceof th?function(r){return Wp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class wl extends Xh{}class xl extends Xh{constructor(e){super(),this.elements=e}}function aS(t,e){const n=cS(e);for(const r of t.elements)n.some(i=>Zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class El extends Xh{constructor(e){super(),this.elements=e}}function lS(t,e){let n=cS(e);for(const r of t.elements)n=n.filter(i=>!Zn(i,r));return{arrayValue:{values:n}}}class th extends Xh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Y0(t){return $e(t.integerValue||t.doubleValue)}function cS(t){return Vg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n){this.field=e,this.transform=n}}function QL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xl&&i instanceof xl||r instanceof El&&i instanceof El?co(r.elements,i.elements,Zn):r instanceof th&&i instanceof th?Zn(r.Pe,i.Pe):r instanceof wl&&i instanceof wl}(t.transform,e.transform)}class YL{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jh{}function uS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dS(t.key,Yn.none()):new Fl(t.key,t.data,Yn.none());{const n=t.data,r=dn.empty();let i=new ut(at.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ys(t.key,r,new Cn(i.toArray()),Yn.none())}}function XL(t,e,n){t instanceof Fl?function(i,s,o){const a=i.value.clone(),l=J0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ys?function(i,s,o){if(!uu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=J0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(hS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fa(t,e,n,r){return t instanceof Fl?function(s,o,a,l){if(!uu(s.precondition,o))return a;const c=s.value.clone(),h=Z0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ys?function(s,o,a,l){if(!uu(s.precondition,o))return a;const c=Z0(s.fieldTransforms,l,o),h=o.data;return h.setAll(hS(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return uu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function JL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=oS(r.transform,i||null);s!=null&&(n===null&&(n=dn.empty()),n.set(r.field,s))}return n||null}function X0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&co(r,i,(s,o)=>QL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fl extends Jh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ys extends Jh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function J0(t,e,n){const r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,KL(o,a,n[i]))}return r}function Z0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,qL(s,o,e))}return r}class dS extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZL extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&XL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=uS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>X0(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>X0(n,r))}}class zg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return BL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new zg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,le;function rV(t){switch(t){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function fS(t){if(t===void 0)return Er("GRPC error has no .code"),F.UNKNOWN;switch(t){case qe.OK:return F.OK;case qe.CANCELLED:return F.CANCELLED;case qe.UNKNOWN:return F.UNKNOWN;case qe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case qe.INTERNAL:return F.INTERNAL;case qe.UNAVAILABLE:return F.UNAVAILABLE;case qe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case qe.NOT_FOUND:return F.NOT_FOUND;case qe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case qe.ABORTED:return F.ABORTED;case qe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case qe.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(le=qe||(qe={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=new Qi([4294967295,4294967295],0);function ew(t){const e=iV().encode(t),n=new LI;return n.update(e),new Uint8Array(n.digest())}function tw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qi([n,r],0),new Qi([i,s],0)]}class $g{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ya(`Invalid padding: ${n}`);if(r<0)throw new ya(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ya(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ya(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Qi.fromNumber(r)));return i.compare(sV)===1&&(i=new Qi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ew(e),[r,i]=tw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new $g(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ew(e),[r,i]=tw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ul.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zh(te.min(),i,new Ve(pe),br(),oe())}}class Ul{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ul(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class pS{constructor(e,n){this.targetId=e,this.me=n}}class mS{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class nw{constructor(){this.fe=0,this.ge=iw(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new Ul(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=iw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oV{constructor(e){this.Le=e,this.Be=new Map,this.ke=br(),this.qe=rw(),this.Qe=new Ve(pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(qp(s))if(r===0){const o=new X(s.path);this.Ue(n,o,bt.newNoDocument(o,te.min()))}else _e(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ls(r).toUint8Array()}catch(l){if(l instanceof HI)return lo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new $g(o,i,s)}catch(l){return lo(l instanceof ya?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qp(a.target)){const l=new X(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,bt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=oe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Zh(e,n,this.Qe,this.ke,r);return this.ke=br(),this.qe=rw(),this.Qe=new Ve(pe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new nw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rw(){return new Ve(X.comparator)}function iw(){return new Ve(X.comparator)}const aV={asc:"ASCENDING",desc:"DESCENDING"},lV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cV={and:"AND",or:"OR"};class uV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gp(t,e){return t.useProto3Json||Gh(e)?e:{value:e}}function nh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hV(t,e){return nh(t,e.toTimestamp())}function Xn(t){return _e(!!t),te.fromTimestamp(function(n){const r=ui(n);return new Ue(r.seconds,r.nanos)}(t))}function Wg(t,e){return Qp(t,e).canonicalString()}function Qp(t,e){const n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yS(t){const e=ke.fromString(t);return _e(ES(e)),e}function Yp(t,e){return Wg(t.databaseId,e.path)}function _f(t,e){const n=yS(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(vS(n))}function _S(t,e){return Wg(t.databaseId,e)}function dV(t){const e=yS(t);return e.length===4?ke.emptyPath():vS(e)}function Xp(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vS(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sw(t,e,n){return{name:Yp(t,e),fields:n.value.mapValue.fields}}function fV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(_e(h===void 0||typeof h=="string"),dt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:fS(c.code);return new W(h,c.message||"")}(o);n=new mS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_f(t,r.document.name),s=Xn(r.document.updateTime),o=r.document.createTime?Xn(r.document.createTime):te.min(),a=new dn({mapValue:{fields:r.document.fields}}),l=bt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new hu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_f(t,r.document),s=r.readTime?Xn(r.readTime):te.min(),o=bt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_f(t,r.document),s=r.removedTargetIds||[];n=new hu([],s,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new nV(i,s),a=r.targetId;n=new pS(a,o)}}return n}function pV(t,e){let n;if(e instanceof Fl)n={update:sw(t,e.key,e.value)};else if(e instanceof dS)n={delete:Yp(t,e.key)};else if(e instanceof ys)n={update:sw(t,e.key,e.data),updateMask:bV(e.fieldMask)};else{if(!(e instanceof ZL))return ee();n={verify:Yp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof wl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof El)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof th)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee()}(t,e.precondition)),n}function mV(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Xn(i.updateTime):Xn(s);return o.isEqual(te.min())&&(o=Xn(s)),new YL(o,i.transformResults||[])}(n,e))):[]}function gV(t,e){return{documents:[_S(t,e.path)]}}function yV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_S(t,i);const s=function(c){if(c.length!==0)return xS(Ln.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:As(p.field),direction:wV(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Gp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function _V(t){let e=dV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=wS(d);return p instanceof Ln&&QI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(E){return new vl(Cs(E.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Gh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,_=d.values||[];return new Zu(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,_=d.values||[];return new Zu(_,p)}(n.endAt)),LL(e,i,o,s,a,"F",l,c)}function vV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cs(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cs(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Cs(n.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cs(n.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(Cs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>wS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function wV(t){return aV[t]}function xV(t){return lV[t]}function EV(t){return cV[t]}function As(t){return{fieldPath:t.canonicalString()}}function Cs(t){return at.fromServerFormat(t.fieldPath)}function xS(t){return t instanceof Qe?function(n){if(n.op==="=="){if(H0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(W0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(W0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:xV(n.op),value:n.value}}}(t):t instanceof Ln?function(n){const r=n.getFilters().map(i=>xS(i));return r.length===1?r[0]:{compositeFilter:{op:EV(n.op),filters:r}}}(t):ee()}function bV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ES(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,i,s=te.min(),o=te.min(),a=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.ct=e}}function IV(t){const e=_V({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.un=new kV}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ci.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class kV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ut(ke.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fo(0)}static kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fa(r.mutation,i,Cn.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const i=Wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ga();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=br();const o=ja(),a=function(){return ja()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ys)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Fa(h.mutation,c,h.mutation.getFieldMask(),Ue.now())):o.set(c.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new CV(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ja();let i=new Ve((o,a)=>o-a),s=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Cn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||oe()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=iS();h.forEach(p=>{if(!s.has(p)){const _=uS(n.get(p),r.get(p));_!==null&&d.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Wi());let a=-1,l=s;return o.next(c=>U.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,oe())).next(h=>({batchId:a,changes:rS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=ga();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ga();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(d,p){return new Ao(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,bt.newInvalidDocument(h)))});let a=ga();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Fa(h.mutation,c,Cn.empty(),Ue.now()),Yh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:IV(i.bundledQuery),readTime:Xn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.overlays=new Ve(X.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Wi(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Wi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Wi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return U.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tV(n,r));let s=this.Ir.get(n);s===void 0&&(s=oe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.Tr=new ut(tt.Er),this.dr=new ut(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new ke([])),r=new tt(n,e),i=new tt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new ke([])),r=new tt(n,e),i=new tt(n,e+1);let s=oe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(tt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new tt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),i=new tt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(pe);return n.forEach(i=>{const s=new tt(i,0),o=new tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const o=new tt(new X(s),0);let a=new ut(pe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new tt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tt(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.Mr=e,this.docs=function(){return new Ve(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=br();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=br();const o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yL(gL(h),r)<=0||(i.has(h.key)||Yh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LV(this)}getSize(e){return U.resolve(this.size)}}class LV extends AV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.persistence=e,this.Nr=new Co(n=>jg(n),Fg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hg,this.targetCount=0,this.kr=fo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Og(0),this.Kr=!1,this.Kr=!0,this.$r=new DV,this.referenceDelegate=e(this),this.Ur=new VV(this),this.indexManager=new SV,this.remoteDocumentCache=function(i){return new MV(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new TV(n),this.Gr=new PV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new OV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new FV(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class FV extends vL{constructor(e){super(),this.currentSequenceNumber=e}}class qg{constructor(e){this.persistence=e,this.Jr=new Hg,this.Yr=null}static Zr(e){return new qg(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=X.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=oe(),i=oe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Kg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return FP()?8:wL(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new UV;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ta()<=ae.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(ta()<=ae.DEBUG&&K("QueryEngine","Query:",ks(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ta()<=ae.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(n))):U.resolve())}Yi(e,n){if(Q0(n))return U.resolve(null);let r=Qn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=eh(n,null,"F"),r=Qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=oe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,eh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return Q0(n)||i.isEqual(te.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(ta()<=ae.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ks(n)),this.rs(e,o,n,mL(i,-1)).next(a=>a))})}ts(e,n){let r=new ut(tS(e));return n.forEach((i,s)=>{Yh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ta()<=ae.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,ci.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ve(pe),this._s=new Co(s=>jg(s),Fg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $V(t,e,n,r){return new zV(t,e,n,r)}async function bS(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=oe();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function WV(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let _=U.resolve();return p.forEach(E=>{_=_.next(()=>h.getEntry(l,E)).next(b=>{const T=c.docVersions.get(E);_e(T!==null),b.version.compareTo(T)<0&&(d.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=oe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function TS(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HV(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(dt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(d,_),function(b,T,v){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,_,h)&&a.push(n.Ur.updateTargetData(s,_))});let l=br(),c=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(qV(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function qV(t,e,n){let r=oe(),i=oe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=br();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function KV(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GV(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Jp(t,e,n){const r=ne(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!jl(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function ow(t,e,n){const r=ne(t);let i=te.min(),s=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ne(l),p=d._s.get(h);return p!==void 0?U.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,Qn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:oe())).next(a=>(QV(r,jL(e),a),{documents:a,Ts:s})))}function QV(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class aw{constructor(){this.activeTargetIds=WL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YV{constructor(){this.so=new aw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new aw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac=null;function vf(){return Ac===null?Ac=function(){return 268435456+Math.round(2147483648*Math.random())}():Ac++,"0x"+Ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class ej extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=vf(),l=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw lo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=JV[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=vf();return new Promise((o,a)=>{const l=new VI;l.setWithCredentials(!0),l.listenOnce(jI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lu.NO_ERROR:const h=l.getResponseJson();K(vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case lu.TIMEOUT:K(vt,`RPC '${e}' ${s} timed out`),a(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:const d=l.getStatus();if(K(vt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const E=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(_.status);a(new W(E,_.message))}else a(new W(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{K(vt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);K(vt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=vf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BI(),a=UI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");K(vt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,_=!1;const E=new ZV({Io:T=>{_?K(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(p||(K(vt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),K(vt,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},To:()=>d.close()}),b=(T,v,y)=>{T.listen(v,w=>{try{y(w)}catch(R){setTimeout(()=>{throw R},0)}})};return b(d,ma.EventType.OPEN,()=>{_||(K(vt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),b(d,ma.EventType.CLOSE,()=>{_||(_=!0,K(vt,`RPC '${e}' stream ${i} transport closed`),E.So())}),b(d,ma.EventType.ERROR,T=>{_||(_=!0,lo(vt,`RPC '${e}' stream ${i} transport errored:`,T),E.So(new W(F.UNAVAILABLE,"The operation could not be completed")))}),b(d,ma.EventType.MESSAGE,T=>{var v;if(!_){const y=T.data[0];_e(!!y);const w=y,R=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(R){K(vt,`RPC '${e}' stream ${i} received error:`,R);const D=R.status;let M=function(k){const A=qe[k];if(A!==void 0)return fS(A)}(D),I=R.message;M===void 0&&(M=F.INTERNAL,I="Unknown error status: "+D+" with message "+R.message),_=!0,E.So(new W(M,I)),d.close()}else K(vt,`RPC '${e}' stream ${i} received:`,y),E.bo(y)}}),b(a,FI.STAT_EVENT,T=>{T.stat===zp.PROXY?K(vt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===zp.NOPROXY&&K(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new uV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new IS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tj extends SS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fV(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Xn(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Xp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=qp(l)?{documents:gV(s,l)}:{query:yV(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gS(s,o.resumeToken);const c=Gp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=nh(s,o.snapshotVersion.toTimestamp());const c=Gp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=vV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Xp(this.serializer),n.removeTarget=e,this.a_(n)}}class nj extends SS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mV(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Xp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pV(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Qp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Qp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ij{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Er(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{_s(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ne(l);c.L_.add(4),await Bl(c),c.q_.set("Unknown"),c.L_.delete(4),await td(c)}(this))})}),this.q_=new ij(r,i)}}async function td(t){if(_s(t))for(const e of t.B_)await e(!0)}async function Bl(t){for(const e of t.B_)await e(!1)}function kS(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Xg(n)?Yg(n):Ro(n).r_()&&Qg(n,e))}function Gg(t,e){const n=ne(t),r=Ro(n);n.N_.delete(e),r.r_()&&AS(n,e),n.N_.size===0&&(r.r_()?r.o_():_s(n)&&n.q_.set("Unknown"))}function Qg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(t).A_(e)}function AS(t,e){t.Q_.xe(e),Ro(t).R_(e)}function Yg(t){t.Q_=new oV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ro(t).start(),t.q_.v_()}function Xg(t){return _s(t)&&!Ro(t).n_()&&t.N_.size>0}function _s(t){return ne(t).L_.size===0}function CS(t){t.Q_=void 0}async function oj(t){t.q_.set("Online")}async function aj(t){t.N_.forEach((e,n)=>{Qg(t,e)})}async function lj(t,e){CS(t),Xg(t)?(t.q_.M_(e),Yg(t)):t.q_.set("Unknown")}async function cj(t,e,n){if(t.q_.set("Online"),e instanceof mS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rh(t,r)}else if(e instanceof hu?t.Q_.Ke(e):e instanceof pS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await TS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),AS(s,l);const d=new Hr(h.target,l,c,h.sequenceNumber);Qg(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await rh(t,r)}}async function rh(t,e,n){if(!jl(e))throw e;t.L_.add(1),await Bl(t),t.q_.set("Offline"),n||(n=()=>TS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await td(t)})}function RS(t,e){return e().catch(n=>rh(t,n,e))}async function nd(t){const e=ne(t),n=hi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uj(e);)try{const i=await KV(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,hj(e,i)}catch(i){await rh(e,i)}PS(e)&&NS(e)}function uj(t){return _s(t)&&t.O_.length<10}function hj(t,e){t.O_.push(e);const n=hi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function PS(t){return _s(t)&&!hi(t).n_()&&t.O_.length>0}function NS(t){hi(t).start()}async function dj(t){hi(t).p_()}async function fj(t){const e=hi(t);for(const n of t.O_)e.m_(n.mutations)}async function pj(t,e,n){const r=t.O_.shift(),i=zg.from(r,e,n);await RS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nd(t)}async function mj(t,e){e&&hi(t).V_&&await async function(r,i){if(function(o){return rV(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();hi(r).s_(),await RS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await nd(r)}}(t,e),PS(t)&&NS(t)}async function cw(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.L_.add(3),await Bl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await td(n)}async function gj(t,e){const n=ne(t);e?(n.L_.delete(2),await td(n)):e||(n.L_.add(2),await Bl(n),n.q_.set("Unknown"))}function Ro(t){return t.K_||(t.K_=function(n,r,i){const s=ne(n);return s.w_(),new tj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:oj.bind(null,t),Ro:aj.bind(null,t),mo:lj.bind(null,t),d_:cj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xg(t)?Yg(t):t.q_.set("Unknown")):(await t.K_.stop(),CS(t))})),t.K_}function hi(t){return t.U_||(t.U_=function(n,r,i){const s=ne(n);return s.w_(),new nj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dj.bind(null,t),mo:mj.bind(null,t),f_:fj.bind(null,t),g_:pj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nd(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Jg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zg(t,e){if(Er("AsyncQueue",`${e}: ${t}`),jl(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=ga(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Xs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.W_=new Ve(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new po(e,n,Xs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _j{constructor(){this.queries=hw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=hw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function hw(){return new Co(t=>eS(t),Qh)}async function DS(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new yj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Zg(o,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&ey(n)}async function OS(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vj(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ey(n)}function wj(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function ey(t){t.Y_.forEach(e=>{e.next()})}var Zp,dw;(dw=Zp||(Zp={})).ea="default",dw.Cache="cache";class MS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.key=e}}class VS{constructor(e){this.key=e}}class xj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=tS(e),this.Ra=new Xs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new uw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),_=Yh(this.query,d)?d:null,E=!!p&&this.mutatedKeys.has(p.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;p&&_?p.data.isEqual(_.data)?E!==b&&(r.track({type:3,doc:_}),T=!0):this.ga(p,_)||(r.track({type:2,doc:_}),T=!0,(l&&this.Aa(_,l)>0||c&&this.Aa(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),T=!0):p&&!_&&(r.track({type:1,doc:p}),T=!0,(l||c)&&(a=!0)),T&&(_?(o=o.add(_),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(_,E){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return b(_)-b(E)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new po(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new VS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new LS(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return po.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Ej{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bj{constructor(e){this.key=e,this.va=!1}}class Tj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Co(a=>eS(a),Qh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(X.comparator),this.Na=new Map,this.La=new Hg,this.Ba={},this.ka=new Map,this.qa=fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Ij(t,e,n=!0){const r=$S(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await jS(r,e,n,!0),i}async function Sj(t,e){const n=$S(t);await jS(n,e,!0,!1)}async function jS(t,e,n,r){const i=await GV(t.localStore,Qn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await kj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&kS(t.remoteStore,i),a}async function kj(t,e,n,r,i){t.Ka=(d,p,_)=>async function(b,T,v,y){let w=T.view.ma(v);w.ns&&(w=await ow(b.localStore,T.query,!1).then(({documents:I})=>T.view.ma(I,w)));const R=y&&y.targetChanges.get(T.targetId),D=y&&y.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(w,b.isPrimaryClient,R,D);return pw(b,T.targetId,M.wa),M.snapshot}(t,d,p,_);const s=await ow(t.localStore,e,!0),o=new xj(e,s.Ts),a=o.ma(s.documents),l=Ul.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);pw(t,n,c.wa);const h=new Ej(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Aj(t,e,n){const r=ne(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Qh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gg(r.remoteStore,i.targetId),em(r,i.targetId)}).catch(Vl)):(em(r,i.targetId),await Jp(r.localStore,i.targetId,!0))}async function Cj(t,e){const n=ne(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gg(n.remoteStore,r.targetId))}async function Rj(t,e,n){const r=Vj(t);try{const i=await function(o,a){const l=ne(o),c=Ue.now(),h=a.reduce((_,E)=>_.add(E.key),oe());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=br(),b=oe();return l.cs.getEntries(_,h).next(T=>{E=T,E.forEach((v,y)=>{y.isValidDocument()||(b=b.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,E)).next(T=>{d=T;const v=[];for(const y of a){const w=JL(y,d.get(y.key).overlayedDocument);w!=null&&v.push(new ys(y.key,w,qI(w.value.mapValue),Yn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,v,a)}).next(T=>{p=T;const v=T.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(_,T.batchId,v)})}).then(()=>({batchId:p.batchId,changes:rS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ve(pe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await zl(r,i.changes),await nd(r.remoteStore)}catch(i){const s=Zg(i,"Failed to persist write");n.reject(s)}}async function FS(t,e){const n=ne(t);try{const r=await HV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?_e(o.va):i.removedDocuments.size>0&&(_e(o.va),o.va=!1))}),await zl(n,r,e)}catch(r){await Vl(r)}}function fw(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&ey(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Pj(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ve(X.comparator);o=o.insert(s,bt.newNoDocument(s,te.min()));const a=oe().add(s),l=new Zh(te.min(),new Map,new Ve(pe),o,a);await FS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),ty(r)}else await Jp(r.localStore,e,!1).then(()=>em(r,e,n)).catch(Vl)}async function Nj(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await WV(n.localStore,e);BS(n,r,null),US(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zl(n,i)}catch(i){await Vl(i)}}async function Dj(t,e,n){const r=ne(t);try{const i=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(_e(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);BS(r,e,n),US(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zl(r,i)}catch(i){await Vl(i)}}function US(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function BS(t,e,n){const r=ne(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zS(t,r)})}function zS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ty(t))}function pw(t,e,n){for(const r of n)r instanceof LS?(t.La.addReference(r.key,e),Oj(t,r)):r instanceof VS?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zS(t,r.key)):ee()}function Oj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),ty(t))}function ty(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(ke.fromString(e)),r=t.qa.next();t.Na.set(r,new bj(n)),t.Oa=t.Oa.insert(n,r),kS(t.remoteStore,new Hr(Qn(Ug(n.path)),r,"TargetPurposeLimboResolution",Og.oe))}}async function zl(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Kg.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ne(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,p=>U.forEach(p.$i,_=>h.persistence.referenceDelegate.addReference(d,p.targetId,_)).next(()=>U.forEach(p.Ui,_=>h.persistence.referenceDelegate.removeReference(d,p.targetId,_)))))}catch(d){if(!jl(d))throw d;K("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const _=h.os.get(p),E=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(p,b)}}}(r.localStore,s))}async function Mj(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await bS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zl(n,r.hs)}}function Lj(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let i=oe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function $S(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pj.bind(null,e),e.Ca.d_=vj.bind(null,e.eventManager),e.Ca.$a=wj.bind(null,e.eventManager),e}function Vj(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dj.bind(null,e),e}class ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $V(this.persistence,new BV,e.initialUser,this.serializer)}Ga(e){return new jV(qg.Zr,this.serializer)}Wa(e){return new YV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ih.provider={build:()=>new ih};class tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mj.bind(null,this.syncEngine),await gj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _j}()}createDatastore(e){const n=ed(e.databaseInfo.databaseId),r=function(s){return new ej(s)}(e.databaseInfo);return function(s,o,a,l){return new rj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new sj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>fw(this.syncEngine,n,0),function(){return lw.D()?new lw:new XV}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new Tj(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Bl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}tm.provider={build:()=>new tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=$I.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xf(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Fj(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>cw(e.remoteStore,i)),t._onlineComponents=e}async function Fj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await xf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await xf(t,new ih)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await xf(t,new ih);return t._offlineComponents}async function HS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await mw(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await mw(t,new tm))),t._onlineComponents}function Uj(t){return HS(t).then(e=>e.syncEngine)}async function qS(t){const e=await HS(t),n=e.eventManager;return n.onListen=Ij.bind(null,e.syncEngine),n.onUnlisten=Aj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Cj.bind(null,e.syncEngine),n}function Bj(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new WS({next:p=>{h.Za(),o.enqueueAndForget(()=>OS(s,d));const _=p.docs.has(a);!_&&p.fromCache?c.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&l&&l.source==="server"?c.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new MS(Ug(a.path),h,{includeMetadataChanges:!0,_a:!0});return DS(s,d)}(await qS(t),t.asyncQueue,e,n,r)),r.promise}function zj(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new WS({next:p=>{h.Za(),o.enqueueAndForget(()=>OS(s,d)),p.fromCache&&l.source==="server"?c.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new MS(a,h,{includeMetadataChanges:!0,_a:!0});return DS(s,d)}(await qS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $j(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yw(t){if(!X.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _w(t){if(X.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function di(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rd(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$j("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oL;switch(r.type){case"firstParty":return new uL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gw.get(n);r&&(K("ComponentProvider","Removing Datastore"),gw.delete(n),r.terminate())}(this),Promise.resolve()}}function Wj(t,e,n,r={}){var i;const s=(t=di(t,id))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=xt.MOCK_USER;else{a=xT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new xt(c)}t._authCredentials=new aL(new zI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ei(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class si extends Ei{constructor(e,n,r){super(e,n,Ug(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new X(e))}withConverter(e){return new si(this.firestore,e,this._path)}}function Ef(t,e,...n){if(t=Le(t),GS("collection","path",e),t instanceof id){const r=ke.fromString(e,...n);return _w(r),new si(t,null,r)}{if(!(t instanceof Kt||t instanceof si))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return _w(r),new si(t.firestore,null,r)}}function sh(t,e,...n){if(t=Le(t),arguments.length===1&&(e=$I.newId()),GS("doc","path",e),t instanceof id){const r=ke.fromString(e,...n);return yw(r),new Kt(t,null,new X(r))}{if(!(t instanceof Kt||t instanceof si))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return yw(r),new Kt(t.firestore,t instanceof si?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new IS(this,"async_queue_retry"),this.Vu=()=>{const r=wf();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=wf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jl(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Er("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Jg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class $l extends id{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ww,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ww(e),this._firestoreClient=void 0,await e}}}function Hj(t,e){const n=typeof t=="object"?t:Bh(),r=typeof t=="string"?t:"(default)",i=wi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=_T("firestore");s&&Wj(i,...s)}return i}function ny(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qj(t),t._firestoreClient}function qj(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new bL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,KS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new jj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(dt.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=/^__.*__$/;class Gj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(e,this.data,n,this.fieldTransforms)}}function QS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class ay{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return oh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QS(this.Cu)&&Kj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Qj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ed(e)}Qu(e,n,r,i=!1){return new ay({Cu:e,methodName:n,qu:r,path:at.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ly(t){const e=t._freezeSettings(),n=ed(t._databaseId);return new Qj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YS(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);ZS("Data must be an object, but it was:",o,r);const a=XS(r,o);let l,c;if(s.merge)l=new Cn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Xj(e,d,n);if(!o.contains(p))throw new W(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Zj(h,p)||h.push(p)}l=new Cn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Gj(new dn(a),l,c)}class cy extends iy{_toFieldTransform(e){return new GL(e.path,new wl)}isEqual(e){return e instanceof cy}}function Yj(t,e,n,r=!1){return uy(n,t.Qu(r?4:3,e))}function uy(t,e){if(JS(t=Le(t)))return ZS("Unsupported field value:",e,t),XS(t,e);if(t instanceof iy)return function(r,i){if(!QS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=uy(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ue.fromDate(r);return{timestampValue:nh(i.serializer,s)}}if(r instanceof Ue){const s=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nh(i.serializer,s)}}if(r instanceof sy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mo)return{bytesValue:gS(i.serializer,r._byteString)};if(r instanceof Kt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Wg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof oy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Bg(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rd(r)}`)}(t,e)}function XS(t,e){const n={};return WI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(r,i)=>{const s=uy(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function JS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof sy||t instanceof mo||t instanceof Kt||t instanceof iy||t instanceof oy)}function ZS(t,e,n){if(!JS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=rd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Xj(t,e,n){if((e=Le(e))instanceof ry)return e._internalPath;if(typeof e=="string")return ek(t,e);throw oh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Jj=new RegExp("[~\\*/\\[\\]]");function ek(t,e,n){if(e.search(Jj)>=0)throw oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ry(...e.split("."))._internalPath}catch{throw oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(F.INVALID_ARGUMENT,a+t+l)}function Zj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eF extends tk{data(){return super.data()}}function sd(t,e){return typeof e=="string"?ek(t,e):e instanceof ry?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class dy extends hy{}function xw(t,e,...n){let r=[];e instanceof hy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof fy).length,a=s.filter(l=>l instanceof od).length;if(o>1||o>0&&a>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class od extends dy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new od(e,n,r)}_apply(e){const n=this._parse(e);return nk(e._query,n),new Ei(e.firestore,e.converter,Kp(e._query,n))}_parse(e){const n=ly(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Tw(d,h);const _=[];for(const E of d)_.push(bw(l,s,E));p={arrayValue:{values:_}}}else p=bw(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Tw(d,h),p=Yj(a,o,d,h==="in"||h==="not-in");return Qe.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ew(t,e,n){const r=e,i=sd("where",t);return od._create(i,r,n)}class fy extends hy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)nk(o,l),o=Kp(o,l)}(e._query,n),new Ei(e.firestore,e.converter,Kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends dy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new py(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vl(s,o)}(e._query,this._field,this._direction);return new Ei(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ao(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function nF(t,e="asc"){const n=e,r=sd("orderBy",t);return py._create(r,n)}class my extends dy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new my(e,n,r)}_apply(e){return new Ei(e.firestore,e.converter,eh(e._query,this._limit,this._limitType))}}function rF(t){return my._create("limit",t,"F")}function bw(t,e,n){if(typeof(n=Le(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZI(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!X.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $0(t,new X(r))}if(n instanceof Kt)return $0(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rd(n)}.`)}function Tw(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nk(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iF{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ko(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>$e(o.doubleValue));return new oy(s)}convertGeoPoint(e){return new sy($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Lg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const n=ui(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);_e(ES(r));const i=new yl(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||Er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ik extends tk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class du extends ik{data(e={}){return super.data(e)}}class sF{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _a(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new du(this._firestore,this._userDataWriter,r.key,r,new _a(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new du(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new du(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:oF(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){t=di(t,Kt);const e=di(t.firestore,$l);return Bj(ny(e),t._key).then(n=>lF(e,t,n))}class ok extends iF{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function Iw(t){t=di(t,Ei);const e=di(t.firestore,$l),n=ny(e),r=new ok(e);return tF(t._query),zj(n,t._query).then(i=>new sF(e,r,t,i))}function nm(t,e,n){t=di(t,Kt);const r=di(t.firestore,$l),i=rk(t.converter,e,n);return ak(r,[YS(ly(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yn.none())])}function aF(t,e){const n=di(t.firestore,$l),r=sh(t),i=rk(t.converter,e);return ak(n,[YS(ly(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}function ak(t,e){return function(r,i){const s=new mr;return r.asyncQueue.enqueueAndForget(async()=>Rj(await Uj(r),i,s)),s.promise}(ny(t),e)}function lF(t,e,n){const r=n.docs.get(e._key),i=new ok(t);return new ik(t,i,e._key,r,new _a(n.hasPendingWrites,n.fromCache),e.converter)}function ah(){return new cy("serverTimestamp")}(function(e,n=!0){(function(i){So=i})(gs),Mn(new _n("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $l(new lL(r.getProvider("auth-internal")),new dL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wt(j0,"4.7.3",e),Wt(j0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="firebasestorage.googleapis.com",ck="storageBucket",cF=2*60*1e3,uF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends xn{constructor(e,n,r=0){super(bf(e),`Firebase Storage: ${n} (${bf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Be||(Be={}));function bf(t){return"storage/"+t}function gy(){const t="An unknown error occurred, please check the error payload for server response.";return new ze(Be.UNKNOWN,t)}function hF(t){return new ze(Be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function dF(t){return new ze(Be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(Be.UNAUTHENTICATED,t)}function pF(){return new ze(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mF(t){return new ze(Be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function gF(){return new ze(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yF(){return new ze(Be.CANCELED,"User canceled the upload/download.")}function _F(t){return new ze(Be.INVALID_URL,"Invalid URL '"+t+"'.")}function vF(t){return new ze(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function wF(){return new ze(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ck+"' property when initializing the app?")}function xF(){return new ze(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function EF(){return new ze(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bF(t){return new ze(Be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rm(t){return new ze(Be.INVALID_ARGUMENT,t)}function uk(){return new ze(Be.APP_DELETED,"The Firebase app was deleted.")}function TF(t){return new ze(Be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ua(t,e){return new ze(Be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function na(t){throw new ze(Be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(r.path==="")return r;throw vF(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${d}/${h}/b/${i}/o${p}`,"i"),E={bucket:1,path:3},b=n===lk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",v=new RegExp(`^https?://${b}/${i}/${T}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:_,indices:E,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<w.length;R++){const D=w[R],M=D.regex.exec(e);if(M){const I=M[D.indices.bucket];let x=M[D.indices.path];x||(x=""),r=new tn(I,x),D.postModify(r);break}}if(r==null)throw _F(e);return r}}class IF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,t(_,l())},T)}function p(){s&&clearTimeout(s)}function _(T,...v){if(c){p();return}if(T){p(),h.call(null,T,...v);return}if(l()||o){p(),h.call(null,T,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,d(w)}let E=!1;function b(T){E||(E=!0,p(),!c&&(i!==null?(T||(a=2),clearTimeout(i),d(0)):T||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,b(!0)},n),b}function kF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t){return t!==void 0}function CF(t){return typeof t=="object"&&!Array.isArray(t)}function yy(t){return typeof t=="string"||t instanceof String}function Sw(t){return _y()&&t instanceof Blob}function _y(){return typeof Blob<"u"}function kw(t,e,n,r){if(r<e)throw rm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw rm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function hk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Yi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yi||(Yi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,n,r,i,s,o,a,l,c,h,d,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Cc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Yi.NO_ERROR,l=s.getStatus();if(!a||RF(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Yi.ABORT;r(!1,new Cc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Cc(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());AF(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=gy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?uk():yF();o(l)}else{const l=gF();o(l)}};this.canceled_?n(!1,new Cc(!1,null,!0)):this.backoffId_=SF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function NF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function DF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function MF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function LF(t,e,n,r,i,s,o=!0){const a=hk(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return OF(c,e),NF(c,n),DF(c,s),MF(c,r),new PF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jF(...t){const e=VF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(_y())return new Blob(t);throw new ze(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t){if(typeof atob>"u")throw bF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tf{constructor(e,n){this.data=e,this.contentType=n||null}}function BF(t,e){switch(t){case qn.RAW:return new Tf(dk(e));case qn.BASE64:case qn.BASE64URL:return new Tf(fk(t,e));case qn.DATA_URL:return new Tf($F(e),WF(e))}throw gy()}function dk(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function zF(t){let e;try{e=decodeURIComponent(t)}catch{throw Ua(qn.DATA_URL,"Malformed data URL.")}return dk(e)}function fk(t,e){switch(t){case qn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ua(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case qn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ua(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=UF(e)}catch(i){throw i.message.includes("polyfill")?i:Ua(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class pk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ua(qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=HF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $F(t){const e=new pk(t);return e.base64?fk(qn.BASE64,e.rest):zF(e.rest)}function WF(t){return new pk(t).contentType}function HF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){let r=0,i="";Sw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Sw(this.data_)){const r=this.data_,i=FF(r,e,n);return i===null?null:new Br(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Br(r,!0)}}static getBlob(...e){if(_y()){const n=e.map(r=>r instanceof Br?r.data_:r);return new Br(jF.apply(null,n))}else{const n=e.map(o=>yy(o)?BF(qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Br(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){let e;try{e=JSON.parse(t)}catch{return null}return CF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function gk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t,e){return e}class Ct{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||GF}}let Rc=null;function QF(t){return!yy(t)||t.length<2?t:gk(t)}function yk(){if(Rc)return Rc;const t=[];t.push(new Ct("bucket")),t.push(new Ct("generation")),t.push(new Ct("metageneration")),t.push(new Ct("name","fullPath",!0));function e(s,o){return QF(o)}const n=new Ct("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ct("size");return i.xform=r,t.push(i),t.push(new Ct("timeCreated")),t.push(new Ct("updated")),t.push(new Ct("md5Hash",null,!0)),t.push(new Ct("cacheControl",null,!0)),t.push(new Ct("contentDisposition",null,!0)),t.push(new Ct("contentEncoding",null,!0)),t.push(new Ct("contentLanguage",null,!0)),t.push(new Ct("contentType",null,!0)),t.push(new Ct("metadata","customMetadata",!0)),Rc=t,Rc}function YF(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new tn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function XF(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return YF(r,t),r}function _k(t,e,n){const r=mk(e);return r===null?null:XF(t,r,n)}function JF(t,e,n,r){const i=mk(e);if(i===null||!yy(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),_=vy(p,n,r),E=hk({alt:"media",token:c});return _+E})[0]}function ZF(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class vk{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){if(!t)throw gy()}function e4(t,e){function n(r,i){const s=_k(t,i,e);return wk(s!==null),s}return n}function t4(t,e){function n(r,i){const s=_k(t,i,e);return wk(s!==null),JF(s,i,t.host,t._protocol)}return n}function xk(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=pF():i=fF():n.getStatus()===402?i=dF(t.bucket):n.getStatus()===403?i=mF(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function n4(t){const e=xk(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=hF(t.path)),s.serverResponse=i.serverResponse,s}return n}function r4(t,e,n){const r=e.fullServerUrl(),i=vy(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new vk(i,s,t4(t,n),o);return a.errorHandler=n4(e),a}function i4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function s4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=i4(null,e)),r}function o4(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let R=0;R<2;R++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=s4(e,r,i),h=ZF(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",_=Br.getBlob(d,r,p);if(_===null)throw xF();const E={name:c.fullPath},b=vy(s,t.host,t._protocol),T="POST",v=t.maxUploadRetryTime,y=new vk(b,T,e4(t,n),v);return y.urlParams=E,y.headers=o,y.body=_.uploadData(),y.errorHandler=xk(e),y}class a4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw na("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw na("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw na("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw na("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw na("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class l4 extends a4{initXhr(){this.xhr_.responseType="text"}}function Ek(){return new l4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new us(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gk(this._location.path)}get storage(){return this._service}get parent(){const e=qF(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new us(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TF(e)}}function c4(t,e,n){t._throwIfRoot("uploadBytes");const r=o4(t.storage,t._location,yk(),new Br(e,!0),n);return t.storage.makeRequestWithTokens(r,Ek).then(i=>({metadata:i,ref:t}))}function u4(t){t._throwIfRoot("getDownloadURL");const e=r4(t.storage,t._location,yk());return t.storage.makeRequestWithTokens(e,Ek).then(n=>{if(n===null)throw EF();return n})}function h4(t,e){const n=KF(t._location.path,e),r=new tn(t._location.bucket,n);return new us(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){return/^[A-Za-z]+:\/\//.test(t)}function f4(t,e){return new us(t,e)}function bk(t,e){if(t instanceof wy){const n=t;if(n._bucket==null)throw wF();const r=new us(n,n._bucket);return e!=null?bk(r,e):r}else return e!==void 0?h4(t,e):t}function p4(t,e){if(e&&d4(e)){if(t instanceof wy)return f4(t,e);throw rm("To use ref(service, url), the first argument must be a Storage instance.")}else return bk(t,e)}function Aw(t,e){const n=e==null?void 0:e[ck];return n==null?null:tn.makeFromBucketSpec(n,t)}function m4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:xT(i,t.app.options.projectId))}class wy{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=lk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cF,this._maxUploadRetryTime=uF,this._requests=new Set,i!=null?this._bucket=tn.makeFromBucketSpec(i,this._host):this._bucket=Aw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=Aw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new us(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new IF(uk());{const o=LF(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Cw="@firebase/storage",Rw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="storage";function g4(t,e,n){return t=Le(t),c4(t,e,n)}function y4(t){return t=Le(t),u4(t)}function _4(t,e){return t=Le(t),p4(t,e)}function v4(t=Bh(),e){t=Le(t);const r=wi(t,Tk).getImmediate({identifier:e}),i=_T("storage");return i&&w4(r,...i),r}function w4(t,e,n,r={}){m4(t,e,n,r)}function x4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new wy(n,r,i,e,gs)}function E4(){Mn(new _n(Tk,x4,"PUBLIC").setMultipleInstances(!0)),Wt(Cw,Rw,""),Wt(Cw,Rw,"esm2017")}E4();const If={apiKey:"AIzaSyAgRnS9ugijuxF1qMCfr-USXe5AkYAnLME",authDomain:"agentic-hackthon.firebaseapp.com",projectId:"agentic-hackthon",appId:"1:1063716672043:web:681fd771d31ad548f6106e",storageBucket:"agentic-hackthon.firebasestorage.app",messagingSenderId:"1063716672043",measurementId:"G-S3ZEB9M54W"};function b4(t){return!!(t&&t.apiKey&&t.authDomain&&t.projectId&&t.appId)}let Li,wt,T4,Jt,lh;try{if(!b4(If))throw new Error("Missing Firebase env configuration");if(Li=ST(If),wt=jO(Li),Jt=Hj(Li),lh=v4(Li),If.measurementId)try{rL().then(t=>{t&&(T4=tL(Li))}).catch(()=>{})}catch{}}catch(t){console.error("[Firebase] Initialization failed:",(t==null?void 0:t.message)||t),Li=null,wt={currentUser:null},Jt=null,lh=null}function I4(t){return Li&&wt?cD(wt,t):(t(null),()=>{})}function S4(){const[t,e]=O.useState(null),[n,r]=O.useState(!0),[i,s]=O.useState(null),o=O.useCallback(async v=>{try{if(!v||!Jt)return;const y=sh(Jt,"users",v.uid),w=await sk(y),R={uid:v.uid,email:v.email||null,displayName:v.displayName||null,photoURL:v.photoURL||null,phoneNumber:v.phoneNumber||null,providerIds:(v.providerData||[]).map(D=>D.providerId),updatedAt:ah()};w.exists()?await nm(y,R,{merge:!0}):await nm(y,{...R,createdAt:ah(),role:"user"},{merge:!0})}catch{}},[]);O.useEffect(()=>{const v=I4(async y=>{e(y||null),r(!1)});return eO(wt).then(async y=>{y&&y.user&&(await o(y.user),e(y.user))}).catch(()=>{}).finally(()=>{}),()=>v&&v()},[o]);const a=O.useCallback(async({email:v,password:y})=>{const w=await sD(wt,v,y);return e(w.user),w.user},[]),l=O.useCallback(async({email:v,password:y,name:w})=>{const R=await iD(wt,v,y);if(w)try{await eI(R.user,{displayName:w})}catch{}return await o(R.user),e({...R.user}),R.user},[o]),c=O.useCallback(async()=>{await uD(wt),e(null)},[]),h=O.useCallback(async()=>wt.currentUser?wt.currentUser.getIdToken():null,[]),d=O.useCallback(async()=>{const v=new lr;v.setCustomParameters({prompt:"select_account"});const y=typeof navigator<"u"&&navigator.userAgent||"",w=/iPad|iPhone|iPod/.test(y),R=/Android/.test(y),D=typeof window<"u"&&window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,M=/FBAN|FBAV|Instagram|Line|MicroMessenger|Twitter|FB_IAB|VKClient|Snapchat/.test(y);try{if(w||R||D||M)return await x0(wt,v),null;const I=await KD(wt,v);return await o(I.user),e(I.user),I.user}catch(I){const x=I&&I.code?String(I.code):"";if(x==="auth/popup-closed-by-user"||x==="auth/popup-blocked"||x==="auth/cancelled-popup-request")return await x0(wt,v),null;throw console.error("[Auth] Google sign-in failed:",I),I}},[o]),p=O.useCallback(()=>{if(typeof window>"u")return null;if(!window.recaptchaVerifier){const v="recaptcha-container";let y=document.getElementById(v);y||(y=document.createElement("div"),y.id=v,y.style.display="inline-block",document.body.appendChild(y)),window.recaptchaVerifier=new jD(wt,v,{size:"invisible"})}return window.recaptchaVerifier},[]);function _(v){if(!v)return"";let w=String(v).replace(/[^0-9]/g,"");return w.startsWith("91")&&w.length>10&&(w=w.slice(w.length-10)),w.length===11&&w.startsWith("0")&&(w=w.slice(1)),w}function E(v){return/^[6-9][0-9]{9}$/.test(v)}const b=O.useCallback(async v=>{const y=p();try{y&&typeof y.render=="function"&&await y.render()}catch{}const w=_(v);if(!E(w)){const M=new Error("Please enter a valid Indian mobile number (10 digits starting with 6-9).");throw M.code="auth/invalid-india-number",M}const R=`+91${w}`,D=await BD(wt,R,y);return s(D),D},[p]),T=O.useCallback(async v=>{const y=i;if(!y)throw new Error("No phone confirmation in progress");const w=await y.confirm(v);return await o(w.user),e(w.user),s(null),w.user},[i,o]);return{user:t,loading:n,login:a,signup:l,logout:c,getIdToken:h,loginWithGoogle:d,sendPhoneCode:b,confirmPhoneCode:T,phoneConfirmation:i}}const Ik=O.createContext(null);function k4({children:t}){const e=S4();return m.jsx(Ik.Provider,{value:e,children:t})}function Po(){return O.useContext(Ik)}function we({variant:t="primary",className:e="",disabled:n=!1,children:r,...i}){const s="inline-flex items-center justify-center rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed px-3.5 py-2.5 text-sm font-medium shadow-sm focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900",o={primary:"bg-gradient-to-tr from-brand-600 to-brand-700 text-white hover:from-brand-600 hover:to-brand-800 focus:ring-brand-600",secondary:"bg-slate-200 text-slate-900 hover:bg-slate-300 focus:ring-slate-400 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800 focus:ring-slate-300"},a=`${s} ${o[t]||o.primary} ${e}`.trim();return m.jsx("button",{className:a,disabled:n,...i,children:r})}function A4(){const{theme:t,toggleTheme:e}=IP(),{user:n,logout:r,loading:i,loginWithGoogle:s}=Po(),[o,a]=O.useState(!1),[l,c]=O.useState(!1),h=({isActive:d})=>`px-3 py-2 rounded-md transition-colors hover:text-brand-700 hover:bg-slate-100 dark:hover:bg-slate-800 ${d?"text-brand-700 bg-brand-50 dark:text-brand-300 dark:bg-slate-800":"text-slate-700 dark:text-slate-200"}`;return m.jsx("nav",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/70 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shadow-subtle",children:m.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"mr-auto flex items-center gap-3",children:[m.jsx("div",{className:"w-7 h-7 rounded-md bg-gradient-to-tr from-brand-600 to-brand-700 shadow ring-1 ring-brand-500/30"}),m.jsx("span",{className:"font-semibold tracking-wide text-slate-900 dark:text-slate-100",children:"AgenticSprit"})]}),m.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[m.jsx(Un,{className:h,to:"/",children:"Dashboard"}),m.jsx(Un,{className:h,to:"/daily-checkin",children:"Daily Check-in"}),m.jsx(Un,{className:h,to:"/upload-report",children:"Upload Report"})]}),m.jsxs("div",{className:"flex items-center gap-2 relative",children:[m.jsxs("button",{onClick:e,"aria-label":"Toggle theme","aria-pressed":t==="dark",className:`relative inline-flex w-14 h-8 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900\r
                bg-slate-200 dark:bg-slate-700`,children:[m.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-amber-500 ${theme === 'dark' ? 'opacity-0' : 'opacity-100'}",children:m.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12 4a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1Zm0 13a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm7-6a1 1 0 0 1 1 1h1a1 1 0 1 1 0 2h-1a1 1 0 1 1-2 0 1 1 0 0 1 1-1ZM4 12a1 1 0 0 1 1-1H6a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm12.95-6.364a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414ZM4.929 17.657a1 1 0 0 1 1.414 0l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414Zm12.021 2.121a1 1 0 0 1 0-1.414l.707-.707a1 1 0 1 1 1.414 1.414l-.707.707a1 1 0 0 1-1.414 0ZM6.05 5.636a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 3.929 6.343l.707-.707A1 1 0 0 1 6.05 5.636Z"})})}),m.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-sky-400 ${theme === 'dark' ? 'opacity-100' : 'opacity-0'}",children:m.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"})})}),m.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 rounded-full bg-white shadow transition-transform duration-300 ${t==="dark"?"translate-x-6":"translate-x-0"}`})]}),!i&&(n?m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>c(d=>!d),className:"relative inline-flex items-center gap-2 px-2 py-1 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600","aria-haspopup":"menu","aria-expanded":l,children:[m.jsxs("span",{className:"relative inline-block",children:[n.photoURL?m.jsx("img",{src:n.photoURL,alt:"avatar",className:"w-8 h-8 rounded-full ring-2 ring-brand-500/40"}):m.jsx("span",{className:"w-8 h-8 rounded-full grid place-items-center text-white text-sm font-medium bg-gradient-to-tr from-brand-600 to-brand-700 ring-2 ring-brand-500/40",children:(n.displayName||n.email||"?").slice(0,1).toUpperCase()}),m.jsx("span",{className:"absolute -right-0.5 -bottom-0.5 block w-3 h-3 rounded-full bg-emerald-500 ring-2 ring-white dark:ring-slate-900","aria-hidden":"true"})]}),m.jsx("span",{className:"hidden sm:inline text-sm max-w-[10rem] truncate",children:n.displayName||n.email}),m.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-70",children:m.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l&&m.jsxs("div",{role:"menu",className:"absolute right-0 mt-2 w-60 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg z-50",children:[m.jsxs("div",{className:"px-3 py-2 text-sm text-slate-700 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700",children:[m.jsx("div",{className:"font-medium truncate",children:n.displayName||"Signed in"}),m.jsx("div",{className:"text-xs text-slate-500 truncate",children:n.email})]}),m.jsx("a",{href:"/profile",className:"block px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",onClick:()=>c(!1),children:"Profile"}),m.jsx("button",{onClick:async()=>{c(!1);try{await r()}catch{}},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",children:"Log out"})]})]}):m.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[m.jsx(Un,{className:h,to:"/login",children:"Log in"}),m.jsx(Un,{className:h,to:"/signup",children:"Sign up"}),m.jsx(we,{variant:"secondary",onClick:()=>{try{s()}catch{}},children:"Continue with Google"})]})),m.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200",onClick:()=>a(d=>!d),"aria-expanded":o,"aria-controls":"mobile-nav","aria-label":"Toggle navigation",children:m.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),m.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),o&&m.jsxs("div",{id:"mobile-nav",className:"md:hidden mt-3 grid gap-1",children:[m.jsx(Un,{onClick:()=>a(!1),className:h,to:"/",children:"Dashboard"}),m.jsx(Un,{onClick:()=>a(!1),className:h,to:"/daily-checkin",children:"Daily Check-in"}),m.jsx(Un,{onClick:()=>a(!1),className:h,to:"/upload-report",children:"Upload Report"}),!i&&(n?m.jsx("button",{onClick:async()=>{a(!1);try{await r()}catch{}},className:"text-left px-3 py-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Log out"}):m.jsxs(m.Fragment,{children:[m.jsx(Un,{onClick:()=>a(!1),className:h,to:"/login",children:"Log in"}),m.jsx(Un,{onClick:()=>a(!1),className:h,to:"/signup",children:"Sign up"}),m.jsx("button",{onClick:()=>{a(!1);try{s()}catch{}},className:"text-left px-3 py-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800",children:"Continue with Google"})]}))]})]})})}function C4({items:t=[]}){return m.jsx("ul",{className:"divide-y divide-slate-200",children:t.map((e,n)=>m.jsxs("li",{className:"py-2 flex items-center justify-between",children:[m.jsx("span",{className:"font-medium text-slate-900",children:e.label}),m.jsxs("span",{className:"text-slate-600",children:[(e.confidence*100).toFixed(1),"%"]})]},n))})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Wl(t){return t+.5|0}const qr=(t,e,n)=>Math.max(Math.min(t,n),e);function va(t){return qr(Wl(t*2.55),0,255)}function oi(t){return qr(Wl(t*255),0,255)}function ar(t){return qr(Wl(t/2.55)/100,0,1)}function Pw(t){return qr(Wl(t*100),0,100)}const cn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},im=[..."0123456789ABCDEF"],R4=t=>im[t&15],P4=t=>im[(t&240)>>4]+im[t&15],Pc=t=>(t&240)>>4===(t&15),N4=t=>Pc(t.r)&&Pc(t.g)&&Pc(t.b)&&Pc(t.a);function D4(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&cn[t[1]]*17,g:255&cn[t[2]]*17,b:255&cn[t[3]]*17,a:e===5?cn[t[4]]*17:255}:(e===7||e===9)&&(n={r:cn[t[1]]<<4|cn[t[2]],g:cn[t[3]]<<4|cn[t[4]],b:cn[t[5]]<<4|cn[t[6]],a:e===9?cn[t[7]]<<4|cn[t[8]]:255})),n}const O4=(t,e)=>t<255?e(t):"";function M4(t){var e=N4(t)?R4:P4;return t?"#"+e(t.r)+e(t.g)+e(t.b)+O4(t.a,e):void 0}const L4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sk(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function V4(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function j4(t,e,n){const r=Sk(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function F4(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function xy(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=F4(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function Ey(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(oi)}function by(t,e,n){return Ey(Sk,t,e,n)}function U4(t,e,n){return Ey(j4,t,e,n)}function B4(t,e,n){return Ey(V4,t,e,n)}function kk(t){return(t%360+360)%360}function z4(t){const e=L4.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?va(+e[5]):oi(+e[5]));const i=kk(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=U4(i,s,o):e[1]==="hsv"?r=B4(i,s,o):r=by(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function $4(t,e){var n=xy(t);n[0]=kk(n[0]+e),n=by(n),t.r=n[0],t.g=n[1],t.b=n[2]}function W4(t){if(!t)return;const e=xy(t),n=e[0],r=Pw(e[1]),i=Pw(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${ar(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Nw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Dw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function H4(){const t={},e=Object.keys(Dw),n=Object.keys(Nw);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Nw[s]);s=parseInt(Dw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Nc;function q4(t){Nc||(Nc=H4(),Nc.transparent=[0,0,0,0]);const e=Nc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const K4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function G4(t){const e=K4.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?va(o):qr(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?va(r):qr(r,0,255)),i=255&(e[4]?va(i):qr(i,0,255)),s=255&(e[6]?va(s):qr(s,0,255)),{r,g:i,b:s,a:n}}}function Q4(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ar(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Sf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ss=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Y4(t,e,n){const r=Ss(ar(t.r)),i=Ss(ar(t.g)),s=Ss(ar(t.b));return{r:oi(Sf(r+n*(Ss(ar(e.r))-r))),g:oi(Sf(i+n*(Ss(ar(e.g))-i))),b:oi(Sf(s+n*(Ss(ar(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Dc(t,e,n){if(t){let r=xy(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=by(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Ak(t,e){return t&&Object.assign(e||{},t)}function Ow(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=oi(t[3]))):(e=Ak(t,{r:0,g:0,b:0,a:1}),e.a=oi(e.a)),e}function X4(t){return t.charAt(0)==="r"?G4(t):z4(t)}class bl{constructor(e){if(e instanceof bl)return e;const n=typeof e;let r;n==="object"?r=Ow(e):n==="string"&&(r=D4(e)||q4(e)||X4(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Ak(this._rgb);return e&&(e.a=ar(e.a)),e}set rgb(e){this._rgb=Ow(e)}rgbString(){return this._valid?Q4(this._rgb):void 0}hexString(){return this._valid?M4(this._rgb):void 0}hslString(){return this._valid?W4(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Y4(this._rgb,e._rgb,n)),this}clone(){return new bl(this.rgb)}alpha(e){return this._rgb.a=oi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Wl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Dc(this._rgb,2,e),this}darken(e){return Dc(this._rgb,2,-e),this}saturate(e){return Dc(this._rgb,1,e),this}desaturate(e){return Dc(this._rgb,1,-e),this}rotate(e){return $4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function nr(){}const J4=(()=>{let t=0;return()=>t++})();function Ee(t){return t==null}function lt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function wn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Bn(t,e){return wn(t)?t:e}function ce(t,e){return typeof t>"u"?e:t}const Z4=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Se(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ge(t,e,n,r){let i,s,o;if(lt(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(me(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ch(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function uh(t){if(lt(t))return t.map(uh);if(me(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=uh(t[n[i]]);return e}return t}function Ck(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eU(t,e,n,r){if(!Ck(t))return;const i=e[t],s=n[t];me(i)&&me(s)?Tl(i,s,r):e[t]=uh(s)}function Tl(t,e,n){const r=lt(e)?e:[e],i=r.length;if(!me(t))return t;n=n||{};const s=n.merger||eU;let o;for(let a=0;a<i;++a){if(o=r[a],!me(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Ba(t,e){return Tl(t,e,{merger:tU})}function tU(t,e,n){if(!Ck(t))return;const r=e[t],i=n[t];me(r)&&me(i)?Ba(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=uh(i))}const Mw={"":t=>t,x:t=>t.x,y:t=>t.y};function nU(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function rU(t){const e=nU(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function hh(t,e){return(Mw[e]||(Mw[e]=rU(e)))(t)}function Ty(t){return t.charAt(0).toUpperCase()+t.slice(1)}const dh=t=>typeof t<"u",fi=t=>typeof t=="function",Lw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function iU(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Tt=Math.PI,Jn=2*Tt,sU=Jn+Tt,fh=Number.POSITIVE_INFINITY,oU=Tt/180,Rn=Tt/2,Ri=Tt/4,Vw=Tt*2/3,Rk=Math.log10,go=Math.sign;function za(t,e,n){return Math.abs(t-e)<n}function jw(t){const e=Math.round(t);t=za(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Rk(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function aU(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function lU(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Il(t){return!lU(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function cU(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function uU(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Hi(t){return t*(Tt/180)}function hU(t){return t*(180/Tt)}function Fw(t){if(!wn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function dU(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Tt&&(s+=Jn),{angle:s,distance:i}}function sm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fU(t,e){return(t-e+sU)%Jn-Tt}function Dr(t){return(t%Jn+Jn)%Jn}function Pk(t,e,n,r){const i=Dr(t),s=Dr(e),o=Dr(n),a=Dr(s-i),l=Dr(o-i),c=Dr(i-s),h=Dr(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function pn(t,e,n){return Math.max(e,Math.min(n,t))}function pU(t){return pn(t,-32768,32767)}function wa(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Iy(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const qi=(t,e,n,r)=>Iy(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),mU=(t,e,n)=>Iy(t,n,r=>t[r][e]>=n);function gU(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const Nk=["push","pop","shift","splice","unshift"];function yU(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Nk.forEach(n=>{const r="_onData"+Ty(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Uw(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(Nk.forEach(s=>{delete t[s]}),delete t._chartjs)}function _U(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Dk=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Ok(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,Dk.call(window,()=>{r=!1,t.apply(e,n)}))}}function vU(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Mk=t=>t==="start"?"left":t==="end"?"right":"center",Yt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,wU=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function xU(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:p,minDefined:_,maxDefined:E}=o.getUserBounds();if(_){if(i=Math.min(qi(l,h,d).lo,n?r:qi(e,h,o.getPixelForValue(d)).lo),c){const b=l.slice(0,i+1).reverse().findIndex(T=>!Ee(T[a.axis]));i-=Math.max(0,b)}i=pn(i,0,r-1)}if(E){let b=Math.max(qi(l,o.axis,p,!0).hi+1,n?0:qi(e,h,o.getPixelForValue(p),!0).hi+1);if(c){const T=l.slice(b-1).findIndex(v=>!Ee(v[a.axis]));b+=Math.max(0,T)}s=pn(b,i,r)-i}else s=r-i}return{start:i,count:s}}function EU(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Oc=t=>t===0||t===1,Bw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Jn/n)),zw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Jn/n)+1,$a={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Rn)+1,easeOutSine:t=>Math.sin(t*Rn),easeInOutSine:t=>-.5*(Math.cos(Tt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Oc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Oc(t)?t:Bw(t,.075,.3),easeOutElastic:t=>Oc(t)?t:zw(t,.075,.3),easeInOutElastic(t){return Oc(t)?t:t<.5?.5*Bw(t*2,.1125,.45):.5+.5*zw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-$a.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?$a.easeInBounce(t*2)*.5:$a.easeOutBounce(t*2-1)*.5+.5};function Sy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $w(t){return Sy(t)?t:new bl(t)}function kf(t){return Sy(t)?t:new bl(t).saturate(.5).darken(.1).hexString()}const bU=["x","y","borderWidth","radius","tension"],TU=["color","borderColor","backgroundColor"];function IU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:TU},numbers:{type:"number",properties:bU}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function SU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ww=new Map;function kU(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Ww.get(n);return r||(r=new Intl.NumberFormat(t,e),Ww.set(n,r)),r}function Lk(t,e,n){return kU(e,n).format(t)}const AU={values(t){return lt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=CU(t,n)}const o=Rk(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Lk(t,r,l)}};function CU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Vk={formatters:AU};function RU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Vk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const hs=Object.create(null),om=Object.create(null);function Wa(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Af(t,e,n){return typeof e=="string"?Tl(Wa(t,e),n):Tl(Wa(t,""),e)}class PU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>kf(i.backgroundColor),this.hoverBorderColor=(r,i)=>kf(i.borderColor),this.hoverColor=(r,i)=>kf(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Af(this,e,n)}get(e){return Wa(this,e)}describe(e,n){return Af(om,e,n)}override(e,n){return Af(hs,e,n)}route(e,n,r,i){const s=Wa(this,e),o=Wa(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return me(l)?Object.assign({},c,l):ce(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var He=new PU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[IU,SU,RU]);function NU(t){return!t||Ee(t.size)||Ee(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Hw(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Pi(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function qw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function am(t,e,n,r){jk(t,e,n,r,null)}function jk(t,e,n,r,i){let s,o,a,l,c,h,d,p;const _=e.pointStyle,E=e.rotation,b=e.radius;let T=(E||0)*oU;if(_&&typeof _=="object"&&(s=_.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),_){default:i?t.ellipse(n,r,i/2,b,0,0,Jn):t.arc(n,r,b,0,Jn),t.closePath();break;case"triangle":h=i?i/2:b,t.moveTo(n+Math.sin(T)*h,r-Math.cos(T)*b),T+=Vw,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*b),T+=Vw,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(T+Ri)*l,d=Math.cos(T+Ri)*(i?i/2-c:l),a=Math.sin(T+Ri)*l,p=Math.sin(T+Ri)*(i?i/2-c:l),t.arc(n-d,r-a,c,T-Tt,T-Rn),t.arc(n+p,r-o,c,T-Rn,T),t.arc(n+d,r+a,c,T,T+Rn),t.arc(n-p,r+o,c,T+Rn,T+Tt),t.closePath();break;case"rect":if(!E){l=Math.SQRT1_2*b,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}T+=Ri;case"rectRot":d=Math.cos(T)*(i?i/2:b),o=Math.cos(T)*b,a=Math.sin(T)*b,p=Math.sin(T)*(i?i/2:b),t.moveTo(n-d,r-a),t.lineTo(n+p,r-o),t.lineTo(n+d,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":T+=Ri;case"cross":d=Math.cos(T)*(i?i/2:b),o=Math.cos(T)*b,a=Math.sin(T)*b,p=Math.sin(T)*(i?i/2:b),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":d=Math.cos(T)*(i?i/2:b),o=Math.cos(T)*b,a=Math.sin(T)*b,p=Math.sin(T)*(i?i/2:b),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),T+=Ri,d=Math.cos(T)*(i?i/2:b),o=Math.cos(T)*b,a=Math.sin(T)*b,p=Math.sin(T)*(i?i/2:b),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(T)*b,a=Math.sin(T)*b,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(i?i/2:b),r+Math.sin(T)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Sl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ky(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ay(t){t.restore()}function DU(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function OU(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function MU(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ee(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function LU(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function VU(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ph(t,e,n,r,i,s={}){const o=lt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,MU(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&VU(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ee(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),LU(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function lm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Tt,Tt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Tt,Rn,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Rn,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Rn,!0),t.lineTo(n+o.topLeft,r)}const jU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FU=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function UU(t,e){const n=(""+t).match(jU);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const BU=t=>+t||0;function Fk(t,e){const n={},r=me(e),i=r?Object.keys(e):e,s=me(t)?r?o=>ce(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=BU(s(o));return n}function zU(t){return Fk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ha(t){return Fk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Vn(t){const e=zU(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ut(t,e){t=t||{},e=e||He.font;let n=ce(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ce(t.style,e.style);r&&!(""+r).match(FU)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ce(t.family,e.family),lineHeight:UU(ce(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ce(t.weight,e.weight),string:""};return i.string=NU(i),i}function Mc(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function $U(t,e,n){const{min:r,max:i}=t,s=Z4(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function vs(t,e){return Object.assign(Object.create(t),e)}function Cy(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=$k("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Cy([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Bk(a,l,()=>XU(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Gw(a).includes(l)},ownKeys(a){return Gw(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function yo(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Uk(t,r),setContext:s=>yo(t,s,n,r),override:s=>yo(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Bk(s,o,()=>HU(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Uk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:fi(n)?n:()=>n,isIndexable:fi(r)?r:()=>r}}const WU=(t,e)=>t?t+Ty(e):e,Ry=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Bk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function HU(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return fi(a)&&o.isScriptable(e)&&(a=qU(e,a,t,n)),lt(a)&&a.length&&(a=KU(e,a,t,o.isIndexable)),Ry(e,a)&&(a=yo(a,i,s&&s[e],o)),a}function qU(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Ry(t,l)&&(l=Py(i._scopes,i,t,l)),l}function KU(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(me(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Py(c,i,t,h);e.push(yo(d,s,o&&o[t],a))}}return e}function zk(t,e,n){return fi(t)?t(e,n):t}const GU=(t,e)=>t===!0?e:typeof t=="string"?hh(e,t):void 0;function QU(t,e,n,r,i){for(const s of e){const o=GU(n,s);if(o){t.add(o);const a=zk(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Py(t,e,n,r){const i=e._rootScopes,s=zk(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Kw(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Kw(a,o,s,l,r),l===null)?!1:Cy(Array.from(a),[""],i,s,()=>YU(e,n,r))}function Kw(t,e,n,r,i){for(;n;)n=QU(t,e,n,r,i);return n}function YU(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return lt(i)&&me(n)?n:i||{}}function XU(t,e,n,r){let i;for(const s of e)if(i=$k(WU(s,t),n),typeof i<"u")return Ry(t,i)?Py(n,r,t,i):i}function $k(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Gw(t){let e=t._keys;return e||(e=t._keys=JU(t._scopes)),e}function JU(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const ZU=Number.EPSILON||1e-14,_o=(t,e)=>e<t.length&&!t[e].skip&&t[e],Wk=t=>t==="x"?"y":"x";function e6(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=sm(s,i),l=sm(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,p=r*h;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function t6(t,e,n){const r=t.length;let i,s,o,a,l,c=_o(t,0);for(let h=0;h<r-1;++h)if(l=c,c=_o(t,h+1),!(!l||!c)){if(za(e[h],0,ZU)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function n6(t,e,n="x"){const r=Wk(n),i=t.length;let s,o,a,l=_o(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=_o(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=d+s*e[c])}}function r6(t,e="x"){const n=Wk(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=_o(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=_o(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?go(i[o-1])!==go(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}t6(t,i,s),n6(t,s,e)}function Lc(t,e,n){return Math.max(Math.min(t,n),e)}function i6(t,e){let n,r,i,s,o,a=Sl(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Sl(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Lc(i.cp1x,e.left,e.right),i.cp1y=Lc(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Lc(i.cp2x,e.left,e.right),i.cp2y=Lc(i.cp2y,e.top,e.bottom)))}function s6(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")r6(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=e6(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&i6(t,n)}function Ny(){return typeof window<"u"&&typeof document<"u"}function Dy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function mh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const ad=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function o6(t,e){return ad(t).getPropertyValue(e)}const a6=["top","right","bottom","left"];function Xi(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=a6[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const l6=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function c6(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(l6(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Vi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=ad(n),s=i.boxSizing==="border-box",o=Xi(i,"padding"),a=Xi(i,"border","width"),{x:l,y:c,box:h}=c6(t,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:_,height:E}=e;return s&&(_-=o.width+a.width,E-=o.height+a.height),{x:Math.round((l-d)/_*n.width/r),y:Math.round((c-p)/E*n.height/r)}}function u6(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Dy(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=ad(s),l=Xi(a,"border","width"),c=Xi(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=mh(a.maxWidth,s,"clientWidth"),i=mh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||fh,maxHeight:i||fh}}const Vc=t=>Math.round(t*10)/10;function h6(t,e,n,r){const i=ad(t),s=Xi(i,"margin"),o=mh(i.maxWidth,t,"clientWidth")||fh,a=mh(i.maxHeight,t,"clientHeight")||fh,l=u6(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const p=Xi(i,"border","width"),_=Xi(i,"padding");c-=_.width+p.width,h-=_.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=Vc(Math.min(c,o,l.maxWidth)),h=Vc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Vc(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=Vc(Math.floor(h*r))),{width:c,height:h}}function Qw(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const d6=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ny()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Yw(t,e){const n=o6(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ji(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function f6(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function p6(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=ji(t,i,n),a=ji(i,s,n),l=ji(s,e,n),c=ji(o,a,n),h=ji(a,l,n);return ji(c,h,n)}const m6=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},g6=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Js(t,e,n){return t?m6(e,n):g6()}function Hk(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function qk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Kk(t){return t==="angle"?{between:Pk,compare:fU,normalize:Dr}:{between:wa,compare:(e,n)=>e-n,normalize:e=>e}}function Xw({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function y6(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=Kk(r),l=e.length;let{start:c,end:h,loop:d}=t,p,_;if(d){for(c+=l,h+=l,p=0,_=l;p<_&&o(a(e[c%l][r]),i,s);++p)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function _6(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=Kk(r),{start:h,end:d,loop:p,style:_}=y6(t,e,n),E=[];let b=!1,T=null,v,y,w;const R=()=>l(i,w,v)&&a(i,w)!==0,D=()=>a(s,v)===0||l(s,w,v),M=()=>b||R(),I=()=>!b||D();for(let x=h,k=h;x<=d;++x)y=e[x%o],!y.skip&&(v=c(y[r]),v!==w&&(b=l(v,i,s),T===null&&M()&&(T=a(v,i)===0?x:k),T!==null&&I()&&(E.push(Xw({start:T,end:x,loop:p,count:o,style:_})),T=null),k=x,w=v));return T!==null&&E.push(Xw({start:T,end:d,loop:p,count:o,style:_})),E}function v6(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=_6(r[i],t.points,e);s.length&&n.push(...s)}return n}function w6(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function x6(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function E6(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=w6(n,i,s,r);if(r===!0)return Jw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return Jw(t,x6(n,o,l,c),n,e)}function Jw(t,e,n,r){return!r||!r.setContext||!n?e:b6(t,e,n,r)}function b6(t,e,n,r){const i=t._chart.getContext(),s=Zw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,p=d;function _(E,b,T,v){const y=a?-1:1;if(E!==b){for(E+=l;n[E%l].skip;)E-=y;for(;n[b%l].skip;)b+=y;E%l!==b%l&&(c.push({start:E%l,end:b%l,loop:T,style:v}),h=v,d=b%l)}}for(const E of e){d=a?d:E.start;let b=n[d%l],T;for(p=d+1;p<=E.end;p++){const v=n[p%l];T=Zw(r.setContext(vs(i,{type:"segment",p0:b,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),T6(T,h)&&_(d,p-1,E.loop,h),b=v,h=T}d<p-1&&_(d,p-1,E.loop,h)}return c}function Zw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function T6(t,e){if(!e)return!1;const n=[],r=function(i,s){return Sy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function jc(t,e,n){return t.options.clip?t[n]:e[n]}function I6(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:jc(n,e,"left"),right:jc(n,e,"right"),top:jc(r,e,"top"),bottom:jc(r,e,"bottom")}:e}function S6(t,e){const n=e._clip;if(n.disabled)return!1;const r=I6(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class k6{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Dk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var rr=new k6;const ex="transparent",A6={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=$w(t||ex),i=r.valid&&$w(e||ex);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class C6{constructor(e,n,r,i){const s=n[r];i=Mc([e.to,i,s,e.from]);const o=Mc([e.from,s,i]);this._active=!0,this._fn=e.fn||A6[e.type||typeof o],this._easing=$a[e.easing]||$a.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Mc([e.to,n,i,e.from]),this._from=Mc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class Gk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys(He.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!me(s))return;const o={};for(const a of n)o[a]=s[a];(lt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=P6(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&R6(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const p=r.get(c);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=d=new C6(p,e,c,h),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return rr.add(this._chart,r),!0}}function R6(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function P6(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function tx(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function N6(t,e,n){if(n===!1)return!1;const r=tx(t,n),i=tx(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function D6(t){let e,n,r,i;return me(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function Qk(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function nx(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],wn(c)&&(s||e===0||go(e)===go(c))&&(e+=c)}return!h&&!r.all?0:e}function O6(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function Cf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function M6(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function L6(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function V6(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function rx(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function ix(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=M6(s,o,r),d=e.length;let p;for(let _=0;_<d;++_){const E=e[_],{[l]:b,[c]:T}=E,v=E._stacks||(E._stacks={});p=v[c]=V6(i,h,b),p[a]=T,p._top=rx(p,o,!0,r.type),p._bottom=rx(p,o,!1,r.type);const y=p._visualValues||(p._visualValues={});y[a]=T}}function Rf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function j6(t,e){return vs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function F6(t,e,n){return vs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ra(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const Pf=t=>t==="reset"||t==="none",sx=(t,e)=>e?t:Object.assign({},t),U6=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Qk(n,!0),values:null};class qa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Cf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ra(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,p,_,E)=>d==="x"?p:d==="r"?E:_,s=n.xAxisID=ce(r.xAxisID,Rf(e,"x")),o=n.yAxisID=ce(r.yAxisID,Rf(e,"y")),a=n.rAxisID=ce(r.rAxisID,Rf(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Uw(this._data,this),e._stacked&&ra(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(me(n)){const i=this._cachedMeta;this._data=O6(n,i)}else if(r!==n){if(r){Uw(r,this);const i=this._cachedMeta;ra(i),i._parsed=[]}n&&Object.isExtensible(n)&&yU(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=Cf(n.vScale,n),n.stack!==r.stack&&(i=!0,ra(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(ix(this,n._parsed),n._stacked=Cf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{lt(i[e])?p=this.parseArrayData(r,i,e,n):me(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const _=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=p[h],l&&(_()&&(l=!1),c=d);r._sorted=l}o&&ix(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(i);let p,_,E;for(p=0,_=i;p<_;++p)E=p+r,d[p]={[a]:h||s.parse(c[E],E),[l]:o.parse(n[E],E)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+r,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,p,_;for(h=0,d=i;h<d;++h)p=h+r,_=n[p],c[h]={x:s.parse(hh(_,a),p),y:o.parse(hh(_,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:Qk(i,!0),values:n._stacks[e.axis]._visualValues};return nx(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=nx(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=U6(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=L6(a);let p,_;function E(){_=i[p];const b=_[a.axis];return!wn(_[e.axis])||h>b||d<b}for(p=0;p<o&&!(!E()&&(this.updateRangeFromParsed(c,e,_,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!E()){this.updateRangeFromParsed(c,e,_,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],wn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=D6(ce(this.options.clip,N6(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=F6(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=j6(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&dh(r);if(a)return sx(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),_=Object.keys(He.elements[e]),E=()=>this.getContext(r,i,n),b=c.resolveNamedOptions(p,_,E,d);return b.$shared&&(b.$shared=l,s[o]=Object.freeze(sx(b,l))),b}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(e,r,n))}const c=new Gk(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Pf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){Pf(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!Pf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ra(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(qa,"defaults",{}),ie(qa,"datasetElementType",null),ie(qa,"dataElementType",null);class fu extends qa{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=xU(n,i,o);this._drawStart=a,this._drawCount=l,EU(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i),p=o.axis,_=a.axis,{spanGaps:E,segment:b}=this.options,T=Il(E)?E:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",y=n+r,w=e.length;let R=n>0&&this.getParsed(n-1);for(let D=0;D<w;++D){const M=e[D],I=v?M:{};if(D<n||D>=y){I.skip=!0;continue}const x=this.getParsed(D),k=Ee(x[_]),A=I[p]=o.getPixelForValue(x[p],D),P=I[_]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[_],D);I.skip=isNaN(A)||isNaN(P)||k,I.stop=D>0&&Math.abs(x[p]-R[p])>T,b&&(I.parsed=x,I.raw=c.data[D]),d&&(I.options=h||this.resolveDataElementOptions(D,M.active?"active":i)),v||this.updateElement(M,D,I,i),R=x}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ie(fu,"id","line"),ie(fu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ie(fu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Oy{constructor(e){ie(this,"options");this.options=e||{}}static override(e){Object.assign(Oy.prototype,e)}init(){}formats(){return Ni()}parse(){return Ni()}format(){return Ni()}add(){return Ni()}diff(){return Ni()}startOf(){return Ni()}endOf(){return Ni()}}var B6={_date:Oy};function z6(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?mU:qi;if(r){if(i._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const p=c(s,e,n-d),_=c(s,e,n+d);return{lo:p.lo,hi:_.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:p}=t,_=p.slice(0,h.lo+1).reverse().findIndex(b=>!Ee(b[d.axis]));h.lo-=Math.max(0,_);const E=p.slice(h.hi).findIndex(b=>!Ee(b[d.axis]));h.hi+=Math.max(0,E)}return h}}return{lo:0,hi:s.length-1}}function ld(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:p}=z6(s[a],e,o,i);for(let _=d;_<=p;++_){const E=h[_];E.skip||r(E,c,_)}}}function $6(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Nf(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||ld(t,n,e,function(a,l,c){!i&&!Sl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function W6(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=dU(o,{x:e.x,y:e.y});Pk(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return ld(t,n,e,s),i}function H6(t,e,n,r,i,s){let o=[];const a=$6(n);let l=Number.POSITIVE_INFINITY;function c(h,d,p){const _=h.inRange(e.x,e.y,i);if(r&&!_)return;const E=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(E))&&!_)return;const T=a(e,E);T<l?(o=[{element:h,datasetIndex:d,index:p}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:p})}return ld(t,n,e,c),o}function Df(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?W6(t,e,n,i):H6(t,e,n,r,i,s)}function ox(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ld(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var q6={modes:{index(t,e,n,r){const i=Vi(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Nf(t,i,s,r,o):Df(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=Vi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Nf(t,i,s,r,o):Df(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=Vi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Nf(t,i,s,r,o)},nearest(t,e,n,r){const i=Vi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Df(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Vi(e,t);return ox(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Vi(e,t);return ox(t,i,"y",n.intersect,r)}}};const Yk=["left","top","right","bottom"];function ia(t,e){return t.filter(n=>n.pos===e)}function ax(t,e){return t.filter(n=>Yk.indexOf(n.pos)===-1&&n.box.axis===e)}function sa(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function K6(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function G6(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!Yk.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Q6(t,e){const n=G6(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function Y6(t){const e=K6(t),n=sa(e.filter(c=>c.box.fullSize),!0),r=sa(ia(e,"left"),!0),i=sa(ia(e,"right")),s=sa(ia(e,"top"),!0),o=sa(ia(e,"bottom")),a=ax(e,"x"),l=ax(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:ia(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function lx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Xk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function X6(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!me(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&Xk(o,s.getPadding());const a=Math.max(0,e.outerWidth-lx(o,t,"left","right")),l=Math.max(0,e.outerHeight-lx(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function J6(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Z6(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function xa(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Z6(a.horizontal,e));const{same:d,other:p}=X6(e,n,a,r);c|=d&&i.length,h=h||p,l.fullSize||i.push(a)}return c&&xa(i,e,n,r)||h}function Fc(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function cx(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,p=c.size||l.height;dh(c.start)&&(o=c.start),l.fullSize?Fc(l,i.left,o,n.outerWidth-i.right-i.left,p):Fc(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,p=c.size||l.width;dh(c.start)&&(s=c.start),l.fullSize?Fc(l,s,i.top,p,n.outerHeight-i.bottom-i.top):Fc(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Kr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Vn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=Y6(t.boxes),l=a.vertical,c=a.horizontal;ge(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,T)=>T.box.options&&T.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},i);Xk(p,Vn(r));const _=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),E=Q6(l.concat(c),d);xa(a.fullSize,_,d,E),xa(l,_,d,E),xa(c,_,d,E)&&xa(l,_,d,E),J6(_),cx(a.leftAndTop,_,d,E),_.x+=_.w,_.y+=_.h,cx(a.rightAndBottom,_,d,E),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},ge(a.chartArea,b=>{const T=b.box;Object.assign(T,t.chartArea),T.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class Jk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class e5 extends Jk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const pu="$chartjs",t5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ux=t=>t===null||t==="";function n5(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[pu]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ux(i)){const s=Yw(t,"width");s!==void 0&&(t.width=s)}if(ux(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Yw(t,"height");s!==void 0&&(t.height=s)}return t}const Zk=d6?{passive:!0}:!1;function r5(t,e,n){t&&t.addEventListener(e,n,Zk)}function i5(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Zk)}function s5(t,e){const n=t5[t.type]||t.type,{x:r,y:i}=Vi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function gh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function o5(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||gh(a.addedNodes,r),o=o&&!gh(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function a5(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||gh(a.removedNodes,r),o=o&&!gh(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const kl=new Map;let hx=0;function e1(){const t=window.devicePixelRatio;t!==hx&&(hx=t,kl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function l5(t,e){kl.size||window.addEventListener("resize",e1),kl.set(t,e)}function c5(t){kl.delete(t),kl.size||window.removeEventListener("resize",e1)}function u5(t,e,n){const r=t.canvas,i=r&&Dy(r);if(!i)return;const s=Ok((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),l5(t,s),o}function Of(t,e,n){n&&n.disconnect(),e==="resize"&&c5(t)}function h5(t,e,n){const r=t.canvas,i=Ok(s=>{t.ctx!==null&&n(s5(s,t))},t);return r5(r,e,i),i}class d5 extends Jk{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(n5(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[pu])return!1;const r=n[pu].initial;["height","width"].forEach(s=>{const o=r[s];Ee(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[pu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:o5,detach:a5,resize:u5}[n]||h5;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Of,detach:Of,resize:Of}[n]||i5)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return h6(e,n,r,i)}isAttached(e){const n=e&&Dy(e);return!!(n&&n.isConnected)}}function f5(t){return!Ny()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?e5:d5}class pi{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Il(this.x)&&Il(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}ie(pi,"defaults",{}),ie(pi,"defaultRoutes");function p5(t,e){const n=t.options.ticks,r=m5(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?y5(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return _5(e,c,s,o/i),c;const h=g5(s,e,i);if(o>0){let d,p;const _=o>1?Math.round((l-a)/(o-1)):null;for(Uc(e,c,h,Ee(_)?0:a-_,a),d=0,p=o-1;d<p;d++)Uc(e,c,h,s[d],s[d+1]);return Uc(e,c,h,l,Ee(_)?e.length:l+_),c}return Uc(e,c,h),c}function m5(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function g5(t,e,n){const r=v5(t),i=e.length/n;if(!r)return Math.max(i,1);const s=aU(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function y5(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function _5(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Uc(t,e,n,r,i){const s=ce(r,0),o=Math.min(ce(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function v5(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const w5=t=>t==="left"?"right":t==="right"?"left":t,dx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,fx=(t,e)=>Math.min(e||t,t);function px(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function x5(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function E5(t,e){ge(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function oa(t){return t.drawTicks?t.tickLength:0}function mx(t,e){if(!t.display)return 0;const n=Ut(t.font,e),r=Vn(t.padding);return(lt(t.text)?t.text.length:1)*n.lineHeight+r.height}function b5(t,e){return vs(t,{scale:e,type:"scale"})}function T5(t,e,n){return vs(t,{tick:n,index:e,type:"tick"})}function I5(t,e,n){let r=Mk(t);return(n&&e!=="right"||!n&&e==="right")&&(r=w5(r)),r}function S5(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,p,_,E;const b=o-i,T=a-s;if(t.isHorizontal()){if(_=Yt(r,s,a),me(n)){const v=Object.keys(n)[0],y=n[v];E=h[v].getPixelForValue(y)+b-e}else n==="center"?E=(c.bottom+c.top)/2+b-e:E=dx(t,n,e);p=a-s}else{if(me(n)){const v=Object.keys(n)[0],y=n[v];_=h[v].getPixelForValue(y)-T+e}else n==="center"?_=(c.left+c.right)/2-T+e:_=dx(t,n,e);E=Yt(r,o,i),d=n==="left"?-Rn:Rn}return{titleX:_,titleY:E,maxWidth:p,rotation:d}}class No extends pi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Bn(e,Number.POSITIVE_INFINITY),n=Bn(n,Number.NEGATIVE_INFINITY),r=Bn(r,Number.POSITIVE_INFINITY),i=Bn(i,Number.NEGATIVE_INFINITY),{min:Bn(e,r),max:Bn(n,i),minDefined:wn(e),maxDefined:wn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Bn(n,Bn(r,n)),max:Bn(r,Bn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Se(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$U(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?px(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=p5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Se(this.options.afterUpdate,[this])}beforeSetDimensions(){Se(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Se(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Se(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Se(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Se(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Se(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Se(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=fx(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,_=pn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:_/(r-1),d+6>a&&(a=_/(r-(e.offset?.5:1)),l=this.maxHeight-oa(e.grid)-n.padding-mx(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=hU(Math.min(Math.asin(pn((h.highest.height+6)/a,-1,1)),Math.asin(pn(l/c,-1,1))-Math.asin(pn(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Se(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Se(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=mx(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=oa(s)+l):(e.height=this.maxHeight,e.width=oa(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:p}=this._getLabelSizes(),_=r.padding*2,E=Hi(this.labelRotation),b=Math.cos(E),T=Math.sin(E);if(a){const v=r.mirror?0:T*d.width+b*p.height;e.height=Math.min(this.maxHeight,e.height+v+_)}else{const v=r.mirror?0:b*d.width+T*p.height;e.width=Math.min(this.maxWidth,e.width+v+_)}this._calculatePadding(c,h,T,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,_=0;l?c?(p=i*e.width,_=r*n.height):(p=r*e.height,_=i*n.width):s==="start"?_=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,_=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((_-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Se(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ee(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=px(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/fx(n,r));let c=0,h=0,d,p,_,E,b,T,v,y,w,R,D;for(d=0;d<n;d+=l){if(E=e[d].label,b=this._resolveTickFontOptions(d),i.font=T=b.string,v=s[T]=s[T]||{data:{},gc:[]},y=b.lineHeight,w=R=0,!Ee(E)&&!lt(E))w=Hw(i,v.data,v.gc,w,E),R=y;else if(lt(E))for(p=0,_=E.length;p<_;++p)D=E[p],!Ee(D)&&!lt(D)&&(w=Hw(i,v.data,v.gc,w,D),R+=y);o.push(w),a.push(R),c=Math.max(w,c),h=Math.max(R,h)}E5(s,n);const M=o.indexOf(c),I=a.indexOf(h),x=k=>({width:o[k]||0,height:a[k]||0});return{first:x(0),last:x(n-1),widest:x(M),highest:x(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return pU(this._alignToPixels?Pi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=T5(this.getContext(),e,r))}return this.$context||(this.$context=b5(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hi(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=oa(s),_=[],E=a.setContext(this.getContext()),b=E.display?E.width:0,T=b/2,v=function(re){return Pi(r,re,b)};let y,w,R,D,M,I,x,k,A,P,N,C;if(o==="top")y=v(this.bottom),I=this.bottom-p,k=y-T,P=v(e.top)+T,C=e.bottom;else if(o==="bottom")y=v(this.top),P=e.top,C=v(e.bottom)-T,I=y+T,k=this.top+p;else if(o==="left")y=v(this.right),M=this.right-p,x=y-T,A=v(e.left)+T,N=e.right;else if(o==="right")y=v(this.left),A=e.left,N=v(e.right)-T,M=y+T,x=this.left+p;else if(n==="x"){if(o==="center")y=v((e.top+e.bottom)/2+.5);else if(me(o)){const re=Object.keys(o)[0],ue=o[re];y=v(this.chart.scales[re].getPixelForValue(ue))}P=e.top,C=e.bottom,I=y+T,k=I+p}else if(n==="y"){if(o==="center")y=v((e.left+e.right)/2);else if(me(o)){const re=Object.keys(o)[0],ue=o[re];y=v(this.chart.scales[re].getPixelForValue(ue))}M=y-T,x=M-p,A=e.left,N=e.right}const Z=ce(i.ticks.maxTicksLimit,d),G=Math.max(1,Math.ceil(d/Z));for(w=0;w<d;w+=G){const re=this.getContext(w),ue=s.setContext(re),z=a.setContext(re),Q=ue.lineWidth,V=ue.color,J=z.dash||[],Y=z.dashOffset,he=ue.tickWidth,Ce=ue.tickColor,Re=ue.tickBorderDash||[],be=ue.tickBorderDashOffset;R=x5(this,w,l),R!==void 0&&(D=Pi(r,R,Q),c?M=x=A=N=D:I=k=P=C=D,_.push({tx1:M,ty1:I,tx2:x,ty2:k,x1:A,y1:P,x2:N,y2:C,width:Q,color:V,borderDash:J,borderDashOffset:Y,tickWidth:he,tickColor:Ce,tickBorderDash:Re,tickBorderDashOffset:be}))}return this._ticksLength=d,this._borderValue=y,_}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,p=oa(r.grid),_=p+h,E=d?-h:_,b=-Hi(this.labelRotation),T=[];let v,y,w,R,D,M,I,x,k,A,P,N,C="middle";if(i==="top")M=this.bottom-E,I=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+E,I=this._getXAxisLabelAlignment();else if(i==="left"){const G=this._getYAxisLabelAlignment(p);I=G.textAlign,D=G.x}else if(i==="right"){const G=this._getYAxisLabelAlignment(p);I=G.textAlign,D=G.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+_;else if(me(i)){const G=Object.keys(i)[0],re=i[G];M=this.chart.scales[G].getPixelForValue(re)+_}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")D=(e.left+e.right)/2-_;else if(me(i)){const G=Object.keys(i)[0],re=i[G];D=this.chart.scales[G].getPixelForValue(re)}I=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?C="top":l==="end"&&(C="bottom"));const Z=this._getLabelSizes();for(v=0,y=a.length;v<y;++v){w=a[v],R=w.label;const G=s.setContext(this.getContext(v));x=this.getPixelForTick(v)+s.labelOffset,k=this._resolveTickFontOptions(v),A=k.lineHeight,P=lt(R)?R.length:1;const re=P/2,ue=G.color,z=G.textStrokeColor,Q=G.textStrokeWidth;let V=I;o?(D=x,I==="inner"&&(v===y-1?V=this.options.reverse?"left":"right":v===0?V=this.options.reverse?"right":"left":V="center"),i==="top"?c==="near"||b!==0?N=-P*A+A/2:c==="center"?N=-Z.highest.height/2-re*A+A:N=-Z.highest.height+A/2:c==="near"||b!==0?N=A/2:c==="center"?N=Z.highest.height/2-re*A:N=Z.highest.height-P*A,d&&(N*=-1),b!==0&&!G.showLabelBackdrop&&(D+=A/2*Math.sin(b))):(M=x,N=(1-P)*A/2);let J;if(G.showLabelBackdrop){const Y=Vn(G.backdropPadding),he=Z.heights[v],Ce=Z.widths[v];let Re=N-Y.top,be=0-Y.left;switch(C){case"middle":Re-=he/2;break;case"bottom":Re-=he;break}switch(I){case"center":be-=Ce/2;break;case"right":be-=Ce;break;case"inner":v===y-1?be-=Ce:v>0&&(be-=Ce/2);break}J={left:be,top:Re,width:Ce+Y.width,height:he+Y.height,color:G.backdropColor}}T.push({label:R,font:k,textOffset:N,options:{rotation:b,color:ue,strokeColor:z,strokeWidth:Q,textAlign:V,textBaseline:C,translation:[D,M],backdrop:J}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hi(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,p;this.isHorizontal()?(c=Pi(e,this.left,o)-o/2,h=Pi(e,this.right,a)+a/2,d=p=l):(d=Pi(e,this.top,o)-o/2,p=Pi(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&ky(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;ph(r,c,0,h,l,a)}i&&Ay(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Ut(r.font),o=Vn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||me(n)?(l+=o.bottom,lt(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=S5(this,l,n,a);ph(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:p,textAlign:I5(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ce(e.grid&&e.grid.z,-1),i=ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==No.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ut(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bc{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;C5(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,k5(e,o,r),this.override&&He.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in He[i]&&(delete He[i][r],this.override&&delete hs[r])}}function k5(t,e,n){const r=Tl(Object.create(null),[n?He.get(n):{},He.get(e),t.defaults]);He.set(e,r),t.defaultRoutes&&A5(e,t.defaultRoutes),t.descriptors&&He.describe(e,t.descriptors)}function A5(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");He.route(s,i,l,a)})}function C5(t){return"id"in t&&"defaults"in t}class R5{constructor(){this.controllers=new Bc(qa,"datasets",!0),this.elements=new Bc(pi,"elements"),this.plugins=new Bc(Object,"plugins"),this.scales=new Bc(No,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ge(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=Ty(e);Se(r["before"+i],[],r),n[e](r),Se(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Wn=new R5;class P5{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Se(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ce(r.options&&r.options.plugins,{}),s=N5(r);return i===!1&&!n?[]:O5(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function N5(t){const e={},n=[],r=Object.keys(Wn.plugins.items);for(let s=0;s<r.length;s++)n.push(Wn.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function D5(t,e){return!e&&t===!1?null:t===!0?{}:t}function O5(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=D5(r[l],i);c!==null&&s.push({plugin:a,options:M5(t.config,{plugin:a,local:n[l]},c,o)})}return s}function M5(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cm(t,e){const n=He.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function L5(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function V5(t,e){return t===e?"_index_":"_value_"}function gx(t){if(t==="x"||t==="y"||t==="r")return t}function j5(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function um(t,...e){if(gx(t))return t;for(const n of e){const r=n.axis||j5(n.position)||t.length>1&&gx(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function yx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function F5(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return yx(t,"x",n[0])||yx(t,"y",n[0])}return{}}function U5(t,e){const n=hs[t.type]||{scales:{}},r=e.scales||{},i=cm(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=um(o,a,F5(o,t),He.scales[a.type]),c=V5(l,i),h=n.scales||{};s[o]=Ba(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||cm(a,e),h=(hs[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=L5(d,l),_=o[p+"AxisID"]||p;s[_]=s[_]||Object.create(null),Ba(s[_],[{axis:p},r[_],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ba(a,[He.scales[a.type],He.scale])}),s}function t1(t){const e=t.options||(t.options={});e.plugins=ce(e.plugins,{}),e.scales=U5(t,e)}function n1(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function B5(t){return t=t||{},t.data=n1(t.data),t1(t),t}const _x=new Map,r1=new Set;function zc(t,e){let n=_x.get(t);return n||(n=e(),_x.set(t,n),r1.add(n)),n}const aa=(t,e,n)=>{const r=hh(e,n);r!==void 0&&t.add(r)};class z5{constructor(e){this._config=B5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=n1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),t1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return zc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return zc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return zc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>aa(l,e,d))),h.forEach(d=>aa(l,i,d)),h.forEach(d=>aa(l,hs[s]||{},d)),h.forEach(d=>aa(l,He,d)),h.forEach(d=>aa(l,om,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),r1.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,hs[n]||{},He.datasets[n]||{},{type:n},He,om]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=vx(this._resolverCache,e,i);let l=o;if(W5(o,n)){s.$shared=!1,r=fi(r)?r():r;const c=this.createResolver(e,r,a);l=yo(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=vx(this._resolverCache,e,r);return me(n)?yo(s,n,void 0,i):s}}function vx(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Cy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const $5=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>fi(t[e]));function W5(t,e){const{isScriptable:n,isIndexable:r}=Uk(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(fi(a)||$5(a))||o&&lt(a))return!0}return!1}var H5="4.5.0";const q5=["top","bottom","left","right","chartArea"];function wx(t,e){return t==="top"||t==="bottom"||q5.indexOf(t)===-1&&e==="x"}function xx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Ex(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Se(n&&n.onComplete,[t],e)}function K5(t){const e=t.chart,n=e.options.animation;Se(n&&n.onProgress,[t],e)}function i1(t){return Ny()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const mu={},bx=t=>{const e=i1(t);return Object.values(mu).filter(n=>n.canvas===e).pop()};function G5(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Q5(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Pr;let cd=(Pr=class{static register(...e){Wn.add(...e),Tx()}static unregister(...e){Wn.remove(...e),Tx()}constructor(e,n){const r=this.config=new z5(n),i=i1(e),s=bx(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||f5(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=J4(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new P5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vU(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],mu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}rr.listen(this,"complete",Ex),rr.listen(this,"progress",K5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Ee(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Wn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Qw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qw(this.canvas,this.ctx),this}stop(){return rr.stop(this),this}resize(e,n){rr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Qw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Se(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ge(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=um(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ge(s,o=>{const a=o.options,l=a.id,c=um(l,a),h=ce(a.type,o.dtype);(a.position===void 0||wx(a.position,c)!==wx(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const p=Wn.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),ge(i,(o,a)=>{o||delete r[a]}),ge(r,o=>{Kr.configure(this,o,o.options),Kr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(xx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||cm(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Wn.getController(a),{datasetElementType:c,dataElementType:h}=He.datasets[a];Object.assign(l,{dataElementType:Wn.getElement(h),datasetElementType:c&&Wn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ge(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),p=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ge(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ge(this.scales,e=>{Kr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Lw(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;G5(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Lw(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Kr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ge(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,fi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rr.has(this)?this.attached&&!rr.running(this)&&rr.start(this):(this.draw(),Ex({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=S6(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&ky(n,i),e.controller.draw(),i&&Ay(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Sl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=q6.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=vs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);dh(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),rr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete mu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ge(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ge(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ge(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ch(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=iU(e),c=Q5(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Se(s.onHover,[e,a,this],this),l&&Se(s.onClick,[e,a,this],this));const h=!ch(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},ie(Pr,"defaults",He),ie(Pr,"instances",mu),ie(Pr,"overrides",hs),ie(Pr,"registry",Wn),ie(Pr,"version",H5),ie(Pr,"getChart",bx),Pr);function Tx(){return ge(cd.instances,t=>t._plugins.invalidate())}function s1(t,e,n=e){t.lineCap=ce(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ce(n.borderDash,e.borderDash)),t.lineDashOffset=ce(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ce(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ce(n.borderWidth,e.borderWidth),t.strokeStyle=ce(n.borderColor,e.borderColor)}function Y5(t,e,n){t.lineTo(n.x,n.y)}function X5(t){return t.stepped?DU:t.tension||t.cubicInterpolationMode==="monotone"?OU:Y5}function o1(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function J5(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=o1(i,n,r),h=X5(s);let{move:d=!0,reverse:p}=r||{},_,E,b;for(_=0;_<=c;++_)E=i[(a+(p?c-_:_))%o],!E.skip&&(d?(t.moveTo(E.x,E.y),d=!1):h(t,b,E,p,s.stepped),b=E);return l&&(E=i[(a+(p?c:0))%o],h(t,b,E,p,s.stepped)),!!l}function Z5(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=o1(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,p,_,E,b,T,v;const y=R=>(o+(c?a-R:R))%s,w=()=>{b!==T&&(t.lineTo(h,T),t.lineTo(h,b),t.lineTo(h,v))};for(l&&(_=i[y(0)],t.moveTo(_.x,_.y)),p=0;p<=a;++p){if(_=i[y(p)],_.skip)continue;const R=_.x,D=_.y,M=R|0;M===E?(D<b?b=D:D>T&&(T=D),h=(d*h+R)/++d):(w(),t.lineTo(R,D),E=M,d=0,b=T=D),v=D}w()}function hm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Z5:J5}function e3(t){return t.stepped?f6:t.tension||t.cubicInterpolationMode==="monotone"?p6:ji}function t3(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),s1(t,e.options),t.stroke(i)}function n3(t,e,n,r){const{segments:i,options:s}=e,o=hm(e);for(const a of i)s1(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const r3=typeof Path2D=="function";function i3(t,e,n,r){r3&&!e.options.segment?t3(t,e,n,r):n3(t,e,n,r)}class Ea extends pi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;s6(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=E6(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=v6(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=e3(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:p}=o[c],_=s[d],E=s[p];if(_===E){a.push(_);continue}const b=Math.abs((i-_[n])/(E[n]-_[n])),T=l(_,E,b,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return hm(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=hm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),i3(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ie(Ea,"id","line"),ie(Ea,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ie(Ea,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ie(Ea,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ix(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class gu extends pi{constructor(n){super();ie(this,"parsed");ie(this,"skip");ie(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Ix(this,n,"x",r)}inYRange(n,r){return Ix(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Sl(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,am(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ie(gu,"id","point"),ie(gu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ie(gu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Sx=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},s3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class kx extends pi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Se(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Ut(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Sx(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,_=-h;return this.legendItems.forEach((E,b)=>{const T=r+n/2+s.measureText(E.text).width;(b===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(b>0?0:1)]=0,_+=h,p++),l[b]={left:0,top:_,row:p,width:T,height:i},c[c.length-1]+=T+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,p=0,_=0,E=0,b=0;return this.legendItems.forEach((T,v)=>{const{itemWidth:y,itemHeight:w}=o3(r,n,s,T,i);v>0&&_+w+2*a>h&&(d+=p+a,c.push({width:p,height:_}),E+=p+a,b++,p=_=0),l[v]={left:E,top:_,col:b,width:y,height:w},p=Math.max(p,y),_+=w+a}),d+=p,c.push({width:p,height:_}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Js(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Yt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Yt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Yt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Yt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ky(e,this),this._draw(),Ay(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=He.color,l=Js(e.rtl,this.left,this.width),c=Ut(o.font),{padding:h}=o,d=c.size,p=d/2;let _;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:E,boxHeight:b,itemHeight:T}=Sx(o,d),v=function(M,I,x){if(isNaN(E)||E<=0||isNaN(b)||b<0)return;i.save();const k=ce(x.lineWidth,1);if(i.fillStyle=ce(x.fillStyle,a),i.lineCap=ce(x.lineCap,"butt"),i.lineDashOffset=ce(x.lineDashOffset,0),i.lineJoin=ce(x.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=ce(x.strokeStyle,a),i.setLineDash(ce(x.lineDash,[])),o.usePointStyle){const A={radius:b*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:k},P=l.xPlus(M,E/2),N=I+p;jk(i,A,P,N,o.pointStyleWidth&&E)}else{const A=I+Math.max((d-b)/2,0),P=l.leftForLtr(M,E),N=Ha(x.borderRadius);i.beginPath(),Object.values(N).some(C=>C!==0)?lm(i,{x:P,y:A,w:E,h:b,radius:N}):i.rect(P,A,E,b),i.fill(),k!==0&&i.stroke()}i.restore()},y=function(M,I,x){ph(i,x.text,M,I+T/2,c,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},w=this.isHorizontal(),R=this._computeTitleHeight();w?_={x:Yt(s,this.left+h,this.right-r[0]),y:this.top+h+R,line:0}:_={x:this.left+h,y:Yt(s,this.top+R+h,this.bottom-n[0].height),line:0},Hk(this.ctx,e.textDirection);const D=T+h;this.legendItems.forEach((M,I)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const x=i.measureText(M.text).width,k=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),A=E+p+x;let P=_.x,N=_.y;l.setWidth(this.width),w?I>0&&P+A+h>this.right&&(N=_.y+=D,_.line++,P=_.x=Yt(s,this.left+h,this.right-r[_.line])):I>0&&N+D>this.bottom&&(P=_.x=P+n[_.line].width+h,_.line++,N=_.y=Yt(s,this.top+R+h,this.bottom-n[_.line].height));const C=l.x(P);if(v(C,N,M),P=wU(k,P+E+p,w?P+A:this.right,e.rtl),y(l.x(P),N,M),w)_.x+=A+h;else if(typeof M.text!="string"){const Z=c.lineHeight;_.y+=a1(M,Z)+h}else _.y+=D}),qk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Ut(n.font),i=Vn(n.padding);if(!n.display)return;const s=Js(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,d=Yt(e.align,d,this.right-p);else{const E=this.columnSizes.reduce((b,T)=>Math.max(b,T.height),0);h=c+Yt(e.align,this.top,this.bottom-E-e.labels.padding-this._computeTitleHeight())}const _=Yt(a,d,d+p);o.textAlign=s.textAlign(Mk(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,ph(o,n.text,_,h,r)}_computeTitleHeight(){const e=this.options.title,n=Ut(e.font),r=Vn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(wa(e,this.left,this.right)&&wa(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],wa(e,i.left,i.left+i.width)&&wa(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!c3(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=s3(i,r);i&&!s&&Se(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Se(n.onHover,[e,r,this],this)}else r&&Se(n.onClick,[e,r,this],this)}}function o3(t,e,n,r,i){const s=a3(r,t,e,n),o=l3(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function a3(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function l3(t,e,n){let r=t;return typeof e.text!="string"&&(r=a1(e,n)),r}function a1(t,e){const n=t.text?t.text.length:0;return e*n}function c3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var u3={id:"legend",_element:kx,start(t,e,n){const r=t.legend=new kx({ctx:t.ctx,options:n,chart:t});Kr.configure(t,r,n),Kr.addBox(t,r)},stop(t){Kr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Kr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Vn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ba={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=sm(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zn(t,e){return e&&(lt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ir(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function h3(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Ax(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Ut(e.bodyFont),c=Ut(e.titleFont),h=Ut(e.footerFont),d=s.length,p=i.length,_=r.length,E=Vn(e.padding);let b=E.height,T=0,v=r.reduce((R,D)=>R+D.before.length+D.lines.length+D.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=_*R+(v-_)*l.lineHeight+(v-1)*e.bodySpacing}p&&(b+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let y=0;const w=function(R){T=Math.max(T,n.measureText(R).width+y)};return n.save(),n.font=c.string,ge(t.title,w),n.font=l.string,ge(t.beforeBody.concat(t.afterBody),w),y=e.displayColors?o+2+e.boxPadding:0,ge(r,R=>{ge(R.before,w),ge(R.lines,w),ge(R.after,w)}),y=0,n.font=h.string,ge(t.footer,w),n.restore(),T+=E.width,{width:T,height:b}}function d3(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function f3(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function p3(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),f3(c,t,e,n)&&(c="center"),c}function Cx(t,e,n){const r=n.yAlign||e.yAlign||d3(t,n);return{xAlign:n.xAlign||e.xAlign||p3(t,e,n,r),yAlign:r}}function m3(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function g3(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Rx(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:_}=Ha(o);let E=m3(e,a);const b=g3(e,l,c);return l==="center"?a==="left"?E+=c:a==="right"&&(E-=c):a==="left"?E-=Math.max(h,p)+i:a==="right"&&(E+=Math.max(d,_)+i),{x:pn(E,0,r.width-e.width),y:pn(b,0,r.height-e.height)}}function $c(t,e,n){const r=Vn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Px(t){return zn([],ir(t))}function y3(t,e,n){return vs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Nx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const l1={beforeTitle:nr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:nr,beforeBody:nr,beforeLabel:nr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ee(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:nr,afterBody:nr,beforeFooter:nr,footer:nr,afterFooter:nr};function Lt(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?l1[e].call(n,r):i}class dm extends pi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new Gk(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=y3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Lt(r,"beforeTitle",this,e),s=Lt(r,"title",this,e),o=Lt(r,"afterTitle",this,e);let a=[];return a=zn(a,ir(i)),a=zn(a,ir(s)),a=zn(a,ir(o)),a}getBeforeBody(e,n){return Px(Lt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ge(e,s=>{const o={before:[],lines:[],after:[]},a=Nx(r,s);zn(o.before,ir(Lt(a,"beforeLabel",this,s))),zn(o.lines,Lt(a,"label",this,s)),zn(o.after,ir(Lt(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Px(Lt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Lt(r,"beforeFooter",this,e),s=Lt(r,"footer",this,e),o=Lt(r,"afterFooter",this,e);let a=[];return a=zn(a,ir(i)),a=zn(a,ir(s)),a=zn(a,ir(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(h3(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,p)=>e.filter(h,d,p,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),ge(a,h=>{const d=Nx(e.callbacks,h);i.push(Lt(d,"labelColor",this,h)),s.push(Lt(d,"labelPointStyle",this,h)),o.push(Lt(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=ba[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Ax(this,r),c=Object.assign({},a,l),h=Cx(this.chart,r,c),d=Rx(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Ha(a),{x:p,y:_}=e,{width:E,height:b}=n;let T,v,y,w,R,D;return s==="center"?(R=_+b/2,i==="left"?(T=p,v=T-o,w=R+o,D=R-o):(T=p+E,v=T+o,w=R-o,D=R+o),y=T):(i==="left"?v=p+Math.max(l,h)+o:i==="right"?v=p+E-Math.max(c,d)-o:v=this.caretX,s==="top"?(w=_,R=w-o,T=v-o,y=v+o):(w=_+b,R=w+o,T=v+o,y=v-o),D=w),{x1:T,x2:v,x3:y,y1:w,y2:R,y3:D}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Js(r.rtl,this.x,this.width);for(e.x=$c(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Ut(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=Ut(s.bodyFont),d=$c(this,"left",s),p=i.x(d),_=l<h.lineHeight?(h.lineHeight-l)/2:0,E=n.y+_;if(s.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=i.leftForLtr(p,c)+c/2,v=E+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,am(e,b,T,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,am(e,b,T,v)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(p,c),T=i.leftForLtr(i.xPlus(p,1),c-2),v=Ha(o.borderRadius);Object.values(v).some(y=>y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,lm(e,{x:b,y:E,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),lm(e,{x:T,y:E+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,E,c,l),e.strokeRect(b,E,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,E+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=Ut(r.bodyFont);let p=d.lineHeight,_=0;const E=Js(r.rtl,this.x,this.width),b=function(x){n.fillText(x,E.x(e.x+_),e.y+p/2),e.y+=p+s},T=E.textAlign(o);let v,y,w,R,D,M,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=$c(this,T,r),n.fillStyle=r.bodyColor,ge(this.beforeBody,b),_=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,M=i.length;R<M;++R){for(v=i[R],y=this.labelTextColors[R],n.fillStyle=y,ge(v.before,b),w=v.lines,a&&w.length&&(this._drawColorBox(n,e,R,E,r),p=Math.max(d.lineHeight,l)),D=0,I=w.length;D<I;++D)b(w[D]),p=d.lineHeight;ge(v.after,b)}_=0,p=d.lineHeight,ge(this.afterBody,b),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Js(r.rtl,this.x,this.width);for(e.x=$c(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Ut(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:p,bottomLeft:_,bottomRight:E}=Ha(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-E),n.quadraticCurveTo(a+c,l+h,a+c-E,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+_,l+h),n.quadraticCurveTo(a,l+h,a,l+h-_),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=ba[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Ax(this,e),l=Object.assign({},o,this._size),c=Cx(n,e,l),h=Rx(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Vn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),Hk(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),qk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ch(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ch(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=ba[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}ie(dm,"positioners",ba);var _3={id:"tooltip",_element:dm,positioners:ba,afterInit(t,e,n){n&&(t.tooltip=new dm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:l1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const v3=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function w3(t,e,n,r){const i=t.indexOf(e);if(i===-1)return v3(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const x3=(t,e)=>t===null?null:pn(Math.round(t),0,e);function Dx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class fm extends No{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ee(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:w3(r,e,ce(n,e),this._addedLabels),x3(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Dx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ie(fm,"id","category"),ie(fm,"defaults",{ticks:{callback:Dx}});function E3(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=t,_=s||1,E=h-1,{min:b,max:T}=e,v=!Ee(o),y=!Ee(a),w=!Ee(c),R=(T-b)/(d+1);let D=jw((T-b)/E/_)*_,M,I,x,k;if(D<1e-14&&!v&&!y)return[{value:b},{value:T}];k=Math.ceil(T/D)-Math.floor(b/D),k>E&&(D=jw(k*D/E/_)*_),Ee(l)||(M=Math.pow(10,l),D=Math.ceil(D*M)/M),i==="ticks"?(I=Math.floor(b/D)*D,x=Math.ceil(T/D)*D):(I=b,x=T),v&&y&&s&&cU((a-o)/s,D/1e3)?(k=Math.round(Math.min((a-o)/D,h)),D=(a-o)/k,I=o,x=a):w?(I=v?o:I,x=y?a:x,k=c-1,D=(x-I)/k):(k=(x-I)/D,za(k,Math.round(k),D/1e3)?k=Math.round(k):k=Math.ceil(k));const A=Math.max(Fw(D),Fw(I));M=Math.pow(10,Ee(l)?A:l),I=Math.round(I*M)/M,x=Math.round(x*M)/M;let P=0;for(v&&(p&&I!==o?(n.push({value:o}),I<o&&P++,za(Math.round((I+P*D)*M)/M,o,Ox(o,R,t))&&P++):I<o&&P++);P<k;++P){const N=Math.round((I+P*D)*M)/M;if(y&&N>a)break;n.push({value:N})}return y&&p&&x!==a?n.length&&za(n[n.length-1].value,a,Ox(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!y||x===a)&&n.push({value:x}),n}function Ox(t,e,{horizontal:n,minRotation:r}){const i=Hi(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class b3 extends No{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ee(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=go(i),c=go(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=E3(i,s);return e.bounds==="ticks"&&uU(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Lk(e,this.chart.options.locale,this.options.ticks.format)}}class pm extends b3{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=wn(e)?e:0,this.max=wn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Hi(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ie(pm,"id","linear"),ie(pm,"defaults",{ticks:{callback:Vk.formatters.numeric}});const ud={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jt=Object.keys(ud);function Mx(t,e){return t-e}function Lx(t,e){if(Ee(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),wn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Il(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function Vx(t,e,n,r){const i=jt.length;for(let s=jt.indexOf(t);s<i-1;++s){const o=ud[jt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return jt[s]}return jt[i-1]}function T3(t,e,n,r,i){for(let s=jt.length-1;s>=jt.indexOf(n);s--){const o=jt[s];if(ud[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return jt[n?jt.indexOf(n):0]}function I3(t){for(let e=jt.indexOf(t)+1,n=jt.length;e<n;++e)if(ud[jt[e]].common)return jt[e]}function jx(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Iy(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function S3(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Fx(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:S3(t,r,i,n)}class yh extends No{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new B6._date(e.adapters.date);i.init(n),Ba(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Lx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=wn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=wn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=gU(i,s,o);return this._unit=n.unit||(r.autoSkip?Vx(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):T3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:I3(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Fx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=pn(n,0,o),r=pn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||Vx(s.minUnit,n,r,this._getLabelCapacity(n)),a=ce(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Il(l)||l===!0,h={};let d=n,p,_;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const E=i.ticks.source==="data"&&this.getDataTimestamps();for(p=d,_=0;p<r;p=+e.add(p,a,o),_++)jx(h,p,E);return(p===r||i.bounds==="ticks"||_===1)&&jx(h,p,E),Object.keys(h).sort(Mx).map(b=>+b)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Se(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],p=r[n],_=c&&d&&p&&p.major;return this._adapter.format(e,i||(_?d:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Hi(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Fx(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(Lx(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _U(e.sort(Mx))}}ie(yh,"id","time"),ie(yh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wc(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=qi(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=qi(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Ux extends yh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Wc(n,this.min),this._tableRange=Wc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Wc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Wc(this._table,r*this._tableRange+this._minPos,!0)}}ie(Ux,"id","timeseries"),ie(Ux,"defaults",yh.defaults);const c1="label";function Bx(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function k3(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function u1(t,e){t.labels=e}function h1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c1;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function A3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c1;const n={labels:[],datasets:[]};return u1(n,t.labels),h1(n,t.datasets,e),n}function C3(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...p}=t,_=O.useRef(null),E=O.useRef(null),b=()=>{_.current&&(E.current=new cd(_.current,{type:o,data:A3(a,s),options:l&&{...l},plugins:c}),Bx(e,E.current))},T=()=>{Bx(e,null),E.current&&(E.current.destroy(),E.current=null)};return O.useEffect(()=>{!i&&E.current&&l&&k3(E.current,l)},[i,l]),O.useEffect(()=>{!i&&E.current&&u1(E.current.config.data,a.labels)},[i,a.labels]),O.useEffect(()=>{!i&&E.current&&a.datasets&&h1(E.current.config.data,a.datasets,s)},[i,a.datasets]),O.useEffect(()=>{E.current&&(i?(T(),setTimeout(b)):E.current.update(d))},[i,l,a.labels,a.datasets,d]),O.useEffect(()=>{E.current&&(T(),setTimeout(b))},[o]),O.useEffect(()=>(b(),()=>T()),[]),vh.createElement("canvas",{ref:_,role:"img",height:n,width:r,...p},h)}const R3=O.forwardRef(C3);function P3(t,e){return cd.register(e),O.forwardRef((n,r)=>vh.createElement(R3,{...n,ref:r,type:t}))}const N3=P3("line",fu);cd.register(fm,pm,gu,Ea,_3,u3);function d1({points:t=[]}){const n={labels:t.map((i,s)=>`T${s+1}`),datasets:[{label:"Risk",data:t,borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.2)"}]},r={responsive:!0,plugins:{legend:{display:!1}},scales:{y:{min:0,max:1}}};return m.jsx(N3,{data:n,options:r})}function D3({alerts:t=[]}){return t.length?m.jsxs("div",{className:"rounded border border-red-300 bg-red-50 p-4",children:[m.jsx("h3",{className:"text-red-800 font-medium mb-2",children:"Urgent Alerts"}),m.jsx("ul",{className:"list-disc pl-6 text-red-900",children:t.map((e,n)=>m.jsx("li",{children:e.condition},n))})]}):null}const ws="",hd={"x-user-id":"demo"};async function O3(t){return(await fetch(`${ws}/api/analyze`,{method:"POST",headers:{"Content-Type":"application/json",...hd},body:JSON.stringify(t)})).json()}async function M3(){return(await fetch(`${ws}/api/ai/health`)).json()}function L3(t,{onProgress:e,signal:n}={}){return new Promise((r,i)=>{try{const s=new XMLHttpRequest,o=new FormData;if(o.append("file",t),s.open("POST",`${ws}/functions/processReport`,!0),s.setRequestHeader("x-user-id",hd["x-user-id"]),s.upload&&typeof e=="function"&&(s.upload.onprogress=a=>{if(!a.lengthComputable)return;const l=Math.min(99,Math.round(a.loaded/a.total*100));e(l)}),s.onreadystatechange=()=>{if(s.readyState===4)if(s.status>=200&&s.status<300)try{const a=JSON.parse(s.responseText||"{}");r(a)}catch{r({ok:!0})}else{let a="Upload failed";try{const c=JSON.parse(s.responseText||"{}");a=(c==null?void 0:c.message)||a}catch{}const l=new Error(a);l.status=s.status,i(l)}},s.onerror=()=>i(new Error("Network error during upload")),s.onabort=()=>i(new Error("Upload canceled")),n)if(n.aborted)s.abort();else{const a=()=>s.abort();n.addEventListener("abort",a,{once:!0})}s.send(o)}catch(s){i(s)}})}async function V3(t){return(await fetch(`${ws}/functions/analyzeCheckin`,{method:"POST",headers:{"Content-Type":"application/json",...hd},body:JSON.stringify(t)})).json()}async function j3(t,e,n){const r=new URL(`${ws}/functions/findNearbyAmbulance`);return r.searchParams.set("lat",String(t)),r.searchParams.set("lng",String(e)),Number.isFinite(n)&&r.searchParams.set("radiusMeters",String(n)),(await fetch(r.toString())).json()}async function F3(t,e="demo"){return(await fetch(`${ws}/functions/submitFeedback`,{method:"POST",headers:{"Content-Type":"application/json",...hd},body:JSON.stringify({userId:e,feedback:t})})).json()}async function U3(t,{signal:e}={}){const n=await fetch(`${ws}/functions/chat`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":"demo"},body:JSON.stringify(t),signal:e}),r=await n.text();let i=null;try{i=r?JSON.parse(r):{}}catch{i={}}if(!n.ok){const s=(i==null?void 0:i.error)||(i==null?void 0:i.message)||`HTTP ${n.status}`,o=new Error(s);throw o.status=n.status,o.body=i,o}return i}const f1=vh.forwardRef(function({className:e="",rows:n=4,...r},i){return m.jsx("textarea",{ref:i,rows:n,className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-brand-600 focus:ring-2 focus:ring-brand-600 focus:ring-offset-0 outline-none ${e}`.trim(),...r})});function B3({onSubmit:t}){const[e,n]=O.useState("");return m.jsxs("form",{onSubmit:r=>{r.preventDefault(),t==null||t(e),n("")},className:"space-y-2",children:[m.jsx(f1,{value:e,onChange:r=>n(r.target.value),placeholder:"Share corrections or context for clinicians"}),m.jsx(we,{type:"submit",children:"Submit Feedback"})]})}function Ye({className:t="",children:e}){return m.jsx("div",{className:`bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm ${t}`.trim(),children:e})}function Pt({className:t="",children:e}){return m.jsx("div",{className:`px-5 py-4 border-b border-slate-200 dark:border-slate-800 ${t}`.trim(),children:e})}function Nt({className:t="",children:e}){return m.jsx("h2",{className:`text-base font-semibold tracking-tight text-slate-900 dark:text-slate-100 ${t}`.trim(),children:e})}function Xe({className:t="",children:e}){return m.jsx("div",{className:`p-5 text-slate-800 dark:text-slate-200 ${t}`.trim(),children:e})}function ds({size:t=16,className:e=""}){const n={width:t,height:t};return m.jsxs("svg",{className:`animate-spin text-blue-600 ${e}`,style:n,viewBox:"0 0 24 24",fill:"none",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}const p1=O.createContext({notify:()=>{}});function z3({children:t}){const[e,n]=O.useState([]),r=O.useCallback((s,o="info",a=3e3)=>{const l=Math.random().toString(36).slice(2);n(c=>c.concat({id:l,message:s,type:o})),setTimeout(()=>n(c=>c.filter(h=>h.id!==l)),a)},[]),i=O.useMemo(()=>({notify:r}),[r]);return m.jsxs(p1.Provider,{value:i,children:[t,m.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map(s=>m.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${s.type==="error"?"bg-red-600":s.type==="success"?"bg-emerald-600":"bg-slate-900"}`,children:s.message},s.id))})]})}function My(){return O.useContext(p1)}function zx({className:t=""}){return m.jsx("div",{className:`animate-pulse rounded bg-slate-200 dark:bg-slate-800 ${t}`.trim()})}function $3({title:t,subtitle:e,cta:n}){return m.jsxs("section",{className:"mb-6 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6",children:[m.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-100",children:t}),e&&m.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:e}),n&&m.jsx("div",{className:"mt-4",children:n})]})}function Mf({label:t,value:e,hint:n,accent:r="blue"}){const i={blue:"bg-blue-50 text-blue-700 dark:bg-slate-800 dark:text-blue-300",emerald:"bg-emerald-50 text-emerald-700 dark:bg-slate-800 dark:text-emerald-300",amber:"bg-amber-50 text-amber-700 dark:bg-slate-800 dark:text-amber-300",red:"bg-red-50 text-red-700 dark:bg-slate-800 dark:text-red-300"};return m.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[m.jsx("div",{className:`inline-block rounded px-2 py-0.5 text-xs ${i[r]}`,children:t}),m.jsx("div",{className:"mt-2 text-2xl font-semibold text-slate-900 dark:text-slate-100",children:e}),n&&m.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:n})]})}function W3({onAnalyze:t,onLocate:e}){return m.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[m.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Quick actions"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx(we,{onClick:t,children:"Run Analysis"}),m.jsx(we,{variant:"secondary",onClick:e,children:"Find Ambulance"})]})]})}function H3({items:t=[]}){const e=t.length?t:[{type:"info",text:"Welcome! Start by running an analysis."},{type:"tip",text:"Upload a report to extract structured insights."}];return m.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[m.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Recent activity"}),m.jsx("ul",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300",children:e.map((n,r)=>m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx("span",{className:`mt-1 w-2 h-2 rounded-full ${n.type==="tip"?"bg-emerald-500":"bg-slate-400"}`}),m.jsx("span",{children:n.text})]},r))})]})}function q3(){var D,M,I,x,k;const{notify:t}=My(),[e,n]=O.useState(null),[r,i]=O.useState(!1),[s,o]=O.useState(null),[a,l]=O.useState(null),[c,h]=O.useState(!1),[d,p]=O.useState(null),[_,E]=O.useState(3),[b,T]=O.useState("auto"),[v,y]=O.useState(!0);async function w(){try{i(!0),o(null);const A=await O3({notes:"fever and headache",vitals:{temperature:38.5},topK:Number(_),explainMethod:b,useScipyWinsorize:v});n(A)}catch(A){o(String((A==null?void 0:A.message)||A))}finally{i(!1)}}async function R(){try{if(p(null),h(!0),!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");t("Finding nearby ambulance services...","info"),await new Promise((A,P)=>{navigator.geolocation.getCurrentPosition(async N=>{try{const{latitude:C,longitude:Z}=N.coords,G=await j3(C,Z);if(!G||G.ok===!1){const ue=G&&G.error?G.error:"Failed to fetch nearby services";throw new Error(ue)}l(G);const re=Array.isArray(G.data)?G.data.length:0;t(`Found ${re} ambulance service${re===1?"":"s"}`,"success"),A()}catch(C){P(C)}},N=>{const C=N&&N.message?N.message:"Unable to retrieve location.";P(new Error(C))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}catch(A){const P=(A==null?void 0:A.message)||"Failed to find nearby ambulances";p(P),t(P,"error")}finally{h(!1)}}return m.jsxs("div",{children:[m.jsx($3,{title:"AI Diagnostic & Triage Dashboard",subtitle:"Run a quick analysis, review trends, and act on red flags.",cta:m.jsxs("div",{className:"flex gap-3 items-center",children:[m.jsx(we,{onClick:w,children:"Run Analysis"}),m.jsx(we,{variant:"secondary",onClick:R,children:"Find Ambulance"})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Analysis Settings"})}),m.jsx(Xe,{children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Top K"}),m.jsx("input",{type:"number",min:1,max:3,value:_,onChange:A=>E(A.target.value),className:"border rounded px-2 py-1 w-full"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Explainability"}),m.jsxs("select",{value:b,onChange:A=>T(A.target.value),className:"border rounded px-2 py-1 w-full",children:[m.jsx("option",{value:"auto",children:"Auto"}),m.jsx("option",{value:"captum",children:"Captum"}),m.jsx("option",{value:"shap",children:"SHAP"}),m.jsx("option",{value:"none",children:"None"})]})]}),m.jsxs("div",{className:"flex items-center gap-2 mt-6 md:mt-0",children:[m.jsx("input",{id:"winsorize",type:"checkbox",checked:v,onChange:A=>y(A.target.checked),className:"h-4 w-4"}),m.jsx("label",{htmlFor:"winsorize",className:"text-sm text-slate-700",children:"Use SciPy winsorization"})]})]})})]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[m.jsx(Mf,{label:"Patients analyzed",value:e!=null&&e.data?((D=e.data.diagnoses)==null?void 0:D.length)||1:0,hint:"From last session",accent:"blue"}),m.jsx(Mf,{label:"Active alerts",value:((I=(M=e==null?void 0:e.data)==null?void 0:M.redFlags)==null?void 0:I.length)||0,hint:"Requires attention",accent:"red"}),m.jsx(Mf,{label:"Avg. risk",value:e!=null&&e.data?`${Math.round(52)}%`:"—",hint:"Across current sample",accent:"amber"})]}),r&&m.jsxs("div",{className:"mb-4 text-slate-600 inline-flex items-center gap-2",children:[m.jsx(ds,{})," Analyzing..."]}),s&&m.jsx("div",{className:"mb-4 text-red-600",children:s}),!(e!=null&&e.data)&&!r&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Diagnoses"})}),m.jsxs(Xe,{children:[m.jsx("div",{className:"text-sm text-slate-500",children:'No analysis yet. Click "Run Analysis" to get started.'}),m.jsx("div",{className:"mt-3",children:m.jsx(zx,{className:"h-24"})})]})]}),m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Risk Trend"})}),m.jsxs(Xe,{children:[m.jsx("div",{className:"text-sm text-slate-500",children:"Risk visualization will appear after your first analysis."}),m.jsx("div",{className:"mt-3",children:m.jsx(zx,{className:"h-40"})})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsx(W3,{onAnalyze:w,onLocate:R}),m.jsx(H3,{})]})]}),(e==null?void 0:e.data)&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Diagnoses"})}),m.jsx(Xe,{children:m.jsx(C4,{items:e.data.diagnoses})})]}),m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Risk Trend"})}),m.jsx(Xe,{children:m.jsx(d1,{points:[.2,.35,.5,.42,.6]})})]}),m.jsx(Ye,{className:"md:col-span-2",children:m.jsx(Xe,{children:m.jsx(D3,{alerts:e.data.redFlags})})}),((k=(x=e==null?void 0:e.data)==null?void 0:x.explainability)==null?void 0:k.available)&&m.jsxs(Ye,{className:"md:col-span-2",children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Explainability"})}),m.jsxs(Xe,{children:[m.jsxs("div",{className:"text-sm text-slate-600 mb-3",children:["Method: ",e.data.explainability.method]}),m.jsx("div",{className:"overflow-auto",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"text-left text-slate-500",children:[m.jsx("th",{className:"py-1 pr-4",children:"Feature"}),m.jsx("th",{className:"py-1",children:"Attribution"})]})}),m.jsx("tbody",{children:(e.data.explainability.features||[]).map((A,P)=>m.jsxs("tr",{className:"border-t",children:[m.jsx("td",{className:"py-1 pr-4",children:A}),m.jsx("td",{className:"py-1",children:Array.isArray(e.data.explainability.attributions)?Number(e.data.explainability.attributions[P]).toFixed(4):"—"})]},P))})]})})]})]}),m.jsxs(Ye,{className:"md:col-span-2",children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Clinician Feedback"})}),m.jsx(Xe,{children:m.jsx(B3,{onSubmit:async A=>{var N;const P=await F3({text:A,advisory:e.data});t(`Feedback submitted: ${((N=P==null?void 0:P.data)==null?void 0:N.id)||"ok"}`,"success")}})})]}),a&&m.jsxs(Ye,{className:"md:col-span-2",children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Nearby Ambulance Services"})}),m.jsx(Xe,{children:m.jsx("ul",{className:"list-disc pl-6",children:(a.data||[]).map((A,P)=>m.jsxs("li",{children:[m.jsx("span",{className:"font-medium",children:A.name})," — ",A.address," (rating: ",A.rating||"N/A",")"]},P))})})]})]}),(c||d||a&&Array.isArray(a.data))&&m.jsx("div",{className:"mt-6",children:m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Nearby Ambulance Services"})}),m.jsxs(Xe,{children:[c&&m.jsxs("div",{className:"text-slate-600 inline-flex items-center gap-2",children:[m.jsx(ds,{})," Locating services..."]}),d&&m.jsx("div",{className:"text-red-600",children:d}),!c&&!d&&m.jsxs("ul",{className:"list-disc pl-6",children:[((a==null?void 0:a.data)||[]).map((A,P)=>m.jsxs("li",{children:[m.jsx("span",{className:"font-medium",children:A.name})," — ",A.address||"Address N/A",typeof A.distance_meters=="number"?` • ${A.distance_meters} m`:"",A.rating?` • rating: ${A.rating}`:""]},P)),((a==null?void 0:a.data)||[]).length===0&&m.jsx("li",{children:"No ambulance services found nearby."})]})]})]})})]})}function An({className:t="",...e}){return m.jsx("input",{className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:ring-offset-0 outline-none ${t}`.trim(),...e})}function K3(){var A,P;const{user:t,login:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:i}=Po(),[s,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(""),[d,p]=O.useState(""),[_,E]=O.useState("enter"),[b,T]=O.useState(!1),[v,y]=O.useState(""),w=Vh(),D=((P=(A=vi().state)==null?void 0:A.from)==null?void 0:P.pathname)||"/";O.useEffect(()=>{t&&w(D,{replace:!0})},[t,D,w]);async function M(N){N.preventDefault(),y(""),T(!0);try{await e({email:s,password:a}),w(D,{replace:!0})}catch(C){y((C==null?void 0:C.message)||"Login failed")}finally{T(!1)}}async function I(){y(""),T(!0);try{await n()&&w(D,{replace:!0})}catch(N){y((N==null?void 0:N.message)||"Google sign-in failed")}finally{T(!1)}}async function x(N){N.preventDefault(),y(""),T(!0);try{await r(c),E("verify")}catch(C){y((C==null?void 0:C.message)||"Failed to send OTP")}finally{T(!1)}}async function k(N){N.preventDefault(),y(""),T(!0);try{await i(d),w(D,{replace:!0})}catch(C){y((C==null?void 0:C.message)||"Invalid OTP")}finally{T(!1)}}return t?null:m.jsx("div",{className:"grid place-items-center",children:m.jsxs("div",{className:"w-full max-w-md",children:[m.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Welcome back"}),m.jsx(Ye,{children:m.jsxs(Xe,{children:[m.jsxs("form",{className:"space-y-4",onSubmit:M,children:[m.jsx(An,{type:"email",placeholder:"Email",value:s,onChange:N=>o(N.target.value),disabled:b}),m.jsx(An,{type:"password",placeholder:"Password",value:a,onChange:N=>l(N.target.value),disabled:b}),v&&m.jsx("p",{className:"text-red-600 text-sm",children:v}),m.jsx(we,{type:"submit",className:"w-full",disabled:b,children:b?"Signing in…":"Sign in"})]}),m.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[m.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),m.jsx("span",{children:"or"}),m.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),m.jsx(we,{variant:"secondary",onClick:I,disabled:b,children:"Continue with Google"}),m.jsx("div",{id:"recaptcha-container",className:"mt-3"}),_==="enter"&&m.jsxs("form",{className:"space-y-2 mt-2",onSubmit:x,children:[m.jsx(An,{type:"tel",placeholder:"Indian mobile (10 digits)",value:c,onChange:N=>h(N.target.value),disabled:b}),m.jsx(we,{type:"submit",variant:"secondary",disabled:b||!c,children:"Send OTP"})]}),_==="verify"&&m.jsxs("form",{className:"space-y-2 mt-2",onSubmit:k,children:[m.jsx(An,{type:"text",placeholder:"Enter OTP",value:d,onChange:N=>p(N.target.value),disabled:b}),m.jsx(we,{type:"submit",variant:"secondary",disabled:b||!d,children:"Verify OTP"})]}),m.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:["No account? ",m.jsx(hg,{className:"text-blue-600",to:"/signup",children:"Sign up"})]})]})})]})})}function G3(){const{user:t,signup:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:i}=Po(),[s,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(""),[d,p]=O.useState(""),[_,E]=O.useState(""),[b,T]=O.useState("enter"),[v,y]=O.useState(""),[w,R]=O.useState(!1),D=Vh();O.useEffect(()=>{t&&D("/")},[t,D]);async function M(k){k.preventDefault(),y(""),R(!0);try{const A=await e({email:s,password:a,name:c});d?(await r(d),T("verify")):D("/")}catch(A){y((A==null?void 0:A.message)||"Signup failed")}finally{R(!1)}}async function I(k){k.preventDefault(),y(""),R(!0);try{await i(_),D("/")}catch(A){y((A==null?void 0:A.message)||"Invalid OTP")}finally{R(!1)}}async function x(){y(""),R(!0);try{await n()&&D("/")}catch(k){y((k==null?void 0:k.message)||"Google sign-in failed")}finally{R(!1)}}return t?null:m.jsx("div",{className:"grid place-items-center",children:m.jsxs("div",{className:"w-full max-w-md",children:[m.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Create your account"}),m.jsx(Ye,{children:m.jsxs(Xe,{children:[b==="enter"?m.jsxs("form",{className:"space-y-4",onSubmit:M,children:[m.jsx(An,{type:"text",placeholder:"Name",value:c,onChange:k=>h(k.target.value),disabled:w}),m.jsx(An,{type:"email",placeholder:"Email",value:s,onChange:k=>o(k.target.value),disabled:w}),m.jsx(An,{type:"password",placeholder:"Password",value:a,onChange:k=>l(k.target.value),disabled:w}),m.jsx(An,{type:"tel",placeholder:"Indian phone (optional)",value:d,onChange:k=>p(k.target.value),disabled:w}),v&&m.jsx("p",{className:"text-red-600 text-sm",children:v}),m.jsx(we,{type:"submit",className:"w-full",disabled:w,children:w?"Creating…":"Create Account"})]}):m.jsxs("form",{className:"space-y-2",onSubmit:I,children:[m.jsx(An,{type:"text",placeholder:"Enter OTP",value:_,onChange:k=>E(k.target.value),disabled:w}),v&&m.jsx("p",{className:"text-red-600 text-sm",children:v}),m.jsx(we,{type:"submit",className:"w-full",disabled:w||!_,children:"Verify OTP"})]}),m.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[m.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),m.jsx("span",{children:"or"}),m.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),m.jsx(we,{variant:"secondary",onClick:x,disabled:w,children:"Continue with Google"}),m.jsx("div",{id:"recaptcha-container"})]})})]})})}function Q3(){var re,ue,z,Q;const{notify:t}=My(),{user:e,loading:n}=Po(),[r,i]=O.useState({q1:"",q2:"",q2_specify:"",q3:"",q3_severity:"",q4:"",q4_specify:"",q5:"",q6_activity:"",q6_hydration:"",q6_diet:""}),[s,o]=O.useState(!1),[a,l]=O.useState(!1),[c,h]=O.useState(null),[d,p]=O.useState([]),[_,E]=O.useState([]),[b,T]=O.useState(""),[v,y]=O.useState(null),[w,R]=O.useState(!1),[D,M]=O.useState(3),[I,x]=O.useState("auto"),[k,A]=O.useState(!0),P=O.useMemo(()=>!(!r.q1||!r.q2||!r.q3||r.q3==="Yes"&&!r.q3_severity||!r.q4||!r.q5||!r.q6_activity||!r.q6_hydration||!r.q6_diet),[r]);function N(){const V=new Date,J=new Date(V.getFullYear(),V.getMonth(),V.getDate(),0,0,0,0),Y=new Date(V.getFullYear(),V.getMonth(),V.getDate()+1,0,0,0,0);return{start:Ue.fromDate(J),end:Ue.fromDate(Y)}}O.useEffect(()=>{async function V(){if(!Jt||!e)return;const{start:J,end:Y}=N(),he=Ef(Jt,"users",e.uid,"dailyCheckins"),Ce=xw(he,Ew("date",">=",J),Ew("date","<",Y));try{const Re=await Iw(Ce);Re.empty?(l(!1),h(null)):(l(!0),h(Re.docs[0].data()))}catch(Re){console.error("[DailyCheckin] checkToday error:",Re)}}V()},[e]);function C(V){if(!V)return .5;const J=et=>({"Very low":.2,Low:.4,Moderate:.6,High:.8,"Very high":1,"Very good":1,Good:.8,Neutral:.6})[et]??.5,Y=et=>({None:1,Mild:.7,Moderate:.4,Severe:.2})[et]??.5,he=et=>({None:.2,Light:.5,Moderate:.8,Intense:1})[et]??.5,Ce=et=>({No:1,Yes:.4})[et]??.6,Re=et=>({No:.3,Mostly:.7,Yes:1})[et]??.6,be=[J(V.q1),Y(V.q2),Ce(V.q3),Y(V.q4),J(V.q5),he(V.q6_activity),Re(V.q6_hydration),Re(V.q6_diet)],ft=be.reduce((et,jn)=>et+jn,0)/be.length;return Math.max(0,Math.min(1,Number(ft.toFixed(3))))}O.useEffect(()=>{async function V(){if(!(!Jt||!e))try{const J=Ef(Jt,"users",e.uid,"dailyCheckins"),Y=xw(J,nF("date","desc"),rF(30)),Ce=(await Iw(Y)).docs.map(jn=>({id:jn.id,...jn.data()})),be=Ce.slice().reverse().map(jn=>C(jn.answers)),ft=be.length;let et="";if(ft>=6){const jn=be.slice(ft-6,ft-3).reduce((Ti,Ii)=>Ti+Ii,0)/3,bi=be.slice(ft-3).reduce((Ti,Ii)=>Ti+Ii,0)/3-jn;bi>.06?et="Improving":bi<-.06?et="Worsening":et="Stable"}p(Ce),E(be),T(et)}catch(J){console.error("[DailyCheckin] loadHistory error:",J)}}V()},[e,a]),O.useEffect(()=>{let V=!0;return(async()=>{try{R(!0);const J=await M3();V&&y(J)}catch{V&&y({ok:!0,python:{available:!1}})}finally{V&&R(!1)}})(),()=>{V=!1}},[]);function Z(V,J){i(Y=>({...Y,[V]:J}))}async function G(V){if(V.preventDefault(),!e){t("Please log in first!","error");return}if(!Jt){t("App is not connected to Firestore. Check Firebase config.","error");return}if(a){t("You've already completed today's check-in.","info");return}if(!P){t("Please answer all required questions.","error");return}o(!0);try{const J=Ef(Jt,"users",e.uid,"dailyCheckins"),Y={date:Ue.now(),dateServer:ah(),answers:{q1:r.q1,q2:r.q2,q2_specify:r.q2_specify||null,q3:r.q3,q3_severity:r.q3==="Yes"?r.q3_severity:null,q4:r.q4,q4_specify:r.q4_specify||null,q5:r.q5,q6_activity:r.q6_activity,q6_hydration:r.q6_hydration,q6_diet:r.q6_diet},analyzed:!1,topK:Number(D),explainMethod:I,useScipyWinsorize:k};console.log("[DailyCheckin] Submitting payload:",Y),await aF(J,Y),t("Daily check-in saved!","success"),l(!0);try{V3({userId:e.uid,payload:Y})}catch{}}catch(J){console.error("[DailyCheckin] Firestore addDoc error:",J);const Y=(J==null?void 0:J.message)||"Error saving check-in. Please try again.";t(Y,"error")}finally{o(!1)}}return m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Daily Check-in"}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"AI Service"})}),m.jsxs(Xe,{children:[w?m.jsxs("div",{className:"text-slate-600 inline-flex items-center gap-2",children:[m.jsx(ds,{size:16})," Checking service..."]}):m.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Python service: ",(re=v==null?void 0:v.python)!=null&&re.available?m.jsx("span",{className:"text-emerald-600 font-medium",children:"Available"}):m.jsx("span",{className:"text-slate-500",children:"Unavailable"}),((ue=v==null?void 0:v.python)==null?void 0:ue.available)&&m.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["Torch: ",String(!!((z=v==null?void 0:v.python)!=null&&z.torchAvailable))," • CUDA: ",String(!!((Q=v==null?void 0:v.python)!=null&&Q.cudaAvailable))]})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Top K"}),m.jsx("input",{type:"number",min:1,max:3,value:D,onChange:V=>M(V.target.value),className:"border rounded px-2 py-1 w-full"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Explainability"}),m.jsxs("select",{value:I,onChange:V=>x(V.target.value),className:"border rounded px-2 py-1 w-full",children:[m.jsx("option",{value:"auto",children:"Auto"}),m.jsx("option",{value:"captum",children:"Captum"}),m.jsx("option",{value:"shap",children:"SHAP"}),m.jsx("option",{value:"none",children:"None"})]})]}),m.jsxs("label",{className:"flex items-center gap-2 mt-6 md:mt-0",children:[m.jsx("input",{type:"checkbox",checked:k,onChange:V=>A(V.target.checked),className:"h-4 w-4"}),m.jsx("span",{className:"text-sm text-slate-700",children:"Use SciPy winsorization"})]})]})]})]}),m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Today's Check-in"})}),m.jsx(Xe,{children:a?m.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[m.jsx("p",{className:"font-medium",children:"You've already submitted today's check-in. Come back tomorrow."}),c&&c.answers&&m.jsxs("div",{className:"mt-2",children:[m.jsx("p",{className:"text-xs text-slate-500",children:"Your last responses:"}),m.jsxs("ul",{className:"list-disc ml-5 mt-1 space-y-1",children:[m.jsxs("li",{children:["Sleep & Energy: ",c.answers.q1]}),m.jsxs("li",{children:["Pain/Discomfort: ",c.answers.q2,c.answers.q2_specify?` (${c.answers.q2_specify})`:""]}),m.jsxs("li",{children:["Heart/Respiratory: ",c.answers.q3,c.answers.q3==="Yes"&&c.answers.q3_severity?` (${c.answers.q3_severity})`:""]}),m.jsxs("li",{children:["Digestive/Temperature: ",c.answers.q4,c.answers.q4_specify?` (${c.answers.q4_specify})`:""]}),m.jsxs("li",{children:["Mental & Emotional: ",c.answers.q5]}),m.jsxs("li",{children:["Activity: ",c.answers.q6_activity,", Hydration: ",c.answers.q6_hydration,", Diet: ",c.answers.q6_diet]})]})]})]}):m.jsxs("form",{onSubmit:G,className:"space-y-5",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"1"}),m.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sleep & Energy"})]}),m.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How well did you sleep last night, and how energetic do you feel today?"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Moderate","High","Very high"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q1",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q1===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"2"}),m.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pain or Discomfort"})]}),m.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you experience any unusual pain, discomfort, or bodily symptoms today?"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q2",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q2===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))}),(r.q2==="Mild"||r.q2==="Moderate"||r.q2==="Severe")&&m.jsx("input",{type:"text",placeholder:"Specify location (optional)",value:r.q2_specify,onChange:V=>Z("q2_specify",V.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"3"}),m.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Heart & Respiratory Health"})]}),m.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Chest pain, palpitations, shortness of breath, or rapid heartbeat today?"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:["No","Yes"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q3",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))}),r.q3==="Yes"&&m.jsx("div",{className:"mt-2 grid grid-cols-3 md:grid-cols-6 gap-2",children:["Mild","Moderate","Severe"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q3_severity",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3_severity===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"4"}),m.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Digestive & Temperature Symptoms"})]}),m.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Digestive issues (nausea, vomiting, diarrhea, constipation, heartburn) or fever/chills today?"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q4",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q4===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))}),(r.q4==="Mild"||r.q4==="Moderate"||r.q4==="Severe")&&m.jsx("input",{type:"text",placeholder:"Specify (optional)",value:r.q4_specify,onChange:V=>Z("q4_specify",V.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"5"}),m.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Mental & Emotional Well-being"})]}),m.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How would you rate your mood and stress levels today?"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Neutral","Good","Very good"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q5",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q5===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"6"}),m.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Physical Activity & Lifestyle"})]}),m.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you maintain physical activity, hydration, and balanced meals today?"}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Activity"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Light","Moderate","Intense"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q6_activity",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_activity===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Hydration"}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q6_hydration",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_hydration===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Diet"}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(V=>m.jsx("button",{type:"button",onClick:()=>Z("q6_diet",V),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_diet===V?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:V},V))})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"text-xs text-slate-500",children:"Complete all sections to enable saving."}),m.jsx(we,{type:"submit",disabled:s||!P||n,children:s?m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(ds,{size:16})," Saving..."]}):"Save today's check-in"})]})]})})]}),m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Your recent check-ins"})}),m.jsx(Xe,{children:_.length>0?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Overall trend: ",m.jsx("span",{className:`font-medium ${b==="Worsening"?"text-red-600":b==="Improving"?"text-emerald-600":"text-slate-700 dark:text-slate-200"}`,children:b||"Not enough data"})]}),m.jsx("div",{className:"bg-white dark:bg-slate-950 rounded-md p-3 border border-slate-200 dark:border-slate-800",children:m.jsx(d1,{points:_})}),m.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 text-sm",children:d.slice(0,10).map((V,J)=>{var Y;return m.jsxs("li",{className:"py-2 flex items-center justify-between",children:[m.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:(Y=V==null?void 0:V.date)!=null&&Y.toDate?V.date.toDate().toLocaleDateString():""}),m.jsx("span",{className:"font-medium",children:C(V.answers)})]},V.id||J)})})]}):m.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No history yet. Your check-ins will appear here."})})]}),m.jsxs(Ye,{children:[m.jsx(Pt,{children:m.jsx(Nt,{children:"Why this matters"})}),m.jsx(Xe,{children:m.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 space-y-2",children:[m.jsx("p",{children:"Your daily responses help track trends in sleep, mood, pain, and lifestyle. If you report concerning symptoms, your clinician or AI assistant can prioritize guidance."}),m.jsx("p",{children:"We limit to one check-in per day to keep insights consistent. You can update tomorrow if anything changes."})]})})]})]})]})}function Y3(){const{notify:t}=My(),[e,n]=O.useState(null),[r,i]=O.useState(null),[s,o]=O.useState(!1),[a,l]=O.useState(!1),[c,h]=O.useState(0),d=O.useRef(null),[p,_]=O.useState(""),[E,b]=O.useState(!0),[T,v]=O.useState("Idle"),y=O.useRef(null),[w,R]=O.useState(""),D=O.useMemo(()=>["application/pdf","image/jpeg","image/png","image/heic","image/heif"],[]),M=10*1024*1024,I=O.useCallback(C=>C?D.includes(C.type)?C.size>M?"File is too large. Max 10MB.":null:"Unsupported file type. Use PDF, JPG, or PNG.":"No file selected",[D]),x=O.useCallback(C=>{var re;C.preventDefault(),C.stopPropagation(),o(!1);const Z=(re=C.dataTransfer.files)==null?void 0:re[0],G=I(Z);if(G){t(G,"error");return}n(Z||null)},[t,I]),k=O.useCallback(C=>{var re;const Z=(re=C.target.files)==null?void 0:re[0],G=I(Z);if(G){t(G,"error"),C.target.value="";return}n(Z||null)},[t,I]);O.useEffect(()=>{if(e&&e.type.startsWith("image/")){const C=URL.createObjectURL(e);return _(C),()=>URL.revokeObjectURL(C)}_("")},[e]),O.useEffect(()=>{const C=async Z=>{var G;try{const re=Array.from(((G=Z.clipboardData)==null?void 0:G.items)||[]).find(Q=>Q.type.startsWith("image/"));if(!re)return;const ue=re.getAsFile();if(!ue)return;const z=I(ue);if(z){t(z,"error");return}n(new File([ue],ue.name||"pasted-image.png",{type:ue.type})),t("Image pasted from clipboard","success")}catch{}};return window.addEventListener("paste",C),()=>window.removeEventListener("paste",C)},[t,I]);async function A(C){if(C.preventDefault(),!e){t("Please select a file to process.","error");return}l(!0),h(0),R(""),v("Uploading…");try{const Z=new AbortController;y.current=Z;const G=await L3(e,{onProgress:re=>h(re),signal:Z.signal});h(100),i(G),v("Completed"),t("Report processed successfully.","success")}catch(Z){const G=(Z==null?void 0:Z.message)||"Failed to process the report.";R(G),v(G.toLowerCase().includes("canceled")?"Canceled":"Failed"),t(G,"error")}finally{y.current=null,setTimeout(()=>l(!1),200)}}const P=O.useCallback(()=>{y.current&&y.current.abort()},[]),N=O.useCallback(()=>{if(!e)return;i(null),h(0),v("Retrying…"),A({preventDefault:()=>{}})},[e]);return m.jsxs("div",{children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-semibold mb-1 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-indigo-600 to-fuchsia-600",children:"Upload Report"}),m.jsx("p",{className:"text-sm text-slate-600",children:"Upload a medical report to extract key details with OCR. We support PDF and image formats."})]}),m.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[m.jsxs(Ye,{children:[m.jsx(Pt,{className:"bg-sky-50 border-b border-sky-200",children:m.jsx(Nt,{className:"text-sky-900",children:"Select file"})}),m.jsxs(Xe,{children:[m.jsxs("form",{onSubmit:A,className:"space-y-4",children:[m.jsxs("div",{className:`relative flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed px-6 py-10 text-center transition-colors bg-gradient-to-r ${s?"from-blue-50 via-sky-50 to-indigo-50 border-blue-600":"from-sky-50 via-indigo-50 to-fuchsia-50 border-slate-300 hover:border-blue-400"}`,onDragOver:C=>{C.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:x,role:"button",tabIndex:0,"aria-label":"Drag and drop a report file here or choose a file",onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),d.current&&d.current.click())},children:[m.jsxs("div",{className:"flex items-center gap-3",children:[a?m.jsx(ds,{size:20}):m.jsxs("svg",{className:"h-5 w-5 text-blue-600",viewBox:"0 0 24 24",fill:"none",children:[m.jsx("path",{d:"M12 16V4m0 12l-4-4m4 4l4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("rect",{x:"3",y:"16",width:"18",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]}),m.jsxs("div",{className:"text-slate-800",children:[m.jsx("div",{className:"font-medium",children:"Drag and drop your report"}),m.jsx("div",{className:"text-xs text-slate-600",children:"PDF, JPG, or PNG up to 10MB"})]})]}),m.jsx("div",{className:"text-xs text-slate-500",children:"or"}),m.jsx("input",{ref:d,type:"file",accept:D.join(","),onChange:k,className:"hidden"}),m.jsx(we,{type:"button",variant:"secondary",onClick:()=>d.current&&d.current.click(),disabled:a,className:"hover:bg-indigo-100",children:"Choose file"}),e&&m.jsx("div",{className:"mt-3 w-full max-w-md",children:p?m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:p,alt:"preview",className:"h-20 w-20 object-cover rounded border border-emerald-200"}),m.jsxs("div",{className:"text-left",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-sm font-medium text-slate-800 truncate",children:e.name}),m.jsx("span",{className:"rounded-full bg-emerald-100 text-emerald-700 text-[10px] px-2 py-0.5 border border-emerald-200",children:"IMAGE"})]}),m.jsxs("div",{className:"text-xs text-slate-600",children:[Math.ceil(e.size/1024)," KB"]})]})]}):m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"h-10 w-10 rounded bg-rose-100 text-rose-700 flex items-center justify-center font-semibold border border-rose-200",children:"PDF"}),m.jsxs("div",{className:"text-left",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-sm font-medium text-slate-800 truncate",children:e.name}),m.jsx("span",{className:"rounded-full bg-rose-100 text-rose-700 text-[10px] px-2 py-0.5 border border-rose-200",children:"PDF"})]}),m.jsxs("div",{className:"text-xs text-slate-600",children:[Math.ceil(e.size/1024)," KB"]})]})]})}),a&&m.jsx("div",{className:"absolute inset-x-0 bottom-0",children:m.jsx("div",{className:"h-1 w-full bg-indigo-100",children:m.jsx("div",{className:"h-1 bg-indigo-600 transition-all",style:{width:`${c}%`}})})})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m.jsx(we,{type:"button",variant:"secondary",onClick:()=>{n(null),i(null),v("Idle"),d.current&&(d.current.value="")},disabled:a,children:"Remove"}),m.jsx(we,{type:"button",variant:"ghost",onClick:()=>d.current&&d.current.click(),disabled:a,children:"Replace"}),m.jsx("div",{className:"ml-auto"}),a?m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(we,{type:"button",variant:"danger",onClick:P,children:"Cancel"}),m.jsx(we,{type:"button",variant:"primary",disabled:!0,className:"bg-indigo-600",children:m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(ds,{size:16})," Uploading…"]})})]}):m.jsx(we,{type:"submit",disabled:!e,className:"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-600",children:"Process report"})]})]}),m.jsx("div",{className:"mt-6",children:m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[m.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 border ${T==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-200":T==="Failed"||T==="Canceled"?"bg-rose-50 text-rose-700 border-rose-200":"bg-sky-50 text-sky-700 border-sky-200"}`,children:[m.jsx("span",{className:`h-2 w-2 rounded-full ${T==="Completed"?"bg-emerald-600":T==="Failed"||T==="Canceled"?"bg-rose-600":"bg-sky-600"}`}),T]}),!!w&&!a&&m.jsx("button",{className:"text-rose-700 underline",onClick:N,children:"Retry"})]})})]})]}),m.jsxs(Ye,{children:[m.jsxs(Pt,{className:"flex items-center justify-between bg-fuchsia-50 border-b border-fuchsia-200",children:[m.jsx(Nt,{className:"text-fuchsia-900",children:"OCR Result"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(we,{type:"button",variant:"ghost",onClick:async()=>{if(r)try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),t("Copied to clipboard","success")}catch{t("Copy failed","error")}},disabled:!r,children:"Copy"}),m.jsx(we,{type:"button",variant:"ghost",className:"hover:bg-fuchsia-100",onClick:()=>b(C=>!C),children:E?"Collapse":"Expand"})]})]}),m.jsx(Xe,{children:r?E?m.jsx("pre",{className:"bg-slate-50 dark:bg-slate-950 border rounded p-3 overflow-auto max-h-[520px] border-fuchsia-200",children:JSON.stringify(r,null,2)}):m.jsx("div",{className:"text-sm text-slate-600",children:"Result hidden"}):m.jsx("div",{className:"text-sm text-slate-600",children:"No result yet. Upload a report to see extracted data."})})]})]})]})}function X3(){return m.jsx("footer",{className:"mt-10 border-t border-slate-200 dark:border-slate-800 py-8 text-center text-sm text-slate-500 dark:text-slate-400 bg-white/60 dark:bg-slate-900/60 backdrop-blur",children:m.jsxs("div",{className:"mx-auto max-w-7xl px-4",children:["© ",new Date().getFullYear()," AgenticSprit"]})})}function J3(){return m.jsxs("div",{className:"text-center py-16",children:[m.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Page not found"}),m.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"The page you are looking for doesn’t exist."}),m.jsx(hg,{className:"text-blue-600 hover:underline",to:"/",children:"Go back home"})]})}function Hc({children:t}){const{user:e,loading:n}=Po(),r=vi();return n?m.jsx("div",{className:"flex items-center justify-center py-16",children:m.jsx(ds,{size:24})}):e?t:m.jsx(lP,{to:"/login",replace:!0,state:{from:r}})}function Z3(t){return new Date(t).toLocaleString()}function eB(){const[t,e]=O.useState([]),[n,r]=O.useState(""),[i,s]=O.useState(!1),[o,a]=O.useState(null),[l,c]=O.useState({}),h=O.useRef(null),d=O.useRef(null),p=O.useMemo(()=>["Summarize my last diagnosis","What red flags should I watch?","Explain this lab result in simple terms","What are next steps for follow-up?"],[]);O.useEffect(()=>{try{const y=localStorage.getItem("chat:messages");if(y){const w=JSON.parse(y);Array.isArray(w)&&e(w)}}catch{}},[]),O.useEffect(()=>{var y;(y=h.current)==null||y.scrollTo({top:h.current.scrollHeight});try{localStorage.setItem("chat:messages",JSON.stringify(t))}catch{}},[t]);const _=O.useMemo(()=>n.trim().length>0&&!i,[n,i]),E=O.useMemo(()=>{const y=[...t].reverse().find(w=>w.role==="assistant");return!!(y&&typeof y.content=="string"&&y.content.toLowerCase().includes("gemini api key missing"))},[t]);async function b(){var w,R;if(!_)return;const y=[...t,{role:"user",content:n,createdAt:Date.now()}];e(y),r(""),s(!0);try{const D={messages:y,options:{maxOutputTokens:512}},M=new AbortController;a(M);const I=await U3(D,{signal:M.signal}),x=((w=I==null?void 0:I.data)==null?void 0:w.error)||((R=I==null?void 0:I.data)==null?void 0:R.reply)||"...";e(k=>k.concat({role:"assistant",content:x,createdAt:Date.now()}))}catch(D){const M=(D==null?void 0:D.message)||"Something went wrong";e(I=>I.concat({role:"assistant",content:M,createdAt:Date.now()}))}finally{s(!1),a(null)}}function T(){e([])}function v(y){var w;try{(w=navigator.clipboard)==null||w.writeText(y)}catch{}}return O.useEffect(()=>{const y=d.current;y&&(y.style.height="auto",y.style.height=Math.min(y.scrollHeight,200)+"px")},[n]),m.jsxs("div",{className:"flex flex-col gap-3",children:[E&&m.jsxs("div",{className:"rounded-md border border-amber-300 bg-amber-50 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200 px-3 py-2 text-xs",children:["Gemini API key is not configured on the backend. Set ",m.jsx("code",{children:"GEMINI_API_KEY"})," and restart the server."]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),"Gemini · Online"]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[i?m.jsx(we,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>o==null?void 0:o.abort(),children:"Stop"}):null,m.jsx(we,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:T,disabled:t.length===0&&!i,children:"Clear"})]})]}),m.jsxs("div",{ref:h,className:"max-h-[70vh] min-h-[55vh] overflow-auto rounded-lg border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-950/70 backdrop-blur p-4",children:[t.length===0&&m.jsxs("div",{children:[m.jsx("div",{className:"text-sm text-slate-500 mb-3",children:"Start the conversation by asking a question, or try one of these:"}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:p.map((y,w)=>m.jsx("button",{onClick:()=>r(y),className:"px-3 py-1.5 rounded-full text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-100 border border-slate-200 dark:border-slate-700",children:y},w))})]}),t.map((y,w)=>m.jsx("div",{className:`mb-3 flex ${y.role==="user"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`flex items-end gap-2 ${y.role==="user"?"flex-row-reverse":"flex-row"}`,children:[m.jsx("div",{className:`hidden sm:flex h-8 w-8 shrink-0 rounded-full items-center justify-center text-xs font-semibold ${y.role==="user"?"bg-brand-600 text-white":"bg-slate-200 text-slate-700 dark:bg-slate-800 dark:text-slate-100"}`,children:y.role==="user"?"You":"AI"}),m.jsxs("div",{children:[(()=>{const R=`${y.createdAt||w}-${w}`;y.role==="assistant"&&typeof y.content=="string"&&y.content.length>500;const D=!!l[R];return m.jsxs("div",{className:`group relative max-w-[84vw] sm:max-w-[60%] rounded-2xl px-3 py-2 text-sm shadow-subtle break-words whitespace-pre-wrap leading-relaxed ${y.role==="user"?"bg-brand-600 text-white rounded-br-md":"bg-slate-100/90 dark:bg-slate-900/80 text-slate-900 dark:text-slate-100 rounded-bl-md"}`,children:[m.jsx("div",{children:y.role==="assistant"?m.jsx("div",{className:`chat-content select-text ${D?"":"line-clamp-10"}`,children:y.content}):m.jsx("div",{children:y.content})}),m.jsx("button",{onClick:()=>v(y.content),title:"Copy",className:`absolute -top-2 ${y.role==="user"?"-left-2":"-right-2"} hidden group-hover:inline-flex items-center justify-center h-6 w-6 rounded-full bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600`,children:"⧉"})]})})(),m.jsxs("div",{className:`mt-1 flex items-center gap-2 ${y.role==="user"?"justify-end":"justify-start"}`,children:[m.jsx("div",{className:`text-[10px] ${y.role==="user"?"text-slate-300":"text-slate-500 dark:text-slate-400"}`,children:y.createdAt?Z3(y.createdAt):""}),y.role==="assistant"&&typeof y.content=="string"&&y.content.length>500&&(()=>{const R=`${y.createdAt||w}-${w}`,D=!!l[R];return m.jsx("button",{className:"text-[10px] px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>c(M=>({...M,[R]:!M[R]})),children:D?"Collapse":"Expand"})})()]})]})]})},w)),i&&m.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-500 text-sm",children:[m.jsxs("span",{className:"relative flex h-2 w-2",children:[m.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"}),m.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-600"})]}),"Thinking…"]})]}),m.jsxs("div",{className:"flex gap-2 items-end",children:[m.jsx(f1,{ref:d,value:n,onChange:y=>r(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),b())},placeholder:"Type your message",rows:3}),m.jsxs("div",{className:"flex flex-col items-end gap-1",children:[m.jsx(we,{onClick:b,disabled:!_,children:"Send"}),m.jsxs("div",{className:"text-[10px] text-slate-500",children:[n.length,"/1000"]})]})]})]})}function tB(){const[t,e]=O.useState(!1),[n,r]=O.useState(!1);O.useEffect(()=>{try{const o=localStorage.getItem("chat:widgetOpen");o!=null&&e(o==="true");const a=localStorage.getItem("chat:messages");if(a){const l=JSON.parse(a);r(Array.isArray(l)&&l.length>0)}}catch{}},[]),O.useEffect(()=>{try{localStorage.setItem("chat:widgetOpen",String(t))}catch{}},[t]);const i=O.useCallback(()=>e(o=>!o),[]),s=O.useCallback(()=>e(!1),[]);return O.useEffect(()=>{const o=a=>{a.key==="Escape"&&s(),(a.altKey||a.metaKey)&&a.key==="/"&&i()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[i,s]),m.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!t&&m.jsx(we,{onClick:i,className:`h-14 w-14 rounded-full shadow-lg px-0 py-0 ring-2 ring-brand-600 ${n?"":"animate-pulse"}`,"aria-label":"Open chat",title:"Open chat (Alt+/)",children:"💬"}),t&&m.jsxs("div",{className:"relative w-[520px] max-w-[90vw] aspect-square rounded-full shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-900/90 backdrop-blur",children:[m.jsx("button",{onClick:s,"aria-label":"Close chat",className:"absolute top-3 right-3 h-7 w-7 rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 flex items-center justify-center text-xs",title:"Close",children:"✕"}),m.jsx("span",{className:"absolute top-3 left-3 h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),m.jsx("div",{className:"absolute inset-0 p-5",children:m.jsx("div",{className:"h-full w-full overflow-auto rounded-[32px]",children:m.jsx("div",{className:"px-1",children:m.jsx(eB,{})})})})]})]})}function nB(){const{user:t}=Po(),[e,n]=O.useState(""),[r,i]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(""),[c,h]=O.useState(null),[d,p]=O.useState(!1),[_,E]=O.useState(""),[b,T]=O.useState("");O.useEffect(()=>{let y=!0;async function w(){if(!(!t||!Jt))try{const R=sh(Jt,"users",t.uid),D=await sk(R),M=D.exists()?D.data():{};if(!y)return;n(t.displayName||M.displayName||""),i(t.photoURL||M.photoURL||"")}catch{}}return w(),()=>{y=!1}},[t]);async function v(y){if(y.preventDefault(),!!t){o(!0),l("");try{let w=r||null;if(c&&lh){p(!0);const D=c.name&&c.name.includes(".")?c.name.split(".").pop():"jpg",M=`avatars/${t.uid}/${Date.now()}.${D}`,I=_4(lh,M);await g4(I,c,{contentType:c.type||"image/jpeg"}),w=await y4(I),p(!1)}await eI(wt.currentUser,{displayName:e||null,photoURL:w});const R=sh(Jt,"users",t.uid);await nm(R,{displayName:e||null,photoURL:w,updatedAt:ah()},{merge:!0}),l("Profile updated")}catch(w){l((w==null?void 0:w.message)||"Failed to update")}finally{o(!1)}}}return m.jsx("div",{className:"grid place-items-center",children:m.jsxs("div",{className:"w-full max-w-md",children:[m.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Your profile"}),m.jsx(Ye,{children:m.jsx(Xe,{children:m.jsxs("form",{className:"space-y-4",onSubmit:v,children:[m.jsxs("div",{className:"flex items-center gap-3",children:[r?m.jsx("img",{src:r,alt:"avatar",className:"w-12 h-12 rounded-full border border-slate-200 dark:border-slate-700"}):m.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-600 text-white grid place-items-center text-lg",children:(e||(t==null?void 0:t.email)||"?").slice(0,1).toUpperCase()}),m.jsx("div",{className:"text-sm text-slate-500",children:"Update your display info"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Display name"}),m.jsx(An,{type:"text",value:e,onChange:y=>n(y.target.value),disabled:s})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Upload photo"}),m.jsx("input",{type:"file",accept:"image/*",onChange:y=>{E("");const w=y.target.files&&y.target.files[0]?y.target.files[0]:null;if(!w){h(null),T("");return}const R=["image/jpeg","image/png","image/webp"],D=5*1024*1024;if(!R.includes(w.type)){E("Only JPG, PNG or WebP images are allowed."),h(null),T("");return}if(w.size>D){E("File too large. Max size is 5MB."),h(null),T("");return}h(w);const M=new FileReader;M.onload=()=>T(String(M.result||"")),M.readAsDataURL(w)},disabled:s,className:"block w-full text-sm text-slate-700 dark:text-slate-200"}),m.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPEG/PNG up to ~5MB."}),b?m.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[m.jsx("img",{src:b,alt:"preview",className:"w-16 h-16 rounded-full border border-slate-200 dark:border-slate-700 object-cover"}),m.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>{h(null),T(""),E("")},children:"Remove"})]}):null,_?m.jsx("p",{className:"text-sm text-red-600 mt-1",children:_}):null]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Or photo URL"}),m.jsx(An,{type:"url",value:r,onChange:y=>i(y.target.value),disabled:s})]}),d?m.jsx("p",{className:"text-sm text-slate-500",children:"Uploading photo…"}):null,a?m.jsx("p",{className:`text-sm ${a==="Profile updated"?"text-green-600":"text-red-600"}`,children:a}):null,m.jsx(we,{type:"submit",className:"w-full",disabled:s||d,children:s?"Saving…":"Save changes"})]})})})]})})}function rB(){return m.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[m.jsx(A4,{}),m.jsx("main",{className:"mx-auto max-w-7xl px-4 py-6",children:m.jsxs(uP,{children:[m.jsx(Nr,{path:"/",element:m.jsx(Hc,{children:m.jsx(q3,{})})}),m.jsx(Nr,{path:"/daily-checkin",element:m.jsx(Hc,{children:m.jsx(Q3,{})})}),m.jsx(Nr,{path:"/upload-report",element:m.jsx(Hc,{children:m.jsx(Y3,{})})}),m.jsx(Nr,{path:"/profile",element:m.jsx(Hc,{children:m.jsx(nB,{})})}),m.jsx(Nr,{path:"/login",element:m.jsx(K3,{})}),m.jsx(Nr,{path:"/signup",element:m.jsx(G3,{})}),m.jsx(Nr,{path:"*",element:m.jsx(J3,{})})]})}),m.jsx(X3,{}),m.jsx(tB,{})]})}tT(document.getElementById("root")).render(m.jsx(TP,{children:m.jsx(z3,{children:m.jsx(k4,{children:m.jsx(_P,{children:m.jsx(rB,{})})})})}));
