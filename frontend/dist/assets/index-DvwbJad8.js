var Y1=Object.defineProperty;var X1=(t,e,n)=>e in t?Y1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>X1(t,typeof e!="symbol"?e+"":e,n);function J1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Z1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yx={exports:{}},Dh={},Xx={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $l=Symbol.for("react.element"),eC=Symbol.for("react.portal"),tC=Symbol.for("react.fragment"),nC=Symbol.for("react.strict_mode"),rC=Symbol.for("react.profiler"),sC=Symbol.for("react.provider"),iC=Symbol.for("react.context"),oC=Symbol.for("react.forward_ref"),aC=Symbol.for("react.suspense"),lC=Symbol.for("react.memo"),cC=Symbol.for("react.lazy"),z_=Symbol.iterator;function uC(t){return t===null||typeof t!="object"?null:(t=z_&&t[z_]||t["@@iterator"],typeof t=="function"?t:null)}var Jx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zx=Object.assign,eb={};function Mo(t,e,n){this.props=t,this.context=e,this.refs=eb,this.updater=n||Jx}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tb(){}tb.prototype=Mo.prototype;function Im(t,e,n){this.props=t,this.context=e,this.refs=eb,this.updater=n||Jx}var km=Im.prototype=new tb;km.constructor=Im;Zx(km,Mo.prototype);km.isPureReactComponent=!0;var B_=Array.isArray,nb=Object.prototype.hasOwnProperty,Sm={current:null},rb={key:!0,ref:!0,__self:!0,__source:!0};function sb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)nb.call(e,r)&&!rb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:$l,type:t,key:i,ref:o,props:s,_owner:Sm.current}}function hC(t,e){return{$$typeof:$l,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cm(t){return typeof t=="object"&&t!==null&&t.$$typeof===$l}function dC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $_=/\/+/g;function $d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dC(""+t.key):e.toString(36)}function au(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $l:case eC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$d(o,0):r,B_(s)?(n="",t!=null&&(n=t.replace($_,"$&/")+"/"),au(s,e,n,"",function(c){return c})):s!=null&&(Cm(s)&&(s=hC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",B_(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+$d(i,a);o+=au(i,e,n,l,s)}else if(l=uC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+$d(i,a++),o+=au(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bc(t,e,n){if(t==null)return t;var r=[],s=0;return au(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},lu={transition:null},pC={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:lu,ReactCurrentOwner:Sm};function ib(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:bc,forEach:function(t,e,n){bc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bc(t,function(){e++}),e},toArray:function(t){return bc(t,function(e){return e})||[]},only:function(t){if(!Cm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Mo;pe.Fragment=tC;pe.Profiler=rC;pe.PureComponent=Im;pe.StrictMode=nC;pe.Suspense=aC;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pC;pe.act=ib;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Sm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nb.call(e,l)&&!rb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:$l,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:iC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sC,_context:t},t.Consumer=t};pe.createElement=sb;pe.createFactory=function(t){var e=sb.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:oC,render:t}};pe.isValidElement=Cm;pe.lazy=function(t){return{$$typeof:cC,_payload:{_status:-1,_result:t},_init:fC}};pe.memo=function(t,e){return{$$typeof:lC,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=lu.transition;lu.transition={};try{t()}finally{lu.transition=e}};pe.unstable_act=ib;pe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};pe.useContext=function(t){return Gt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};pe.useId=function(){return Gt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};pe.useRef=function(t){return Gt.current.useRef(t)};pe.useState=function(t){return Gt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Gt.current.useTransition()};pe.version="18.3.1";Xx.exports=pe;var O=Xx.exports;const oi=Z1(O),mC=J1({__proto__:null,default:oi},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC=O,yC=Symbol.for("react.element"),_C=Symbol.for("react.fragment"),vC=Object.prototype.hasOwnProperty,wC=gC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xC={key:!0,ref:!0,__self:!0,__source:!0};function ob(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vC.call(e,r)&&!xC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yC,type:t,key:i,ref:o,props:s,_owner:wC.current}}Dh.Fragment=_C;Dh.jsx=ob;Dh.jsxs=ob;Yx.exports=Dh;var d=Yx.exports,ab={exports:{}},wn={},lb={exports:{}},cb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var H=B.length;B.push(K);e:for(;0<H;){var fe=H-1>>>1,le=B[fe];if(0<s(le,K))B[fe]=K,B[H]=le,H=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],H=B.pop();if(H!==K){B[0]=H;e:for(var fe=0,le=B.length,he=le>>>1;fe<he;){var Ee=2*(fe+1)-1,Oe=B[Ee],Ce=Ee+1,j=B[Ce];if(0>s(Oe,H))Ce<le&&0>s(j,Oe)?(B[fe]=j,B[Ce]=H,fe=Ce):(B[fe]=Oe,B[Ee]=H,fe=Ee);else if(Ce<le&&0>s(j,H))B[fe]=j,B[Ce]=H,fe=Ce;else break e}}return K}function s(B,K){var H=B.sortIndex-K.sortIndex;return H!==0?H:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,x=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=B)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function N(B){if(E=!1,b(B),!x)if(n(l)!==null)x=!0,ae(R);else{var K=n(c);K!==null&&se(N,K.startTime-B)}}function R(B,K){x=!1,E&&(E=!1,v(w),w=-1),y=!0;var H=m;try{for(b(K),f=n(l);f!==null&&(!(f.expirationTime>K)||B&&!P());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,m=f.priorityLevel;var le=fe(f.expirationTime<=K);K=t.unstable_now(),typeof le=="function"?f.callback=le:f===n(l)&&r(l),b(K)}else r(l);f=n(l)}if(f!==null)var he=!0;else{var Ee=n(c);Ee!==null&&se(N,Ee.startTime-K),he=!1}return he}finally{f=null,m=H,y=!1}}var M=!1,k=null,w=-1,S=5,I=-1;function P(){return!(t.unstable_now()-I<S)}function D(){if(k!==null){var B=t.unstable_now();I=B;var K=!0;try{K=k(!0,B)}finally{K?A():(M=!1,k=null)}}else M=!1}var A;if(typeof _=="function")A=function(){_(D)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ne=oe.port2;oe.port1.onmessage=D,A=function(){ne.postMessage(null)}}else A=function(){T(D,0)};function ae(B){k=B,M||(M=!0,A())}function se(B,K){w=T(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,ae(R))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var H=m;m=K;try{return B()}finally{m=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var H=m;m=B;try{return K()}finally{m=H}},t.unstable_scheduleCallback=function(B,K,H){var fe=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?fe+H:fe):H=fe,B){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=H+le,B={id:h++,callback:K,priorityLevel:B,startTime:H,expirationTime:le,sortIndex:-1},H>fe?(B.sortIndex=H,e(c,B),n(l)===null&&B===n(c)&&(E?(v(w),w=-1):E=!0,se(N,H-fe))):(B.sortIndex=le,e(l,B),x||y||(x=!0,ae(R))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var K=m;return function(){var H=m;m=K;try{return B.apply(this,arguments)}finally{m=H}}}})(cb);lb.exports=cb;var bC=lb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC=O,vn=bC;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ub=new Set,ll={};function Si(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(ll[t]=e,t=0;t<e.length;t++)ub.add(e[t])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wf=Object.prototype.hasOwnProperty,TC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W_={},H_={};function IC(t){return Wf.call(H_,t)?!0:Wf.call(W_,t)?!1:TC.test(t)?H_[t]=!0:(W_[t]=!0,!1)}function kC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SC(t,e,n,r){if(e===null||typeof e>"u"||kC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Am=/[\-:]([a-z])/g;function Pm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Am,Pm);At[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Am,Pm);At[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Am,Pm);At[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rm(t,e,n,r){var s=At.hasOwnProperty(e)?At[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SC(e,n,s,r)&&(n=null),r||s===null?IC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vr=EC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ec=Symbol.for("react.element"),Hi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),Hf=Symbol.for("react.profiler"),hb=Symbol.for("react.provider"),db=Symbol.for("react.context"),Dm=Symbol.for("react.forward_ref"),qf=Symbol.for("react.suspense"),Kf=Symbol.for("react.suspense_list"),Om=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),fb=Symbol.for("react.offscreen"),q_=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=q_&&t[q_]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Wd;function Ea(t){if(Wd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wd=e&&e[1]||""}return`
`+Wd+t}var Hd=!1;function qd(t,e){if(!t||Hd)return"";Hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ea(t):""}function CC(t){switch(t.tag){case 5:return Ea(t.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return t=qd(t.type,!1),t;case 11:return t=qd(t.type.render,!1),t;case 1:return t=qd(t.type,!0),t;default:return""}}function Gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Hi:return"Portal";case Hf:return"Profiler";case Nm:return"StrictMode";case qf:return"Suspense";case Kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case db:return(t.displayName||"Context")+".Consumer";case hb:return(t._context.displayName||"Context")+".Provider";case Dm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Om:return e=t.displayName||null,e!==null?e:Gf(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return Gf(t(e))}catch{}}return null}function AC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gf(e);case 8:return e===Nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PC(t){var e=pb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tc(t){t._valueTracker||(t._valueTracker=PC(t))}function mb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qf(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function K_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gb(t,e){e=e.checked,e!=null&&Rm(t,"checked",e,!1)}function Yf(t,e){gb(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xf(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function G_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xf(t,e,n){(e!=="number"||Nu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ta=Array.isArray;function ro(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Q_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ta(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function yb(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Y_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _b(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_b(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ic,vb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RC=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(t){RC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fa[e]=Fa[t]})});function wb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fa.hasOwnProperty(t)&&Fa[t]?(""+e).trim():e+"px"}function xb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var NC=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ep(t,e){if(e){if(NC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function tp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var np=null;function Mm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rp=null,so=null,io=null;function X_(t){if(t=ql(t)){if(typeof rp!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Vh(e),rp(t.stateNode,t.type,e))}}function bb(t){so?io?io.push(t):io=[t]:so=t}function Eb(){if(so){var t=so,e=io;if(io=so=null,X_(t),e)for(t=0;t<e.length;t++)X_(e[t])}}function Tb(t,e){return t(e)}function Ib(){}var Kd=!1;function kb(t,e,n){if(Kd)return t(e,n);Kd=!0;try{return Tb(t,e,n)}finally{Kd=!1,(so!==null||io!==null)&&(Ib(),Eb())}}function ul(t,e){var n=t.stateNode;if(n===null)return null;var r=Vh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var sp=!1;if(Pr)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){sp=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{sp=!1}function DC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ua=!1,Du=null,Ou=!1,ip=null,OC={onError:function(t){Ua=!0,Du=t}};function MC(t,e,n,r,s,i,o,a,l){Ua=!1,Du=null,DC.apply(OC,arguments)}function LC(t,e,n,r,s,i,o,a,l){if(MC.apply(this,arguments),Ua){if(Ua){var c=Du;Ua=!1,Du=null}else throw Error(z(198));Ou||(Ou=!0,ip=c)}}function Ci(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function J_(t){if(Ci(t)!==t)throw Error(z(188))}function jC(t){var e=t.alternate;if(!e){if(e=Ci(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return J_(s),t;if(i===r)return J_(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Cb(t){return t=jC(t),t!==null?Ab(t):null}function Ab(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ab(t);if(e!==null)return e;t=t.sibling}return null}var Pb=vn.unstable_scheduleCallback,Z_=vn.unstable_cancelCallback,VC=vn.unstable_shouldYield,FC=vn.unstable_requestPaint,it=vn.unstable_now,UC=vn.unstable_getCurrentPriorityLevel,Lm=vn.unstable_ImmediatePriority,Rb=vn.unstable_UserBlockingPriority,Mu=vn.unstable_NormalPriority,zC=vn.unstable_LowPriority,Nb=vn.unstable_IdlePriority,Oh=null,ar=null;function BC(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Oh,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:HC,$C=Math.log,WC=Math.LN2;function HC(t){return t>>>=0,t===0?32:31-($C(t)/WC|0)|0}var kc=64,Sc=4194304;function Ia(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ia(a):(i&=o,i!==0&&(r=Ia(i)))}else o=n&~s,o!==0?r=Ia(o):i!==0&&(r=Ia(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),s=1<<n,r|=t[n],e&=~s;return r}function qC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-qn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=qC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function op(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Db(){var t=kc;return kc<<=1,!(kc&4194240)&&(kc=64),t}function Gd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function GC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ne=0;function Ob(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mb,Vm,Lb,jb,Vb,ap=!1,Cc=[],hs=null,ds=null,fs=null,hl=new Map,dl=new Map,Zr=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ev(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":hl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(e.pointerId)}}function ua(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ql(e),e!==null&&Vm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YC(t,e,n,r,s){switch(e){case"focusin":return hs=ua(hs,t,e,n,r,s),!0;case"dragenter":return ds=ua(ds,t,e,n,r,s),!0;case"mouseover":return fs=ua(fs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return hl.set(i,ua(hl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,dl.set(i,ua(dl.get(i)||null,t,e,n,r,s)),!0}return!1}function Fb(t){var e=Js(t.target);if(e!==null){var n=Ci(e);if(n!==null){if(e=n.tag,e===13){if(e=Sb(n),e!==null){t.blockedOn=e,Vb(t.priority,function(){Lb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);np=r,n.target.dispatchEvent(r),np=null}else return e=ql(n),e!==null&&Vm(e),t.blockedOn=n,!1;e.shift()}return!0}function tv(t,e,n){cu(t)&&n.delete(e)}function XC(){ap=!1,hs!==null&&cu(hs)&&(hs=null),ds!==null&&cu(ds)&&(ds=null),fs!==null&&cu(fs)&&(fs=null),hl.forEach(tv),dl.forEach(tv)}function ha(t,e){t.blockedOn===e&&(t.blockedOn=null,ap||(ap=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,XC)))}function fl(t){function e(s){return ha(s,t)}if(0<Cc.length){ha(Cc[0],t);for(var n=1;n<Cc.length;n++){var r=Cc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hs!==null&&ha(hs,t),ds!==null&&ha(ds,t),fs!==null&&ha(fs,t),hl.forEach(e),dl.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)Fb(n),n.blockedOn===null&&Zr.shift()}var oo=Vr.ReactCurrentBatchConfig,ju=!0;function JC(t,e,n,r){var s=Ne,i=oo.transition;oo.transition=null;try{Ne=1,Fm(t,e,n,r)}finally{Ne=s,oo.transition=i}}function ZC(t,e,n,r){var s=Ne,i=oo.transition;oo.transition=null;try{Ne=4,Fm(t,e,n,r)}finally{Ne=s,oo.transition=i}}function Fm(t,e,n,r){if(ju){var s=lp(t,e,n,r);if(s===null)sf(t,e,r,Vu,n),ev(t,r);else if(YC(s,t,e,n,r))r.stopPropagation();else if(ev(t,r),e&4&&-1<QC.indexOf(t)){for(;s!==null;){var i=ql(s);if(i!==null&&Mb(i),i=lp(t,e,n,r),i===null&&sf(t,e,r,Vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sf(t,e,r,null,n)}}var Vu=null;function lp(t,e,n,r){if(Vu=null,t=Mm(r),t=Js(t),t!==null)if(e=Ci(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vu=t,null}function Ub(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UC()){case Lm:return 1;case Rb:return 4;case Mu:case zC:return 16;case Nb:return 536870912;default:return 16}default:return 16}}var is=null,Um=null,uu=null;function zb(){if(uu)return uu;var t,e=Um,n=e.length,r,s="value"in is?is.value:is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uu=s.slice(t,1<r?1-r:void 0)}function hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ac(){return!0}function nv(){return!1}function xn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ac:nv,this.isPropagationStopped=nv,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zm=xn(Lo),Hl=Ge({},Lo,{view:0,detail:0}),eA=xn(Hl),Qd,Yd,da,Mh=Ge({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(Qd=t.screenX-da.screenX,Yd=t.screenY-da.screenY):Yd=Qd=0,da=t),Qd)},movementY:function(t){return"movementY"in t?t.movementY:Yd}}),rv=xn(Mh),tA=Ge({},Mh,{dataTransfer:0}),nA=xn(tA),rA=Ge({},Hl,{relatedTarget:0}),Xd=xn(rA),sA=Ge({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),iA=xn(sA),oA=Ge({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aA=xn(oA),lA=Ge({},Lo,{data:0}),sv=xn(lA),cA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hA[t])?!!e[t]:!1}function Bm(){return dA}var fA=Ge({},Hl,{key:function(t){if(t.key){var e=cA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bm,charCode:function(t){return t.type==="keypress"?hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pA=xn(fA),mA=Ge({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iv=xn(mA),gA=Ge({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bm}),yA=xn(gA),_A=Ge({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),vA=xn(_A),wA=Ge({},Mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xA=xn(wA),bA=[9,13,27,32],$m=Pr&&"CompositionEvent"in window,za=null;Pr&&"documentMode"in document&&(za=document.documentMode);var EA=Pr&&"TextEvent"in window&&!za,Bb=Pr&&(!$m||za&&8<za&&11>=za),ov=" ",av=!1;function $b(t,e){switch(t){case"keyup":return bA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function TA(t,e){switch(t){case"compositionend":return Wb(e);case"keypress":return e.which!==32?null:(av=!0,ov);case"textInput":return t=e.data,t===ov&&av?null:t;default:return null}}function IA(t,e){if(Ki)return t==="compositionend"||!$m&&$b(t,e)?(t=zb(),uu=Um=is=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bb&&e.locale!=="ko"?null:e.data;default:return null}}var kA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kA[t.type]:e==="textarea"}function Hb(t,e,n,r){bb(r),e=Fu(e,"onChange"),0<e.length&&(n=new zm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ba=null,pl=null;function SA(t){nE(t,0)}function Lh(t){var e=Yi(t);if(mb(e))return t}function CA(t,e){if(t==="change")return e}var qb=!1;if(Pr){var Jd;if(Pr){var Zd="oninput"in document;if(!Zd){var cv=document.createElement("div");cv.setAttribute("oninput","return;"),Zd=typeof cv.oninput=="function"}Jd=Zd}else Jd=!1;qb=Jd&&(!document.documentMode||9<document.documentMode)}function uv(){Ba&&(Ba.detachEvent("onpropertychange",Kb),pl=Ba=null)}function Kb(t){if(t.propertyName==="value"&&Lh(pl)){var e=[];Hb(e,pl,t,Mm(t)),kb(SA,e)}}function AA(t,e,n){t==="focusin"?(uv(),Ba=e,pl=n,Ba.attachEvent("onpropertychange",Kb)):t==="focusout"&&uv()}function PA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lh(pl)}function RA(t,e){if(t==="click")return Lh(e)}function NA(t,e){if(t==="input"||t==="change")return Lh(e)}function DA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:DA;function ml(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wf.call(e,s)||!Qn(t[s],e[s]))return!1}return!0}function hv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dv(t,e){var n=hv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hv(n)}}function Gb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qb(){for(var t=window,e=Nu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nu(t.document)}return e}function Wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OA(t){var e=Qb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gb(n.ownerDocument.documentElement,n)){if(r!==null&&Wm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=dv(n,i);var o=dv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MA=Pr&&"documentMode"in document&&11>=document.documentMode,Gi=null,cp=null,$a=null,up=!1;function fv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;up||Gi==null||Gi!==Nu(r)||(r=Gi,"selectionStart"in r&&Wm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$a&&ml($a,r)||($a=r,r=Fu(cp,"onSelect"),0<r.length&&(e=new zm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gi)))}function Pc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:Pc("Animation","AnimationEnd"),animationiteration:Pc("Animation","AnimationIteration"),animationstart:Pc("Animation","AnimationStart"),transitionend:Pc("Transition","TransitionEnd")},ef={},Yb={};Pr&&(Yb=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function jh(t){if(ef[t])return ef[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yb)return ef[t]=e[n];return t}var Xb=jh("animationend"),Jb=jh("animationiteration"),Zb=jh("animationstart"),eE=jh("transitionend"),tE=new Map,pv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){tE.set(t,e),Si(e,[t])}for(var tf=0;tf<pv.length;tf++){var nf=pv[tf],LA=nf.toLowerCase(),jA=nf[0].toUpperCase()+nf.slice(1);Ns(LA,"on"+jA)}Ns(Xb,"onAnimationEnd");Ns(Jb,"onAnimationIteration");Ns(Zb,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(eE,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Si("onBeforeInput",["compositionend","keypress","textInput","paste"]);Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VA=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function mv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LC(r,e,void 0,t),t.currentTarget=null}function nE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;mv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;mv(s,a,c),i=l}}}if(Ou)throw t=ip,Ou=!1,ip=null,t}function Ue(t,e){var n=e[mp];n===void 0&&(n=e[mp]=new Set);var r=t+"__bubble";n.has(r)||(rE(e,t,2,!1),n.add(r))}function rf(t,e,n){var r=0;e&&(r|=4),rE(n,t,r,e)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function gl(t){if(!t[Rc]){t[Rc]=!0,ub.forEach(function(n){n!=="selectionchange"&&(VA.has(n)||rf(n,!1,t),rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rc]||(e[Rc]=!0,rf("selectionchange",!1,e))}}function rE(t,e,n,r){switch(Ub(e)){case 1:var s=JC;break;case 4:s=ZC;break;default:s=Fm}n=s.bind(null,e,n,t),s=void 0,!sp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Js(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}kb(function(){var c=i,h=Mm(n),f=[];e:{var m=tE.get(t);if(m!==void 0){var y=zm,x=t;switch(t){case"keypress":if(hu(n)===0)break e;case"keydown":case"keyup":y=pA;break;case"focusin":x="focus",y=Xd;break;case"focusout":x="blur",y=Xd;break;case"beforeblur":case"afterblur":y=Xd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=nA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=yA;break;case Xb:case Jb:case Zb:y=iA;break;case eE:y=vA;break;case"scroll":y=eA;break;case"wheel":y=xA;break;case"copy":case"cut":case"paste":y=aA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=iv}var E=(e&4)!==0,T=!E&&t==="scroll",v=E?m!==null?m+"Capture":null:m;E=[];for(var _=c,b;_!==null;){b=_;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,v!==null&&(N=ul(_,v),N!=null&&E.push(yl(_,N,b)))),T)break;_=_.return}0<E.length&&(m=new y(m,x,null,n,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==np&&(x=n.relatedTarget||n.fromElement)&&(Js(x)||x[Rr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=c,x=x?Js(x):null,x!==null&&(T=Ci(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(E=rv,N="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=iv,N="onPointerLeave",v="onPointerEnter",_="pointer"),T=y==null?m:Yi(y),b=x==null?m:Yi(x),m=new E(N,_+"leave",y,n,h),m.target=T,m.relatedTarget=b,N=null,Js(h)===c&&(E=new E(v,_+"enter",x,n,h),E.target=b,E.relatedTarget=T,N=E),T=N,y&&x)t:{for(E=y,v=x,_=0,b=E;b;b=Fi(b))_++;for(b=0,N=v;N;N=Fi(N))b++;for(;0<_-b;)E=Fi(E),_--;for(;0<b-_;)v=Fi(v),b--;for(;_--;){if(E===v||v!==null&&E===v.alternate)break t;E=Fi(E),v=Fi(v)}E=null}else E=null;y!==null&&gv(f,m,y,E,!1),x!==null&&T!==null&&gv(f,T,x,E,!0)}}e:{if(m=c?Yi(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var R=CA;else if(lv(m))if(qb)R=NA;else{R=PA;var M=AA}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=RA);if(R&&(R=R(t,c))){Hb(f,R,n,h);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Xf(m,"number",m.value)}switch(M=c?Yi(c):window,t){case"focusin":(lv(M)||M.contentEditable==="true")&&(Gi=M,cp=c,$a=null);break;case"focusout":$a=cp=Gi=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,fv(f,n,h);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":fv(f,n,h)}var k;if($m)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ki?$b(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Bb&&n.locale!=="ko"&&(Ki||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ki&&(k=zb()):(is=h,Um="value"in is?is.value:is.textContent,Ki=!0)),M=Fu(c,w),0<M.length&&(w=new sv(w,t,null,n,h),f.push({event:w,listeners:M}),k?w.data=k:(k=Wb(n),k!==null&&(w.data=k)))),(k=EA?TA(t,n):IA(t,n))&&(c=Fu(c,"onBeforeInput"),0<c.length&&(h=new sv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=k))}nE(f,e)})}function yl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ul(t,n),i!=null&&r.unshift(yl(t,i,s)),i=ul(t,e),i!=null&&r.push(yl(t,i,s))),t=t.return}return r}function Fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ul(n,i),l!=null&&o.unshift(yl(n,l,a))):s||(l=ul(n,i),l!=null&&o.push(yl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FA=/\r\n?/g,UA=/\u0000|\uFFFD/g;function yv(t){return(typeof t=="string"?t:""+t).replace(FA,`
`).replace(UA,"")}function Nc(t,e,n){if(e=yv(e),yv(t)!==e&&n)throw Error(z(425))}function Uu(){}var hp=null,dp=null;function fp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pp=typeof setTimeout=="function"?setTimeout:void 0,zA=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,BA=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(t){return _v.resolve(null).then(t).catch($A)}:pp;function $A(t){setTimeout(function(){throw t})}function of(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fl(e)}function ps(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jo=Math.random().toString(36).slice(2),ir="__reactFiber$"+jo,_l="__reactProps$"+jo,Rr="__reactContainer$"+jo,mp="__reactEvents$"+jo,WA="__reactListeners$"+jo,HA="__reactHandles$"+jo;function Js(t){var e=t[ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vv(t);t!==null;){if(n=t[ir])return n;t=vv(t)}return e}t=n,n=t.parentNode}return null}function ql(t){return t=t[ir]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Vh(t){return t[_l]||null}var gp=[],Xi=-1;function Ds(t){return{current:t}}function $e(t){0>Xi||(t.current=gp[Xi],gp[Xi]=null,Xi--)}function je(t,e){Xi++,gp[Xi]=t.current,t.current=e}var Is={},zt=Ds(Is),tn=Ds(!1),di=Is;function yo(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function nn(t){return t=t.childContextTypes,t!=null}function zu(){$e(tn),$e(zt)}function wv(t,e,n){if(zt.current!==Is)throw Error(z(168));je(zt,e),je(tn,n)}function sE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,AC(t)||"Unknown",s));return Ge({},n,r)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,di=zt.current,je(zt,t),je(tn,tn.current),!0}function xv(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=sE(t,e,di),r.__reactInternalMemoizedMergedChildContext=t,$e(tn),$e(zt),je(zt,t)):$e(tn),je(tn,n)}var wr=null,Fh=!1,af=!1;function iE(t){wr===null?wr=[t]:wr.push(t)}function qA(t){Fh=!0,iE(t)}function Os(){if(!af&&wr!==null){af=!0;var t=0,e=Ne;try{var n=wr;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wr=null,Fh=!1}catch(s){throw wr!==null&&(wr=wr.slice(t+1)),Pb(Lm,Os),s}finally{Ne=e,af=!1}}return null}var Ji=[],Zi=0,$u=null,Wu=0,Tn=[],In=0,fi=null,Er=1,Tr="";function Ks(t,e){Ji[Zi++]=Wu,Ji[Zi++]=$u,$u=t,Wu=e}function oE(t,e,n){Tn[In++]=Er,Tn[In++]=Tr,Tn[In++]=fi,fi=t;var r=Er;t=Tr;var s=32-qn(r)-1;r&=~(1<<s),n+=1;var i=32-qn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Er=1<<32-qn(e)+s|n<<s|r,Tr=i+t}else Er=1<<i|n<<s|r,Tr=t}function Hm(t){t.return!==null&&(Ks(t,1),oE(t,1,0))}function qm(t){for(;t===$u;)$u=Ji[--Zi],Ji[Zi]=null,Wu=Ji[--Zi],Ji[Zi]=null;for(;t===fi;)fi=Tn[--In],Tn[In]=null,Tr=Tn[--In],Tn[In]=null,Er=Tn[--In],Tn[In]=null}var yn=null,pn=null,We=!1,Bn=null;function aE(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,pn=ps(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fi!==null?{id:Er,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,pn=null,!0):!1;default:return!1}}function yp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _p(t){if(We){var e=pn;if(e){var n=e;if(!bv(t,e)){if(yp(t))throw Error(z(418));e=ps(n.nextSibling);var r=yn;e&&bv(t,e)?aE(r,n):(t.flags=t.flags&-4097|2,We=!1,yn=t)}}else{if(yp(t))throw Error(z(418));t.flags=t.flags&-4097|2,We=!1,yn=t}}}function Ev(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Dc(t){if(t!==yn)return!1;if(!We)return Ev(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fp(t.type,t.memoizedProps)),e&&(e=pn)){if(yp(t))throw lE(),Error(z(418));for(;e;)aE(t,e),e=ps(e.nextSibling)}if(Ev(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=ps(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=yn?ps(t.stateNode.nextSibling):null;return!0}function lE(){for(var t=pn;t;)t=ps(t.nextSibling)}function _o(){pn=yn=null,We=!1}function Km(t){Bn===null?Bn=[t]:Bn.push(t)}var KA=Vr.ReactCurrentBatchConfig;function fa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Oc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tv(t){var e=t._init;return e(t._payload)}function cE(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=_s(v,_),v.index=0,v.sibling=null,v}function i(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=2,_):b):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,b,N){return _===null||_.tag!==6?(_=pf(b,v.mode,N),_.return=v,_):(_=s(_,b),_.return=v,_)}function l(v,_,b,N){var R=b.type;return R===qi?h(v,_,b.props.children,N,b.key):_!==null&&(_.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Xr&&Tv(R)===_.type)?(N=s(_,b.props),N.ref=fa(v,_,b),N.return=v,N):(N=_u(b.type,b.key,b.props,null,v.mode,N),N.ref=fa(v,_,b),N.return=v,N)}function c(v,_,b,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=mf(b,v.mode,N),_.return=v,_):(_=s(_,b.children||[]),_.return=v,_)}function h(v,_,b,N,R){return _===null||_.tag!==7?(_=li(b,v.mode,N,R),_.return=v,_):(_=s(_,b),_.return=v,_)}function f(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=pf(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ec:return b=_u(_.type,_.key,_.props,null,v.mode,b),b.ref=fa(v,null,_),b.return=v,b;case Hi:return _=mf(_,v.mode,b),_.return=v,_;case Xr:var N=_._init;return f(v,N(_._payload),b)}if(Ta(_)||la(_))return _=li(_,v.mode,b,null),_.return=v,_;Oc(v,_)}return null}function m(v,_,b,N){var R=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:a(v,_,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ec:return b.key===R?l(v,_,b,N):null;case Hi:return b.key===R?c(v,_,b,N):null;case Xr:return R=b._init,m(v,_,R(b._payload),N)}if(Ta(b)||la(b))return R!==null?null:h(v,_,b,N,null);Oc(v,b)}return null}function y(v,_,b,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(b)||null,a(_,v,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ec:return v=v.get(N.key===null?b:N.key)||null,l(_,v,N,R);case Hi:return v=v.get(N.key===null?b:N.key)||null,c(_,v,N,R);case Xr:var M=N._init;return y(v,_,b,M(N._payload),R)}if(Ta(N)||la(N))return v=v.get(b)||null,h(_,v,N,R,null);Oc(_,N)}return null}function x(v,_,b,N){for(var R=null,M=null,k=_,w=_=0,S=null;k!==null&&w<b.length;w++){k.index>w?(S=k,k=null):S=k.sibling;var I=m(v,k,b[w],N);if(I===null){k===null&&(k=S);break}t&&k&&I.alternate===null&&e(v,k),_=i(I,_,w),M===null?R=I:M.sibling=I,M=I,k=S}if(w===b.length)return n(v,k),We&&Ks(v,w),R;if(k===null){for(;w<b.length;w++)k=f(v,b[w],N),k!==null&&(_=i(k,_,w),M===null?R=k:M.sibling=k,M=k);return We&&Ks(v,w),R}for(k=r(v,k);w<b.length;w++)S=y(k,v,w,b[w],N),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?w:S.key),_=i(S,_,w),M===null?R=S:M.sibling=S,M=S);return t&&k.forEach(function(P){return e(v,P)}),We&&Ks(v,w),R}function E(v,_,b,N){var R=la(b);if(typeof R!="function")throw Error(z(150));if(b=R.call(b),b==null)throw Error(z(151));for(var M=R=null,k=_,w=_=0,S=null,I=b.next();k!==null&&!I.done;w++,I=b.next()){k.index>w?(S=k,k=null):S=k.sibling;var P=m(v,k,I.value,N);if(P===null){k===null&&(k=S);break}t&&k&&P.alternate===null&&e(v,k),_=i(P,_,w),M===null?R=P:M.sibling=P,M=P,k=S}if(I.done)return n(v,k),We&&Ks(v,w),R;if(k===null){for(;!I.done;w++,I=b.next())I=f(v,I.value,N),I!==null&&(_=i(I,_,w),M===null?R=I:M.sibling=I,M=I);return We&&Ks(v,w),R}for(k=r(v,k);!I.done;w++,I=b.next())I=y(k,v,w,I.value,N),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?w:I.key),_=i(I,_,w),M===null?R=I:M.sibling=I,M=I);return t&&k.forEach(function(D){return e(v,D)}),We&&Ks(v,w),R}function T(v,_,b,N){if(typeof b=="object"&&b!==null&&b.type===qi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ec:e:{for(var R=b.key,M=_;M!==null;){if(M.key===R){if(R=b.type,R===qi){if(M.tag===7){n(v,M.sibling),_=s(M,b.props.children),_.return=v,v=_;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Xr&&Tv(R)===M.type){n(v,M.sibling),_=s(M,b.props),_.ref=fa(v,M,b),_.return=v,v=_;break e}n(v,M);break}else e(v,M);M=M.sibling}b.type===qi?(_=li(b.props.children,v.mode,N,b.key),_.return=v,v=_):(N=_u(b.type,b.key,b.props,null,v.mode,N),N.ref=fa(v,_,b),N.return=v,v=N)}return o(v);case Hi:e:{for(M=b.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),_=s(_,b.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=mf(b,v.mode,N),_.return=v,v=_}return o(v);case Xr:return M=b._init,T(v,_,M(b._payload),N)}if(Ta(b))return x(v,_,b,N);if(la(b))return E(v,_,b,N);Oc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,b),_.return=v,v=_):(n(v,_),_=pf(b,v.mode,N),_.return=v,v=_),o(v)):n(v,_)}return T}var vo=cE(!0),uE=cE(!1),Hu=Ds(null),qu=null,eo=null,Gm=null;function Qm(){Gm=eo=qu=null}function Ym(t){var e=Hu.current;$e(Hu),t._currentValue=e}function vp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ao(t,e){qu=t,Gm=eo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(Gm!==t)if(t={context:t,memoizedValue:e,next:null},eo===null){if(qu===null)throw Error(z(308));eo=t,qu.dependencies={lanes:0,firstContext:t}}else eo=eo.next=t;return e}var Zs=null;function Xm(t){Zs===null?Zs=[t]:Zs.push(t)}function hE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Nr(t,r)}function Nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function Jm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Nr(t,n)}return s=r.interleaved,s===null?(e.next=e,Xm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Nr(t,n)}function du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jm(t,n)}}function Iv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ku(t,e,n,r){var s=t.updateQueue;Jr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,E=a;switch(m=e,y=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){f=x.call(y,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,m=typeof x=="function"?x.call(y,f,m):x,m==null)break e;f=Ge({},f,m);break e;case 2:Jr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);mi|=o,t.lanes=o,t.memoizedState=f}}function kv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Kl={},lr=Ds(Kl),vl=Ds(Kl),wl=Ds(Kl);function ei(t){if(t===Kl)throw Error(z(174));return t}function Zm(t,e){switch(je(wl,e),je(vl,t),je(lr,Kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zf(e,t)}$e(lr),je(lr,e)}function wo(){$e(lr),$e(vl),$e(wl)}function fE(t){ei(wl.current);var e=ei(lr.current),n=Zf(e,t.type);e!==n&&(je(vl,t),je(lr,n))}function eg(t){vl.current===t&&($e(lr),$e(vl))}var He=Ds(0);function Gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lf=[];function tg(){for(var t=0;t<lf.length;t++)lf[t]._workInProgressVersionPrimary=null;lf.length=0}var fu=Vr.ReactCurrentDispatcher,cf=Vr.ReactCurrentBatchConfig,pi=0,qe=null,ht=null,gt=null,Qu=!1,Wa=!1,xl=0,GA=0;function Ot(){throw Error(z(321))}function ng(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function rg(t,e,n,r,s,i){if(pi=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fu.current=t===null||t.memoizedState===null?JA:ZA,t=n(r,s),Wa){i=0;do{if(Wa=!1,xl=0,25<=i)throw Error(z(301));i+=1,gt=ht=null,e.updateQueue=null,fu.current=eP,t=n(r,s)}while(Wa)}if(fu.current=Yu,e=ht!==null&&ht.next!==null,pi=0,gt=ht=qe=null,Qu=!1,e)throw Error(z(300));return t}function sg(){var t=xl!==0;return xl=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?qe.memoizedState=gt=t:gt=gt.next=t,gt}function Rn(){if(ht===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=gt===null?qe.memoizedState:gt.next;if(e!==null)gt=e,ht=t;else{if(t===null)throw Error(z(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?qe.memoizedState=gt=t:gt=gt.next=t}return gt}function bl(t,e){return typeof e=="function"?e(t):e}function uf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ht,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((pi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,qe.lanes|=h,mi|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Qn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,mi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Qn(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function pE(){}function mE(t,e){var n=qe,r=Rn(),s=e(),i=!Qn(r.memoizedState,s);if(i&&(r.memoizedState=s,Zt=!0),r=r.queue,ig(_E.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,El(9,yE.bind(null,n,r,s,e),void 0,null),yt===null)throw Error(z(349));pi&30||gE(n,e,s)}return s}function gE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yE(t,e,n,r){e.value=n,e.getSnapshot=r,vE(e)&&wE(t)}function _E(t,e,n){return n(function(){vE(e)&&wE(t)})}function vE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function wE(t){var e=Nr(t,1);e!==null&&Kn(e,t,1,-1)}function Sv(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:t},e.queue=t,t=t.dispatch=XA.bind(null,qe,t),[e.memoizedState,t]}function El(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xE(){return Rn().memoizedState}function pu(t,e,n,r){var s=rr();qe.flags|=t,s.memoizedState=El(1|e,n,void 0,r===void 0?null:r)}function Uh(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(ht!==null){var o=ht.memoizedState;if(i=o.destroy,r!==null&&ng(r,o.deps)){s.memoizedState=El(e,n,i,r);return}}qe.flags|=t,s.memoizedState=El(1|e,n,i,r)}function Cv(t,e){return pu(8390656,8,t,e)}function ig(t,e){return Uh(2048,8,t,e)}function bE(t,e){return Uh(4,2,t,e)}function EE(t,e){return Uh(4,4,t,e)}function TE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IE(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4,4,TE.bind(null,e,t),n)}function og(){}function kE(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ng(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function SE(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ng(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CE(t,e,n){return pi&21?(Qn(n,e)||(n=Db(),qe.lanes|=n,mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function QA(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=cf.transition;cf.transition={};try{t(!1),e()}finally{Ne=n,cf.transition=r}}function AE(){return Rn().memoizedState}function YA(t,e,n){var r=ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PE(t))RE(e,n);else if(n=hE(t,e,n,r),n!==null){var s=Kt();Kn(n,t,r,s),NE(n,e,r)}}function XA(t,e,n){var r=ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PE(t))RE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Qn(a,o)){var l=e.interleaved;l===null?(s.next=s,Xm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=hE(t,e,s,r),n!==null&&(s=Kt(),Kn(n,t,r,s),NE(n,e,r))}}function PE(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function RE(t,e){Wa=Qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function NE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jm(t,n)}}var Yu={readContext:Pn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},JA={readContext:Pn,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:Cv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pu(4194308,4,TE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return pu(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YA.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:Sv,useDebugValue:og,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=Sv(!1),e=t[0];return t=QA.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,s=rr();if(We){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),yt===null)throw Error(z(349));pi&30||gE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Cv(_E.bind(null,r,i,t),[t]),r.flags|=2048,El(9,yE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=rr(),e=yt.identifierPrefix;if(We){var n=Tr,r=Er;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZA={readContext:Pn,useCallback:kE,useContext:Pn,useEffect:ig,useImperativeHandle:IE,useInsertionEffect:bE,useLayoutEffect:EE,useMemo:SE,useReducer:uf,useRef:xE,useState:function(){return uf(bl)},useDebugValue:og,useDeferredValue:function(t){var e=Rn();return CE(e,ht.memoizedState,t)},useTransition:function(){var t=uf(bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:AE,unstable_isNewReconciler:!1},eP={readContext:Pn,useCallback:kE,useContext:Pn,useEffect:ig,useImperativeHandle:IE,useInsertionEffect:bE,useLayoutEffect:EE,useMemo:SE,useReducer:hf,useRef:xE,useState:function(){return hf(bl)},useDebugValue:og,useDeferredValue:function(t){var e=Rn();return ht===null?e.memoizedState=t:CE(e,ht.memoizedState,t)},useTransition:function(){var t=hf(bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:AE,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zh={isMounted:function(t){return(t=t._reactInternals)?Ci(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=ys(t),i=Cr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ms(t,i,s),e!==null&&(Kn(e,t,s,r),du(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=ys(t),i=Cr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ms(t,i,s),e!==null&&(Kn(e,t,s,r),du(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=ys(t),s=Cr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ms(t,s,r),e!==null&&(Kn(e,t,r,n),du(e,t,r))}};function Av(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ml(n,r)||!ml(s,i):!0}function DE(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=Pn(i):(s=nn(e)?di:zt.current,r=e.contextTypes,i=(r=r!=null)?yo(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Pv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zh.enqueueReplaceState(e,e.state,null)}function xp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Pn(i):(i=nn(e)?di:zt.current,s.context=yo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zh.enqueueReplaceState(s,s.state,null),Ku(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xo(t,e){try{var n="",r=e;do n+=CC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function df(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tP=typeof WeakMap=="function"?WeakMap:Map;function OE(t,e,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ju||(Ju=!0,Np=r),bp(t,e)},n}function ME(t,e,n){n=Cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bp(t,e),typeof r!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mP.bind(null,t,e,n),e.then(t,t))}function Nv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cr(-1,1),e.tag=2,ms(n,e,1))),n.lanes|=1),t)}var nP=Vr.ReactCurrentOwner,Zt=!1;function qt(t,e,n,r){e.child=t===null?uE(e,null,n,r):vo(e,t.child,n,r)}function Ov(t,e,n,r,s){n=n.render;var i=e.ref;return ao(e,s),r=rg(t,e,n,r,i,s),n=sg(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(We&&n&&Hm(e),e.flags|=1,qt(t,e,r,s),e.child)}function Mv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,LE(t,e,i,r,s)):(t=_u(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ml,n(o,r)&&t.ref===e.ref)return Dr(t,e,s)}return e.flags|=1,t=_s(i,r),t.ref=e.ref,t.return=e,e.child=t}function LE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ml(i,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Dr(t,e,s)}return Ep(t,e,n,r,s)}function jE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(no,dn),dn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(no,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,je(no,dn),dn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,je(no,dn),dn|=r;return qt(t,e,s,n),e.child}function VE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ep(t,e,n,r,s){var i=nn(n)?di:zt.current;return i=yo(e,i),ao(e,s),n=rg(t,e,n,r,i,s),r=sg(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(We&&r&&Hm(e),e.flags|=1,qt(t,e,n,s),e.child)}function Lv(t,e,n,r,s){if(nn(n)){var i=!0;Bu(e)}else i=!1;if(ao(e,s),e.stateNode===null)mu(t,e),DE(e,n,r),xp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pn(c):(c=nn(n)?di:zt.current,c=yo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Pv(e,o,r,c),Jr=!1;var m=e.memoizedState;o.state=m,Ku(e,r,o,s),l=e.memoizedState,a!==r||m!==l||tn.current||Jr?(typeof h=="function"&&(wp(e,n,h,r),l=e.memoizedState),(a=Jr||Av(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Un(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pn(l):(l=nn(n)?di:zt.current,l=yo(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Pv(e,o,r,l),Jr=!1,m=e.memoizedState,o.state=m,Ku(e,r,o,s);var x=e.memoizedState;a!==f||m!==x||tn.current||Jr?(typeof y=="function"&&(wp(e,n,y,r),x=e.memoizedState),(c=Jr||Av(e,n,c,r,m,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Tp(t,e,n,r,i,s)}function Tp(t,e,n,r,s,i){VE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xv(e,n,!1),Dr(t,e,i);r=e.stateNode,nP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vo(e,t.child,null,i),e.child=vo(e,null,a,i)):qt(t,e,a,i),e.memoizedState=r.state,s&&xv(e,n,!0),e.child}function FE(t){var e=t.stateNode;e.pendingContext?wv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wv(t,e.context,!1),Zm(t,e.containerInfo)}function jv(t,e,n,r,s){return _o(),Km(s),e.flags|=256,qt(t,e,n,r),e.child}var Ip={dehydrated:null,treeContext:null,retryLane:0};function kp(t){return{baseLanes:t,cachePool:null,transitions:null}}function UE(t,e,n){var r=e.pendingProps,s=He.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(He,s&1),t===null)return _p(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wh(o,r,0,null),t=li(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kp(n),e.memoizedState=Ip,t):ag(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_s(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=_s(a,i):(i=li(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?kp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ip,r}return i=t.child,t=i.sibling,r=_s(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ag(t,e){return e=Wh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mc(t,e,n,r){return r!==null&&Km(r),vo(e,t.child,null,n),t=ag(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=df(Error(z(422))),Mc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wh({mode:"visible",children:r.children},s,0,null),i=li(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vo(e,t.child,null,o),e.child.memoizedState=kp(o),e.memoizedState=Ip,i);if(!(e.mode&1))return Mc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=df(i,r,void 0),Mc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zt||a){if(r=yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Nr(t,s),Kn(r,t,s,-1))}return fg(),r=df(Error(z(421))),Mc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,pn=ps(s.nextSibling),yn=e,We=!0,Bn=null,t!==null&&(Tn[In++]=Er,Tn[In++]=Tr,Tn[In++]=fi,Er=t.id,Tr=t.overflow,fi=e),e=ag(e,r.children),e.flags|=4096,e)}function Vv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vp(t.return,e,n)}function ff(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(qt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vv(t,n,e);else if(t.tag===19)Vv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(He,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ff(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ff(e,!0,n,null,i);break;case"together":ff(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=_s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sP(t,e,n){switch(e.tag){case 3:FE(e),_o();break;case 5:fE(e);break;case 1:nn(e.type)&&Bu(e);break;case 4:Zm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;je(Hu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?UE(t,e,n):(je(He,He.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);je(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,jE(t,e,n)}return Dr(t,e,n)}var BE,Sp,$E,WE;BE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sp=function(){};$E=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ei(lr.current);var i=null;switch(n){case"input":s=Qf(t,s),r=Qf(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=Jf(t,s),r=Jf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uu)}ep(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ll.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ll.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ue("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};WE=function(t,e,n,r){n!==r&&(e.flags|=4)};function pa(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iP(t,e,n){var r=e.pendingProps;switch(qm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return nn(e.type)&&zu(),Mt(e),null;case 3:return r=e.stateNode,wo(),$e(tn),$e(zt),tg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(Mp(Bn),Bn=null))),Sp(t,e),Mt(e),null;case 5:eg(e);var s=ei(wl.current);if(n=e.type,t!==null&&e.stateNode!=null)$E(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Mt(e),null}if(t=ei(lr.current),Dc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ir]=e,r[_l]=i,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<ka.length;s++)Ue(ka[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":K_(r,i),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ue("invalid",r);break;case"textarea":Q_(r,i),Ue("invalid",r)}ep(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Nc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Nc(r.textContent,a,t),s=["children",""+a]):ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Tc(r),G_(r,i,!0);break;case"textarea":Tc(r),Y_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_b(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ir]=e,t[_l]=r,BE(t,e,!1,!1),e.stateNode=t;e:{switch(o=tp(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),s=r;break;case"iframe":case"object":case"embed":Ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<ka.length;s++)Ue(ka[s],t);s=r;break;case"source":Ue("error",t),s=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),s=r;break;case"details":Ue("toggle",t),s=r;break;case"input":K_(t,r),s=Qf(t,r),Ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":Q_(t,r),s=Jf(t,r),Ue("invalid",t);break;default:s=r}ep(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?xb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cl(t,l):typeof l=="number"&&cl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ll.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ue("scroll",t):l!=null&&Rm(t,i,l,o))}switch(n){case"input":Tc(t),G_(t,r,!1);break;case"textarea":Tc(t),Y_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ro(t,!!r.multiple,i,!1):r.defaultValue!=null&&ro(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)WE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ei(wl.current),ei(lr.current),Dc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ir]=e,(i=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:Nc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ir]=e,e.stateNode=r}return Mt(e),null;case 13:if($e(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&pn!==null&&e.mode&1&&!(e.flags&128))lE(),_o(),e.flags|=98560,i=!1;else if(i=Dc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[ir]=e}else _o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Bn!==null&&(Mp(Bn),Bn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?dt===0&&(dt=3):fg())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return wo(),Sp(t,e),t===null&&gl(e.stateNode.containerInfo),Mt(e),null;case 10:return Ym(e.type._context),Mt(e),null;case 17:return nn(e.type)&&zu(),Mt(e),null;case 19:if($e(He),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pa(i,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gu(t),o!==null){for(e.flags|=128,pa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(He,He.current&1|2),e.child}t=t.sibling}i.tail!==null&&it()>bo&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Mt(e),null}else 2*it()-i.renderingStartTime>bo&&n!==1073741824&&(e.flags|=128,r=!0,pa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=it(),e.sibling=null,n=He.current,je(He,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return dg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function oP(t,e){switch(qm(e),e.tag){case 1:return nn(e.type)&&zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),$e(tn),$e(zt),tg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eg(e),null;case 13:if($e(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));_o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(He),null;case 4:return wo(),null;case 10:return Ym(e.type._context),null;case 22:case 23:return dg(),null;case 24:return null;default:return null}}var Lc=!1,Vt=!1,aP=typeof WeakSet=="function"?WeakSet:Set,Q=null;function to(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function Cp(t,e,n){try{n()}catch(r){et(t,e,r)}}var Fv=!1;function lP(t,e){if(hp=ju,t=Qb(),Wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(dp={focusedElem:t,selectionRange:n},ju=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,T=x.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:Un(e.type,E),T);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(N){et(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return x=Fv,Fv=!1,x}function Ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cp(e,n,i)}s=s.next}while(s!==r)}}function Bh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ap(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HE(t){var e=t.alternate;e!==null&&(t.alternate=null,HE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ir],delete e[_l],delete e[mp],delete e[WA],delete e[HA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qE(t){return t.tag===5||t.tag===3||t.tag===4}function Uv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uu));else if(r!==4&&(t=t.child,t!==null))for(Pp(t,e,n),t=t.sibling;t!==null;)Pp(t,e,n),t=t.sibling}function Rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rp(t,e,n),t=t.sibling;t!==null;)Rp(t,e,n),t=t.sibling}var wt=null,zn=!1;function Hr(t,e,n){for(n=n.child;n!==null;)KE(t,e,n),n=n.sibling}function KE(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Oh,n)}catch{}switch(n.tag){case 5:Vt||to(n,e);case 6:var r=wt,s=zn;wt=null,Hr(t,e,n),wt=r,zn=s,wt!==null&&(zn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(zn?(t=wt,n=n.stateNode,t.nodeType===8?of(t.parentNode,n):t.nodeType===1&&of(t,n),fl(t)):of(wt,n.stateNode));break;case 4:r=wt,s=zn,wt=n.stateNode.containerInfo,zn=!0,Hr(t,e,n),wt=r,zn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cp(n,e,o),s=s.next}while(s!==r)}Hr(t,e,n);break;case 1:if(!Vt&&(to(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){et(n,e,a)}Hr(t,e,n);break;case 21:Hr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Hr(t,e,n),Vt=r):Hr(t,e,n);break;default:Hr(t,e,n)}}function zv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aP),e.forEach(function(r){var s=yP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,zn=!1;break e;case 3:wt=a.stateNode.containerInfo,zn=!0;break e;case 4:wt=a.stateNode.containerInfo,zn=!0;break e}a=a.return}if(wt===null)throw Error(z(160));KE(i,o,s),wt=null,zn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){et(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GE(e,t),e=e.sibling}function GE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(e,t),Zn(t),r&4){try{Ha(3,t,t.return),Bh(3,t)}catch(E){et(t,t.return,E)}try{Ha(5,t,t.return)}catch(E){et(t,t.return,E)}}break;case 1:Fn(e,t),Zn(t),r&512&&n!==null&&to(n,n.return);break;case 5:if(Fn(e,t),Zn(t),r&512&&n!==null&&to(n,n.return),t.flags&32){var s=t.stateNode;try{cl(s,"")}catch(E){et(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gb(s,i),tp(a,o);var c=tp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?xb(s,f):h==="dangerouslySetInnerHTML"?vb(s,f):h==="children"?cl(s,f):Rm(s,h,f,c)}switch(a){case"input":Yf(s,i);break;case"textarea":yb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ro(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?ro(s,!!i.multiple,i.defaultValue,!0):ro(s,!!i.multiple,i.multiple?[]:"",!1))}s[_l]=i}catch(E){et(t,t.return,E)}}break;case 6:if(Fn(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){et(t,t.return,E)}}break;case 3:if(Fn(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fl(e.containerInfo)}catch(E){et(t,t.return,E)}break;case 4:Fn(e,t),Zn(t);break;case 13:Fn(e,t),Zn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ug=it())),r&4&&zv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(c=Vt)||h,Fn(e,t),Vt=c):Fn(e,t),Zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(f=Q=h;Q!==null;){switch(m=Q,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ha(4,m,m.return);break;case 1:to(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){et(r,n,E)}}break;case 5:to(m,m.return);break;case 22:if(m.memoizedState!==null){$v(f);continue}}y!==null?(y.return=m,Q=y):$v(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wb("display",o))}catch(E){et(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(E){et(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fn(e,t),Zn(t),r&4&&zv(t);break;case 21:break;default:Fn(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(cl(s,""),r.flags&=-33);var i=Uv(t);Rp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Uv(t);Pp(t,a,o);break;default:throw Error(z(161))}}catch(l){et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cP(t,e,n){Q=t,QE(t)}function QE(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Lc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=Lc;var c=Vt;if(Lc=o,(Vt=l)&&!c)for(Q=s;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?Wv(s):l!==null?(l.return=o,Q=l):Wv(s);for(;i!==null;)Q=i,QE(i),i=i.sibling;Q=s,Lc=a,Vt=c}Bv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Bv(t)}}function Bv(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Bh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Vt||e.flags&512&&Ap(e)}catch(m){et(e,e.return,m)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function $v(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Wv(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bh(4,e)}catch(l){et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){et(e,s,l)}}var i=e.return;try{Ap(e)}catch(l){et(e,i,l)}break;case 5:var o=e.return;try{Ap(e)}catch(l){et(e,o,l)}}}catch(l){et(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var uP=Math.ceil,Xu=Vr.ReactCurrentDispatcher,lg=Vr.ReactCurrentOwner,An=Vr.ReactCurrentBatchConfig,Te=0,yt=null,ct=null,St=0,dn=0,no=Ds(0),dt=0,Tl=null,mi=0,$h=0,cg=0,qa=null,Xt=null,ug=0,bo=1/0,vr=null,Ju=!1,Np=null,gs=null,jc=!1,os=null,Zu=0,Ka=0,Dp=null,gu=-1,yu=0;function Kt(){return Te&6?it():gu!==-1?gu:gu=it()}function ys(t){return t.mode&1?Te&2&&St!==0?St&-St:KA.transition!==null?(yu===0&&(yu=Db()),yu):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Ub(t.type)),t):1}function Kn(t,e,n,r){if(50<Ka)throw Ka=0,Dp=null,Error(z(185));Wl(t,n,r),(!(Te&2)||t!==yt)&&(t===yt&&(!(Te&2)&&($h|=n),dt===4&&es(t,St)),rn(t,r),n===1&&Te===0&&!(e.mode&1)&&(bo=it()+500,Fh&&Os()))}function rn(t,e){var n=t.callbackNode;KC(t,e);var r=Lu(t,t===yt?St:0);if(r===0)n!==null&&Z_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Z_(n),e===1)t.tag===0?qA(Hv.bind(null,t)):iE(Hv.bind(null,t)),BA(function(){!(Te&6)&&Os()}),n=null;else{switch(Ob(r)){case 1:n=Lm;break;case 4:n=Rb;break;case 16:n=Mu;break;case 536870912:n=Nb;break;default:n=Mu}n=rT(n,YE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YE(t,e){if(gu=-1,yu=0,Te&6)throw Error(z(327));var n=t.callbackNode;if(lo()&&t.callbackNode!==n)return null;var r=Lu(t,t===yt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eh(t,r);else{e=r;var s=Te;Te|=2;var i=JE();(yt!==t||St!==e)&&(vr=null,bo=it()+500,ai(t,e));do try{fP();break}catch(a){XE(t,a)}while(!0);Qm(),Xu.current=i,Te=s,ct!==null?e=0:(yt=null,St=0,e=dt)}if(e!==0){if(e===2&&(s=op(t),s!==0&&(r=s,e=Op(t,s))),e===1)throw n=Tl,ai(t,0),es(t,r),rn(t,it()),n;if(e===6)es(t,r);else{if(s=t.current.alternate,!(r&30)&&!hP(s)&&(e=eh(t,r),e===2&&(i=op(t),i!==0&&(r=i,e=Op(t,i))),e===1))throw n=Tl,ai(t,0),es(t,r),rn(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Gs(t,Xt,vr);break;case 3:if(es(t,r),(r&130023424)===r&&(e=ug+500-it(),10<e)){if(Lu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=pp(Gs.bind(null,t,Xt,vr),e);break}Gs(t,Xt,vr);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-qn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uP(r/1960))-r,10<r){t.timeoutHandle=pp(Gs.bind(null,t,Xt,vr),r);break}Gs(t,Xt,vr);break;case 5:Gs(t,Xt,vr);break;default:throw Error(z(329))}}}return rn(t,it()),t.callbackNode===n?YE.bind(null,t):null}function Op(t,e){var n=qa;return t.current.memoizedState.isDehydrated&&(ai(t,e).flags|=256),t=eh(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Mp(e)),t}function Mp(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function hP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~cg,e&=~$h,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function Hv(t){if(Te&6)throw Error(z(327));lo();var e=Lu(t,0);if(!(e&1))return rn(t,it()),null;var n=eh(t,e);if(t.tag!==0&&n===2){var r=op(t);r!==0&&(e=r,n=Op(t,r))}if(n===1)throw n=Tl,ai(t,0),es(t,e),rn(t,it()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,Xt,vr),rn(t,it()),null}function hg(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(bo=it()+500,Fh&&Os())}}function gi(t){os!==null&&os.tag===0&&!(Te&6)&&lo();var e=Te;Te|=1;var n=An.transition,r=Ne;try{if(An.transition=null,Ne=1,t)return t()}finally{Ne=r,An.transition=n,Te=e,!(Te&6)&&Os()}}function dg(){dn=no.current,$e(no)}function ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zA(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(qm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zu();break;case 3:wo(),$e(tn),$e(zt),tg();break;case 5:eg(r);break;case 4:wo();break;case 13:$e(He);break;case 19:$e(He);break;case 10:Ym(r.type._context);break;case 22:case 23:dg()}n=n.return}if(yt=t,ct=t=_s(t.current,null),St=dn=e,dt=0,Tl=null,cg=$h=mi=0,Xt=qa=null,Zs!==null){for(e=0;e<Zs.length;e++)if(n=Zs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zs=null}return t}function XE(t,e){do{var n=ct;try{if(Qm(),fu.current=Yu,Qu){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qu=!1}if(pi=0,gt=ht=qe=null,Wa=!1,xl=0,lg.current=null,n===null||n.return===null){dt=1,Tl=e,ct=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Nv(o);if(y!==null){y.flags&=-257,Dv(y,o,a,i,e),y.mode&1&&Rv(i,c,e),e=y,l=c;var x=e.updateQueue;if(x===null){var E=new Set;E.add(l),e.updateQueue=E}else x.add(l);break e}else{if(!(e&1)){Rv(i,c,e),fg();break e}l=Error(z(426))}}else if(We&&a.mode&1){var T=Nv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Dv(T,o,a,i,e),Km(xo(l,a));break e}}i=l=xo(l,a),dt!==4&&(dt=2),qa===null?qa=[i]:qa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=OE(i,l,e);Iv(i,v);break e;case 1:a=l;var _=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(gs===null||!gs.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=ME(i,a,e);Iv(i,N);break e}}i=i.return}while(i!==null)}eT(n)}catch(R){e=R,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function JE(){var t=Xu.current;return Xu.current=Yu,t===null?Yu:t}function fg(){(dt===0||dt===3||dt===2)&&(dt=4),yt===null||!(mi&268435455)&&!($h&268435455)||es(yt,St)}function eh(t,e){var n=Te;Te|=2;var r=JE();(yt!==t||St!==e)&&(vr=null,ai(t,e));do try{dP();break}catch(s){XE(t,s)}while(!0);if(Qm(),Te=n,Xu.current=r,ct!==null)throw Error(z(261));return yt=null,St=0,dt}function dP(){for(;ct!==null;)ZE(ct)}function fP(){for(;ct!==null&&!VC();)ZE(ct)}function ZE(t){var e=nT(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?eT(t):ct=e,lg.current=null}function eT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oP(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ct=null;return}}else if(n=iP(n,e,dn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);dt===0&&(dt=5)}function Gs(t,e,n){var r=Ne,s=An.transition;try{An.transition=null,Ne=1,pP(t,e,n,r)}finally{An.transition=s,Ne=r}return null}function pP(t,e,n,r){do lo();while(os!==null);if(Te&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GC(t,i),t===yt&&(ct=yt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jc||(jc=!0,rT(Mu,function(){return lo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=An.transition,An.transition=null;var o=Ne;Ne=1;var a=Te;Te|=4,lg.current=null,lP(t,n),GE(n,t),OA(dp),ju=!!hp,dp=hp=null,t.current=n,cP(n),FC(),Te=a,Ne=o,An.transition=i}else t.current=n;if(jc&&(jc=!1,os=t,Zu=s),i=t.pendingLanes,i===0&&(gs=null),BC(n.stateNode),rn(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ju)throw Ju=!1,t=Np,Np=null,t;return Zu&1&&t.tag!==0&&lo(),i=t.pendingLanes,i&1?t===Dp?Ka++:(Ka=0,Dp=t):Ka=0,Os(),null}function lo(){if(os!==null){var t=Ob(Zu),e=An.transition,n=Ne;try{if(An.transition=null,Ne=16>t?16:t,os===null)var r=!1;else{if(t=os,os=null,Zu=0,Te&6)throw Error(z(331));var s=Te;for(Te|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:Ha(8,h,i)}var f=h.child;if(f!==null)f.return=h,Q=f;else for(;Q!==null;){h=Q;var m=h.sibling,y=h.return;if(HE(h),h===c){Q=null;break}if(m!==null){m.return=y,Q=m;break}Q=y}}}var x=i.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ha(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Q=v;break e}Q=i.return}}var _=t.current;for(Q=_;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=_;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bh(9,a)}}catch(R){et(a,a.return,R)}if(a===o){Q=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,Q=N;break e}Q=a.return}}if(Te=s,Os(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Oh,t)}catch{}r=!0}return r}finally{Ne=n,An.transition=e}}return!1}function qv(t,e,n){e=xo(n,e),e=OE(t,e,1),t=ms(t,e,1),e=Kt(),t!==null&&(Wl(t,1,e),rn(t,e))}function et(t,e,n){if(t.tag===3)qv(t,t,n);else for(;e!==null;){if(e.tag===3){qv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gs===null||!gs.has(r))){t=xo(n,t),t=ME(e,t,1),e=ms(e,t,1),t=Kt(),e!==null&&(Wl(e,1,t),rn(e,t));break}}e=e.return}}function mP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(St&n)===n&&(dt===4||dt===3&&(St&130023424)===St&&500>it()-ug?ai(t,0):cg|=n),rn(t,e)}function tT(t,e){e===0&&(t.mode&1?(e=Sc,Sc<<=1,!(Sc&130023424)&&(Sc=4194304)):e=1);var n=Kt();t=Nr(t,e),t!==null&&(Wl(t,e,n),rn(t,n))}function gP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tT(t,n)}function yP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),tT(t,n)}var nT;nT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,sP(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,We&&e.flags&1048576&&oE(e,Wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mu(t,e),t=e.pendingProps;var s=yo(e,zt.current);ao(e,n),s=rg(null,e,r,t,s,n);var i=sg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(i=!0,Bu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jm(e),s.updater=zh,e.stateNode=s,s._reactInternals=e,xp(e,r,t,n),e=Tp(null,e,r,!0,i,n)):(e.tag=0,We&&i&&Hm(e),qt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vP(r),t=Un(r,t),s){case 0:e=Ep(null,e,r,t,n);break e;case 1:e=Lv(null,e,r,t,n);break e;case 11:e=Ov(null,e,r,t,n);break e;case 14:e=Mv(null,e,r,Un(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),Ep(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),Lv(t,e,r,s,n);case 3:e:{if(FE(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dE(t,e),Ku(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xo(Error(z(423)),e),e=jv(t,e,r,n,s);break e}else if(r!==s){s=xo(Error(z(424)),e),e=jv(t,e,r,n,s);break e}else for(pn=ps(e.stateNode.containerInfo.firstChild),yn=e,We=!0,Bn=null,n=uE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),r===s){e=Dr(t,e,n);break e}qt(t,e,r,n)}e=e.child}return e;case 5:return fE(e),t===null&&_p(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,fp(r,s)?o=null:i!==null&&fp(r,i)&&(e.flags|=32),VE(t,e),qt(t,e,o,n),e.child;case 6:return t===null&&_p(e),null;case 13:return UE(t,e,n);case 4:return Zm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vo(e,null,r,n):qt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),Ov(t,e,r,s,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,je(Hu,r._currentValue),r._currentValue=o,i!==null)if(Qn(i.value,o)){if(i.children===s.children&&!tn.current){e=Dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Cr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),vp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ao(e,n),s=Pn(s),r=r(s),e.flags|=1,qt(t,e,r,n),e.child;case 14:return r=e.type,s=Un(r,e.pendingProps),s=Un(r.type,s),Mv(t,e,r,s,n);case 15:return LE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),mu(t,e),e.tag=1,nn(r)?(t=!0,Bu(e)):t=!1,ao(e,n),DE(e,r,s),xp(e,r,s,n),Tp(null,e,r,!0,t,n);case 19:return zE(t,e,n);case 22:return jE(t,e,n)}throw Error(z(156,e.tag))};function rT(t,e){return Pb(t,e)}function _P(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,r){return new _P(t,e,n,r)}function pg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vP(t){if(typeof t=="function")return pg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dm)return 11;if(t===Om)return 14}return 2}function _s(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _u(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")pg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qi:return li(n.children,s,i,e);case Nm:o=8,s|=8;break;case Hf:return t=Sn(12,n,e,s|2),t.elementType=Hf,t.lanes=i,t;case qf:return t=Sn(13,n,e,s),t.elementType=qf,t.lanes=i,t;case Kf:return t=Sn(19,n,e,s),t.elementType=Kf,t.lanes=i,t;case fb:return Wh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hb:o=10;break e;case db:o=9;break e;case Dm:o=11;break e;case Om:o=14;break e;case Xr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function li(t,e,n,r){return t=Sn(7,t,r,e),t.lanes=n,t}function Wh(t,e,n,r){return t=Sn(22,t,r,e),t.elementType=fb,t.lanes=n,t.stateNode={isHidden:!1},t}function pf(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function mf(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gd(0),this.expirationTimes=Gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mg(t,e,n,r,s,i,o,a,l){return t=new wP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jm(i),t}function xP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sT(t){if(!t)return Is;t=t._reactInternals;e:{if(Ci(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(nn(n))return sE(t,n,e)}return e}function iT(t,e,n,r,s,i,o,a,l){return t=mg(n,r,!0,t,s,i,o,a,l),t.context=sT(null),n=t.current,r=Kt(),s=ys(n),i=Cr(r,s),i.callback=e??null,ms(n,i,s),t.current.lanes=s,Wl(t,s,r),rn(t,r),t}function Hh(t,e,n,r){var s=e.current,i=Kt(),o=ys(s);return n=sT(n),e.context===null?e.context=n:e.pendingContext=n,e=Cr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ms(s,e,o),t!==null&&(Kn(t,s,o,i),du(t,s,o)),o}function th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gg(t,e){Kv(t,e),(t=t.alternate)&&Kv(t,e)}function bP(){return null}var oT=typeof reportError=="function"?reportError:function(t){console.error(t)};function yg(t){this._internalRoot=t}qh.prototype.render=yg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Hh(t,e,null,null)};qh.prototype.unmount=yg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gi(function(){Hh(null,t,null,null)}),e[Rr]=null}};function qh(t){this._internalRoot=t}qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=jb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&Fb(t)}};function _g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gv(){}function EP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=th(o);i.call(c)}}var o=iT(e,r,t,0,null,!1,!1,"",Gv);return t._reactRootContainer=o,t[Rr]=o.current,gl(t.nodeType===8?t.parentNode:t),gi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=th(l);a.call(c)}}var l=mg(t,0,!1,null,null,!1,!1,"",Gv);return t._reactRootContainer=l,t[Rr]=l.current,gl(t.nodeType===8?t.parentNode:t),gi(function(){Hh(e,l,n,r)}),l}function Gh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=th(o);a.call(l)}}Hh(e,o,t,s)}else o=EP(n,e,t,s,r);return th(o)}Mb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ia(e.pendingLanes);n!==0&&(jm(e,n|1),rn(e,it()),!(Te&6)&&(bo=it()+500,Os()))}break;case 13:gi(function(){var r=Nr(t,1);if(r!==null){var s=Kt();Kn(r,t,1,s)}}),gg(t,1)}};Vm=function(t){if(t.tag===13){var e=Nr(t,134217728);if(e!==null){var n=Kt();Kn(e,t,134217728,n)}gg(t,134217728)}};Lb=function(t){if(t.tag===13){var e=ys(t),n=Nr(t,e);if(n!==null){var r=Kt();Kn(n,t,e,r)}gg(t,e)}};jb=function(){return Ne};Vb=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};rp=function(t,e,n){switch(e){case"input":if(Yf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vh(r);if(!s)throw Error(z(90));mb(r),Yf(r,s)}}}break;case"textarea":yb(t,n);break;case"select":e=n.value,e!=null&&ro(t,!!n.multiple,e,!1)}};Tb=hg;Ib=gi;var TP={usingClientEntryPoint:!1,Events:[ql,Yi,Vh,bb,Eb,hg]},ma={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IP={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cb(t),t===null?null:t.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||bP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{Oh=Vc.inject(IP),ar=Vc}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TP;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(e))throw Error(z(200));return xP(t,e,null,n)};wn.createRoot=function(t,e){if(!_g(t))throw Error(z(299));var n=!1,r="",s=oT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mg(t,1,!1,null,null,n,!1,r,s),t[Rr]=e.current,gl(t.nodeType===8?t.parentNode:t),new yg(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Cb(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return gi(t)};wn.hydrate=function(t,e,n){if(!Kh(e))throw Error(z(200));return Gh(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!_g(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=oT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iT(e,null,t,1,n??null,s,!1,i,o),t[Rr]=e.current,gl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qh(e)};wn.render=function(t,e,n){if(!Kh(e))throw Error(z(200));return Gh(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!Kh(t))throw Error(z(40));return t._reactRootContainer?(gi(function(){Gh(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};wn.unstable_batchedUpdates=hg;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kh(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Gh(t,e,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function aT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aT)}catch(t){console.error(t)}}aT(),ab.exports=wn;var kP=ab.exports,lT,Qv=kP;lT=Qv.createRoot,Qv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Il(){return Il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Il.apply(this,arguments)}var as;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(as||(as={}));const Yv="popstate";function SP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Lp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nh(s)}return AP(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CP(){return Math.random().toString(36).substr(2,8)}function Xv(t,e){return{usr:t.state,key:t.key,idx:e}}function Lp(t,e,n,r){return n===void 0&&(n=null),Il({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vo(e):e,{state:n,key:e&&e.key||r||CP()})}function nh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function AP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=as.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Il({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=as.Pop;let T=h(),v=T==null?null:T-c;c=T,l&&l({action:a,location:E.location,delta:v})}function m(T,v){a=as.Push;let _=Lp(E.location,T,v);c=h()+1;let b=Xv(_,c),N=E.createHref(_);try{o.pushState(b,"",N)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(N)}i&&l&&l({action:a,location:E.location,delta:1})}function y(T,v){a=as.Replace;let _=Lp(E.location,T,v);c=h();let b=Xv(_,c),N=E.createHref(_);o.replaceState(b,"",N),i&&l&&l({action:a,location:E.location,delta:0})}function x(T){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof T=="string"?T:nh(T);return _=_.replace(/ $/,"%20"),Ke(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let E={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Yv,f),l=T,()=>{s.removeEventListener(Yv,f),l=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let v=x(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(T){return o.go(T)}};return E}var Jv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jv||(Jv={}));function PP(t,e,n){return n===void 0&&(n="/"),RP(t,e,n)}function RP(t,e,n,r){let s=typeof e=="string"?Vo(e):e,i=Eo(s.pathname||"/",n);if(i==null)return null;let o=uT(t);NP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=$P(i);a=zP(o[l],c)}return a}function uT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ke(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=vs([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uT(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:FP(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of hT(i.path))s(i,o,l)}),e}function hT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=hT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function NP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DP=/^:[\w-]+$/,OP=3,MP=2,LP=1,jP=10,VP=-2,Zv=t=>t==="*";function FP(t,e){let n=t.split("/"),r=n.length;return n.some(Zv)&&(r+=VP),e&&(r+=MP),n.filter(s=>!Zv(s)).reduce((s,i)=>s+(DP.test(i)?OP:i===""?LP:jP),r)}function UP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function zP(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=jp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:vs([i,f.pathname]),pathnameBase:KP(vs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=vs([i,f.pathnameBase]))}return o}function jp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let E=a[f]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const x=a[f];return y&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function BP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $P(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Eo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Vo(t):t;return{pathname:n?n.startsWith("/")?n:HP(n,e):e,search:GP(r),hash:QP(s)}}function HP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vg(t,e){let n=qP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function wg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Vo(t):(s=Il({},t),Ke(!s.pathname||!s.pathname.includes("?"),gf("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),gf("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),gf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=WP(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),KP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dT=["post","put","patch","delete"];new Set(dT);const XP=["get",...dT];new Set(XP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kl.apply(this,arguments)}const Qh=O.createContext(null),fT=O.createContext(null),Fr=O.createContext(null),Yh=O.createContext(null),Ms=O.createContext({outlet:null,matches:[],isDataRoute:!1}),pT=O.createContext(null);function JP(t,e){let{relative:n}=e===void 0?{}:e;Fo()||Ke(!1);let{basename:r,navigator:s}=O.useContext(Fr),{hash:i,pathname:o,search:a}=Jh(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:vs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Fo(){return O.useContext(Yh)!=null}function Ls(){return Fo()||Ke(!1),O.useContext(Yh).location}function mT(t){O.useContext(Fr).static||O.useLayoutEffect(t)}function Xh(){let{isDataRoute:t}=O.useContext(Ms);return t?hR():ZP()}function ZP(){Fo()||Ke(!1);let t=O.useContext(Qh),{basename:e,future:n,navigator:r}=O.useContext(Fr),{matches:s}=O.useContext(Ms),{pathname:i}=Ls(),o=JSON.stringify(vg(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return mT(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=wg(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:vs([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function Jh(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Fr),{matches:s}=O.useContext(Ms),{pathname:i}=Ls(),o=JSON.stringify(vg(s,r.v7_relativeSplatPath));return O.useMemo(()=>wg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function eR(t,e){return tR(t,e)}function tR(t,e,n,r){Fo()||Ke(!1);let{navigator:s}=O.useContext(Fr),{matches:i}=O.useContext(Ms),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ls(),h;if(e){var f;let T=typeof e=="string"?Vo(e):e;l==="/"||(f=T.pathname)!=null&&f.startsWith(l)||Ke(!1),h=T}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let T=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=PP(t,{pathname:y}),E=oR(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:vs([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:vs([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&E?O.createElement(Yh.Provider,{value:{location:kl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:as.Pop}},E):E}function nR(){let t=uR(),e=YP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const rR=O.createElement(nR,null);class sR extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Ms.Provider,{value:this.props.routeContext},O.createElement(pT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iR(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(Qh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Ms.Provider,{value:e},r)}function oR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Ke(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=n,x=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,x=!1,E=null,T=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,E=f.route.errorElement||rR,l&&(c<0&&m===0?(dR("route-fallback"),x=!0,T=null):c===m&&(x=!0,T=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),_=()=>{let b;return y?b=E:x?b=T:f.route.Component?b=O.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,O.createElement(iR,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?O.createElement(sR,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var gT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gT||{}),yT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yT||{});function aR(t){let e=O.useContext(Qh);return e||Ke(!1),e}function lR(t){let e=O.useContext(fT);return e||Ke(!1),e}function cR(t){let e=O.useContext(Ms);return e||Ke(!1),e}function _T(t){let e=cR(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function uR(){var t;let e=O.useContext(pT),n=lR(),r=_T();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function hR(){let{router:t}=aR(gT.UseNavigateStable),e=_T(yT.UseNavigateStable),n=O.useRef(!1);return mT(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,kl({fromRouteId:e},i)))},[t,e])}const e0={};function dR(t,e,n){e0[t]||(e0[t]=!0)}function fR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pR(t){let{to:e,replace:n,state:r,relative:s}=t;Fo()||Ke(!1);let{future:i,static:o}=O.useContext(Fr),{matches:a}=O.useContext(Ms),{pathname:l}=Ls(),c=Xh(),h=wg(e,vg(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function Gr(t){Ke(!1)}function mR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=as.Pop,navigator:i,static:o=!1,future:a}=t;Fo()&&Ke(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:i,static:o,future:kl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Vo(r));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:x="default"}=r,E=O.useMemo(()=>{let T=Eo(h,l);return T==null?null:{location:{pathname:T,search:f,hash:m,state:y,key:x},navigationType:s}},[l,h,f,m,y,x,s]);return E==null?null:O.createElement(Fr.Provider,{value:c},O.createElement(Yh.Provider,{children:n,value:E}))}function gR(t){let{children:e,location:n}=t;return eR(Vp(e),n)}new Promise(()=>{});function Vp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,Vp(r.props.children,i));return}r.type!==Gr&&Ke(!1),!r.props.index||!r.props.children||Ke(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Vp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rh.apply(this,arguments)}function vT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function yR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _R(t,e){return t.button===0&&(!e||e==="_self")&&!yR(t)}const vR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],xR="6";try{window.__reactRouterVersion=xR}catch{}const bR=O.createContext({isTransitioning:!1}),ER="startTransition",t0=mC[ER];function TR(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=SP({window:s,v5Compat:!0}));let o=i.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=O.useCallback(f=>{c&&t0?t0(()=>l(f)):l(f)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>fR(r),[r]),O.createElement(mR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const IR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xg=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,m=vT(e,vR),{basename:y}=O.useContext(Fr),x,E=!1;if(typeof c=="string"&&kR.test(c)&&(x=c,IR))try{let b=new URL(window.location.href),N=c.startsWith("//")?new URL(b.protocol+c):new URL(c),R=Eo(N.pathname,y);N.origin===b.origin&&R!=null?c=R+N.search+N.hash:E=!0}catch{}let T=JP(c,{relative:s}),v=CR(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function _(b){r&&r(b),b.defaultPrevented||v(b)}return O.createElement("a",rh({},m,{href:x||T,onClick:E||i?r:_,ref:n,target:l}))}),er=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,f=vT(e,wR),m=Jh(l,{relative:f.relative}),y=Ls(),x=O.useContext(fT),{navigator:E,basename:T}=O.useContext(Fr),v=x!=null&&AR(m)&&c===!0,_=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,b=y.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(b=b.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&T&&(N=Eo(N,T)||N);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=b===_||!o&&b.startsWith(_)&&b.charAt(R)==="/",k=N!=null&&(N===_||!o&&N.startsWith(_)&&N.charAt(_.length)==="/"),w={isActive:M,isPending:k,isTransitioning:v},S=M?r:void 0,I;typeof i=="function"?I=i(w):I=[i,M?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(w):a;return O.createElement(xg,rh({},f,{"aria-current":S,className:I,ref:n,style:P,to:l,viewTransition:c}),typeof h=="function"?h(w):h)});var Fp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fp||(Fp={}));var n0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(n0||(n0={}));function SR(t){let e=O.useContext(Qh);return e||Ke(!1),e}function CR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Xh(),c=Ls(),h=Jh(t,{relative:o});return O.useCallback(f=>{if(_R(f,n)){f.preventDefault();let m=r!==void 0?r:nh(c)===nh(h);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function AR(t,e){e===void 0&&(e={});let n=O.useContext(bR);n==null&&Ke(!1);let{basename:r}=SR(Fp.useViewTransitionState),s=Jh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Eo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Eo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return jp(s.pathname,o)!=null||jp(s.pathname,i)!=null}const wT=O.createContext({theme:"light",toggleTheme:()=>{}});function PR({children:t}){const[e,n]=O.useState(()=>{const s=typeof window<"u"?localStorage.getItem("theme"):null;return s==="light"||s==="dark"?s:"light"});O.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=O.useMemo(()=>({theme:e,toggleTheme:()=>n(s=>s==="dark"?"light":"dark")}),[e]);return d.jsx(wT.Provider,{value:r,children:t})}function RR(){return O.useContext(wT)}var r0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},NR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},bT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new DR;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const x=c<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OR=function(t){const e=xT(t);return bT.encodeByteArray(e,!0)},sh=function(t){return OR(t).replace(/\./g,"")},ET=function(t){try{return bT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=()=>MR().__FIREBASE_DEFAULTS__,jR=()=>{if(typeof process>"u"||typeof r0>"u")return;const t=r0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ET(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return LR()||jR()||VR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TT=t=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},IT=t=>{const e=TT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kT=()=>{var t;return(t=Zh())===null||t===void 0?void 0:t.config},ST=t=>{var e;return(e=Zh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sh(JSON.stringify(n)),sh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function zR(){var t;const e=(t=Zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WR(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HR(){return!zR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eg(){try{return typeof indexedDB=="object"}catch{return!1}}function Tg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function AT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="FirebaseError";class Mn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qR,Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ai.prototype.create)}}class Ai{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?KR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Mn(s,a,r)}}function KR(t,e){return t.replace(GR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GR=/\{\$([^}]+)}/g;function QR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(s0(i)&&s0(o)){if(!Sl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function s0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YR(t,e){const n=new XR(t,e);return n.subscribe.bind(n)}class XR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=yf),s.error===void 0&&(s.error=yf),s.complete===void 0&&(s.complete=yf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=1e3,eN=2,tN=4*60*60*1e3,nN=.5;function i0(t,e=ZR,n=eN){const r=e*Math.pow(n,t),s=Math.round(nN*r*(Math.random()-.5)*2);return Math.min(tN,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class Nn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new FR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iN(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sN(t){return t===Qs?void 0:t}function iN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const aN={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},lN=we.INFO,cN={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},uN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=cN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ed{constructor(e){this.name=e,this._logLevel=lN,this._logHandler=uN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const hN=(t,e)=>e.some(n=>t instanceof n);let o0,a0;function dN(){return o0||(o0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fN(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PT=new WeakMap,Up=new WeakMap,RT=new WeakMap,_f=new WeakMap,Ig=new WeakMap;function pN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ws(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PT.set(n,t)}).catch(()=>{}),Ig.set(e,t),e}function mN(t){if(Up.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Up.set(t,e)}let zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gN(t){zp=t(zp)}function yN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vf(this),e,...n);return RT.set(r,e.sort?e.sort():[e]),ws(r)}:fN().includes(t)?function(...e){return t.apply(vf(this),e),ws(PT.get(this))}:function(...e){return ws(t.apply(vf(this),e))}}function _N(t){return typeof t=="function"?yN(t):(t instanceof IDBTransaction&&mN(t),hN(t,dN())?new Proxy(t,zp):t)}function ws(t){if(t instanceof IDBRequest)return pN(t);if(_f.has(t))return _f.get(t);const e=_N(t);return e!==t&&(_f.set(t,e),Ig.set(e,t)),e}const vf=t=>Ig.get(t);function NT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ws(o.result),l.oldVersion,l.newVersion,ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const vN=["get","getKey","getAll","getAllKeys","count"],wN=["put","add","delete","clear"],wf=new Map;function l0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wf.get(e))return wf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vN.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return wf.set(e,i),i}gN(t=>({...t,get:(e,n,r)=>l0(e,n)||t.get(e,n,r),has:(e,n)=>!!l0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bp="@firebase/app",c0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new ed("@firebase/app"),EN="@firebase/app-compat",TN="@firebase/analytics-compat",IN="@firebase/analytics",kN="@firebase/app-check-compat",SN="@firebase/app-check",CN="@firebase/auth",AN="@firebase/auth-compat",PN="@firebase/database",RN="@firebase/data-connect",NN="@firebase/database-compat",DN="@firebase/functions",ON="@firebase/functions-compat",MN="@firebase/installations",LN="@firebase/installations-compat",jN="@firebase/messaging",VN="@firebase/messaging-compat",FN="@firebase/performance",UN="@firebase/performance-compat",zN="@firebase/remote-config",BN="@firebase/remote-config-compat",$N="@firebase/storage",WN="@firebase/storage-compat",HN="@firebase/firestore",qN="@firebase/vertexai-preview",KN="@firebase/firestore-compat",GN="firebase",QN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="[DEFAULT]",YN={[Bp]:"fire-core",[EN]:"fire-core-compat",[IN]:"fire-analytics",[TN]:"fire-analytics-compat",[SN]:"fire-app-check",[kN]:"fire-app-check-compat",[CN]:"fire-auth",[AN]:"fire-auth-compat",[PN]:"fire-rtdb",[RN]:"fire-data-connect",[NN]:"fire-rtdb-compat",[DN]:"fire-fn",[ON]:"fire-fn-compat",[MN]:"fire-iid",[LN]:"fire-iid-compat",[jN]:"fire-fcm",[VN]:"fire-fcm-compat",[FN]:"fire-perf",[UN]:"fire-perf-compat",[zN]:"fire-rc",[BN]:"fire-rc-compat",[$N]:"fire-gcs",[WN]:"fire-gcs-compat",[HN]:"fire-fst",[KN]:"fire-fst-compat",[qN]:"fire-vertex","fire-js":"fire-js",[GN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,XN=new Map,Wp=new Map;function u0(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yn(t){const e=t.name;if(Wp.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Wp.set(e,t);for(const n of ih.values())u0(n,t);for(const n of XN.values())u0(n,t);return!0}function js(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new Ai("app","Firebase",JN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=QN;function DT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$p,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw xs.create("bad-app-name",{appName:String(s)});if(n||(n=kT()),!n)throw xs.create("no-options");const i=ih.get(s);if(i){if(Sl(n,i.options)&&Sl(r,i.config))return i;throw xs.create("duplicate-app",{appName:s})}const o=new oN(s);for(const l of Wp.values())o.addComponent(l);const a=new ZN(n,r,o);return ih.set(s,a),a}function td(t=$p){const e=ih.get(t);if(!e&&t===$p&&kT())return DT();if(!e)throw xs.create("no-app",{appName:t});return e}function sn(t,e,n){var r;let s=(r=YN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(a.join(" "));return}Yn(new Nn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="firebase-heartbeat-database",t2=1,Cl="firebase-heartbeat-store";let xf=null;function OT(){return xf||(xf=NT(e2,t2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xs.create("idb-open",{originalErrorMessage:t.message})})),xf}async function n2(t){try{const n=(await OT()).transaction(Cl),r=await n.objectStore(Cl).get(MT(t));return await n.done,r}catch(e){if(e instanceof Mn)Or.warn(e.message);else{const n=xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(n.message)}}}async function h0(t,e){try{const r=(await OT()).transaction(Cl,"readwrite");await r.objectStore(Cl).put(e,MT(t)),await r.done}catch(n){if(n instanceof Mn)Or.warn(n.message);else{const r=xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Or.warn(r.message)}}}function MT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1024,s2=30*24*60*60*1e3;class i2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=d0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=s2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d0(),{heartbeatsToSend:r,unsentEntries:s}=o2(this._heartbeatsCache.heartbeats),i=sh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Or.warn(n),""}}}function d0(){return new Date().toISOString().substring(0,10)}function o2(t,e=r2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),f0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),f0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eg()?Tg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return h0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return h0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f0(t){return sh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){Yn(new Nn("platform-logger",e=>new xN(e),"PRIVATE")),Yn(new Nn("heartbeat",e=>new i2(e),"PRIVATE")),sn(Bp,c0,t),sn(Bp,c0,"esm2017"),sn("fire-js","")}l2("");var c2="firebase",u2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn(c2,u2,"app");function kg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function LT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h2=LT,jT=new Ai("auth","Firebase",LT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new ed("@firebase/auth");function d2(t,...e){oh.logLevel<=we.WARN&&oh.warn(`Auth (${Pi}): ${t}`,...e)}function vu(t,...e){oh.logLevel<=we.ERROR&&oh.error(`Auth (${Pi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw Cg(t,...e)}function on(t,...e){return Cg(t,...e)}function Sg(t,e,n){const r=Object.assign(Object.assign({},h2()),{[e]:n});return new Ai("auth","Firebase",r).create(e,{appName:t.name})}function Gn(t){return Sg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VT(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),Sg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jT.create(t,...e)}function Y(t,e,...n){if(!t)throw Cg(e,...n)}function Ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function Mr(t,e){t||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FT(){return p0()==="http:"||p0()==="https:"}function p0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FT()||bg()||"connection"in navigator)?navigator.onLine:!0}function p2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=UR()||$R()}get(){return f2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=new Gl(3e4,6e4);function cn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bn(t,e,n,r,s={}){return zT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Uo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return BR()||(c.referrerPolicy="no-referrer"),UT.fetch()(BT(t,t.config.apiHost,n,a),c)})}async function zT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},m2),e);try{const s=new _2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Aa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Aa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Aa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Aa(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Sg(t,h,c);Dn(t,h)}}catch(s){if(s instanceof Mn)throw s;Dn(t,"network-request-failed",{message:String(s)})}}async function Vs(t,e,n,r,s={}){const i=await bn(t,e,n,r,s);return"mfaPendingCredential"in i&&Dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function BT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ag(t.config,s):`${t.config.apiScheme}://${s}`}function y2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),g2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Aa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){return t!==void 0&&t.getResponse!==void 0}function g0(t){return t!==void 0&&t.enterprise!==void 0}class v2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return y2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(t){return(await bn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function x2(t,e){return bn(t,"GET","/v2/recaptchaConfig",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(t,e){return bn(t,"POST","/v1/accounts:delete",e)}async function $T(t,e){return bn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E2(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=Pg(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ga(bf(s.auth_time)),issuedAtTime:Ga(bf(s.iat)),expirationTime:Ga(bf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bf(t){return Number(t)*1e3}function Pg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const s=ET(n);return s?JSON.parse(s):(vu("Failed to decode base64 JWT payload"),null)}catch(s){return vu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function y0(t){const e=Pg(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Mn&&T2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function T2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(t){var e;const n=t.auth,r=await t.getIdToken(),s=await To(t,$T(n,{idToken:r}));Y(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?WT(i.providerUserInfo):[],a=S2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new qp(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function k2(t){const e=Qe(t);await ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function WT(t){return t.map(e=>{var{providerId:n}=e,r=kg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t,e){const n=await zT(t,{},async()=>{const r=Uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=BT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function A2(t,e){return bn(t,"POST","/v2/accounts:revokeToken",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=y0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await C2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new co;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await To(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return E2(this,e)}reload(){return k2(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ah(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Gn(this.auth));const e=await this.getIdToken();return await To(this,b2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:N,isAnonymous:R,providerData:M,stsTokenManager:k}=n;Y(b&&k,e,"internal-error");const w=co.fromJSON(this.name,k);Y(typeof b=="string",e,"internal-error"),qr(f,e.name),qr(m,e.name),Y(typeof N=="boolean",e,"internal-error"),Y(typeof R=="boolean",e,"internal-error"),qr(y,e.name),qr(x,e.name),qr(E,e.name),qr(T,e.name),qr(v,e.name),qr(_,e.name);const S=new kr({uid:b,auth:e,email:m,emailVerified:N,displayName:f,isAnonymous:R,photoURL:x,phoneNumber:y,tenantId:E,stsTokenManager:w,createdAt:v,lastLoginAt:_});return M&&Array.isArray(M)&&(S.providerData=M.map(I=>Object.assign({},I))),T&&(S._redirectEventId=T),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new co;s.updateFromServerResponse(n);const i=new kr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ah(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?WT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new co;a.updateFromIdToken(r);const l=new kr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map;function Sr(t){Mr(t instanceof Function,"Expected a class definition");let e=_0.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HT.type="NONE";const v0=HT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t,e,n){return`firebase:${t}:${e}:${n}`}class uo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=wu(this.userKey,s.apiKey,i),this.fullPersistenceKey=wu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new uo(Sr(v0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Sr(v0);const o=wu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=kr._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new uo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new uo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XT(e))return"Blackberry";if(JT(e))return"Webos";if(KT(e))return"Safari";if((e.includes("chrome/")||GT(e))&&!e.includes("edge/"))return"Chrome";if(YT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qT(t=Bt()){return/firefox\//i.test(t)}function KT(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GT(t=Bt()){return/crios\//i.test(t)}function QT(t=Bt()){return/iemobile/i.test(t)}function YT(t=Bt()){return/android/i.test(t)}function XT(t=Bt()){return/blackberry/i.test(t)}function JT(t=Bt()){return/webos/i.test(t)}function Rg(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function P2(t=Bt()){var e;return Rg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function R2(){return WR()&&document.documentMode===10}function ZT(t=Bt()){return Rg(t)||YT(t)||JT(t)||XT(t)||/windows phone/i.test(t)||QT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e=[]){let n;switch(t){case"Browser":n=w0(Bt());break;case"Worker":n=`${w0(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e={}){return bn(t,"GET","/v2/passwordPolicy",cn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=6;class M2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:O2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x0(this),this.idTokenSubscription=new x0(this),this.beforeStateQueue=new N2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await uo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $T(this,{idToken:e}),r=await kr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ah(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Gn(this));const n=e?Qe(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D2(this),n=new M2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ai("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await A2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sr(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await uo.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&d2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ln(t){return Qe(t)}class x0{constructor(e){this.auth=e,this.observer=null,this.addObserver=YR(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j2(t){Ql=t}function Ng(t){return Ql.loadJS(t)}function V2(){return Ql.recaptchaV2Script}function F2(){return Ql.recaptchaEnterpriseScript}function U2(){return Ql.gapiScript}function tI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const z2="recaptcha-enterprise",B2="NO_RECAPTCHA";class $2{constructor(e){this.type=z2,this.auth=Ln(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{x2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new v2(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;g0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(B2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&g0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=F2();l.length!==0&&(l+=a),Ng(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function b0(t,e,n,r=!1){const s=new $2(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Kp(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await b0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await b0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t,e){const n=js(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Sl(i,e??{}))return s;Dn(s,"already-initialized")}return n.initialize({options:e})}function H2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function q2(t,e,n){const r=Ln(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=nI(e),{host:o,port:a}=K2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),G2()}function nI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function K2(t){const e=nI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:E0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:E0(o)}}}function E0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function Q2(t,e){return bn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e){return Vs(t,"POST","/v1/accounts:signInWithPassword",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return Vs(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}async function J2(t,e){return Vs(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends nd{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Al(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Al(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kp(e,n,"signInWithPassword",Y2);case"emailLink":return X2(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kp(e,r,"signUpPassword",Q2);case"emailLink":return J2(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(t,e){return Vs(t,"POST","/v1/accounts:signInWithIdp",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="http://localhost";class yi extends nd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=kg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new yi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ho(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ho(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ho(e,n)}buildRequest(){const e={requestUri:Z2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e){return bn(t,"POST","/v1/accounts:sendVerificationCode",cn(t,e))}async function tD(t,e){return Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e))}async function nD(t,e){const n=await Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e));if(n.temporaryProof)throw Aa(t,"account-exists-with-different-credential",n);return n}const rD={USER_NOT_FOUND:"user-not-found"};async function sD(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,n),rD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends nd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Qa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Qa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return tD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return nD(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return sD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Qa({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oD(t){const e=Sa(Ca(t)).link,n=e?Sa(Ca(e)).deep_link_id:null,r=Sa(Ca(t)).deep_link_id;return(r?Sa(Ca(r)).link:null)||r||n||e||t}class Dg{constructor(e){var n,r,s,i,o,a;const l=Sa(Ca(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=iD((s=l.mode)!==null&&s!==void 0?s:null);Y(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=oD(e);try{return new Dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return Al._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Dg.parseLink(n);return Y(r,"argument-error"),Al._fromEmailAndCode(e,r.code,r.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends rd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Yl{constructor(){super("facebook.com")}static credential(e){return yi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yi._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return br.credential(n,r)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Yl{constructor(){super("github.com")}static credential(e){return yi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Yl{constructor(){super("twitter.com")}static credential(e,n){return yi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){return Vs(t,"POST","/v1/accounts:signUp",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await kr._fromIdTokenResponse(e,r,s),o=T0(r);return new _i({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=T0(r);return new _i({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function T0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends Mn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lh(e,n,r,s)}}function rI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(t,i,e,r):i})}async function lD(t,e,n=!1){const r=await To(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _i._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t,e,n=!1){const{auth:r}=t;if(mn(r.app))return Promise.reject(Gn(r));const s="reauthenticate";try{const i=await To(t,rI(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=Pg(i.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),_i._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(t,e,n=!1){if(mn(t.app))return Promise.reject(Gn(t));const r="signIn",s=await rI(t,r,e),i=await _i._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function iI(t,e){return sI(Ln(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t){const e=Ln(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uD(t,e,n){if(mn(t.app))return Promise.reject(Gn(t));const r=Ln(t),o=await Kp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oI(t),l}),a=await _i._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function hD(t,e,n){return mn(t.app)?Promise.reject(Gn(t)):iI(Qe(t),zo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return bn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await To(r,dD(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function fD(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function pD(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function mD(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function gD(t){return Qe(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t,e){return bn(t,"POST","/v2/accounts/mfaEnrollment:start",cn(t,e))}const ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=1e3,vD=10;class cI extends lI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);R2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_D)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cI.type="LOCAL";const wD=cI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends lI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uI.type="SESSION";const hI=uI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new sd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await xD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Og("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return window}function ED(t){lt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(){return typeof lt().WorkerGlobalScope<"u"&&typeof lt().importScripts=="function"}async function TD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ID(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kD(){return Mg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firebaseLocalStorageDb",SD=1,uh="firebaseLocalStorage",fI="fbase_key";class Xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function id(t,e){return t.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function CD(){const t=indexedDB.deleteDatabase(dI);return new Xl(t).toPromise()}function Gp(){const t=indexedDB.open(dI,SD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uh,{keyPath:fI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await CD(),e(await Gp()))})})}async function I0(t,e,n){const r=id(t,!0).put({[fI]:e,value:n});return new Xl(r).toPromise()}async function AD(t,e){const n=id(t,!1).get(e),r=await new Xl(n).toPromise();return r===void 0?null:r.value}function k0(t,e){const n=id(t,!0).delete(e);return new Xl(n).toPromise()}const PD=800,RD=3;class pI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sd._getInstance(kD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TD(),!this.activeServiceWorker)return;this.sender=new bD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ID()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await I0(e,ch,"1"),await k0(e,ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>I0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=id(s,!1).getAll();return new Xl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pI.type="LOCAL";const ND=pI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t,e){return bn(t,"POST","/v2/accounts/mfaSignIn:start",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=500,MD=6e4,Fc=1e12;class LD{constructor(e){this.auth=e,this.counter=Fc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new jD(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Fc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Fc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Fc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class jD{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Y(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=VD(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},MD)},OD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function VD(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=tI("rcb"),FD=new Gl(3e4,6e4);class UD{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=lt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Y(zD(n),e,"argument-error"),this.shouldResolveImmediately(n)&&m0(lt().grecaptcha)?Promise.resolve(lt().grecaptcha):new Promise((r,s)=>{const i=lt().setTimeout(()=>{s(on(e,"network-request-failed"))},FD.get());lt()[Ef]=()=>{lt().clearTimeout(i),delete lt()[Ef];const a=lt().grecaptcha;if(!a||!m0(a)){s(on(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const f=l(c,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${V2()}?${Uo({onload:Ef,render:"explicit",hl:n})}`;Ng(o).catch(()=>{clearTimeout(i),s(on(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=lt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function zD(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class BD{async load(e){return new LD(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="recaptcha",$D={theme:"light",type:"image"};class WD{constructor(e,n,r=Object.assign({},$D)){this.parameters=r,this.type=mI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(e),this.isInvisible=this.parameters.size==="invisible",Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Y(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new BD:new UD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=lt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Y(FT()&&!Mg(),this.auth,"internal-error"),await HD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await w2(this.auth);Y(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function HD(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Qa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function KD(t,e,n){if(mn(t.app))return Promise.reject(Gn(t));const r=Ln(t),s=await GD(r,e,Qe(n));return new qD(s,i=>iI(r,i))}async function GD(t,e,n){var r;const s=await n.verify();try{Y(typeof s=="string",t,"argument-error"),Y(n.type===mI,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return Y(o.type==="enroll",t,"internal-error"),(await yD(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Y(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return Y(a,t,"missing-multi-factor-info"),(await DD(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await eD(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e){return e?Sr(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends nd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QD(t){return sI(t.auth,new jg(t),t.bypassAuthState)}function YD(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),cD(n,new jg(t),t.bypassAuthState)}async function XD(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),lD(n,new jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QD;case"linkViaPopup":case"linkViaRedirect":return XD;case"reauthViaPopup":case"reauthViaRedirect":return YD;default:Dn(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Gl(2e3,1e4);async function ZD(t,e,n){if(mn(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const r=Ln(t);VT(t,e,rd);const s=Lg(r,n);return new ti(r,"signInViaPopup",e,s).executeNotNull()}class ti extends gI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ti.currentPopupAction&&ti.currentPopupAction.cancel(),ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JD.get())};e()}}ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="pendingRedirect",xu=new Map;class tO extends gI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xu.get(this.auth._key());if(!e){try{const r=await nO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xu.set(this.auth._key(),e)}return this.bypassAuthState||xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nO(t,e){const n=_I(e),r=yI(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function rO(t,e){return yI(t)._set(_I(e),"true")}function sO(t,e){xu.set(t._key(),e)}function yI(t){return Sr(t._redirectPersistence)}function _I(t){return wu(eO,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e,n){return iO(t,e,n)}async function iO(t,e,n){if(mn(t.app))return Promise.reject(Gn(t));const r=Ln(t);VT(t,e,rd),await r._initializationPromise;const s=Lg(r,n);return await rO(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function oO(t,e){return await Ln(t)._initializationPromise,vI(t,e,!1)}async function vI(t,e,n=!1){if(mn(t.app))return Promise.reject(Gn(t));const r=Ln(t),s=Lg(r,e),o=await new tO(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=10*60*1e3;class lO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aO&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e={}){return bn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dO=/^https?/;async function fO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uO(t);for(const n of e)try{if(pO(n))return}catch{}Dn(t,"unauthorized-domain")}function pO(t){const e=Hp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dO.test(n))return!1;if(hO.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=new Gl(3e4,6e4);function A0(){const t=lt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gO(t){return new Promise((e,n)=>{var r,s,i;function o(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),n(on(t,"network-request-failed"))},timeout:mO.get()})}if(!((s=(r=lt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=lt().gapi)===null||i===void 0)&&i.load)o();else{const a=tI("iframefcb");return lt()[a]=()=>{gapi.load?o():n(on(t,"network-request-failed"))},Ng(`${U2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw bu=null,e})}let bu=null;function yO(t){return bu=bu||gO(t),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new Gl(5e3,15e3),vO="__/auth/iframe",wO="emulator/auth/iframe",xO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EO(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ag(e,wO):`https://${t.config.authDomain}/${vO}`,r={apiKey:e.apiKey,appName:t.name,v:Pi},s=bO.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Uo(r).slice(1)}`}async function TO(t){const e=await yO(t),n=lt().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:EO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xO,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),a=lt().setTimeout(()=>{i(o)},_O.get());function l(){lt().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kO=500,SO=600,CO="_blank",AO="http://localhost";class P0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PO(t,e,n,r=kO,s=SO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},IO),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Bt().toLowerCase();n&&(a=GT(c)?CO:n),qT(c)&&(e=e||AO,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(P2(c)&&a!=="_self")return RO(e||"",a),new P0(null);const f=window.open(e||"",a,h);Y(f,t,"popup-blocked");try{f.focus()}catch{}return new P0(f)}function RO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="__/auth/handler",DO="emulator/auth/handler",OO=encodeURIComponent("fac");async function R0(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pi,eventId:s};if(e instanceof rd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Yl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${OO}=${encodeURIComponent(l)}`:"";return`${MO(t)}?${Uo(a).slice(1)}${c}`}function MO({config:t}){return t.emulator?Ag(t,DO):`https://${t.authDomain}/${NO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="webStorageSupport";class LO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hI,this._completeRedirectFn=vI,this._overrideRedirectResult=sO}async _openPopup(e,n,r,s){var i;Mr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await R0(e,n,r,Hp(),s);return PO(e,o,Og())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await R0(e,n,r,Hp(),s);return ED(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Mr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TO(e),r=new lO(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tf,{type:Tf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Tf];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZT()||KT()||Rg()}}const jO=LO;var N0="@firebase/auth",D0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UO(t){Yn(new Nn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eI(t)},c=new L2(r,s,i,l);return H2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yn(new Nn("auth-internal",e=>{const n=Ln(e.getProvider("auth").getImmediate());return(r=>new VO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sn(N0,D0,FO(t)),sn(N0,D0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=5*60,BO=ST("authIdTokenMaxAge")||zO;let O0=null;const $O=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BO)return;const s=n==null?void 0:n.token;O0!==s&&(O0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function WO(t=td()){const e=js(t,"auth");if(e.isInitialized())return e.getImmediate();const n=W2(t,{popupRedirectResolver:jO,persistence:[ND,wD,hI]}),r=ST("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=$O(i.toString());pD(n,o,()=>o(n.currentUser)),fD(n,a=>o(a))}}const s=TT("auth");return s&&q2(n,`http://${s}`),n}function HO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}j2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=on("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",HO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UO("Browser");const xI="@firebase/installations",Vg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1e4,EI=`w:${Vg}`,TI="FIS_v2",qO="https://firebaseinstallations.googleapis.com/v1",KO=60*60*1e3,GO="installations",QO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vi=new Ai(GO,QO,YO);function II(t){return t instanceof Mn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI({projectId:t}){return`${qO}/projects/${t}/installations`}function SI(t){return{token:t.token,requestStatus:2,expiresIn:JO(t.expiresIn),creationTime:Date.now()}}async function CI(t,e){const r=(await e.json()).error;return vi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function AI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function XO(t,{refreshToken:e}){const n=AI(t);return n.append("Authorization",ZO(e)),n}async function PI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function JO(t){return Number(t.replace("s","000"))}function ZO(t){return`${TI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=kI(t),s=AI(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:TI,appId:t.appId,sdkVersion:EI},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await PI(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:SI(c.authToken)}}else throw await CI("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=/^[cdef][\w-]{21}$/,Qp="";function rM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=sM(t);return nM.test(n)?n:Qp}catch{return Qp}}function sM(t){return tM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new Map;function DI(t,e){const n=od(t);OI(n,e),iM(n,e)}function OI(t,e){const n=NI.get(t);if(n)for(const r of n)r(e)}function iM(t,e){const n=oM();n&&n.postMessage({key:t,fid:e}),aM()}let ni=null;function oM(){return!ni&&"BroadcastChannel"in self&&(ni=new BroadcastChannel("[Firebase] FID Change"),ni.onmessage=t=>{OI(t.data.key,t.data.fid)}),ni}function aM(){NI.size===0&&ni&&(ni.close(),ni=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="firebase-installations-database",cM=1,wi="firebase-installations-store";let If=null;function Fg(){return If||(If=NT(lM,cM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wi)}}})),If}async function hh(t,e){const n=od(t),s=(await Fg()).transaction(wi,"readwrite"),i=s.objectStore(wi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&DI(t,e.fid),e}async function MI(t){const e=od(t),r=(await Fg()).transaction(wi,"readwrite");await r.objectStore(wi).delete(e),await r.done}async function ad(t,e){const n=od(t),s=(await Fg()).transaction(wi,"readwrite"),i=s.objectStore(wi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&DI(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ug(t){let e;const n=await ad(t.appConfig,r=>{const s=uM(r),i=hM(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Qp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function uM(t){const e=t||{fid:rM(),registrationStatus:0};return LI(e)}function hM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=dM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:fM(t)}:{installationEntry:e}}async function dM(t,e){try{const n=await eM(t,e);return hh(t.appConfig,n)}catch(n){throw II(n)&&n.customData.serverCode===409?await MI(t.appConfig):await hh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function fM(t){let e=await M0(t.appConfig);for(;e.registrationStatus===1;)await RI(100),e=await M0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ug(t);return r||n}return e}function M0(t){return ad(t,e=>{if(!e)throw vi.create("installation-not-found");return LI(e)})}function LI(t){return pM(t)?{fid:t.fid,registrationStatus:0}:t}function pM(t){return t.registrationStatus===1&&t.registrationTime+bI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM({appConfig:t,heartbeatServiceProvider:e},n){const r=gM(t,n),s=XO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:EI,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await PI(()=>fetch(r,a));if(l.ok){const c=await l.json();return SI(c)}else throw await CI("Generate Auth Token",l)}function gM(t,{fid:e}){return`${kI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zg(t,e=!1){let n;const r=await ad(t.appConfig,i=>{if(!jI(i))throw vi.create("not-registered");const o=i.authToken;if(!e&&vM(o))return i;if(o.requestStatus===1)return n=yM(t,e),i;{if(!navigator.onLine)throw vi.create("app-offline");const a=xM(i);return n=_M(t,a),a}});return n?await n:r.authToken}async function yM(t,e){let n=await L0(t.appConfig);for(;n.authToken.requestStatus===1;)await RI(100),n=await L0(t.appConfig);const r=n.authToken;return r.requestStatus===0?zg(t,e):r}function L0(t){return ad(t,e=>{if(!jI(e))throw vi.create("not-registered");const n=e.authToken;return bM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function _M(t,e){try{const n=await mM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await hh(t.appConfig,r),n}catch(n){if(II(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await MI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hh(t.appConfig,r)}throw n}}function jI(t){return t!==void 0&&t.registrationStatus===2}function vM(t){return t.requestStatus===2&&!wM(t)}function wM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+KO}function xM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function bM(t){return t.requestStatus===1&&t.requestTime+bI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ug(e);return r?r.catch(console.error):zg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t,e=!1){const n=t;return await IM(n),(await zg(n,e)).token}async function IM(t){const{registrationPromise:e}=await Ug(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t){if(!t||!t.options)throw kf("App Configuration");if(!t.name)throw kf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw kf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function kf(t){return vi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="installations",SM="installations-internal",CM=t=>{const e=t.getProvider("app").getImmediate(),n=kM(e),r=js(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},AM=t=>{const e=t.getProvider("app").getImmediate(),n=js(e,VI).getImmediate();return{getId:()=>EM(n),getToken:s=>TM(n,s)}};function PM(){Yn(new Nn(VI,CM,"PUBLIC")),Yn(new Nn(SM,AM,"PRIVATE"))}PM();sn(xI,Vg);sn(xI,Vg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="analytics",RM="firebase_id",NM="origin",DM=60*1e3,OM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new ed("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_n=new Ai("analytics","Analytics",MM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t){if(!t.startsWith(Bg)){const e=_n.create("invalid-gtag-resource",{gtagURL:t});return an.warn(e.message),""}return t}function FI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function jM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function VM(t,e){const n=jM("firebase-js-sdk-policy",{createScriptURL:LM}),r=document.createElement("script"),s=`${Bg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function FM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function UM(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await FI(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){an.error(a)}t("config",s,i)}async function zM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await FI(n);for(const l of o){const c=a.find(f=>f.measurementId===l),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){an.error(i)}}function BM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await zM(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await UM(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){an.error(a)}}return s}function $M(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=BM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function WM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Bg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=30,qM=1e3;class KM{constructor(e={},n=qM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const UI=new KM;function GM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function QM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:GM(r)},i=OM.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw _n.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function YM(t,e=UI,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw _n.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw _n.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ZM;return setTimeout(async()=>{a.abort()},DM),zI({appId:r,apiKey:s,measurementId:i},o,a,e)}async function zI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=UI){var i;const{appId:o,measurementId:a}=t;try{await XM(r,e)}catch(l){if(a)return an.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await QM(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!JM(c)){if(s.deleteThrottleMetadata(o),a)return an.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?i0(n,s.intervalMillis,HM):i0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,f),an.debug(`Calling attemptFetch again in ${h} millis`),zI(t,f,r,s)}}function XM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(_n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function JM(t){if(!(t instanceof Mn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ZM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function eL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(){if(Eg())try{await Tg()}catch(t){return an.warn(_n.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return an.warn(_n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function nL(t,e,n,r,s,i,o){var a;const l=YM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&an.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>an.error(y)),e.push(l);const c=tL().then(y=>{if(y)return r.getId()}),[h,f]=await Promise.all([l,c]);WM(i)||VM(i,h.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[NM]="firebase",m.update=!0,f!=null&&(m[RM]=f),s("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.app=e}_delete(){return delete Ya[this.app.options.appId],Promise.resolve()}}let Ya={},j0=[];const V0={};let Sf="dataLayer",sL="gtag",F0,BI,U0=!1;function iL(){const t=[];if(bg()&&t.push("This is a browser extension environment."),AT()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=_n.create("invalid-analytics-context",{errorInfo:e});an.warn(n.message)}}function oL(t,e,n){iL();const r=t.options.appId;if(!r)throw _n.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)an.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _n.create("no-api-key");if(Ya[r]!=null)throw _n.create("already-exists",{id:r});if(!U0){FM(Sf);const{wrappedGtag:i,gtagCore:o}=$M(Ya,j0,V0,Sf,sL);BI=i,F0=o,U0=!0}return Ya[r]=nL(t,j0,V0,e,F0,Sf,n),new rL(t)}function aL(t=td()){t=Qe(t);const e=js(t,dh);return e.isInitialized()?e.getImmediate():lL(t)}function lL(t,e={}){const n=js(t,dh);if(n.isInitialized()){const s=n.getImmediate();if(Sl(e,n.getOptions()))return s;throw _n.create("already-initialized")}return n.initialize({options:e})}async function cL(){if(bg()||!AT()||!Eg())return!1;try{return await Tg()}catch{return!1}}function uL(t,e,n,r){t=Qe(t),eL(BI,Ya[t.app.options.appId],e,n,r).catch(s=>an.error(s))}const z0="@firebase/analytics",B0="0.10.8";function hL(){Yn(new Nn(dh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return oL(r,s,n)},"PUBLIC")),Yn(new Nn("analytics-internal",t,"PRIVATE")),sn(z0,B0),sn(z0,B0,"esm2017");function t(e){try{const n=e.getProvider(dh).getImmediate();return{logEvent:(r,s,i)=>uL(n,r,s,i)}}catch(n){throw _n.create("interop-component-reg-failed",{reason:n})}}}hL();var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ci,$I;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function S(){}S.prototype=w.prototype,k.D=w.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(I,P,D){for(var A=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)A[oe-2]=arguments[oe];return w.prototype[P].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,S){S||(S=0);var I=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)I[P]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(P=0;16>P;++P)I[P]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=k.g[0],S=k.g[1],P=k.g[2];var D=k.g[3],A=w+(D^S&(P^D))+I[0]+3614090360&4294967295;w=S+(A<<7&4294967295|A>>>25),A=D+(P^w&(S^P))+I[1]+3905402710&4294967295,D=w+(A<<12&4294967295|A>>>20),A=P+(S^D&(w^S))+I[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=S+(w^P&(D^w))+I[3]+3250441966&4294967295,S=P+(A<<22&4294967295|A>>>10),A=w+(D^S&(P^D))+I[4]+4118548399&4294967295,w=S+(A<<7&4294967295|A>>>25),A=D+(P^w&(S^P))+I[5]+1200080426&4294967295,D=w+(A<<12&4294967295|A>>>20),A=P+(S^D&(w^S))+I[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=S+(w^P&(D^w))+I[7]+4249261313&4294967295,S=P+(A<<22&4294967295|A>>>10),A=w+(D^S&(P^D))+I[8]+1770035416&4294967295,w=S+(A<<7&4294967295|A>>>25),A=D+(P^w&(S^P))+I[9]+2336552879&4294967295,D=w+(A<<12&4294967295|A>>>20),A=P+(S^D&(w^S))+I[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=S+(w^P&(D^w))+I[11]+2304563134&4294967295,S=P+(A<<22&4294967295|A>>>10),A=w+(D^S&(P^D))+I[12]+1804603682&4294967295,w=S+(A<<7&4294967295|A>>>25),A=D+(P^w&(S^P))+I[13]+4254626195&4294967295,D=w+(A<<12&4294967295|A>>>20),A=P+(S^D&(w^S))+I[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=S+(w^P&(D^w))+I[15]+1236535329&4294967295,S=P+(A<<22&4294967295|A>>>10),A=w+(P^D&(S^P))+I[1]+4129170786&4294967295,w=S+(A<<5&4294967295|A>>>27),A=D+(S^P&(w^S))+I[6]+3225465664&4294967295,D=w+(A<<9&4294967295|A>>>23),A=P+(w^S&(D^w))+I[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=S+(D^w&(P^D))+I[0]+3921069994&4294967295,S=P+(A<<20&4294967295|A>>>12),A=w+(P^D&(S^P))+I[5]+3593408605&4294967295,w=S+(A<<5&4294967295|A>>>27),A=D+(S^P&(w^S))+I[10]+38016083&4294967295,D=w+(A<<9&4294967295|A>>>23),A=P+(w^S&(D^w))+I[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=S+(D^w&(P^D))+I[4]+3889429448&4294967295,S=P+(A<<20&4294967295|A>>>12),A=w+(P^D&(S^P))+I[9]+568446438&4294967295,w=S+(A<<5&4294967295|A>>>27),A=D+(S^P&(w^S))+I[14]+3275163606&4294967295,D=w+(A<<9&4294967295|A>>>23),A=P+(w^S&(D^w))+I[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=S+(D^w&(P^D))+I[8]+1163531501&4294967295,S=P+(A<<20&4294967295|A>>>12),A=w+(P^D&(S^P))+I[13]+2850285829&4294967295,w=S+(A<<5&4294967295|A>>>27),A=D+(S^P&(w^S))+I[2]+4243563512&4294967295,D=w+(A<<9&4294967295|A>>>23),A=P+(w^S&(D^w))+I[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=S+(D^w&(P^D))+I[12]+2368359562&4294967295,S=P+(A<<20&4294967295|A>>>12),A=w+(S^P^D)+I[5]+4294588738&4294967295,w=S+(A<<4&4294967295|A>>>28),A=D+(w^S^P)+I[8]+2272392833&4294967295,D=w+(A<<11&4294967295|A>>>21),A=P+(D^w^S)+I[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=S+(P^D^w)+I[14]+4259657740&4294967295,S=P+(A<<23&4294967295|A>>>9),A=w+(S^P^D)+I[1]+2763975236&4294967295,w=S+(A<<4&4294967295|A>>>28),A=D+(w^S^P)+I[4]+1272893353&4294967295,D=w+(A<<11&4294967295|A>>>21),A=P+(D^w^S)+I[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=S+(P^D^w)+I[10]+3200236656&4294967295,S=P+(A<<23&4294967295|A>>>9),A=w+(S^P^D)+I[13]+681279174&4294967295,w=S+(A<<4&4294967295|A>>>28),A=D+(w^S^P)+I[0]+3936430074&4294967295,D=w+(A<<11&4294967295|A>>>21),A=P+(D^w^S)+I[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=S+(P^D^w)+I[6]+76029189&4294967295,S=P+(A<<23&4294967295|A>>>9),A=w+(S^P^D)+I[9]+3654602809&4294967295,w=S+(A<<4&4294967295|A>>>28),A=D+(w^S^P)+I[12]+3873151461&4294967295,D=w+(A<<11&4294967295|A>>>21),A=P+(D^w^S)+I[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=S+(P^D^w)+I[2]+3299628645&4294967295,S=P+(A<<23&4294967295|A>>>9),A=w+(P^(S|~D))+I[0]+4096336452&4294967295,w=S+(A<<6&4294967295|A>>>26),A=D+(S^(w|~P))+I[7]+1126891415&4294967295,D=w+(A<<10&4294967295|A>>>22),A=P+(w^(D|~S))+I[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=S+(D^(P|~w))+I[5]+4237533241&4294967295,S=P+(A<<21&4294967295|A>>>11),A=w+(P^(S|~D))+I[12]+1700485571&4294967295,w=S+(A<<6&4294967295|A>>>26),A=D+(S^(w|~P))+I[3]+2399980690&4294967295,D=w+(A<<10&4294967295|A>>>22),A=P+(w^(D|~S))+I[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=S+(D^(P|~w))+I[1]+2240044497&4294967295,S=P+(A<<21&4294967295|A>>>11),A=w+(P^(S|~D))+I[8]+1873313359&4294967295,w=S+(A<<6&4294967295|A>>>26),A=D+(S^(w|~P))+I[15]+4264355552&4294967295,D=w+(A<<10&4294967295|A>>>22),A=P+(w^(D|~S))+I[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=S+(D^(P|~w))+I[13]+1309151649&4294967295,S=P+(A<<21&4294967295|A>>>11),A=w+(P^(S|~D))+I[4]+4149444226&4294967295,w=S+(A<<6&4294967295|A>>>26),A=D+(S^(w|~P))+I[11]+3174756917&4294967295,D=w+(A<<10&4294967295|A>>>22),A=P+(w^(D|~S))+I[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=S+(D^(P|~w))+I[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+D&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var S=w-this.blockSize,I=this.B,P=this.h,D=0;D<w;){if(P==0)for(;D<=S;)s(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<w;)if(I[P++]=k.charCodeAt(D++),P==this.blockSize){s(this,I),P=0;break}}else for(;D<w;)if(I[P++]=k[D++],P==this.blockSize){s(this,I),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var S=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=S&255,S/=256;for(this.u(k),k=Array(16),w=S=0;4>w;++w)for(var I=0;32>I;I+=8)k[S++]=this.g[w]>>>I&255;return k};function i(k,w){var S=a;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=w(k)}function o(k,w){this.h=w;for(var S=[],I=!0,P=k.length-1;0<=P;P--){var D=k[P]|0;I&&D==w||(S[P]=D,I=!1)}this.g=S}var a={};function l(k){return-128<=k&&128>k?i(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return T(c(-k));for(var w=[],S=1,I=0;k>=S;I++)w[I]=k/S|0,S*=4294967296;return new o(w,0)}function h(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return T(h(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(w,8)),I=f,P=0;P<k.length;P+=8){var D=Math.min(8,k.length-P),A=parseInt(k.substring(P,P+D),w);8>D?(D=c(Math.pow(w,D)),I=I.j(D).add(c(A))):(I=I.j(S),I=I.add(c(A)))}return I}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-T(this).m();for(var k=0,w=1,S=0;S<this.g.length;S++){var I=this.i(S);k+=(0<=I?I:4294967296+I)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(E(this))return"-"+T(this).toString(k);for(var w=c(Math.pow(k,6)),S=this,I="";;){var P=N(S,w).g;S=v(S,P.j(w));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=P,x(S))return D+I;for(;6>D.length;)D="0"+D;I=D+I}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function E(k){return k.h==-1}t.l=function(k){return k=v(this,k),E(k)?-1:x(k)?0:1};function T(k){for(var w=k.g.length,S=[],I=0;I<w;I++)S[I]=~k.g[I];return new o(S,~k.h).add(m)}t.abs=function(){return E(this)?T(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],I=0,P=0;P<=w;P++){var D=I+(this.i(P)&65535)+(k.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);I=A>>>16,D&=65535,A&=65535,S[P]=A<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function v(k,w){return k.add(T(w))}t.j=function(k){if(x(this)||x(k))return f;if(E(this))return E(k)?T(this).j(T(k)):T(T(this).j(k));if(E(k))return T(this.j(T(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var w=this.g.length+k.g.length,S=[],I=0;I<2*w;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<k.g.length;P++){var D=this.i(I)>>>16,A=this.i(I)&65535,oe=k.i(P)>>>16,ne=k.i(P)&65535;S[2*I+2*P]+=A*ne,_(S,2*I+2*P),S[2*I+2*P+1]+=D*ne,_(S,2*I+2*P+1),S[2*I+2*P+1]+=A*oe,_(S,2*I+2*P+1),S[2*I+2*P+2]+=D*oe,_(S,2*I+2*P+2)}for(I=0;I<w;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=w;I<2*w;I++)S[I]=0;return new o(S,0)};function _(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function b(k,w){this.g=k,this.h=w}function N(k,w){if(x(w))throw Error("division by zero");if(x(k))return new b(f,f);if(E(k))return w=N(T(k),w),new b(T(w.g),T(w.h));if(E(w))return w=N(k,T(w)),new b(T(w.g),w.h);if(30<k.g.length){if(E(k)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var S=m,I=w;0>=I.l(k);)S=R(S),I=R(I);var P=M(S,1),D=M(I,1);for(I=M(I,2),S=M(S,2);!x(I);){var A=D.add(I);0>=A.l(k)&&(P=P.add(S),D=A),I=M(I,1),S=M(S,1)}return w=v(k,P.j(w)),new b(P,w)}for(P=f;0<=k.l(w);){for(S=Math.max(1,Math.floor(k.m()/w.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),D=c(S),A=D.j(w);E(A)||0<A.l(k);)S-=I,D=c(S),A=D.j(w);x(D)&&(D=m),P=P.add(D),k=v(k,A)}return new b(P,k)}t.A=function(k){return N(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)&k.i(I);return new o(S,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)|k.i(I);return new o(S,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)^k.i(I);return new o(S,this.h^k.h)};function R(k){for(var w=k.g.length+1,S=[],I=0;I<w;I++)S[I]=k.i(I)<<1|k.i(I-1)>>>31;return new o(S,k.h)}function M(k,w){var S=w>>5;w%=32;for(var I=k.g.length-S,P=[],D=0;D<I;D++)P[D]=0<w?k.i(D+S)>>>w|k.i(D+S+1)<<32-w:k.i(D+S);return new o(P,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$I=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ci=o}).apply(typeof $0<"u"?$0:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WI,Pa,HI,Eu,Yp,qI,KI,GI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var L=u[C];if(!(L in g))break e;g=g[L]}u=u[u.length-1],C=g[u],p=p(C),p!=C&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,C=!1,L={next:function(){if(!C&&g<u.length){var V=g++;return{value:p(V,u[V]),done:!1}}return C=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function f(u,p,g){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,C),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var C=g.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function x(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(C,L,V){for(var W=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)W[Le-2]=arguments[Le];return p.prototype[L].apply(C,W)}}function E(u){const p=u.length;if(0<p){const g=Array(p);for(let C=0;C<p;C++)g[C]=u[C];return g}return[]}function T(u,p){for(let g=1;g<arguments.length;g++){const C=arguments[g];if(l(C)){const L=u.length||0,V=C.length||0;u.length=L+V;for(let W=0;W<V;W++)u[L+W]=C[W]}else u.push(C)}}class v{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var R=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(u,p,g){for(const C in u)p.call(g,u[C],C,u)}function k(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function w(u){const p={};for(const g in u)p[g]=u[g];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,p){let g,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(g in C)u[g]=C[g];for(let V=0;V<S.length;V++)g=S[V],Object.prototype.hasOwnProperty.call(C,g)&&(u[g]=C[g])}}function P(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function D(u){a.setTimeout(()=>{throw u},0)}function A(){var u=K;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class oe{constructor(){this.h=this.g=null}add(p,g){const C=ne.get();C.set(p,g),this.h?this.h.next=C:this.g=C,this.h=C}}var ne=new v(()=>new ae,u=>u.reset());class ae{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let se,B=!1,K=new oe,H=()=>{const u=a.Promise.resolve(void 0);se=()=>{u.then(fe)}};var fe=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(g){D(g)}var p=ne;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function Oe(u,p){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(R){e:{try{N(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ce[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}x(Oe,he);var Ce={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),te=0;function me(u,p,g,C,L){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!C,this.ha=L,this.key=++te,this.da=this.fa=!1}function _t(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u){this.src=u,this.g={},this.h=0}q.prototype.add=function(u,p,g,C,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var W=$(u,p,C,L);return-1<W?(p=u[W],g||(p.fa=!1)):(p=new me(p,this.src,V,!!C,L),p.fa=g,u.push(p)),p};function ge(u,p){var g=p.type;if(g in u.g){var C=u.g[g],L=Array.prototype.indexOf.call(C,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(C,L,1),V&&(_t(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function $(u,p,g,C){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==C)return L}return-1}var ee="closure_lm_"+(1e6*Math.random()|0),J={};function re(u,p,g,C,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)re(u,p[V],g,C,L);return null}return g=kd(g),u&&u[j]?u.K(p,g,c(C)?!!C.capture:!1,L):Me(u,p,g,!1,C,L)}function Me(u,p,g,C,L,V){if(!p)throw Error("Invalid event type");var W=c(L)?!!L.capture:!!L,Le=jn(u);if(Le||(u[ee]=Le=new q(u)),g=Le.add(p,g,C,W,V),g.proxy)return g;if(C=_e(),g.proxy=C,C.src=u,C.listener=g,u.addEventListener)Ee||(L=W),L===void 0&&(L=!1),u.addEventListener(p.toString(),C,L);else if(u.attachEvent)u.attachEvent(pt(p.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return g}function _e(){function u(g){return p.call(u.src,u.listener,g)}const p=Ae;return u}function Ie(u,p,g,C,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)Ie(u,p[V],g,C,L);else C=c(C)?!!C.capture:!!C,g=kd(g),u&&u[j]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],g=$(V,g,C,L),-1<g&&(_t(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=jn(u))&&(p=u.g[p.toString()],u=-1,p&&(u=$(p,g,C,L)),(g=-1<u?p[u]:null)&&ft(g))}function ft(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[j])ge(p.i,u);else{var g=u.type,C=u.proxy;p.removeEventListener?p.removeEventListener(g,C,u.capture):p.detachEvent?p.detachEvent(pt(g),C):p.addListener&&p.removeListener&&p.removeListener(C),(g=jn(p))?(ge(g,u),g.h==0&&(g.src=null,p[ee]=null)):_t(u)}}}function pt(u){return u in J?J[u]:J[u]="on"+u}function Ae(u,p){if(u.da)u=!0;else{p=new Oe(p,this);var g=u.listener,C=u.ha||u.src;u.fa&&ft(u),u=g.call(C,p)}return u}function jn(u){return u=u[ee],u instanceof q?u:null}var zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function kd(u){return typeof u=="function"?u:(u[zr]||(u[zr]=function(p){return u.handleEvent(p)}),u[zr])}function Rt(){le.call(this),this.i=new q(this),this.M=this,this.F=null}x(Rt,le),Rt.prototype[j]=!0,Rt.prototype.removeEventListener=function(u,p,g,C){Ie(this,u,p,g,C)};function $t(u,p){var g,C=u.F;if(C)for(g=[];C;C=C.F)g.push(C);if(u=u.M,C=p.type||p,typeof p=="string")p=new he(p,u);else if(p instanceof he)p.target=p.target||u;else{var L=p;p=new he(C,u),I(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var W=p.g=g[V];L=oc(W,C,!0,p)&&L}if(W=p.g=u,L=oc(W,C,!0,p)&&L,L=oc(W,C,!1,p)&&L,g)for(V=0;V<g.length;V++)W=p.g=g[V],L=oc(W,C,!1,p)&&L}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],C=0;C<g.length;C++)_t(g[C]);delete u.g[p],u.h--}}this.F=null},Rt.prototype.K=function(u,p,g,C){return this.i.add(String(u),p,!1,g,C)},Rt.prototype.L=function(u,p,g,C){return this.i.add(String(u),p,!0,g,C)};function oc(u,p,g,C){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var W=p[V];if(W&&!W.da&&W.capture==g){var Le=W.listener,vt=W.ha||W.src;W.fa&&ge(u.i,W),L=Le.call(vt,C)!==!1&&L}}return L&&!C.defaultPrevented}function qy(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Ky(u){u.g=qy(()=>{u.g=null,u.i&&(u.i=!1,Ky(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class T1 extends le{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ky(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qo(u){le.call(this),this.h=u,this.g={}}x(Qo,le);var Gy=[];function Qy(u){M(u.g,function(p,g){this.g.hasOwnProperty(g)&&ft(p)},u),u.g={}}Qo.prototype.N=function(){Qo.aa.N.call(this),Qy(this)},Qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sd=a.JSON.stringify,I1=a.JSON.parse,k1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Cd(){}Cd.prototype.h=null;function Yy(u){return u.h||(u.h=u.i())}function Xy(){}var Yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ad(){he.call(this,"d")}x(Ad,he);function Pd(){he.call(this,"c")}x(Pd,he);var Us={},Jy=null;function ac(){return Jy=Jy||new Rt}Us.La="serverreachability";function Zy(u){he.call(this,Us.La,u)}x(Zy,he);function Xo(u){const p=ac();$t(p,new Zy(p))}Us.STAT_EVENT="statevent";function e_(u,p){he.call(this,Us.STAT_EVENT,u),this.stat=p}x(e_,he);function Wt(u){const p=ac();$t(p,new e_(p,u))}Us.Ma="timingevent";function t_(u,p){he.call(this,Us.Ma,u),this.size=p}x(t_,he);function Jo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Zo(){this.g=!0}Zo.prototype.xa=function(){this.g=!1};function S1(u,p,g,C,L,V){u.info(function(){if(u.g)if(V)for(var W="",Le=V.split("&"),vt=0;vt<Le.length;vt++){var ke=Le[vt].split("=");if(1<ke.length){var Nt=ke[0];ke=ke[1];var Dt=Nt.split("_");W=2<=Dt.length&&Dt[1]=="type"?W+(Nt+"="+ke+"&"):W+(Nt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+p+`
`+g+`
`+W})}function C1(u,p,g,C,L,V,W){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+W})}function Mi(u,p,g,C){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+P1(u,g)+(C?" "+C:"")})}function A1(u,p){u.info(function(){return"TIMEOUT: "+p})}Zo.prototype.info=function(){};function P1(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var C=g[u];if(!(2>C.length)){var L=C[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<L.length;W++)L[W]=""}}}}return Sd(g)}catch{return p}}var lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},n_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rd;function cc(){}x(cc,Cd),cc.prototype.g=function(){return new XMLHttpRequest},cc.prototype.i=function(){return{}},Rd=new cc;function Br(u,p,g,C){this.j=u,this.i=p,this.l=g,this.R=C||1,this.U=new Qo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new r_}function r_(){this.i=null,this.g="",this.h=!1}var s_={},Nd={};function Dd(u,p,g){u.L=1,u.v=fc(pr(p)),u.m=g,u.P=!0,i_(u,null)}function i_(u,p){u.F=Date.now(),uc(u),u.A=pr(u.v);var g=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),v_(g.i,"t",C),u.C=0,g=u.j.J,u.h=new r_,u.g=j_(u.j,g?p:null,!u.m),0<u.O&&(u.M=new T1(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,C=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Gy[0]=L.toString()),L=Gy);for(var V=0;V<L.length;V++){var W=re(g,L[V],C||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Xo(),S1(u.i,u.u,u.A,u.l,u.R,u.m)}Br.prototype.ca=function(u){u=u.target;const p=this.M;p&&mr(u)==3?p.j():this.Y(u)},Br.prototype.Y=function(u){try{if(u==this.g)e:{const Dt=mr(this.g);var p=this.g.Ba();const Vi=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||k_(this.g)))){this.J||Dt!=4||p==7||(p==8||0>=Vi?Xo(3):Xo(2)),Od(this);var g=this.g.Z();this.X=g;t:if(o_(this)){var C=k_(this.g);u="";var L=C.length,V=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zs(this),ea(this);var W="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(C[p],{stream:!(V&&p==L-1)});C.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,C1(this.i,this.u,this.A,this.l,this.R,Dt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,vt=this.g;if((Le=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Le)){var ke=Le;break t}}ke=null}if(g=ke)Mi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Md(this,g);else{this.o=!1,this.s=3,Wt(12),zs(this),ea(this);break e}}if(this.P){g=!0;let Vn;for(;!this.J&&this.C<W.length;)if(Vn=R1(this,W),Vn==Nd){Dt==4&&(this.s=4,Wt(14),g=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==s_){this.s=4,Wt(15),Mi(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else Mi(this.i,this.l,Vn,null),Md(this,Vn);if(o_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||W.length!=0||this.h.h||(this.s=1,Wt(16),g=!1),this.o=this.o&&g,!g)Mi(this.i,this.l,W,"[Invalid Chunked Response]"),zs(this),ea(this);else if(0<W.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),zd(Nt),Nt.M=!0,Wt(11))}}else Mi(this.i,this.l,W,null),Md(this,W);Dt==4&&zs(this),this.o&&!this.J&&(Dt==4?D_(this.j,this):(this.o=!1,uc(this)))}else G1(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),zs(this),ea(this)}}}catch{}finally{}};function o_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function R1(u,p){var g=u.C,C=p.indexOf(`
`,g);return C==-1?Nd:(g=Number(p.substring(g,C)),isNaN(g)?s_:(C+=1,C+g>p.length?Nd:(p=p.slice(C,C+g),u.C=C+g,p)))}Br.prototype.cancel=function(){this.J=!0,zs(this)};function uc(u){u.S=Date.now()+u.I,a_(u,u.I)}function a_(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Jo(m(u.ba,u),p)}function Od(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Br.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(A1(this.i,this.A),this.L!=2&&(Xo(),Wt(17)),zs(this),this.s=2,ea(this)):a_(this,this.S-u)};function ea(u){u.j.G==0||u.J||D_(u.j,u)}function zs(u){Od(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Qy(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Md(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Ld(g.h,u))){if(!u.K&&Ld(g.h,u)&&g.G==3){try{var C=g.Da.g.parse(p)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)vc(g),yc(g);else break e;Ud(g),Wt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Jo(m(g.Za,g),6e3));if(1>=u_(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else $s(g,11)}else if((u.K||g.g==u)&&vc(g),!_(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let ke=L[p];if(g.T=ke[0],ke=ke[1],g.G==2)if(ke[0]=="c"){g.K=ke[1],g.ia=ke[2];const Nt=ke[3];Nt!=null&&(g.la=Nt,g.j.info("VER="+g.la));const Dt=ke[4];Dt!=null&&(g.Aa=Dt,g.j.info("SVER="+g.Aa));const Vi=ke[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(C=1.5*Vi,g.L=C,g.j.info("backChannelRequestTimeoutMs_="+C)),C=g;const Vn=u.g;if(Vn){const xc=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xc){var V=C.h;V.g||xc.indexOf("spdy")==-1&&xc.indexOf("quic")==-1&&xc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(jd(V,V.h),V.h=null))}if(C.D){const Bd=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bd&&(C.ya=Bd,Fe(C.I,C.D,Bd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),C=g;var W=u;if(C.qa=L_(C,C.J?C.ia:null,C.W),W.K){h_(C.h,W);var Le=W,vt=C.L;vt&&(Le.I=vt),Le.B&&(Od(Le),uc(Le)),C.g=W}else R_(C);0<g.i.length&&_c(g)}else ke[0]!="stop"&&ke[0]!="close"||$s(g,7);else g.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?$s(g,7):Fd(g):ke[0]!="noop"&&g.l&&g.l.ta(ke),g.v=0)}}Xo(4)}catch{}}var N1=class{constructor(u,p){this.g=u,this.map=p}};function l_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function c_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function u_(u){return u.h?1:u.g?u.g.size:0}function Ld(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function jd(u,p){u.g?u.g.add(p):u.h=p}function h_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}l_.prototype.cancel=function(){if(this.i=d_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function d_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return E(u.i)}function D1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,C=0;C<g;C++)p.push(u[C]);return p}p=[],g=0;for(C in u)p[g++]=u[C];return p}function O1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const C in u)p[g++]=C;return p}}}function f_(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=O1(u),C=D1(u),L=C.length,V=0;V<L;V++)p.call(void 0,C[V],g&&g[V],u)}var p_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function M1(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var C=u[g].indexOf("="),L=null;if(0<=C){var V=u[g].substring(0,C);L=u[g].substring(C+1)}else V=u[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Bs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Bs){this.h=u.h,hc(this,u.j),this.o=u.o,this.g=u.g,dc(this,u.s),this.l=u.l;var p=u.i,g=new ra;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),m_(this,g),this.m=u.m}else u&&(p=String(u).match(p_))?(this.h=!1,hc(this,p[1]||"",!0),this.o=ta(p[2]||""),this.g=ta(p[3]||"",!0),dc(this,p[4]),this.l=ta(p[5]||"",!0),m_(this,p[6]||"",!0),this.m=ta(p[7]||"")):(this.h=!1,this.i=new ra(null,this.h))}Bs.prototype.toString=function(){var u=[],p=this.j;p&&u.push(na(p,g_,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(na(p,g_,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(na(g,g.charAt(0)=="/"?V1:j1,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",na(g,U1)),u.join("")};function pr(u){return new Bs(u)}function hc(u,p,g){u.j=g?ta(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function dc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function m_(u,p,g){p instanceof ra?(u.i=p,z1(u.i,u.h)):(g||(p=na(p,F1)),u.i=new ra(p,u.h))}function Fe(u,p,g){u.i.set(p,g)}function fc(u){return Fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ta(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function na(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,L1),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function L1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var g_=/[#\/\?@]/g,j1=/[#\?:]/g,V1=/[#\?]/g,F1=/[#\?@]/g,U1=/#/g;function ra(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function $r(u){u.g||(u.g=new Map,u.h=0,u.i&&M1(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=ra.prototype,t.add=function(u,p){$r(this),this.i=null,u=Li(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function y_(u,p){$r(u),p=Li(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function __(u,p){return $r(u),p=Li(u,p),u.g.has(p)}t.forEach=function(u,p){$r(this),this.g.forEach(function(g,C){g.forEach(function(L){u.call(p,L,C,this)},this)},this)},t.na=function(){$r(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let C=0;C<p.length;C++){const L=u[C];for(let V=0;V<L.length;V++)g.push(p[C])}return g},t.V=function(u){$r(this);let p=[];if(typeof u=="string")__(this,u)&&(p=p.concat(this.g.get(Li(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return $r(this),this.i=null,u=Li(this,u),__(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function v_(u,p,g){y_(u,p),0<g.length&&(u.i=null,u.g.set(Li(u,p),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var C=p[g];const V=encodeURIComponent(String(C)),W=this.V(C);for(C=0;C<W.length;C++){var L=V;W[C]!==""&&(L+="="+encodeURIComponent(String(W[C]))),u.push(L)}}return this.i=u.join("&")};function Li(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function z1(u,p){p&&!u.j&&($r(u),u.i=null,u.g.forEach(function(g,C){var L=C.toLowerCase();C!=L&&(y_(this,C),v_(this,L,g))},u)),u.j=p}function B1(u,p){const g=new Zo;if(a.Image){const C=new Image;C.onload=y(Wr,g,"TestLoadImage: loaded",!0,p,C),C.onerror=y(Wr,g,"TestLoadImage: error",!1,p,C),C.onabort=y(Wr,g,"TestLoadImage: abort",!1,p,C),C.ontimeout=y(Wr,g,"TestLoadImage: timeout",!1,p,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else p(!1)}function $1(u,p){const g=new Zo,C=new AbortController,L=setTimeout(()=>{C.abort(),Wr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:C.signal}).then(V=>{clearTimeout(L),V.ok?Wr(g,"TestPingServer: ok",!0,p):Wr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Wr(g,"TestPingServer: error",!1,p)})}function Wr(u,p,g,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(g)}catch{}}function W1(){this.g=new k1}function H1(u,p,g){const C=g||"";try{f_(u,function(L,V){let W=L;c(L)&&(W=Sd(L)),p.push(C+V+"="+encodeURIComponent(W))})}catch(L){throw p.push(C+"type="+encodeURIComponent("_badmap")),L}}function pc(u){this.l=u.Ub||null,this.j=u.eb||!1}x(pc,Cd),pc.prototype.g=function(){return new mc(this.l,this.j)},pc.prototype.i=function(u){return function(){return u}}({});function mc(u,p){Rt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(mc,Rt),t=mc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,ia(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ia(this)),this.g&&(this.readyState=3,ia(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;w_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function w_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?sa(this):ia(this),this.readyState==3&&w_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,sa(this))},t.Qa=function(u){this.g&&(this.response=u,sa(this))},t.ga=function(){this.g&&sa(this)};function sa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ia(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function ia(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function x_(u){let p="";return M(u,function(g,C){p+=C,p+=":",p+=g,p+=`\r
`}),p}function Vd(u,p,g){e:{for(C in g){var C=!1;break e}C=!0}C||(g=x_(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Fe(u,p,g))}function Xe(u){Rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Xe,Rt);var q1=/^https?$/i,K1=["POST","PUT"];t=Xe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rd.g(),this.v=this.o?Yy(this.o):Yy(Rd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){b_(this,V);return}if(u=g||"",g=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)g.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const V of C.keys())g.set(V,C.get(V));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(K1,p,void 0))||C||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of g)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{I_(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){b_(this,V)}};function b_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,E_(u),gc(u)}function E_(u){u.A||(u.A=!0,$t(u,"complete"),$t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,$t(this,"complete"),$t(this,"abort"),gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?T_(this):this.bb())},t.bb=function(){T_(this)};function T_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||mr(u)!=4||u.Z()!=2)){if(u.u&&mr(u)==4)qy(u.Ea,0,u);else if($t(u,"readystatechange"),mr(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var C;if(C=W===0){var L=String(u.D).match(p_)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),C=!q1.test(L?L.toLowerCase():"")}g=C}if(g)$t(u,"complete"),$t(u,"success");else{u.m=6;try{var V=2<mr(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",E_(u)}}finally{gc(u)}}}}function gc(u,p){if(u.g){I_(u);const g=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||$t(u,"ready");try{g.onreadystatechange=C}catch{}}}function I_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function mr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),I1(p)}};function k_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function G1(u){const p={};u=(u.g&&2<=mr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(_(u[C]))continue;var g=P(u[C]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}k(p,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function S_(u){this.Aa=0,this.i=[],this.j=new Zo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oa("baseRetryDelayMs",5e3,u),this.cb=oa("retryDelaySeedMs",1e4,u),this.Wa=oa("forwardChannelMaxRetries",2,u),this.wa=oa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new l_(u&&u.concurrentRequestLimit),this.Da=new W1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=S_.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,C){Wt(0),this.W=u,this.H=p||{},g&&C!==void 0&&(this.H.OSID=g,this.H.OAID=C),this.F=this.X,this.I=L_(this,null,this.W),_c(this)};function Fd(u){if(C_(u),u.G==3){var p=u.U++,g=pr(u.I);if(Fe(g,"SID",u.K),Fe(g,"RID",p),Fe(g,"TYPE","terminate"),aa(u,g),p=new Br(u,u.j,p),p.L=2,p.v=fc(pr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=j_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),uc(p)}M_(u)}function yc(u){u.g&&(zd(u),u.g.cancel(),u.g=null)}function C_(u){yc(u),u.u&&(a.clearTimeout(u.u),u.u=null),vc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function _c(u){if(!c_(u.h)&&!u.s){u.s=!0;var p=u.Ga;se||H(),B||(se(),B=!0),K.add(p,u),u.B=0}}function Q1(u,p){return u_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Jo(m(u.Ga,u,p),O_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Br(this,this.j,u);let V=this.o;if(this.S&&(V?(V=w(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var C=this.i[g];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(p+=C,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=P_(this,L,p),g=pr(this.I),Fe(g,"RID",u),Fe(g,"CVER",22),this.D&&Fe(g,"X-HTTP-Session-Id",this.D),aa(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(x_(V)))+"&"+p:this.m&&Vd(g,this.m,V)),jd(this.h,L),this.Ua&&Fe(g,"TYPE","init"),this.P?(Fe(g,"$req",p),Fe(g,"SID","null"),L.T=!0,Dd(L,g,null)):Dd(L,g,p),this.G=2}}else this.G==3&&(u?A_(this,u):this.i.length==0||c_(this.h)||A_(this))};function A_(u,p){var g;p?g=p.l:g=u.U++;const C=pr(u.I);Fe(C,"SID",u.K),Fe(C,"RID",g),Fe(C,"AID",u.T),aa(u,C),u.m&&u.o&&Vd(C,u.m,u.o),g=new Br(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=P_(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),jd(u.h,g),Dd(g,C,p)}function aa(u,p){u.H&&M(u.H,function(g,C){Fe(p,C,g)}),u.l&&f_({},function(g,C){Fe(p,C,g)})}function P_(u,p,g){g=Math.min(u.i.length,g);var C=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const W=["count="+g];V==-1?0<g?(V=L[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Le=!0;for(let vt=0;vt<g;vt++){let ke=L[vt].g;const Nt=L[vt].map;if(ke-=V,0>ke)V=Math.max(0,L[vt].g-100),Le=!1;else try{H1(Nt,W,"req"+ke+"_")}catch{C&&C(Nt)}}if(Le){C=W.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,C}function R_(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;se||H(),B||(se(),B=!0),K.add(p,u),u.v=0}}function Ud(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Jo(m(u.Fa,u),O_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,N_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Jo(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),yc(this),N_(this))};function zd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function N_(u){u.g=new Br(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=pr(u.qa);Fe(p,"RID","rpc"),Fe(p,"SID",u.K),Fe(p,"AID",u.T),Fe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Fe(p,"TO",u.ja),Fe(p,"TYPE","xmlhttp"),aa(u,p),u.m&&u.o&&Vd(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=fc(pr(p)),g.m=null,g.P=!0,i_(g,u)}t.Za=function(){this.C!=null&&(this.C=null,yc(this),Ud(this),Wt(19))};function vc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function D_(u,p){var g=null;if(u.g==p){vc(u),zd(u),u.g=null;var C=2}else if(Ld(u.h,p))g=p.D,h_(u.h,p),C=1;else return;if(u.G!=0){if(p.o)if(C==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;C=ac(),$t(C,new t_(C,g)),_c(u)}else R_(u);else if(L=p.s,L==3||L==0&&0<p.X||!(C==1&&Q1(u,p)||C==2&&Ud(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),L){case 1:$s(u,5);break;case 4:$s(u,10);break;case 3:$s(u,6);break;default:$s(u,2)}}}function O_(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function $s(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),C=u.Xa;const L=!C;C=new Bs(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hc(C,"https"),fc(C),L?B1(C.toString(),g):$1(C.toString(),g)}else Wt(2);u.G=0,u.l&&u.l.sa(p),M_(u),C_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function M_(u){if(u.G=0,u.ka=[],u.l){const p=d_(u.h);(p.length!=0||u.i.length!=0)&&(T(u.ka,p),T(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function L_(u,p,g){var C=g instanceof Bs?pr(g):new Bs(g);if(C.g!="")p&&(C.g=p+"."+C.g),dc(C,C.s);else{var L=a.location;C=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new Bs(null);C&&hc(V,C),p&&(V.g=p),L&&dc(V,L),g&&(V.l=g),C=V}return g=u.D,p=u.ya,g&&p&&Fe(C,g,p),Fe(C,"VER",u.la),aa(u,C),C}function j_(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Xe(new pc({eb:g})):new Xe(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function V_(){}t=V_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wc(){}wc.prototype.g=function(u,p){return new un(u,p)};function un(u,p){Rt.call(this),this.g=new S_(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ji(this)}x(un,Rt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Fd(this.g)},un.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Sd(u),u=g);p.i.push(new N1(p.Ya++,u)),p.G==3&&_c(p)},un.prototype.N=function(){this.g.l=null,delete this.j,Fd(this.g),delete this.g,un.aa.N.call(this)};function F_(u){Ad.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}x(F_,Ad);function U_(){Pd.call(this),this.status=1}x(U_,Pd);function ji(u){this.g=u}x(ji,V_),ji.prototype.ua=function(){$t(this.g,"a")},ji.prototype.ta=function(u){$t(this.g,new F_(u))},ji.prototype.sa=function(u){$t(this.g,new U_)},ji.prototype.ra=function(){$t(this.g,"b")},wc.prototype.createWebChannel=wc.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,GI=function(){return new wc},KI=function(){return ac()},qI=Us,Yp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lc.NO_ERROR=0,lc.TIMEOUT=8,lc.HTTP_ERROR=6,Eu=lc,n_.COMPLETE="complete",HI=n_,Xy.EventType=Yo,Yo.OPEN="a",Yo.CLOSE="b",Yo.ERROR="c",Yo.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Pa=Xy,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,WI=Xe}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});const W0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new ed("@firebase/firestore");function ga(){return xi.logLevel}function X(t,...e){if(xi.logLevel<=we.DEBUG){const n=e.map($g);xi.debug(`Firestore (${Bo}): ${t}`,...n)}}function Lr(t,...e){if(xi.logLevel<=we.ERROR){const n=e.map($g);xi.error(`Firestore (${Bo}): ${t}`,...n)}}function Io(t,...e){if(xi.logLevel<=we.WARN){const n=e.map($g);xi.warn(`Firestore (${Bo}): ${t}`,...n)}}function $g(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+t;throw Lr(e),new Error(e)}function De(t,e){t||ie()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Mn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class fL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pL{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ar,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new QI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new jt(e)}}class mL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new mL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _L{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new yL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vL(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function ko(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new tt(0,0))}static max(){return new ce(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Pl{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const wL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Pl{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return wL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Be.fromString(e))}static fromName(e){return new Z(Be.fromString(e).popFirst(5))}static empty(){return new Z(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Be(e.slice()))}}function xL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new ks(s,Z.empty(),e)}function bL(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ks(ce.min(),Z.empty(),-1)}static max(){return new ks(ce.max(),Z.empty(),-1)}}function EL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==TL)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function kL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wg.oe=-1;function ld(t){return t==null}function fh(t){return t===0&&1/t==-1/0}function SL(t){return typeof t=="number"&&Number.isInteger(t)&&!fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $o(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new q0(this.data.getIterator())}getIteratorFrom(e){return new q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Ct(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new JI("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const CL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(De(!!t),typeof t=="string"){let e=0;const n=CL.exec(t);if(De(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bi(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qg(t){const e=t.mapValue.fields.__previous_value__;return Hg(e)?qg(e):e}function Rl(t){const e=Ss(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Nl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Nl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc={mapValue:{}};function Ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hg(t)?4:RL(t)?9007199254740991:PL(t)?10:11:ie()}function fr(t,e){if(t===e)return!0;const n=Ei(t);if(n!==Ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rl(t).isEqual(Rl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ss(s.timestampValue),a=Ss(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return bi(s.bytesValue).isEqual(bi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return st(s.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return st(s.integerValue)===st(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=st(s.doubleValue),a=st(i.doubleValue);return o===a?fh(o)===fh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ko(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(H0(o)!==H0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!fr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Dl(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function So(t,e){if(t===e)return 0;const n=Ei(t),r=Ei(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=st(i.integerValue||i.doubleValue),l=st(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return K0(t.timestampValue,e.timestampValue);case 4:return K0(Rl(t),Rl(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=bi(i),l=bi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Se(a[c],l[c]);if(h!==0)return h}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Se(st(i.latitude),st(o.latitude));return a!==0?a:Se(st(i.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return G0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const f=i.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,E=Se(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:G0(y,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Bc.mapValue&&o===Bc.mapValue)return 0;if(i===Bc.mapValue)return 1;if(o===Bc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Se(l[f],h[f]);if(m!==0)return m;const y=So(a[l[f]],c[h[f]]);if(y!==0)return y}return Se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ie()}}function K0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ss(t),r=Ss(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function G0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=So(n[s],r[s]);if(i)return i}return Se(n.length,r.length)}function Co(t){return Xp(t)}function Xp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return bi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Xp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Xp(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function Q0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jp(t){return!!t&&"integerValue"in t}function Kg(t){return!!t&&"arrayValue"in t}function Y0(t){return!!t&&"nullValue"in t}function X0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tu(t){return!!t&&"mapValue"in t}function PL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Xa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xa(n)}setAll(e){let n=It.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Xa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Tu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){$o(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kn(Xa(this.value))}}function ZI(t){const e=[];return $o(t.fields,(n,r)=>{const s=new It([n]);if(Tu(r)){const i=ZI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ft(e,0,ce.min(),ce.min(),ce.min(),kn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,ce.min(),ce.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ce.min(),ce.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.position=e,this.inclusive=n}}function J0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=So(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Z0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function NL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{}class ut extends ek{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new OL(e,n,r):n==="array-contains"?new jL(e,r):n==="in"?new VL(e,r):n==="not-in"?new FL(e,r):n==="array-contains-any"?new UL(e,r):new ut(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ML(e,r):new LL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(So(n,this.value)):n!==null&&Ei(this.value)===Ei(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends ek{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Xn(e,n)}matches(e){return tk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tk(t){return t.op==="and"}function nk(t){return DL(t)&&tk(t)}function DL(t){for(const e of t.filters)if(e instanceof Xn)return!1;return!0}function Zp(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Co(t.value);if(nk(t))return t.filters.map(e=>Zp(e)).join(",");{const e=t.filters.map(n=>Zp(n)).join(",");return`${t.op}(${e})`}}function rk(t,e){return t instanceof ut?function(r,s){return s instanceof ut&&r.op===s.op&&r.field.isEqual(s.field)&&fr(r.value,s.value)}(t,e):t instanceof Xn?function(r,s){return s instanceof Xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&rk(o,s.filters[a]),!0):!1}(t,e):void ie()}function sk(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Co(n.value)}`}(t):t instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(sk).join(" ,")+"}"}(t):"Filter"}class OL extends ut{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class ML extends ut{constructor(e,n){super(e,"in",n),this.keys=ik("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LL extends ut{constructor(e,n){super(e,"not-in",n),this.keys=ik("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ik(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class jL extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kg(n)&&Dl(n.arrayValue,this.value)}}class VL extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}}class FL extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Dl(this.value.arrayValue,n)}}class UL extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function ew(t,e=null,n=[],r=[],s=null,i=null,o=null){return new zL(t,e,n,r,s,i,o)}function Gg(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ld(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Co(r)).join(",")),e.ue=n}return e.ue}function Qg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Z0(t.startAt,e.startAt)&&Z0(t.endAt,e.endAt)}function em(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BL(t,e,n,r,s,i,o,a){return new Wo(t,e,n,r,s,i,o,a)}function Yg(t){return new Wo(t)}function tw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ok(t){return t.collectionGroup!==null}function Ja(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ct(It.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ol(i,r))}),n.has(It.keyField().canonicalString())||e.ce.push(new Ol(It.keyField(),r))}return e.ce}function cr(t){const e=ue(t);return e.le||(e.le=$L(e,Ja(t))),e.le}function $L(t,e){if(t.limitType==="F")return ew(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ol(s.field,i)});const n=t.endAt?new ph(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ph(t.startAt.position,t.startAt.inclusive):null;return ew(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tm(t,e){const n=t.filters.concat([e]);return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mh(t,e,n){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cd(t,e){return Qg(cr(t),cr(e))&&t.limitType===e.limitType}function ak(t){return`${Gg(cr(t))}|lt:${t.limitType}`}function Bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>sk(s)).join(", ")}]`),ld(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Co(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Co(s)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ja(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=J0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ja(r),s)||r.endAt&&!function(o,a,l){const c=J0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ja(r),s))}(t,e)}function WL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lk(t){return(e,n)=>{let r=!1;for(const s of Ja(t)){const i=HL(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function HL(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?So(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return XI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new Ye(Z.comparator);function jr(){return qL}const ck=new Ye(Z.comparator);function Ra(...t){let e=ck;for(const n of t)e=e.insert(n.key,n);return e}function uk(t){let e=ck;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ri(){return Za()}function hk(){return Za()}function Za(){return new Ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const KL=new Ye(Z.comparator),GL=new Ct(Z.comparator);function ye(...t){let e=GL;for(const n of t)e=e.add(n);return e}const QL=new Ct(Se);function YL(){return QL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function dk(t){return{integerValue:""+t}}function XL(t,e){return SL(e)?dk(e):Xg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function JL(t,e,n){return t instanceof Ml?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hg(i)&&(i=qg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ll?pk(t,e):t instanceof jl?mk(t,e):function(s,i){const o=fk(s,i),a=nw(o)+nw(s.Pe);return Jp(o)&&Jp(s.Pe)?dk(a):Xg(s.serializer,a)}(t,e)}function ZL(t,e,n){return t instanceof Ll?pk(t,e):t instanceof jl?mk(t,e):n}function fk(t,e){return t instanceof gh?function(r){return Jp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ml extends hd{}class Ll extends hd{constructor(e){super(),this.elements=e}}function pk(t,e){const n=gk(e);for(const r of t.elements)n.some(s=>fr(s,r))||n.push(r);return{arrayValue:{values:n}}}class jl extends hd{constructor(e){super(),this.elements=e}}function mk(t,e){let n=gk(e);for(const r of t.elements)n=n.filter(s=>!fr(s,r));return{arrayValue:{values:n}}}class gh extends hd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function nw(t){return st(t.integerValue||t.doubleValue)}function gk(t){return Kg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this.field=e,this.transform=n}}function tj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ll&&s instanceof Ll||r instanceof jl&&s instanceof jl?ko(r.elements,s.elements,fr):r instanceof gh&&s instanceof gh?fr(r.Pe,s.Pe):r instanceof Ml&&s instanceof Ml}(t.transform,e.transform)}class nj{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dd{}function yk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vk(t.key,ur.none()):new ec(t.key,t.data,ur.none());{const n=t.data,r=kn.empty();let s=new Ct(It.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ri(t.key,r,new Wn(s.toArray()),ur.none())}}function rj(t,e,n){t instanceof ec?function(s,i,o){const a=s.value.clone(),l=sw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(s,i,o){if(!Iu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=sw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(_k(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function el(t,e,n,r){return t instanceof ec?function(i,o,a,l){if(!Iu(i.precondition,o))return a;const c=i.value.clone(),h=iw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ri?function(i,o,a,l){if(!Iu(i.precondition,o))return a;const c=iw(i.fieldTransforms,l,o),h=o.data;return h.setAll(_k(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Iu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function sj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=fk(r.transform,s||null);i!=null&&(n===null&&(n=kn.empty()),n.set(r.field,i))}return n||null}function rw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ko(r,s,(i,o)=>tj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ec extends dd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ri extends dd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _k(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sw(t,e,n){const r=new Map;De(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,ZL(o,a,n[s]))}return r}function iw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,JL(i,o,e))}return r}class vk extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ij extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&rj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=el(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=el(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=yk(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(n,r)=>rw(n,r))&&ko(this.baseMutations,e.baseMutations,(n,r)=>rw(n,r))}}class Jg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length);let s=function(){return KL}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,xe;function cj(t){switch(t){default:return ie();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function wk(t){if(t===void 0)return Lr("GRPC error has no .code"),F.UNKNOWN;switch(t){case at.OK:return F.OK;case at.CANCELLED:return F.CANCELLED;case at.UNKNOWN:return F.UNKNOWN;case at.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case at.INTERNAL:return F.INTERNAL;case at.UNAVAILABLE:return F.UNAVAILABLE;case at.UNAUTHENTICATED:return F.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case at.NOT_FOUND:return F.NOT_FOUND;case at.ALREADY_EXISTS:return F.ALREADY_EXISTS;case at.PERMISSION_DENIED:return F.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case at.ABORTED:return F.ABORTED;case at.OUT_OF_RANGE:return F.OUT_OF_RANGE;case at.UNIMPLEMENTED:return F.UNIMPLEMENTED;case at.DATA_LOSS:return F.DATA_LOSS;default:return ie()}}(xe=at||(at={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new ci([4294967295,4294967295],0);function ow(t){const e=uj().encode(t),n=new $I;return n.update(e),new Uint8Array(n.digest())}function aw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ci([n,r],0),new ci([s,i],0)]}class Zg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Na(`Invalid padding: ${n}`);if(r<0)throw new Na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Na(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ci.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ci.fromNumber(r)));return s.compare(hj)===1&&(s=new ci([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ow(e),[r,s]=aw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ow(e),[r,s]=aw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fd(ce.min(),s,new Ye(Se),jr(),ye())}}class tc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tc(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class xk{constructor(e,n){this.targetId=e,this.me=n}}class bk{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class lw{constructor(){this.fe=0,this.ge=uw(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new tc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=uw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dj{constructor(e){this.Le=e,this.Be=new Map,this.ke=jr(),this.qe=cw(),this.Qe=new Ye(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(em(i))if(r===0){const o=new Z(i.path);this.Ue(n,o,Ft.newNoDocument(o,ce.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=bi(r).toUint8Array()}catch(l){if(l instanceof JI)return Io("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Zg(o,s,i)}catch(l){return Io(l instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&em(a.target)){const l=new Z(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ft.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ye();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new fd(e,n,this.Qe,this.ke,r);return this.ke=jr(),this.qe=cw(),this.Qe=new Ye(Se),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ct(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function cw(){return new Ye(Z.comparator)}function uw(){return new Ye(Z.comparator)}const fj={asc:"ASCENDING",desc:"DESCENDING"},pj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mj={and:"AND",or:"OR"};class gj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nm(t,e){return t.useProto3Json||ld(e)?e:{value:e}}function yh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ek(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yj(t,e){return yh(t,e.toTimestamp())}function hr(t){return De(!!t),ce.fromTimestamp(function(n){const r=Ss(n);return new tt(r.seconds,r.nanos)}(t))}function ey(t,e){return rm(t,e).canonicalString()}function rm(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Tk(t){const e=Be.fromString(t);return De(Ak(e)),e}function sm(t,e){return ey(t.databaseId,e.path)}function Cf(t,e){const n=Tk(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(kk(n))}function Ik(t,e){return ey(t.databaseId,e)}function _j(t){const e=Tk(t);return e.length===4?Be.emptyPath():kk(e)}function im(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kk(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hw(t,e,n){return{name:sm(t,e),fields:n.value.mapValue.fields}}function vj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string"),Pt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:wk(c.code);return new G(h,c.message||"")}(o);n=new bk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cf(t,r.document.name),i=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):ce.min(),a=new kn({mapValue:{fields:r.document.fields}}),l=Ft.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new ku(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cf(t,r.document),i=r.readTime?hr(r.readTime):ce.min(),o=Ft.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ku([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cf(t,r.document),i=r.removedTargetIds||[];n=new ku([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new lj(s,i),a=r.targetId;n=new xk(a,o)}}return n}function wj(t,e){let n;if(e instanceof ec)n={update:hw(t,e.key,e.value)};else if(e instanceof vk)n={delete:sm(t,e.key)};else if(e instanceof Ri)n={update:hw(t,e.key,e.data),updateMask:Aj(e.fieldMask)};else{if(!(e instanceof ij))return ie();n={verify:sm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:yj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function xj(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?hr(s.updateTime):hr(i);return o.isEqual(ce.min())&&(o=hr(i)),new nj(o,s.transformResults||[])}(n,e))):[]}function bj(t,e){return{documents:[Ik(t,e.path)]}}function Ej(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ik(t,s);const i=function(c){if(c.length!==0)return Ck(Xn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:$i(m.field),direction:kj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=nm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function Tj(t){let e=_j(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=Sk(f);return m instanceof Xn&&nk(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new Ol(Wi(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,ld(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new ph(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new ph(y,m)}(n.endAt)),BL(e,s,o,i,a,"F",l,c)}function Ij(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Sk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wi(n.unaryFilter.field);return ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wi(n.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wi(n.unaryFilter.field);return ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wi(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return ut.create(Wi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(r=>Sk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function kj(t){return fj[t]}function Sj(t){return pj[t]}function Cj(t){return mj[t]}function $i(t){return{fieldPath:t.canonicalString()}}function Wi(t){return It.fromServerFormat(t.fieldPath)}function Ck(t){return t instanceof ut?function(n){if(n.op==="=="){if(X0(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(Y0(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(X0(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(Y0(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:Sj(n.op),value:n.value}}}(t):t instanceof Xn?function(n){const r=n.getFilters().map(s=>Ck(s));return r.length===1?r[0]:{compositeFilter:{op:Cj(n.op),filters:r}}}(t):ie()}function Aj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ak(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.ct=e}}function Rj(t){const e=Tj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.un=new Dj}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ks.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Dj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ct(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ct(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ao(0)}static kn(){return new Ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.changes=new Ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&el(r.mutation,s,Wn.empty(),tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=ri();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ra();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=jr();const o=Za(),a=function(){return Za()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ri)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),el(h.mutation,c,h.mutation.getFieldMask(),tt.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new Mj(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Za();let s=new Ye((o,a)=>o-a),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Wn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(s.get(a.batchId)||ye()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=hk();h.forEach(m=>{if(!i.has(m)){const y=yk(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ok(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ri());let a=-1,l=i;return o.next(c=>U.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ye())).next(h=>({batchId:a,changes:uk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Ra();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ra();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(f,m){return new Wo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ft.newInvalidDocument(h)))});let a=Ra();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&el(h.mutation,c,Wn.empty(),tt.now()),ud(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Rj(s.bundledQuery),readTime:hr(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.overlays=new Ye(Z.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ri();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ri(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ye((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=ri(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ri(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aj(n,r));let i=this.Ir.get(n);i===void 0&&(i=ye(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Tr=new Ct(mt.Er),this.dr=new Ct(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Z(new Be([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Z(new Be([])),r=new mt(n,e),s=new mt(n,e+1);let i=ye();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Z.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ct(mt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oj(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ct(Se);return n.forEach(s=>{const i=new mt(s,0),o=new mt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new mt(new Z(i),0);let a=new Ct(Se);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.Mr=e,this.docs=function(){return new Ye(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=jr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ft.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=jr();const o=n.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||EL(bL(h),r)<=0||(s.has(h.key)||ud(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Bj(this)}getSize(e){return U.resolve(this.size)}}class Bj extends Oj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.persistence=e,this.Nr=new Ho(n=>Gg(n),Qg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ty,this.targetCount=0,this.kr=Ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wg(0),this.Kr=!1,this.Kr=!0,this.$r=new Fj,this.referenceDelegate=e(this),this.Ur=new $j(this),this.indexManager=new Nj,this.remoteDocumentCache=function(s){return new zj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Pj(n),this.Gr=new jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Uj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new Hj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Hj extends IL{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Jr=new ty,this.Yr=null}static Zr(e){return new ny(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Z.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ry(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HR()?8:kL(Bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new qj;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ga()<=we.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(ga()<=we.DEBUG&&X("QueryEngine","Query:",Bi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ga()<=we.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):U.resolve())}Yi(e,n){if(tw(n))return U.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=mh(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ye(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,mh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return tw(n)||s.isEqual(ce.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(ga()<=we.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bi(n)),this.rs(e,o,n,xL(s,-1)).next(a=>a))})}ts(e,n){let r=new Ct(lk(e));return n.forEach((s,i)=>{ud(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ga()<=we.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.Ji.getDocumentsMatchingQuery(e,n,ks.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ye(Se),this._s=new Ho(i=>Gg(i),Qg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Qj(t,e,n,r){return new Gj(t,e,n,r)}async function Pk(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ye();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Yj(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,m=f.keys();let y=U.resolve();return m.forEach(x=>{y=y.next(()=>h.getEntry(l,x)).next(E=>{const T=c.docVersions.get(x);De(T!==null),E.version.compareTo(T)<0&&(f.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Rk(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Xj(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Pt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(E,T,v){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=jr(),c=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Jj(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function Jj(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=jr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function Zj(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eV(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ls(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function om(t,e,n){const r=ue(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zl(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function dw(t,e,n){const r=ue(t);let s=ce.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ue(l),m=f._s.get(h);return m!==void 0?U.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,cr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:ye())).next(a=>(tV(r,WL(e),a),{documents:a,Ts:i})))}function tV(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class fw{constructor(){this.activeTargetIds=YL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nV{constructor(){this.so=new fw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function Af(){return $c===null?$c=function(){return 268435456+Math.round(2147483648*Math.random())}():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class oV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Af(),l=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(X("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Io("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=sV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Af();return new Promise((o,a)=>{const l=new WI;l.setWithCredentials(!0),l.listenOnce(HI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Eu.NO_ERROR:const h=l.getResponseJson();X(Lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Eu.TIMEOUT:X(Lt,`RPC '${e}' ${i} timed out`),a(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:const f=l.getStatus();if(X(Lt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const x=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(y.status);a(new G(x,y.message))}else a(new G(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(F.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{X(Lt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);X(Lt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Af(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GI(),a=KI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");X(Lt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,y=!1;const x=new iV({Io:T=>{y?X(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(X(Lt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),X(Lt,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},To:()=>f.close()}),E=(T,v,_)=>{T.listen(v,b=>{try{_(b)}catch(N){setTimeout(()=>{throw N},0)}})};return E(f,Pa.EventType.OPEN,()=>{y||(X(Lt,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),E(f,Pa.EventType.CLOSE,()=>{y||(y=!0,X(Lt,`RPC '${e}' stream ${s} transport closed`),x.So())}),E(f,Pa.EventType.ERROR,T=>{y||(y=!0,Io(Lt,`RPC '${e}' stream ${s} transport errored:`,T),x.So(new G(F.UNAVAILABLE,"The operation could not be completed")))}),E(f,Pa.EventType.MESSAGE,T=>{var v;if(!y){const _=T.data[0];De(!!_);const b=_,N=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(N){X(Lt,`RPC '${e}' stream ${s} received error:`,N);const R=N.status;let M=function(S){const I=at[S];if(I!==void 0)return wk(I)}(R),k=N.message;M===void 0&&(M=F.INTERNAL,k="Unknown error status: "+R+" with message "+N.message),y=!0,x.So(new G(M,k)),f.close()}else X(Lt,`RPC '${e}' stream ${s} received:`,_),x.bo(_)}}),E(a,qI.STAT_EVENT,T=>{T.stat===Yp.PROXY?X(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Yp.NOPROXY&&X(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){return new gj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nk(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Lr(n.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aV extends Dk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vj(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?hr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=im(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=em(l)?{documents:bj(i,l)}:{query:Ej(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ek(i,o.resumeToken);const c=nm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=yh(i,o.snapshotVersion.toTimestamp());const c=nm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Ij(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=im(this.serializer),n.removeTarget=e,this.a_(n)}}class lV extends Dk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xj(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=im(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,rm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,rm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class uV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lr(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ni(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await nc(c),c.q_.set("Unknown"),c.L_.delete(4),await md(c)}(this))})}),this.q_=new uV(r,s)}}async function md(t){if(Ni(t))for(const e of t.B_)await e(!0)}async function nc(t){for(const e of t.B_)await e(!1)}function Ok(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ay(n)?oy(n):qo(n).r_()&&iy(n,e))}function sy(t,e){const n=ue(t),r=qo(n);n.N_.delete(e),r.r_()&&Mk(n,e),n.N_.size===0&&(r.r_()?r.o_():Ni(n)&&n.q_.set("Unknown"))}function iy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(t).A_(e)}function Mk(t,e){t.Q_.xe(e),qo(t).R_(e)}function oy(t){t.Q_=new dj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qo(t).start(),t.q_.v_()}function ay(t){return Ni(t)&&!qo(t).n_()&&t.N_.size>0}function Ni(t){return ue(t).L_.size===0}function Lk(t){t.Q_=void 0}async function dV(t){t.q_.set("Online")}async function fV(t){t.N_.forEach((e,n)=>{iy(t,e)})}async function pV(t,e){Lk(t),ay(t)?(t.q_.M_(e),oy(t)):t.q_.set("Unknown")}async function mV(t,e,n){if(t.q_.set("Online"),e instanceof bk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _h(t,r)}else if(e instanceof ku?t.Q_.Ke(e):e instanceof xk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await Rk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),Mk(i,l);const f=new ls(h.target,l,c,h.sequenceNumber);iy(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await _h(t,r)}}async function _h(t,e,n){if(!Zl(e))throw e;t.L_.add(1),await nc(t),t.q_.set("Offline"),n||(n=()=>Rk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await md(t)})}function jk(t,e){return e().catch(n=>_h(t,n,e))}async function gd(t){const e=ue(t),n=Cs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;gV(e);)try{const s=await Zj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,yV(e,s)}catch(s){await _h(e,s)}Vk(e)&&Fk(e)}function gV(t){return Ni(t)&&t.O_.length<10}function yV(t,e){t.O_.push(e);const n=Cs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Vk(t){return Ni(t)&&!Cs(t).n_()&&t.O_.length>0}function Fk(t){Cs(t).start()}async function _V(t){Cs(t).p_()}async function vV(t){const e=Cs(t);for(const n of t.O_)e.m_(n.mutations)}async function wV(t,e,n){const r=t.O_.shift(),s=Jg.from(r,e,n);await jk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await gd(t)}async function xV(t,e){e&&Cs(t).V_&&await async function(r,s){if(function(o){return cj(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Cs(r).s_(),await jk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await gd(r)}}(t,e),Vk(t)&&Fk(t)}async function mw(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Ni(n);n.L_.add(3),await nc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await md(n)}async function bV(t,e){const n=ue(t);e?(n.L_.delete(2),await md(n)):e||(n.L_.add(2),await nc(n),n.q_.set("Unknown"))}function qo(t){return t.K_||(t.K_=function(n,r,s){const i=ue(n);return i.w_(),new aV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:dV.bind(null,t),Ro:fV.bind(null,t),mo:pV.bind(null,t),d_:mV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ay(t)?oy(t):t.q_.set("Unknown")):(await t.K_.stop(),Lk(t))})),t.K_}function Cs(t){return t.U_||(t.U_=function(n,r,s){const i=ue(n);return i.w_(),new lV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_V.bind(null,t),mo:xV.bind(null,t),f_:vV.bind(null,t),g_:wV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await gd(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ly(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(t,e){if(Lr("AsyncQueue",`${e}: ${t}`),Zl(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Ra(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new fo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.W_=new Ye(Z.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Po{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Po(e,n,fo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class TV{constructor(){this.queries=yw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),i=s.queries;s.queries=yw(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function yw(){return new Ho(t=>ak(t),cd)}async function Uk(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new EV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=cy(o,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&uy(n)}async function zk(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IV(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&uy(n)}function kV(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function uy(t){t.Y_.forEach(e=>{e.next()})}var am,_w;(_w=am||(am={})).ea="default",_w.Cache="cache";class Bk{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.key=e}}class Wk{constructor(e){this.key=e}}class SV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=lk(e),this.Ra=new fo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new gw,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=ud(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;m&&y?m.data.isEqual(y.data)?x!==E&&(r.track({type:3,doc:y}),T=!0):this.ga(m,y)||(r.track({type:2,doc:y}),T=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),T=!0):m&&!y&&(r.track({type:1,doc:m}),T=!0,(l||c)&&(a=!0)),T&&(y?(o=o.add(y),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,x){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return E(y)-E(x)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Po(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Wk(r))}),this.da.forEach(r=>{e.has(r)||n.push(new $k(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Po.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AV{constructor(e){this.key=e,this.va=!1}}class PV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ho(a=>ak(a),cd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(Z.comparator),this.Na=new Map,this.La=new ty,this.Ba={},this.ka=new Map,this.qa=Ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function RV(t,e,n=!0){const r=Yk(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Hk(r,e,n,!0),s}async function NV(t,e){const n=Yk(t);await Hk(n,e,!0,!1)}async function Hk(t,e,n,r){const s=await eV(t.localStore,cr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await DV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ok(t.remoteStore,s),a}async function DV(t,e,n,r,s){t.Ka=(f,m,y)=>async function(E,T,v,_){let b=T.view.ma(v);b.ns&&(b=await dw(E.localStore,T.query,!1).then(({documents:k})=>T.view.ma(k,b)));const N=_&&_.targetChanges.get(T.targetId),R=_&&_.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(b,E.isPrimaryClient,N,R);return ww(E,T.targetId,M.wa),M.snapshot}(t,f,m,y);const i=await dw(t.localStore,e,!0),o=new SV(e,i.Ts),a=o.ma(i.documents),l=tc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);ww(t,n,c.wa);const h=new CV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function OV(t,e,n){const r=ue(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!cd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await om(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sy(r.remoteStore,s.targetId),lm(r,s.targetId)}).catch(Jl)):(lm(r,s.targetId),await om(r.localStore,s.targetId,!0))}async function MV(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sy(n.remoteStore,r.targetId))}async function LV(t,e,n){const r=$V(t);try{const s=await function(o,a){const l=ue(o),c=tt.now(),h=a.reduce((y,x)=>y.add(x.key),ye());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=jr(),E=ye();return l.cs.getEntries(y,h).next(T=>{x=T,x.forEach((v,_)=>{_.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(T=>{f=T;const v=[];for(const _ of a){const b=sj(_,f.get(_.key).overlayedDocument);b!=null&&v.push(new Ri(_.key,b,ZI(b.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(T=>{m=T;const v=T.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(y,T.batchId,v)})}).then(()=>({batchId:m.batchId,changes:uk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ye(Se)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await rc(r,s.changes),await gd(r.remoteStore)}catch(s){const i=cy(s,"Failed to persist write");n.reject(i)}}async function qk(t,e){const n=ue(t);try{const r=await Xj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?De(o.va):s.removedDocuments.size>0&&(De(o.va),o.va=!1))}),await rc(n,r,e)}catch(r){await Jl(r)}}function vw(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&uy(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jV(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ye(Z.comparator);o=o.insert(i,Ft.newNoDocument(i,ce.min()));const a=ye().add(i),l=new fd(ce.min(),new Map,new Ye(Se),o,a);await qk(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),hy(r)}else await om(r.localStore,e,!1).then(()=>lm(r,e,n)).catch(Jl)}async function VV(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await Yj(n.localStore,e);Gk(n,r,null),Kk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rc(n,s)}catch(s){await Jl(s)}}async function FV(t,e,n){const r=ue(t);try{const s=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(De(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);Gk(r,e,n),Kk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rc(r,s)}catch(s){await Jl(s)}}function Kk(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Gk(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function lm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Qk(t,r)})}function Qk(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hy(t))}function ww(t,e,n){for(const r of n)r instanceof $k?(t.La.addReference(r.key,e),UV(t,r)):r instanceof Wk?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Qk(t,r.key)):ie()}function UV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),hy(t))}function hy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Z(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new AV(n)),t.Oa=t.Oa.insert(n,r),Ok(t.remoteStore,new ls(cr(Yg(n.path)),r,"TargetPurposeLimboResolution",Wg.oe))}}async function rc(t,e,n){const r=ue(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=ry.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=ue(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,m=>U.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>U.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Zl(f))throw f;X("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.os.get(m),x=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(m,E)}}}(r.localStore,i))}async function zV(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await Pk(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rc(n,r.hs)}}function BV(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let s=ye();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function Yk(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jV.bind(null,e),e.Ca.d_=IV.bind(null,e.eventManager),e.Ca.$a=kV.bind(null,e.eventManager),e}function $V(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FV.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Qj(this.persistence,new Kj,e.initialUser,this.serializer)}Ga(e){return new Wj(ny.Zr,this.serializer)}Wa(e){return new nV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zV.bind(null,this.syncEngine),await bV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TV}()}createDatastore(e){const n=pd(e.databaseInfo.databaseId),r=function(i){return new oV(i)}(e.databaseInfo);return function(i,o,a,l){return new cV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new hV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vw(this.syncEngine,n,0),function(){return pw.D()?new pw:new rV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const f=new PV(s,i,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ue(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await nc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=YI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rf(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Pk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HV(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>mw(e.remoteStore,s)),t._onlineComponents=e}async function HV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Io("Error using user provided cache. Falling back to memory cache: "+n),await Rf(t,new vh)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Rf(t,new vh);return t._offlineComponents}async function Jk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await xw(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await xw(t,new cm))),t._onlineComponents}function qV(t){return Jk(t).then(e=>e.syncEngine)}async function Zk(t){const e=await Jk(t),n=e.eventManager;return n.onListen=RV.bind(null,e.syncEngine),n.onUnlisten=OV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MV.bind(null,e.syncEngine),n}function KV(t,e,n={}){const r=new Ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new Xk({next:m=>{h.Za(),o.enqueueAndForget(()=>zk(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Bk(Yg(a.path),h,{includeMetadataChanges:!0,_a:!0});return Uk(i,f)}(await Zk(t),t.asyncQueue,e,n,r)),r.promise}function GV(t,e,n={}){const r=new Ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new Xk({next:m=>{h.Za(),o.enqueueAndForget(()=>zk(i,f)),m.fromCache&&l.source==="server"?c.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Bk(a,h,{includeMetadataChanges:!0,_a:!0});return Uk(i,f)}(await Zk(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QV(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ew(t){if(!Z.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Tw(t){if(Z.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function As(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yd(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dL;switch(r.type){case"firstParty":return new gL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bw.get(n);r&&(X("ComponentProvider","Removing Datastore"),bw.delete(n),r.terminate())}(this),Promise.resolve()}}function YV(t,e,n,r={}){var s;const i=(t=As(t,_d))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=jt.MOCK_USER;else{a=CT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new jt(c)}t._authCredentials=new fL(new QI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class bs extends Fs{constructor(e,n,r){super(e,n,Yg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Z(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Nf(t,e,...n){if(t=Qe(t),tS("collection","path",e),t instanceof _d){const r=Be.fromString(e,...n);return Tw(r),new bs(t,null,r)}{if(!(t instanceof ln||t instanceof bs))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Tw(r),new bs(t.firestore,null,r)}}function wh(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=YI.newId()),tS("doc","path",e),t instanceof _d){const r=Be.fromString(e,...n);return Ew(r),new ln(t,null,new Z(r))}{if(!(t instanceof ln||t instanceof bs))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Ew(r),new ln(t.firestore,t instanceof bs?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Nk(this,"async_queue_retry"),this.Vu=()=>{const r=Pf();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ar;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Zl(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ly.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class sc extends _d{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new kw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kw(e),this._firestoreClient=void 0,await e}}}function XV(t,e){const n=typeof t=="object"?t:td(),r=typeof t=="string"?t:"(default)",s=js(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=IT("firestore");i&&YV(s,...i)}return s}function dy(t){if(t._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JV(t),t._firestoreClient}function JV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new AL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new WV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ro(Pt.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ro(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=/^__.*__$/;class eF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new ec(e,this.data,n,this.fieldTransforms)}}function nS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class yy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nS(this.Cu)&&ZV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pd(e)}Qu(e,n,r,s=!1){return new yy({Cu:e,methodName:n,qu:r,path:It.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _y(t){const e=t._freezeSettings(),n=pd(t._databaseId);return new tF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rS(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);oS("Data must be an object, but it was:",o,r);const a=sS(r,o);let l,c;if(i.merge)l=new Wn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=rF(e,f,n);if(!o.contains(m))throw new G(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);iF(h,m)||h.push(m)}l=new Wn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new eF(new kn(a),l,c)}class vy extends py{_toFieldTransform(e){return new ej(e.path,new Ml)}isEqual(e){return e instanceof vy}}function nF(t,e,n,r=!1){return wy(n,t.Qu(r?4:3,e))}function wy(t,e){if(iS(t=Qe(t)))return oS("Unsupported field value:",e,t),sS(t,e);if(t instanceof py)return function(r,s){if(!nS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=wy(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=tt.fromDate(r);return{timestampValue:yh(s.serializer,i)}}if(r instanceof tt){const i=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yh(s.serializer,i)}}if(r instanceof my)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ro)return{bytesValue:Ek(s.serializer,r._byteString)};if(r instanceof ln){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ey(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Xg(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${yd(r)}`)}(t,e)}function sS(t,e){const n={};return XI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(t,(r,s)=>{const i=wy(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof my||t instanceof Ro||t instanceof ln||t instanceof py||t instanceof gy)}function oS(t,e,n){if(!iS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=yd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rF(t,e,n){if((e=Qe(e))instanceof fy)return e._internalPath;if(typeof e=="string")return aS(t,e);throw xh("Field path arguments must be of type string or ",t,!1,void 0,n)}const sF=new RegExp("[~\\*/\\[\\]]");function aS(t,e,n){if(e.search(sF)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fy(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(F.INVALID_ARGUMENT,a+t+l)}function iF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oF extends lS{data(){return super.data()}}function vd(t,e){return typeof e=="string"?aS(t,e):e instanceof fy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class by extends xy{}function Sw(t,e,...n){let r=[];e instanceof xy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Ey).length,a=i.filter(l=>l instanceof wd).length;if(o>1||o>0&&a>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class wd extends by{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wd(e,n,r)}_apply(e){const n=this._parse(e);return cS(e._query,n),new Fs(e.firestore,e.converter,tm(e._query,n))}_parse(e){const n=_y(e.firestore);return function(i,o,a,l,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Pw(f,h);const y=[];for(const x of f)y.push(Aw(l,i,x));m={arrayValue:{values:y}}}else m=Aw(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Pw(f,h),m=nF(a,o,f,h==="in"||h==="not-in");return ut.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Cw(t,e,n){const r=e,s=vd("where",t);return wd._create(s,r,n)}class Ey extends xy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ey(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)cS(o,l),o=tm(o,l)}(e._query,n),new Fs(e.firestore,e.converter,tm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ty extends by{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ty(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ol(i,o)}(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Wo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function lF(t,e="asc"){const n=e,r=vd("orderBy",t);return Ty._create(r,n)}class Iy extends by{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Iy(e,n,r)}_apply(e){return new Fs(e.firestore,e.converter,mh(e._query,this._limit,this._limitType))}}function cF(t){return Iy._create("limit",t,"F")}function Aw(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ok(e)&&n.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!Z.isDocumentKey(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Q0(t,new Z(r))}if(n instanceof ln)return Q0(t,n._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(n)}.`)}function Pw(t,e){if(!Array.isArray(t)||t.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uF{convertValue(e,n="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $o(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>st(o.doubleValue));return new gy(i)}convertGeoPoint(e){return new my(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rl(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);De(Ak(r));const s=new Nl(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hS extends lS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Su extends hS{data(e={}){return super.data(e)}}class hF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Da(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Su(this._firestore,this._userDataWriter,r.key,r,new Da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:dF(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t){t=As(t,ln);const e=As(t.firestore,sc);return KV(dy(e),t._key).then(n=>pF(e,t,n))}class fS extends uF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function Rw(t){t=As(t,Fs);const e=As(t.firestore,sc),n=dy(e),r=new fS(e);return aF(t._query),GV(n,t._query).then(s=>new hF(e,r,t,s))}function um(t,e,n){t=As(t,ln);const r=As(t.firestore,sc),s=uS(t.converter,e,n);return pS(r,[rS(_y(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ur.none())])}function fF(t,e){const n=As(t.firestore,sc),r=wh(t),s=uS(t.converter,e);return pS(n,[rS(_y(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}function pS(t,e){return function(r,s){const i=new Ar;return r.asyncQueue.enqueueAndForget(async()=>LV(await qV(r),s,i)),i.promise}(dy(t),e)}function pF(t,e,n){const r=n.docs.get(e._key),s=new fS(t);return new hS(t,s,e._key,r,new Da(n.hasPendingWrites,n.fromCache),e.converter)}function bh(){return new vy("serverTimestamp")}(function(e,n=!0){(function(s){Bo=s})(Pi),Yn(new Nn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new sc(new pL(r.getProvider("auth-internal")),new _L(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),sn(W0,"4.7.3",e),sn(W0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firebasestorage.googleapis.com",gS="storageBucket",mF=2*60*1e3,gF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends Mn{constructor(e,n,r=0){super(Df(e),`Firebase Storage: ${n} (${Df(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Df(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var nt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(nt||(nt={}));function Df(t){return"storage/"+t}function ky(){const t="An unknown error occurred, please check the error payload for server response.";return new rt(nt.UNKNOWN,t)}function yF(t){return new rt(nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _F(t){return new rt(nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rt(nt.UNAUTHENTICATED,t)}function wF(){return new rt(nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xF(t){return new rt(nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bF(){return new rt(nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EF(){return new rt(nt.CANCELED,"User canceled the upload/download.")}function TF(t){return new rt(nt.INVALID_URL,"Invalid URL '"+t+"'.")}function IF(t){return new rt(nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function kF(){return new rt(nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gS+"' property when initializing the app?")}function SF(){return new rt(nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CF(){return new rt(nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AF(t){return new rt(nt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hm(t){return new rt(nt.INVALID_ARGUMENT,t)}function yS(){return new rt(nt.APP_DELETED,"The Firebase app was deleted.")}function PF(t){return new rt(nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tl(t,e){return new rt(nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ya(t){throw new rt(nt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gn.makeFromUrl(e,n)}catch{return new gn(e,"")}if(r.path==="")return r;throw IF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},E=n===mS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",v=new RegExp(`^https?://${E}/${s}/${T}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:y,indices:x,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<b.length;N++){const R=b[N],M=R.regex.exec(e);if(M){const k=M[R.indices.bucket];let w=M[R.indices.path];w||(w=""),r=new gn(k,w),R.postModify(r);break}}if(r==null)throw TF(e);return r}}class RF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function f(T){s=setTimeout(()=>{s=null,t(y,l())},T)}function m(){i&&clearTimeout(i)}function y(T,...v){if(c){m();return}if(T){m(),h.call(null,T,...v);return}if(l()||o){m(),h.call(null,T,...v);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let x=!1;function E(T){x||(x=!0,m(),!c&&(s!==null?(T||(a=2),clearTimeout(s),f(0)):T||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function DF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t){return t!==void 0}function MF(t){return typeof t=="object"&&!Array.isArray(t)}function Sy(t){return typeof t=="string"||t instanceof String}function Nw(t){return Cy()&&t instanceof Blob}function Cy(){return typeof Blob<"u"}function Dw(t,e,n,r){if(r<e)throw hm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _S(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ui;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ui||(ui={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n,r,s,i,o,a,l,c,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,x)=>{this.resolve_=y,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Wc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ui.NO_ERROR,l=i.getStatus();if(!a||LF(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ui.ABORT;r(!1,new Wc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Wc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());OF(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=ky();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?yS():EF();o(l)}else{const l=bF();o(l)}};this.canceled_?n(!1,new Wc(!1,null,!0)):this.backoffId_=NF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function VF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function FF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function BF(t,e,n,r,s,i,o=!0){const a=_S(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return UF(c,e),VF(c,n),FF(c,i),zF(c,r),new jF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WF(...t){const e=$F();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Cy())return new Blob(t);throw new rt(nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){if(typeof atob>"u")throw AF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Of{constructor(e,n){this.data=e,this.contentType=n||null}}function KF(t,e){switch(t){case or.RAW:return new Of(vS(e));case or.BASE64:case or.BASE64URL:return new Of(wS(t,e));case or.DATA_URL:return new Of(QF(e),YF(e))}throw ky()}function vS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function GF(t){let e;try{e=decodeURIComponent(t)}catch{throw tl(or.DATA_URL,"Malformed data URL.")}return vS(e)}function wS(t,e){switch(t){case or.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw tl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case or.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw tl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qF(e)}catch(s){throw s.message.includes("polyfill")?s:tl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class xS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw tl(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=XF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function QF(t){const e=new xS(t);return e.base64?wS(or.BASE64,e.rest):GF(e.rest)}function YF(t){return new xS(t).contentType}function XF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){let r=0,s="";Nw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Nw(this.data_)){const r=this.data_,s=HF(r,e,n);return s===null?null:new ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ss(r,!0)}}static getBlob(...e){if(Cy()){const n=e.map(r=>r instanceof ss?r.data_:r);return new ss(WF.apply(null,n))}else{const n=e.map(o=>Sy(o)?KF(or.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){let e;try{e=JSON.parse(t)}catch{return null}return MF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ES(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t,e){return e}class Ht{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||e4}}let Hc=null;function t4(t){return!Sy(t)||t.length<2?t:ES(t)}function TS(){if(Hc)return Hc;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(i,o){return t4(o)}const n=new Ht("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Ht("size");return s.xform=r,t.push(s),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),Hc=t,Hc}function n4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new gn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function r4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return n4(r,t),r}function IS(t,e,n){const r=bS(e);return r===null?null:r4(t,r,n)}function s4(t,e,n,r){const s=bS(e);if(s===null||!Sy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),y=Ay(m,n,r),x=_S({alt:"media",token:c});return y+x})[0]}function i4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class kS{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){if(!t)throw ky()}function o4(t,e){function n(r,s){const i=IS(t,s,e);return SS(i!==null),i}return n}function a4(t,e){function n(r,s){const i=IS(t,s,e);return SS(i!==null),s4(i,s,t.host,t._protocol)}return n}function CS(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=wF():s=vF():n.getStatus()===402?s=_F(t.bucket):n.getStatus()===403?s=xF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function l4(t){const e=CS(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=yF(t.path)),i.serverResponse=s.serverResponse,i}return n}function c4(t,e,n){const r=e.fullServerUrl(),s=Ay(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new kS(s,i,a4(t,n),o);return a.errorHandler=l4(e),a}function u4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function h4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=u4(null,e)),r}function d4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let N=0;N<2;N++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=h4(e,r,s),h=i4(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=ss.getBlob(f,r,m);if(y===null)throw SF();const x={name:c.fullPath},E=Ay(i,t.host,t._protocol),T="POST",v=t.maxUploadRetryTime,_=new kS(E,T,o4(t,n),v);return _.urlParams=x,_.headers=o,_.body=y.uploadData(),_.errorHandler=CS(e),_}class f4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ui.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ui.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ui.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ya("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ya("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ya("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ya("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ya("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class p4 extends f4{initXhr(){this.xhr_.responseType="text"}}function AS(){return new p4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this._service=e,n instanceof gn?this._location=n:this._location=gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ti(e,n)}get root(){const e=new gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ES(this._location.path)}get storage(){return this._service}get parent(){const e=JF(this._location.path);if(e===null)return null;const n=new gn(this._location.bucket,e);return new Ti(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PF(e)}}function m4(t,e,n){t._throwIfRoot("uploadBytes");const r=d4(t.storage,t._location,TS(),new ss(e,!0),n);return t.storage.makeRequestWithTokens(r,AS).then(s=>({metadata:s,ref:t}))}function g4(t){t._throwIfRoot("getDownloadURL");const e=c4(t.storage,t._location,TS());return t.storage.makeRequestWithTokens(e,AS).then(n=>{if(n===null)throw CF();return n})}function y4(t,e){const n=ZF(t._location.path,e),r=new gn(t._location.bucket,n);return new Ti(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t){return/^[A-Za-z]+:\/\//.test(t)}function v4(t,e){return new Ti(t,e)}function PS(t,e){if(t instanceof Py){const n=t;if(n._bucket==null)throw kF();const r=new Ti(n,n._bucket);return e!=null?PS(r,e):r}else return e!==void 0?y4(t,e):t}function w4(t,e){if(e&&_4(e)){if(t instanceof Py)return v4(t,e);throw hm("To use ref(service, url), the first argument must be a Storage instance.")}else return PS(t,e)}function Ow(t,e){const n=e==null?void 0:e[gS];return n==null?null:gn.makeFromBucketSpec(n,t)}function x4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:CT(s,t.app.options.projectId))}class Py{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=mS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mF,this._maxUploadRetryTime=gF,this._requests=new Set,s!=null?this._bucket=gn.makeFromBucketSpec(s,this._host):this._bucket=Ow(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,e):this._bucket=Ow(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ti(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new RF(yS());{const o=BF(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Mw="@firebase/storage",Lw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="storage";function b4(t,e,n){return t=Qe(t),m4(t,e,n)}function E4(t){return t=Qe(t),g4(t)}function T4(t,e){return t=Qe(t),w4(t,e)}function jw(t=td(),e){t=Qe(t);const r=js(t,RS).getImmediate({identifier:e}),s=IT("storage");return s&&I4(r,...s),r}function I4(t,e,n,r={}){x4(t,e,n,r)}function k4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Py(n,r,s,e,Pi)}function S4(){Yn(new Nn(RS,k4,"PUBLIC").setMultipleInstances(!0)),sn(Mw,Lw,""),sn(Mw,Lw,"esm2017")}S4();let NS=null,DS=null;try{({initializeAppCheck:NS,ReCaptchaV3Provider:DS}=require("firebase/app-check"))}catch{}const Ui={apiKey:"AIzaSyAgRnS9ugijuxF1qMCfr-USXe5AkYAnLME",authDomain:"agentic-hackthon.firebaseapp.com",projectId:"agentic-hackthon",appId:"1:1063716672043:web:681fd771d31ad548f6106e",storageBucket:"agentic-hackthon.firebasestorage.app",messagingSenderId:"1063716672043",measurementId:"G-S3ZEB9M54W"};function C4(t){try{let e=String(t).trim();if(/^https?:\/\//i.test(e))try{e=new URL(e).hostname}catch{}return/\.firebasestorage\.app$/i.test(e)&&(e=e.replace(/\.firebasestorage\.app$/i,".appspot.com")),e=e.split("/")[0],e}catch{return t}}function A4(t){return!!(t&&t.apiKey&&t.authDomain&&t.projectId&&t.appId)}let Qr,xt,P4,fn,Eh;try{if(!A4(Ui))throw new Error("Missing Firebase env configuration");const t=C4(Ui.storageBucket)||(Ui.projectId?`${Ui.projectId}.appspot.com`:void 0),e={...Ui,storageBucket:t};Qr=DT(e),xt=WO(Qr),fn=XV(Qr),Eh=t?jw(Qr,`gs://${t}`):jw(Qr);try{}catch{}if(Ui.measurementId)try{cL().then(n=>{n&&(P4=aL(Qr))}).catch(()=>{})}catch{}}catch(t){console.error("[Firebase] Initialization failed:",(t==null?void 0:t.message)||t),Qr=null,xt={currentUser:null},fn=null,Eh=null}function R4(t){return Qr&&xt?mD(xt,t):(t(null),()=>{})}function N4(){const[t,e]=O.useState(null),[n,r]=O.useState(!0),[s,i]=O.useState(null),o=O.useCallback(async v=>{try{if(!v||!fn)return;const _=wh(fn,"users",v.uid),b=await dS(_),N={uid:v.uid,email:v.email||null,displayName:v.displayName||null,photoURL:v.photoURL||null,phoneNumber:v.phoneNumber||null,providerIds:(v.providerData||[]).map(R=>R.providerId),updatedAt:bh()};b.exists()?await um(_,N,{merge:!0}):await um(_,{...N,createdAt:bh(),role:"user"},{merge:!0})}catch{}},[]);O.useEffect(()=>{const v=R4(async _=>{e(_||null),r(!1)});return oO(xt).then(async _=>{_&&_.user&&(await o(_.user),e(_.user))}).catch(()=>{}).finally(()=>{}),()=>v&&v()},[o]);const a=O.useCallback(async({email:v,password:_})=>{const b=await hD(xt,v,_);return e(b.user),b.user},[]),l=O.useCallback(async({email:v,password:_,name:b})=>{const N=await uD(xt,v,_);if(b)try{await aI(N.user,{displayName:b})}catch{}return await o(N.user),e({...N.user}),N.user},[o]),c=O.useCallback(async()=>{await gD(xt),e(null)},[]),h=O.useCallback(async()=>xt.currentUser?xt.currentUser.getIdToken():null,[]),f=O.useCallback(async()=>{const v=new br;v.setCustomParameters({prompt:"select_account"});const _=typeof navigator<"u"&&navigator.userAgent||"",b=/iPad|iPhone|iPod/.test(_),N=/Android/.test(_),R=typeof window<"u"&&window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,M=/FBAN|FBAV|Instagram|Line|MicroMessenger|Twitter|FB_IAB|VKClient|Snapchat/.test(_);try{if(b||N||R||M)return await S0(xt,v),null;const k=await ZD(xt,v);return await o(k.user),e(k.user),k.user}catch(k){const w=k&&k.code?String(k.code):"";if(w==="auth/popup-closed-by-user"||w==="auth/popup-blocked"||w==="auth/cancelled-popup-request")return await S0(xt,v),null;throw console.error("[Auth] Google sign-in failed:",k),k}},[o]),m=O.useCallback(()=>{if(typeof window>"u")return null;if(!window.recaptchaVerifier){const v="recaptcha-container";let _=document.getElementById(v);_||(_=document.createElement("div"),_.id=v,_.style.display="inline-block",document.body.appendChild(_)),window.recaptchaVerifier=new WD(xt,v,{size:"invisible"})}return window.recaptchaVerifier},[]);function y(v){if(!v)return"";let b=String(v).replace(/[^0-9]/g,"");return b.startsWith("91")&&b.length>10&&(b=b.slice(b.length-10)),b.length===11&&b.startsWith("0")&&(b=b.slice(1)),b}function x(v){return/^[6-9][0-9]{9}$/.test(v)}const E=O.useCallback(async v=>{const _=m();try{_&&typeof _.render=="function"&&await _.render()}catch{}const b=y(v);if(!x(b)){const M=new Error("Please enter a valid Indian mobile number (10 digits starting with 6-9).");throw M.code="auth/invalid-india-number",M}const N=`+91${b}`,R=await KD(xt,N,_);return i(R),R},[m]),T=O.useCallback(async v=>{const _=s;if(!_)throw new Error("No phone confirmation in progress");const b=await _.confirm(v);return await o(b.user),e(b.user),i(null),b.user},[s,o]);return{user:t,loading:n,login:a,signup:l,logout:c,getIdToken:h,loginWithGoogle:f,sendPhoneCode:E,confirmPhoneCode:T,phoneConfirmation:s}}const OS=O.createContext(null);function D4({children:t}){const e=N4();return d.jsx(OS.Provider,{value:e,children:t})}function Di(){return O.useContext(OS)}function ve({variant:t="primary",className:e="",disabled:n=!1,children:r,...s}){const i="inline-flex items-center justify-center rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed px-3.5 py-2.5 text-sm font-medium shadow-sm focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900",o={primary:"bg-gradient-to-tr from-brand-600 to-brand-700 text-white hover:from-brand-600 hover:to-brand-800 focus:ring-brand-600",secondary:"bg-slate-200 text-slate-900 hover:bg-slate-300 focus:ring-slate-400 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800 focus:ring-slate-300"},a=`${i} ${o[t]||o.primary} ${e}`.trim();return d.jsx("button",{className:a,disabled:n,...s,children:r})}function O4(){const{theme:t,toggleTheme:e}=RR(),{user:n,logout:r,loading:s,loginWithGoogle:i}=Di(),[o,a]=O.useState(!1),[l,c]=O.useState(!1),h=({isActive:f})=>`px-3 py-2 rounded-md transition-colors hover:text-brand-700 hover:bg-slate-100 dark:hover:bg-slate-800 ${f?"text-brand-700 bg-brand-50 dark:text-brand-300 dark:bg-slate-800":"text-slate-700 dark:text-slate-200"}`;return d.jsx("nav",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/70 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shadow-subtle",children:d.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"mr-auto flex items-center gap-3",children:[d.jsx("div",{className:"w-7 h-7 rounded-md bg-gradient-to-tr from-brand-600 to-brand-700 shadow ring-1 ring-brand-500/30"}),d.jsx("span",{className:"font-semibold tracking-wide text-slate-900 dark:text-slate-100",children:"AgenticSprit"})]}),d.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[d.jsx(er,{className:h,to:"/",children:"Dashboard"}),d.jsx(er,{className:h,to:"/daily-checkin",children:"Daily Check-in"}),d.jsx(er,{className:h,to:"/upload-report",children:"Upload Report"})]}),d.jsxs("div",{className:"flex items-center gap-2 relative",children:[d.jsxs("button",{onClick:e,"aria-label":"Toggle theme","aria-pressed":t==="dark",className:`relative inline-flex w-14 h-8 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900\r
                bg-slate-200 dark:bg-slate-700`,children:[d.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-amber-500 ${theme === 'dark' ? 'opacity-0' : 'opacity-100'}",children:d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M12 4a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1Zm0 13a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm7-6a1 1 0 0 1 1 1h1a1 1 0 1 1 0 2h-1a1 1 0 1 1-2 0 1 1 0 0 1 1-1ZM4 12a1 1 0 0 1 1-1H6a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm12.95-6.364a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414ZM4.929 17.657a1 1 0 0 1 1.414 0l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414Zm12.021 2.121a1 1 0 0 1 0-1.414l.707-.707a1 1 0 1 1 1.414 1.414l-.707.707a1 1 0 0 1-1.414 0ZM6.05 5.636a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 3.929 6.343l.707-.707A1 1 0 0 1 6.05 5.636Z"})})}),d.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-sky-400 ${theme === 'dark' ? 'opacity-100' : 'opacity-0'}",children:d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"})})}),d.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 rounded-full bg-white shadow transition-transform duration-300 ${t==="dark"?"translate-x-6":"translate-x-0"}`})]}),!s&&(n?d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>c(f=>!f),className:"relative inline-flex items-center gap-2 px-2 py-1 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600","aria-haspopup":"menu","aria-expanded":l,children:[d.jsxs("span",{className:"relative inline-block",children:[n.photoURL?d.jsx("img",{src:n.photoURL,alt:"avatar",className:"w-8 h-8 rounded-full ring-2 ring-brand-500/40"}):d.jsx("span",{className:"w-8 h-8 rounded-full grid place-items-center text-white text-sm font-medium bg-gradient-to-tr from-brand-600 to-brand-700 ring-2 ring-brand-500/40",children:(n.displayName||n.email||"?").slice(0,1).toUpperCase()}),d.jsx("span",{className:"absolute -right-0.5 -bottom-0.5 block w-3 h-3 rounded-full bg-emerald-500 ring-2 ring-white dark:ring-slate-900","aria-hidden":"true"})]}),d.jsx("span",{className:"hidden sm:inline text-sm max-w-[10rem] truncate",children:n.displayName||n.email}),d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-70",children:d.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l&&d.jsxs("div",{role:"menu",className:"absolute right-0 mt-2 w-60 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg z-50",children:[d.jsxs("div",{className:"px-3 py-2 text-sm text-slate-700 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700",children:[d.jsx("div",{className:"font-medium truncate",children:n.displayName||"Signed in"}),d.jsx("div",{className:"text-xs text-slate-500 truncate",children:n.email})]}),d.jsx("a",{href:"/profile",className:"block px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",onClick:()=>c(!1),children:"Profile"}),d.jsx("button",{onClick:async()=>{c(!1);try{await r()}catch{}},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",children:"Log out"})]})]}):d.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[d.jsx(er,{className:h,to:"/login",children:"Log in"}),d.jsx(er,{className:h,to:"/signup",children:"Sign up"}),d.jsx(ve,{variant:"secondary",onClick:()=>{try{i()}catch{}},children:"Continue with Google"})]})),d.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200",onClick:()=>a(f=>!f),"aria-expanded":o,"aria-controls":"mobile-nav","aria-label":"Toggle navigation",children:d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),d.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),d.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),o&&d.jsxs("div",{id:"mobile-nav",className:"md:hidden mt-3 grid gap-1",children:[d.jsx(er,{onClick:()=>a(!1),className:h,to:"/",children:"Dashboard"}),d.jsx(er,{onClick:()=>a(!1),className:h,to:"/daily-checkin",children:"Daily Check-in"}),d.jsx(er,{onClick:()=>a(!1),className:h,to:"/upload-report",children:"Upload Report"}),!s&&(n?d.jsx("button",{onClick:async()=>{a(!1);try{await r()}catch{}},className:"text-left px-3 py-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Log out"}):d.jsxs(d.Fragment,{children:[d.jsx(er,{onClick:()=>a(!1),className:h,to:"/login",children:"Log in"}),d.jsx(er,{onClick:()=>a(!1),className:h,to:"/signup",children:"Sign up"}),d.jsx("button",{onClick:()=>{a(!1);try{i()}catch{}},className:"text-left px-3 py-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800",children:"Continue with Google"})]}))]})]})})}function M4({items:t=[]}){return d.jsx("ul",{className:"divide-y divide-slate-200",children:t.map((e,n)=>d.jsxs("li",{className:"py-2 flex items-center justify-between",children:[d.jsx("span",{className:"font-medium text-slate-900",children:e.label}),d.jsxs("span",{className:"text-slate-600",children:[(e.confidence*100).toFixed(1),"%"]})]},n))})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ic(t){return t+.5|0}const cs=(t,e,n)=>Math.max(Math.min(t,n),e);function Oa(t){return cs(ic(t*2.55),0,255)}function Es(t){return cs(ic(t*255),0,255)}function xr(t){return cs(ic(t/2.55)/100,0,1)}function Vw(t){return cs(ic(t*100),0,100)}const En={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dm=[..."0123456789ABCDEF"],L4=t=>dm[t&15],j4=t=>dm[(t&240)>>4]+dm[t&15],qc=t=>(t&240)>>4===(t&15),V4=t=>qc(t.r)&&qc(t.g)&&qc(t.b)&&qc(t.a);function F4(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&En[t[1]]*17,g:255&En[t[2]]*17,b:255&En[t[3]]*17,a:e===5?En[t[4]]*17:255}:(e===7||e===9)&&(n={r:En[t[1]]<<4|En[t[2]],g:En[t[3]]<<4|En[t[4]],b:En[t[5]]<<4|En[t[6]],a:e===9?En[t[7]]<<4|En[t[8]]:255})),n}const U4=(t,e)=>t<255?e(t):"";function z4(t){var e=V4(t)?L4:j4;return t?"#"+e(t.r)+e(t.g)+e(t.b)+U4(t.a,e):void 0}const B4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function MS(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function $4(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function W4(t,e,n){const r=MS(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function H4(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Ry(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,h;return i!==o&&(h=i-o,c=a>.5?h/(2-i-o):h/(i+o),l=H4(n,r,s,h,i),l=l*60+.5),[l|0,c||0,a]}function Ny(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Es)}function Dy(t,e,n){return Ny(MS,t,e,n)}function q4(t,e,n){return Ny(W4,t,e,n)}function K4(t,e,n){return Ny($4,t,e,n)}function LS(t){return(t%360+360)%360}function G4(t){const e=B4.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Oa(+e[5]):Es(+e[5]));const s=LS(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=q4(s,i,o):e[1]==="hsv"?r=K4(s,i,o):r=Dy(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Q4(t,e){var n=Ry(t);n[0]=LS(n[0]+e),n=Dy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Y4(t){if(!t)return;const e=Ry(t),n=e[0],r=Vw(e[1]),s=Vw(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${xr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Fw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Uw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function X4(){const t={},e=Object.keys(Uw),n=Object.keys(Fw);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Fw[i]);i=parseInt(Uw[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Kc;function J4(t){Kc||(Kc=X4(),Kc.transparent=[0,0,0,0]);const e=Kc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Z4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function eU(t){const e=Z4.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Oa(o):cs(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Oa(r):cs(r,0,255)),s=255&(e[4]?Oa(s):cs(s,0,255)),i=255&(e[6]?Oa(i):cs(i,0,255)),{r,g:s,b:i,a:n}}}function tU(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${xr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Mf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function nU(t,e,n){const r=zi(xr(t.r)),s=zi(xr(t.g)),i=zi(xr(t.b));return{r:Es(Mf(r+n*(zi(xr(e.r))-r))),g:Es(Mf(s+n*(zi(xr(e.g))-s))),b:Es(Mf(i+n*(zi(xr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Gc(t,e,n){if(t){let r=Ry(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Dy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function jS(t,e){return t&&Object.assign(e||{},t)}function zw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Es(t[3]))):(e=jS(t,{r:0,g:0,b:0,a:1}),e.a=Es(e.a)),e}function rU(t){return t.charAt(0)==="r"?eU(t):G4(t)}class Vl{constructor(e){if(e instanceof Vl)return e;const n=typeof e;let r;n==="object"?r=zw(e):n==="string"&&(r=F4(e)||J4(e)||rU(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=jS(this._rgb);return e&&(e.a=xr(e.a)),e}set rgb(e){this._rgb=zw(e)}rgbString(){return this._valid?tU(this._rgb):void 0}hexString(){return this._valid?z4(this._rgb):void 0}hslString(){return this._valid?Y4(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=nU(this._rgb,e._rgb,n)),this}clone(){return new Vl(this.rgb)}alpha(e){return this._rgb.a=Es(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ic(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gc(this._rgb,2,e),this}darken(e){return Gc(this._rgb,2,-e),this}saturate(e){return Gc(this._rgb,1,e),this}desaturate(e){return Gc(this._rgb,1,-e),this}rotate(e){return Q4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gr(){}const sU=(()=>{let t=0;return()=>t++})();function Ve(t){return t==null}function kt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function On(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function tr(t,e){return On(t)?t:e}function be(t,e){return typeof t>"u"?e:t}const iU=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ze(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Re(t,e,n,r){let s,i,o;if(kt(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Pe(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Th(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Ih(t){if(kt(t))return t.map(Ih);if(Pe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Ih(t[n[s]]);return e}return t}function VS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function oU(t,e,n,r){if(!VS(t))return;const s=e[t],i=n[t];Pe(s)&&Pe(i)?Fl(s,i,r):e[t]=Ih(i)}function Fl(t,e,n){const r=kt(e)?e:[e],s=r.length;if(!Pe(t))return t;n=n||{};const i=n.merger||oU;let o;for(let a=0;a<s;++a){if(o=r[a],!Pe(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)i(l[c],t,o,n)}return t}function nl(t,e){return Fl(t,e,{merger:aU})}function aU(t,e,n){if(!VS(t))return;const r=e[t],s=n[t];Pe(r)&&Pe(s)?nl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ih(s))}const Bw={"":t=>t,x:t=>t.x,y:t=>t.y};function lU(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function cU(t){const e=lU(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function kh(t,e){return(Bw[e]||(Bw[e]=cU(e)))(t)}function Oy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Sh=t=>typeof t<"u",Ps=t=>typeof t=="function",$w=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function uU(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ut=Math.PI,dr=2*Ut,hU=dr+Ut,Ch=Number.POSITIVE_INFINITY,dU=Ut/180,Hn=Ut/2,Ws=Ut/4,Ww=Ut*2/3,FS=Math.log10,No=Math.sign;function rl(t,e,n){return Math.abs(t-e)<n}function Hw(t){const e=Math.round(t);t=rl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(FS(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function fU(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function pU(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ul(t){return!pU(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function mU(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function gU(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function si(t){return t*(Ut/180)}function yU(t){return t*(180/Ut)}function qw(t){if(!On(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function _U(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Ut&&(i+=dr),{angle:i,distance:s}}function fm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vU(t,e){return(t-e+hU)%dr-Ut}function Yr(t){return(t%dr+dr)%dr}function US(t,e,n,r){const s=Yr(t),i=Yr(e),o=Yr(n),a=Yr(i-s),l=Yr(o-s),c=Yr(s-i),h=Yr(s-o);return s===i||s===o||r&&i===o||a>l&&c<h}function Cn(t,e,n){return Math.max(e,Math.min(n,t))}function wU(t){return Cn(t,-32768,32767)}function Ma(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function My(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const ii=(t,e,n,r)=>My(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),xU=(t,e,n)=>My(t,n,r=>t[r][e]>=n);function bU(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const zS=["push","pop","shift","splice","unshift"];function EU(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),zS.forEach(n=>{const r="_onData"+Oy(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Kw(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(zS.forEach(i=>{delete t[i]}),delete t._chartjs)}function TU(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const BS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $S(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,BS.call(window,()=>{r=!1,t.apply(e,n)}))}}function IU(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const WS=t=>t==="start"?"left":t==="end"?"right":"center",hn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,kU=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function SU(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:f,max:m,minDefined:y,maxDefined:x}=o.getUserBounds();if(y){if(s=Math.min(ii(l,h,f).lo,n?r:ii(e,h,o.getPixelForValue(f)).lo),c){const E=l.slice(0,s+1).reverse().findIndex(T=>!Ve(T[a.axis]));s-=Math.max(0,E)}s=Cn(s,0,r-1)}if(x){let E=Math.max(ii(l,o.axis,m,!0).hi+1,n?0:ii(e,h,o.getPixelForValue(m),!0).hi+1);if(c){const T=l.slice(E-1).findIndex(v=>!Ve(v[a.axis]));E+=Math.max(0,T)}i=Cn(E,s,r)-s}else i=r-s}return{start:s,count:i}}function CU(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Qc=t=>t===0||t===1,Gw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*dr/n)),Qw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*dr/n)+1,sl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Hn)+1,easeOutSine:t=>Math.sin(t*Hn),easeInOutSine:t=>-.5*(Math.cos(Ut*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qc(t)?t:Gw(t,.075,.3),easeOutElastic:t=>Qc(t)?t:Qw(t,.075,.3),easeInOutElastic(t){return Qc(t)?t:t<.5?.5*Gw(t*2,.1125,.45):.5+.5*Qw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-sl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?sl.easeInBounce(t*2)*.5:sl.easeOutBounce(t*2-1)*.5+.5};function Ly(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Yw(t){return Ly(t)?t:new Vl(t)}function Lf(t){return Ly(t)?t:new Vl(t).saturate(.5).darken(.1).hexString()}const AU=["x","y","borderWidth","radius","tension"],PU=["color","borderColor","backgroundColor"];function RU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:PU},numbers:{type:"number",properties:AU}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function NU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xw=new Map;function DU(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Xw.get(n);return r||(r=new Intl.NumberFormat(t,e),Xw.set(n,r)),r}function HS(t,e,n){return DU(e,n).format(t)}const OU={values(t){return kt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=MU(t,n)}const o=FS(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),HS(t,r,l)}};function MU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var qS={formatters:OU};function LU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ii=Object.create(null),pm=Object.create(null);function il(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function jf(t,e,n){return typeof e=="string"?Fl(il(t,e),n):Fl(il(t,""),e)}class jU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Lf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Lf(s.borderColor),this.hoverColor=(r,s)=>Lf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return jf(this,e,n)}get(e){return il(this,e)}describe(e,n){return jf(pm,e,n)}override(e,n){return jf(Ii,e,n)}route(e,n,r,s){const i=il(this,e),o=il(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Pe(l)?Object.assign({},c,l):be(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ot=new jU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[RU,NU,LU]);function VU(t){return!t||Ve(t.size)||Ve(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Jw(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Hs(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Zw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function mm(t,e,n,r){KS(t,e,n,r,null)}function KS(t,e,n,r,s){let i,o,a,l,c,h,f,m;const y=e.pointStyle,x=e.rotation,E=e.radius;let T=(x||0)*dU;if(y&&typeof y=="object"&&(i=y.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),y){default:s?t.ellipse(n,r,s/2,E,0,0,dr):t.arc(n,r,E,0,dr),t.closePath();break;case"triangle":h=s?s/2:E,t.moveTo(n+Math.sin(T)*h,r-Math.cos(T)*E),T+=Ww,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*E),T+=Ww,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(T+Ws)*l,f=Math.cos(T+Ws)*(s?s/2-c:l),a=Math.sin(T+Ws)*l,m=Math.sin(T+Ws)*(s?s/2-c:l),t.arc(n-f,r-a,c,T-Ut,T-Hn),t.arc(n+m,r-o,c,T-Hn,T),t.arc(n+f,r+a,c,T,T+Hn),t.arc(n-m,r+o,c,T+Hn,T+Ut),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,h=s?s/2:l,t.rect(n-h,r-l,2*h,2*l);break}T+=Ws;case"rectRot":f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":T+=Ws;case"cross":f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),T+=Ws,f=Math.cos(T)*(s?s/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,m=Math.sin(T)*(s?s/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(T)*E,a=Math.sin(T)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(s?s/2:E),r+Math.sin(T)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function zl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function jy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Vy(t){t.restore()}function FU(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function UU(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function zU(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ve(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function BU(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function $U(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ah(t,e,n,r,s,i={}){const o=kt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,zU(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&$U(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ve(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),BU(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function gm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ut,Ut,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Ut,Hn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Hn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Hn,!0),t.lineTo(n+o.topLeft,r)}const WU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,HU=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function qU(t,e){const n=(""+t).match(WU);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const KU=t=>+t||0;function GS(t,e){const n={},r=Pe(e),s=r?Object.keys(e):e,i=Pe(t)?r?o=>be(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=KU(i(o));return n}function GU(t){return GS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ol(t){return GS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Jn(t){const e=GU(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function en(t,e){t=t||{},e=e||ot.font;let n=be(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=be(t.style,e.style);r&&!(""+r).match(HU)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:be(t.family,e.family),lineHeight:qU(be(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:be(t.weight,e.weight),string:""};return s.string=VU(s),s}function Yc(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function QU(t,e,n){const{min:r,max:s}=t,i=iU(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Oi(t,e){return Object.assign(Object.create(t),e)}function Fy(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=JS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Fy([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return YS(a,l,()=>r5(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return tx(a).includes(l)},ownKeys(a){return tx(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Do(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:QS(t,r),setContext:i=>Do(t,i,n,r),override:i=>Do(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return YS(i,o,()=>XU(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function QS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ps(n)?n:()=>n,isIndexable:Ps(r)?r:()=>r}}const YU=(t,e)=>t?t+Oy(e):e,Uy=(t,e)=>Pe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function YS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function XU(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Ps(a)&&o.isScriptable(e)&&(a=JU(e,a,t,n)),kt(a)&&a.length&&(a=ZU(e,a,t,o.isIndexable)),Uy(e,a)&&(a=Do(a,s,i&&i[e],o)),a}function JU(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Uy(t,l)&&(l=zy(s._scopes,s,t,l)),l}function ZU(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Pe(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const f=zy(c,s,t,h);e.push(Do(f,i,o&&o[t],a))}}return e}function XS(t,e,n){return Ps(t)?t(e,n):t}const e5=(t,e)=>t===!0?e:typeof t=="string"?kh(e,t):void 0;function t5(t,e,n,r,s){for(const i of e){const o=e5(n,i);if(o){t.add(o);const a=XS(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function zy(t,e,n,r){const s=e._rootScopes,i=XS(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=ex(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=ex(a,o,i,l,r),l===null)?!1:Fy(Array.from(a),[""],s,i,()=>n5(e,n,r))}function ex(t,e,n,r,s){for(;n;)n=t5(t,e,n,r,s);return n}function n5(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return kt(s)&&Pe(n)?n:s||{}}function r5(t,e,n,r){let s;for(const i of e)if(s=JS(YU(i,t),n),typeof s<"u")return Uy(t,s)?zy(n,r,t,s):s}function JS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function tx(t){let e=t._keys;return e||(e=t._keys=s5(t._scopes)),e}function s5(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const i5=Number.EPSILON||1e-14,Oo=(t,e)=>e<t.length&&!t[e].skip&&t[e],ZS=t=>t==="x"?"y":"x";function o5(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=fm(i,s),l=fm(o,i);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const f=r*c,m=r*h;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function a5(t,e,n){const r=t.length;let s,i,o,a,l,c=Oo(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Oo(t,h+1),!(!l||!c)){if(rl(e[h],0,i5)){n[h]=n[h+1]=0;continue}s=n[h]/e[h],i=n[h+1]/e[h],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=s*o*e[h],n[h+1]=i*o*e[h])}}function l5(t,e,n="x"){const r=ZS(n),s=t.length;let i,o,a,l=Oo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Oo(t,c+1),!a)continue;const h=a[n],f=a[r];o&&(i=(h-o[n])/3,a[`cp1${n}`]=h-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-h)/3,a[`cp2${n}`]=h+i,a[`cp2${r}`]=f+i*e[c])}}function c5(t,e="x"){const n=ZS(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Oo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Oo(t,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[n]-l[n])/h:0}i[o]=a?c?No(s[o-1])!==No(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}a5(t,s,i),l5(t,i,e)}function Xc(t,e,n){return Math.max(Math.min(t,n),e)}function u5(t,e){let n,r,s,i,o,a=zl(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&zl(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Xc(s.cp1x,e.left,e.right),s.cp1y=Xc(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Xc(s.cp2x,e.left,e.right),s.cp2y=Xc(s.cp2y,e.top,e.bottom)))}function h5(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")c5(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=o5(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&u5(t,n)}function By(){return typeof window<"u"&&typeof document<"u"}function $y(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ph(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const xd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function d5(t,e){return xd(t).getPropertyValue(e)}const f5=["top","right","bottom","left"];function hi(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=f5[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const p5=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function m5(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(p5(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ys(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=xd(n),i=s.boxSizing==="border-box",o=hi(s,"padding"),a=hi(s,"border","width"),{x:l,y:c,box:h}=m5(t,n),f=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:y,height:x}=e;return i&&(y-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-f)/y*n.width/r),y:Math.round((c-m)/x*n.height/r)}}function g5(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&$y(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=xd(i),l=hi(a,"border","width"),c=hi(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Ph(a.maxWidth,i,"clientWidth"),s=Ph(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Ch,maxHeight:s||Ch}}const Jc=t=>Math.round(t*10)/10;function y5(t,e,n,r){const s=xd(t),i=hi(s,"margin"),o=Ph(s.maxWidth,t,"clientWidth")||Ch,a=Ph(s.maxHeight,t,"clientHeight")||Ch,l=g5(t,e,n);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const m=hi(s,"border","width"),y=hi(s,"padding");c-=y.width+m.width,h-=y.height+m.height}return c=Math.max(0,c-i.width),h=Math.max(0,r?c/r:h-i.height),c=Jc(Math.min(c,o,l.maxWidth)),h=Jc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Jc(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=Jc(Math.floor(h*r))),{width:c,height:h}}function nx(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const _5=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};By()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function rx(t,e){const n=d5(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Xs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function v5(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function w5(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Xs(t,s,n),a=Xs(s,i,n),l=Xs(i,e,n),c=Xs(o,a,n),h=Xs(a,l,n);return Xs(c,h,n)}const x5=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},b5=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function po(t,e,n){return t?x5(e,n):b5()}function e1(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function t1(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function n1(t){return t==="angle"?{between:US,compare:vU,normalize:Yr}:{between:Ma,compare:(e,n)=>e-n,normalize:e=>e}}function sx({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function E5(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=n1(r),l=e.length;let{start:c,end:h,loop:f}=t,m,y;if(f){for(c+=l,h+=l,m=0,y=l;m<y&&o(a(e[c%l][r]),s,i);++m)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:f,style:t.style}}function T5(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=n1(r),{start:h,end:f,loop:m,style:y}=E5(t,e,n),x=[];let E=!1,T=null,v,_,b;const N=()=>l(s,b,v)&&a(s,b)!==0,R=()=>a(i,v)===0||l(i,b,v),M=()=>E||N(),k=()=>!E||R();for(let w=h,S=h;w<=f;++w)_=e[w%o],!_.skip&&(v=c(_[r]),v!==b&&(E=l(v,s,i),T===null&&M()&&(T=a(v,s)===0?w:S),T!==null&&k()&&(x.push(sx({start:T,end:w,loop:m,count:o,style:y})),T=null),S=w,b=v));return T!==null&&x.push(sx({start:T,end:f,loop:m,count:o,style:y})),x}function I5(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=T5(r[s],t.points,e);i.length&&n.push(...i)}return n}function k5(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function S5(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function C5(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=k5(n,s,i,r);if(r===!0)return ix(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return ix(t,S5(n,o,l,c),n,e)}function ix(t,e,n,r){return!r||!r.setContext||!n?e:A5(t,e,n,r)}function A5(t,e,n,r){const s=t._chart.getContext(),i=ox(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=i,f=e[0].start,m=f;function y(x,E,T,v){const _=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=_;for(;n[E%l].skip;)E+=_;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:T,style:v}),h=v,f=E%l)}}for(const x of e){f=a?f:x.start;let E=n[f%l],T;for(m=f+1;m<=x.end;m++){const v=n[m%l];T=ox(r.setContext(Oi(s,{type:"segment",p0:E,p1:v,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),P5(T,h)&&y(f,m-1,x.loop,h),E=v,h=T}f<m-1&&y(f,m-1,x.loop,h)}return c}function ox(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function P5(t,e){if(!e)return!1;const n=[],r=function(s,i){return Ly(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Zc(t,e,n){return t.options.clip?t[n]:e[n]}function R5(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Zc(n,e,"left"),right:Zc(n,e,"right"),top:Zc(r,e,"top"),bottom:Zc(r,e,"bottom")}:e}function N5(t,e){const n=e._clip;if(n.disabled)return!1;const r=R5(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class D5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=BS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var yr=new D5;const ax="transparent",O5={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Yw(t||ax),s=r.valid&&Yw(e||ax);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class M5{constructor(e,n,r,s){const i=n[r];s=Yc([e.to,s,i,e.from]);const o=Yc([e.from,i,s]);this._active=!0,this._fn=e.fn||O5[e.type||typeof o],this._easing=sl[e.easing]||sl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Yc([e.to,n,s,e.from]),this._from=Yc([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class r1{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Pe(e))return;const n=Object.keys(ot.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Pe(i))return;const o={};for(const a of n)o[a]=i[a];(kt(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=j5(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&L5(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[c];let f=i[c];const m=r.get(c);if(f)if(m&&f.active()){f.update(m,h,a);continue}else f.cancel();if(!m||!m.duration){e[c]=h;continue}i[c]=f=new M5(m,e,c,h),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return yr.add(this._chart,r),!0}}function L5(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function j5(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function V5(t,e,n){if(n===!1)return!1;const r=lx(t,n),s=lx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function F5(t){let e,n,r,s;return Pe(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function s1(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function cx(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],On(c)&&(i||e===0||No(e)===No(c))&&(e+=c)}return!h&&!r.all?0:e}function U5(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[i]:t[h]};return a}function Vf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function z5(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function B5(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function $5(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function ux(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function hx(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,h=z5(i,o,r),f=e.length;let m;for(let y=0;y<f;++y){const x=e[y],{[l]:E,[c]:T}=x,v=x._stacks||(x._stacks={});m=v[c]=$5(s,h,E),m[a]=T,m._top=ux(m,o,!0,r.type),m._bottom=ux(m,o,!1,r.type);const _=m._visualValues||(m._visualValues={});_[a]=T}}function Ff(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function W5(t,e){return Oi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function H5(t,e,n){return Oi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _a(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Uf=t=>t==="reset"||t==="none",dx=(t,e)=>e?t:Object.assign({},t),q5=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:s1(n,!0),values:null};class al{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Vf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_a(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,y,x)=>f==="x"?m:f==="r"?x:y,i=n.xAxisID=be(r.xAxisID,Ff(e,"x")),o=n.yAxisID=be(r.yAxisID,Ff(e,"y")),a=n.rAxisID=be(r.rAxisID,Ff(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),h=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Kw(this._data,this),e._stacked&&_a(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Pe(n)){const s=this._cachedMeta;this._data=U5(n,s)}else if(r!==n){if(r){Kw(r,this);const s=this._cachedMeta;_a(s),s._parsed=[]}n&&Object.isExtensible(n)&&EU(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Vf(n.vScale,n),n.stack!==r.stack&&(s=!0,_a(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(hx(this,n._parsed),n._stacked=Vf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{kt(s[e])?m=this.parseArrayData(r,s,e,n):Pe(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const y=()=>f[a]===null||c&&f[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=f=m[h],l&&(y()&&(l=!1),c=f);r._sorted=l}o&&hx(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),h=i===o,f=new Array(s);let m,y,x;for(m=0,y=s;m<y;++m)x=m+r,f[m]={[a]:h||i.parse(c[x],x),[l]:o.parse(n[x],x)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,h,f;for(l=0,c=s;l<c;++l)h=l+r,f=n[h],a[l]={x:i.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,f,m,y;for(h=0,f=s;h<f;++h)m=h+r,y=n[m],c[h]={x:i.parse(kh(y,a),m),y:o.parse(kh(y,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:s1(s,!0),values:n._stacks[e.axis]._visualValues};return cx(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=cx(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=q5(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=B5(a);let m,y;function x(){y=s[m];const E=y[a.axis];return!On(y[e.axis])||h>E||f<E}for(m=0;m<o&&!(!x()&&(this.updateRangeFromParsed(c,e,y,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(c,e,y,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],On(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=F5(be(this.options.clip,V5(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const f=s[h];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=H5(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=W5(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Sh(r);if(a)return dx(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),h),y=Object.keys(ot.elements[e]),x=()=>this.getContext(r,s,n),E=c.resolveNamedOptions(m,y,x,f);return E.$shared&&(E.$shared=l,i[o]=Object.freeze(dx(E,l))),E}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(m,this.getContext(e,r,n))}const c=new r1(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Uf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Uf(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Uf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&_a(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}de(al,"defaults",{}),de(al,"datasetElementType",null),de(al,"dataElementType",null);class Cu extends al{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=SU(n,s,o);this._drawStart=a,this._drawCount=l,CU(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s),m=o.axis,y=a.axis,{spanGaps:x,segment:E}=this.options,T=Ul(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||s==="none",_=n+r,b=e.length;let N=n>0&&this.getParsed(n-1);for(let R=0;R<b;++R){const M=e[R],k=v?M:{};if(R<n||R>=_){k.skip=!0;continue}const w=this.getParsed(R),S=Ve(w[y]),I=k[m]=o.getPixelForValue(w[m],R),P=k[y]=i||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[y],R);k.skip=isNaN(I)||isNaN(P)||S,k.stop=R>0&&Math.abs(w[m]-N[m])>T,E&&(k.parsed=w,k.raw=c.data[R]),f&&(k.options=h||this.resolveDataElementOptions(R,M.active?"active":s)),v||this.updateElement(M,R,k,s),N=w}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}de(Cu,"id","line"),de(Cu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),de(Cu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function qs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Wy{constructor(e){de(this,"options");this.options=e||{}}static override(e){Object.assign(Wy.prototype,e)}init(){}formats(){return qs()}parse(){return qs()}format(){return qs()}add(){return qs()}diff(){return qs()}startOf(){return qs()}endOf(){return qs()}}var K5={_date:Wy};function G5(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?xU:ii;if(r){if(s._sharedOptions){const h=i[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const m=c(i,e,n-f),y=c(i,e,n+f);return{lo:m.lo,hi:y.hi}}}}else{const h=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,y=m.slice(0,h.lo+1).reverse().findIndex(E=>!Ve(E[f.axis]));h.lo-=Math.max(0,y);const x=m.slice(h.hi).findIndex(E=>!Ve(E[f.axis]));h.hi+=Math.max(0,x)}return h}}return{lo:0,hi:i.length-1}}function bd(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:h}=i[a],{lo:f,hi:m}=G5(i[a],e,o,s);for(let y=f;y<=m;++y){const x=h[y];x.skip||r(x,c,y)}}}function Q5(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function zf(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||bd(t,n,e,function(a,l,c){!s&&!zl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function Y5(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:f}=_U(o,{x:e.x,y:e.y});US(f,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return bd(t,n,e,i),s}function X5(t,e,n,r,s,i){let o=[];const a=Q5(n);let l=Number.POSITIVE_INFINITY;function c(h,f,m){const y=h.inRange(e.x,e.y,s);if(r&&!y)return;const x=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!y)return;const T=a(e,x);T<l?(o=[{element:h,datasetIndex:f,index:m}],l=T):T===l&&o.push({element:h,datasetIndex:f,index:m})}return bd(t,n,e,c),o}function Bf(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?Y5(t,e,n,s):X5(t,e,n,r,s,i)}function fx(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return bd(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var J5={modes:{index(t,e,n,r){const s=Ys(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?zf(t,s,i,r,o):Bf(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,f=c.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const s=Ys(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?zf(t,s,i,r,o):Bf(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const s=Ys(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return zf(t,s,i,r,o)},nearest(t,e,n,r){const s=Ys(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Bf(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Ys(e,t);return fx(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Ys(e,t);return fx(t,s,"y",n.intersect,r)}}};const i1=["left","top","right","bottom"];function va(t,e){return t.filter(n=>n.pos===e)}function px(t,e){return t.filter(n=>i1.indexOf(n.pos)===-1&&n.box.axis===e)}function wa(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Z5(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function e6(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!i1.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function t6(t,e){const n=e6(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return n}function n6(t){const e=Z5(t),n=wa(e.filter(c=>c.box.fullSize),!0),r=wa(va(e,"left"),!0),s=wa(va(e,"right")),i=wa(va(e,"top"),!0),o=wa(va(e,"bottom")),a=px(e,"x"),l=px(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:va(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function mx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function o1(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function r6(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Pe(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&o1(o,i.getPadding());const a=Math.max(0,e.outerWidth-mx(o,t,"left","right")),l=Math.max(0,e.outerHeight-mx(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function s6(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function i6(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function La(t,e,n,r){const s=[];let i,o,a,l,c,h;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,i6(a.horizontal,e));const{same:f,other:m}=r6(e,n,a,r);c|=f&&s.length,h=h||m,l.fullSize||s.push(a)}return c&&La(s,e,n,r)||h}function eu(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function gx(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*h,m=c.size||l.height;Sh(c.start)&&(o=c.start),l.fullSize?eu(l,s.left,o,n.outerWidth-s.right-s.left,m):eu(l,e.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*h,m=c.size||l.width;Sh(c.start)&&(i=c.start),l.fullSize?eu(l,i,s.top,m,n.outerHeight-s.bottom-s.top):eu(l,i,e.top+c.placed,m,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var us={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Jn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=n6(t.boxes),l=a.vertical,c=a.horizontal;Re(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,T)=>T.box.options&&T.box.options.display===!1?E:E+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},s);o1(m,Jn(r));const y=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),x=t6(l.concat(c),f);La(a.fullSize,y,f,x),La(l,y,f,x),La(c,y,f,x)&&La(l,y,f,x),s6(y),gx(a.leftAndTop,y,f,x),y.x+=y.w,y.y+=y.h,gx(a.rightAndBottom,y,f,x),t.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Re(a.chartArea,E=>{const T=E.box;Object.assign(T,t.chartArea),T.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class a1{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class o6 extends a1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Au="$chartjs",a6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yx=t=>t===null||t==="";function l6(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Au]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",yx(s)){const i=rx(t,"width");i!==void 0&&(t.width=i)}if(yx(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=rx(t,"height");i!==void 0&&(t.height=i)}return t}const l1=_5?{passive:!0}:!1;function c6(t,e,n){t&&t.addEventListener(e,n,l1)}function u6(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,l1)}function h6(t,e){const n=a6[t.type]||t.type,{x:r,y:s}=Ys(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Rh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function d6(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Rh(a.addedNodes,r),o=o&&!Rh(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function f6(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Rh(a.removedNodes,r),o=o&&!Rh(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Bl=new Map;let _x=0;function c1(){const t=window.devicePixelRatio;t!==_x&&(_x=t,Bl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function p6(t,e){Bl.size||window.addEventListener("resize",c1),Bl.set(t,e)}function m6(t){Bl.delete(t),Bl.size||window.removeEventListener("resize",c1)}function g6(t,e,n){const r=t.canvas,s=r&&$y(r);if(!s)return;const i=$S((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||i(c,h)});return o.observe(s),p6(t,i),o}function $f(t,e,n){n&&n.disconnect(),e==="resize"&&m6(t)}function y6(t,e,n){const r=t.canvas,s=$S(i=>{t.ctx!==null&&n(h6(i,t))},t);return c6(r,e,s),s}class _6 extends a1{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(l6(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Au])return!1;const r=n[Au].initial;["height","width"].forEach(i=>{const o=r[i];Ve(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Au],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:d6,detach:f6,resize:g6}[n]||y6;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:$f,detach:$f,resize:$f}[n]||u6)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return y5(e,n,r,s)}isAttached(e){const n=e&&$y(e);return!!(n&&n.isConnected)}}function v6(t){return!By()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?o6:_6}class Rs{constructor(){de(this,"x");de(this,"y");de(this,"active",!1);de(this,"options");de(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Ul(this.x)&&Ul(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}de(Rs,"defaults",{}),de(Rs,"defaultRoutes");function w6(t,e){const n=t.options.ticks,r=x6(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?E6(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return T6(e,c,i,o/s),c;const h=b6(i,e,s);if(o>0){let f,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(tu(e,c,h,Ve(y)?0:a-y,a),f=0,m=o-1;f<m;f++)tu(e,c,h,i[f],i[f+1]);return tu(e,c,h,l,Ve(y)?e.length:l+y),c}return tu(e,c,h),c}function x6(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function b6(t,e,n){const r=I6(t),s=e.length/n;if(!r)return Math.max(s,1);const i=fU(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function E6(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function T6(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function tu(t,e,n,r,s){const i=be(r,0),o=Math.min(be(s,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(i+a*n))}function I6(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const k6=t=>t==="left"?"right":t==="right"?"left":t,vx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,wx=(t,e)=>Math.min(e||t,t);function xx(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function S6(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function C6(t,e){Re(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function xa(t){return t.drawTicks?t.tickLength:0}function bx(t,e){if(!t.display)return 0;const n=en(t.font,e),r=Jn(t.padding);return(kt(t.text)?t.text.length:1)*n.lineHeight+r.height}function A6(t,e){return Oi(t,{scale:e,type:"scale"})}function P6(t,e,n){return Oi(t,{tick:n,index:e,type:"tick"})}function R6(t,e,n){let r=WS(t);return(n&&e!=="right"||!n&&e==="right")&&(r=k6(r)),r}function N6(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let f=0,m,y,x;const E=o-s,T=a-i;if(t.isHorizontal()){if(y=hn(r,i,a),Pe(n)){const v=Object.keys(n)[0],_=n[v];x=h[v].getPixelForValue(_)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=vx(t,n,e);m=a-i}else{if(Pe(n)){const v=Object.keys(n)[0],_=n[v];y=h[v].getPixelForValue(_)-T+e}else n==="center"?y=(c.left+c.right)/2-T+e:y=vx(t,n,e);x=hn(r,o,s),f=n==="left"?-Hn:Hn}return{titleX:y,titleY:x,maxWidth:m,rotation:f}}class Ko extends Rs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=tr(e,Number.POSITIVE_INFINITY),n=tr(n,Number.NEGATIVE_INFINITY),r=tr(r,Number.POSITIVE_INFINITY),s=tr(s,Number.NEGATIVE_INFINITY),{min:tr(e,r),max:tr(n,s),minDefined:On(e),maxDefined:On(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:tr(n,tr(r,n)),max:tr(r,tr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ze(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=QU(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?xx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=w6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ze(this.options.afterUpdate,[this])}beforeSetDimensions(){ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ze(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ze(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=ze(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=wx(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),f=h.widest.width,m=h.highest.height,y=Cn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),f+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-xa(e.grid)-n.padding-bx(e.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=yU(Math.min(Math.asin(Cn((h.highest.height+6)/a,-1,1)),Math.asin(Cn(l/c,-1,1))-Math.asin(Cn(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ze(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bx(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=xa(i)+l):(e.height=this.maxHeight,e.width=xa(i)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:f,highest:m}=this._getLabelSizes(),y=r.padding*2,x=si(this.labelRotation),E=Math.cos(x),T=Math.sin(x);if(a){const v=r.mirror?0:T*f.width+E*m.height;e.height=Math.min(this.maxHeight,e.height+v+y)}else{const v=r.mirror?0:E*f.width+T*m.height;e.width=Math.min(this.maxWidth,e.width+v+y)}this._calculatePadding(c,h,T,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?c?(m=s*e.width,y=r*n.height):(m=r*e.height,y=s*n.width):i==="start"?y=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,y=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((y-f+o)*this.width/(this.width-f),0)}else{let h=n.height/2,f=e.height/2;i==="start"?(h=0,f=e.height):i==="end"&&(h=n.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ze(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ve(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=xx(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/wx(n,r));let c=0,h=0,f,m,y,x,E,T,v,_,b,N,R;for(f=0;f<n;f+=l){if(x=e[f].label,E=this._resolveTickFontOptions(f),s.font=T=E.string,v=i[T]=i[T]||{data:{},gc:[]},_=E.lineHeight,b=N=0,!Ve(x)&&!kt(x))b=Jw(s,v.data,v.gc,b,x),N=_;else if(kt(x))for(m=0,y=x.length;m<y;++m)R=x[m],!Ve(R)&&!kt(R)&&(b=Jw(s,v.data,v.gc,b,R),N+=_);o.push(b),a.push(N),c=Math.max(b,c),h=Math.max(N,h)}C6(i,n);const M=o.indexOf(c),k=a.indexOf(h),w=S=>({width:o[S]||0,height:a[S]||0});return{first:w(0),last:w(n-1),widest:w(M),highest:w(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return wU(this._alignToPixels?Hs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=P6(this.getContext(),e,r))}return this.$context||(this.$context=A6(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=si(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=xa(i),y=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,T=E/2,v=function(ae){return Hs(r,ae,E)};let _,b,N,R,M,k,w,S,I,P,D,A;if(o==="top")_=v(this.bottom),k=this.bottom-m,S=_-T,P=v(e.top)+T,A=e.bottom;else if(o==="bottom")_=v(this.top),P=e.top,A=v(e.bottom)-T,k=_+T,S=this.top+m;else if(o==="left")_=v(this.right),M=this.right-m,w=_-T,I=v(e.left)+T,D=e.right;else if(o==="right")_=v(this.left),I=e.left,D=v(e.right)-T,M=_+T,w=this.left+m;else if(n==="x"){if(o==="center")_=v((e.top+e.bottom)/2+.5);else if(Pe(o)){const ae=Object.keys(o)[0],se=o[ae];_=v(this.chart.scales[ae].getPixelForValue(se))}P=e.top,A=e.bottom,k=_+T,S=k+m}else if(n==="y"){if(o==="center")_=v((e.left+e.right)/2);else if(Pe(o)){const ae=Object.keys(o)[0],se=o[ae];_=v(this.chart.scales[ae].getPixelForValue(se))}M=_-T,w=M-m,I=e.left,D=e.right}const oe=be(s.ticks.maxTicksLimit,f),ne=Math.max(1,Math.ceil(f/oe));for(b=0;b<f;b+=ne){const ae=this.getContext(b),se=i.setContext(ae),B=a.setContext(ae),K=se.lineWidth,H=se.color,fe=B.dash||[],le=B.dashOffset,he=se.tickWidth,Ee=se.tickColor,Oe=se.tickBorderDash||[],Ce=se.tickBorderDashOffset;N=S6(this,b,l),N!==void 0&&(R=Hs(r,N,K),c?M=w=I=D=R:k=S=P=A=R,y.push({tx1:M,ty1:k,tx2:w,ty2:S,x1:I,y1:P,x2:D,y2:A,width:K,color:H,borderDash:fe,borderDashOffset:le,tickWidth:he,tickColor:Ee,tickBorderDash:Oe,tickBorderDashOffset:Ce}))}return this._ticksLength=f,this._borderValue=_,y}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:f}=i,m=xa(r.grid),y=m+h,x=f?-h:y,E=-si(this.labelRotation),T=[];let v,_,b,N,R,M,k,w,S,I,P,D,A="middle";if(s==="top")M=this.bottom-x,k=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+x,k=this._getXAxisLabelAlignment();else if(s==="left"){const ne=this._getYAxisLabelAlignment(m);k=ne.textAlign,R=ne.x}else if(s==="right"){const ne=this._getYAxisLabelAlignment(m);k=ne.textAlign,R=ne.x}else if(n==="x"){if(s==="center")M=(e.top+e.bottom)/2+y;else if(Pe(s)){const ne=Object.keys(s)[0],ae=s[ne];M=this.chart.scales[ne].getPixelForValue(ae)+y}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")R=(e.left+e.right)/2-y;else if(Pe(s)){const ne=Object.keys(s)[0],ae=s[ne];R=this.chart.scales[ne].getPixelForValue(ae)}k=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const oe=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){b=a[v],N=b.label;const ne=i.setContext(this.getContext(v));w=this.getPixelForTick(v)+i.labelOffset,S=this._resolveTickFontOptions(v),I=S.lineHeight,P=kt(N)?N.length:1;const ae=P/2,se=ne.color,B=ne.textStrokeColor,K=ne.textStrokeWidth;let H=k;o?(R=w,k==="inner"&&(v===_-1?H=this.options.reverse?"left":"right":v===0?H=this.options.reverse?"right":"left":H="center"),s==="top"?c==="near"||E!==0?D=-P*I+I/2:c==="center"?D=-oe.highest.height/2-ae*I+I:D=-oe.highest.height+I/2:c==="near"||E!==0?D=I/2:c==="center"?D=oe.highest.height/2-ae*I:D=oe.highest.height-P*I,f&&(D*=-1),E!==0&&!ne.showLabelBackdrop&&(R+=I/2*Math.sin(E))):(M=w,D=(1-P)*I/2);let fe;if(ne.showLabelBackdrop){const le=Jn(ne.backdropPadding),he=oe.heights[v],Ee=oe.widths[v];let Oe=D-le.top,Ce=0-le.left;switch(A){case"middle":Oe-=he/2;break;case"bottom":Oe-=he;break}switch(k){case"center":Ce-=Ee/2;break;case"right":Ce-=Ee;break;case"inner":v===_-1?Ce-=Ee:v>0&&(Ce-=Ee/2);break}fe={left:Ce,top:Oe,width:Ee+le.width,height:he+le.height,color:ne.backdropColor}}T.push({label:N,font:S,textOffset:D,options:{rotation:E,color:se,strokeColor:B,strokeWidth:K,textAlign:H,textBaseline:A,translation:[R,M],backdrop:fe}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-si(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,h;return n==="left"?s?(h=this.right+i,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?s?(h=this.left+i,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,f,m;this.isHorizontal()?(c=Hs(e,this.left,o)-o/2,h=Hs(e,this.right,a)+a/2,f=m=l):(f=Hs(e,this.top,o)-o/2,m=Hs(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&jy(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Ah(r,c,0,h,l,a)}s&&Vy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=en(r.font),o=Jn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Pe(n)?(l+=o.bottom,kt(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:f,rotation:m}=N6(this,l,n,a);Ah(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:R6(a,n,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=be(e.grid&&e.grid.z,-1),s=be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ko.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return en(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class nu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;M6(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,D6(e,o,r),this.override&&ot.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in ot[s]&&(delete ot[s][r],this.override&&delete Ii[r])}}function D6(t,e,n){const r=Fl(Object.create(null),[n?ot.get(n):{},ot.get(e),t.defaults]);ot.set(e,r),t.defaultRoutes&&O6(e,t.defaultRoutes),t.descriptors&&ot.describe(e,t.descriptors)}function O6(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ot.route(i,s,l,a)})}function M6(t){return"id"in t&&"defaults"in t}class L6{constructor(){this.controllers=new nu(al,"datasets",!0),this.elements=new nu(Rs,"elements"),this.plugins=new nu(Object,"plugins"),this.scales=new nu(Ko,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Re(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Oy(e);ze(r["before"+s],[],r),n[e](r),ze(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var sr=new L6;class j6{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(ze(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=be(r.options&&r.options.plugins,{}),i=V6(r);return s===!1&&!n?[]:U6(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function V6(t){const e={},n=[],r=Object.keys(sr.plugins.items);for(let i=0;i<r.length;i++)n.push(sr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function F6(t,e){return!e&&t===!1?null:t===!0?{}:t}function U6(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=F6(r[l],s);c!==null&&i.push({plugin:a,options:z6(t.config,{plugin:a,local:n[l]},c,o)})}return i}function z6(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ym(t,e){const n=ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function B6(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function $6(t,e){return t===e?"_index_":"_value_"}function Ex(t){if(t==="x"||t==="y"||t==="r")return t}function W6(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function _m(t,...e){if(Ex(t))return t;for(const n of e){const r=n.axis||W6(n.position)||t.length>1&&Ex(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Tx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function H6(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Tx(t,"x",n[0])||Tx(t,"y",n[0])}return{}}function q6(t,e){const n=Ii[t.type]||{scales:{}},r=e.scales||{},s=ym(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Pe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=_m(o,a,H6(o,t),ot.scales[a.type]),c=$6(l,s),h=n.scales||{};i[o]=nl(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||ym(a,e),h=(Ii[a]||{}).scales||{};Object.keys(h).forEach(f=>{const m=B6(f,l),y=o[m+"AxisID"]||m;i[y]=i[y]||Object.create(null),nl(i[y],[{axis:m},r[y],h[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];nl(a,[ot.scales[a.type],ot.scale])}),i}function u1(t){const e=t.options||(t.options={});e.plugins=be(e.plugins,{}),e.scales=q6(t,e)}function h1(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function K6(t){return t=t||{},t.data=h1(t.data),u1(t),t}const Ix=new Map,d1=new Set;function ru(t,e){let n=Ix.get(t);return n||(n=e(),Ix.set(t,n),d1.add(n)),n}const ba=(t,e,n)=>{const r=kh(e,n);r!==void 0&&t.add(r)};class G6{constructor(e){this._config=K6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=h1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),u1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ru(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return ru(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return ru(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return ru(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(f=>ba(l,e,f))),h.forEach(f=>ba(l,s,f)),h.forEach(f=>ba(l,Ii[i]||{},f)),h.forEach(f=>ba(l,ot,f)),h.forEach(f=>ba(l,pm,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),d1.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ii[n]||{},ot.datasets[n]||{},{type:n},ot,pm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=kx(this._resolverCache,e,s);let l=o;if(Y6(o,n)){i.$shared=!1,r=Ps(r)?r():r;const c=this.createResolver(e,r,a);l=Do(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=kx(this._resolverCache,e,r);return Pe(n)?Do(i,n,void 0,s):i}}function kx(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Fy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const Q6=t=>Pe(t)&&Object.getOwnPropertyNames(t).some(e=>Ps(t[e]));function Y6(t,e){const{isScriptable:n,isIndexable:r}=QS(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Ps(a)||Q6(a))||o&&kt(a))return!0}return!1}var X6="4.5.0";const J6=["top","bottom","left","right","chartArea"];function Sx(t,e){return t==="top"||t==="bottom"||J6.indexOf(t)===-1&&e==="x"}function Cx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Ax(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ze(n&&n.onComplete,[t],e)}function Z6(t){const e=t.chart,n=e.options.animation;ze(n&&n.onProgress,[t],e)}function f1(t){return By()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Pu={},Px=t=>{const e=f1(t);return Object.values(Pu).filter(n=>n.canvas===e).pop()};function e3(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function t3(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Kr;let Ed=(Kr=class{static register(...e){sr.add(...e),Rx()}static unregister(...e){sr.remove(...e),Rx()}constructor(e,n){const r=this.config=new G6(n),s=f1(e),i=Px(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||v6(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=sU(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new j6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=IU(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Pu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}yr.listen(this,"complete",Ax),yr.listen(this,"progress",Z6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Ve(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return sr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zw(this.canvas,this.ctx),this}stop(){return yr.stop(this),this}resize(e,n){yr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,nx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ze(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Re(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=_m(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Re(i,o=>{const a=o.options,l=a.id,c=_m(l,a),h=be(a.type,o.dtype);(a.position===void 0||Sx(a.position,c)!==Sx(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===h)f=r[l];else{const m=sr.getScale(h);f=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Re(s,(o,a)=>{o||delete r[a]}),Re(r,o=>{us.configure(this,o,o.options),us.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Cx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||ym(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=sr.getController(a),{datasetElementType:c,dataElementType:h}=ot.datasets[a];Object.assign(l,{dataElementType:sr.getElement(h),datasetElementType:c&&sr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Re(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:f}=this.getDatasetMeta(c),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Re(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Cx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Re(this.scales,e=>{us.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!$w(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;e3(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!$w(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;us.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Re(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ps(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yr.has(this)?this.attached&&!yr.running(this)&&yr.start(this):(this.draw(),Ax({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=N5(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&jy(n,s),e.controller.draw(),s&&Vy(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return zl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=J5.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Oi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Sh(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),yr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Zw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Pu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Re(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Re(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Re(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Th(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(h=>!c.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=uU(e),c=t3(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ze(i.onHover,[e,a,this],this),l&&ze(i.onClick,[e,a,this],this));const h=!Th(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},de(Kr,"defaults",ot),de(Kr,"instances",Pu),de(Kr,"overrides",Ii),de(Kr,"registry",sr),de(Kr,"version",X6),de(Kr,"getChart",Px),Kr);function Rx(){return Re(Ed.instances,t=>t._plugins.invalidate())}function p1(t,e,n=e){t.lineCap=be(n.borderCapStyle,e.borderCapStyle),t.setLineDash(be(n.borderDash,e.borderDash)),t.lineDashOffset=be(n.borderDashOffset,e.borderDashOffset),t.lineJoin=be(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=be(n.borderWidth,e.borderWidth),t.strokeStyle=be(n.borderColor,e.borderColor)}function n3(t,e,n){t.lineTo(n.x,n.y)}function r3(t){return t.stepped?FU:t.tension||t.cubicInterpolationMode==="monotone"?UU:n3}function m1(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),h=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function s3(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=m1(s,n,r),h=r3(i);let{move:f=!0,reverse:m}=r||{},y,x,E;for(y=0;y<=c;++y)x=s[(a+(m?c-y:y))%o],!x.skip&&(f?(t.moveTo(x.x,x.y),f=!1):h(t,E,x,m,i.stepped),E=x);return l&&(x=s[(a+(m?c:0))%o],h(t,E,x,m,i.stepped)),!!l}function i3(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=m1(s,n,r),{move:l=!0,reverse:c}=r||{};let h=0,f=0,m,y,x,E,T,v;const _=N=>(o+(c?a-N:N))%i,b=()=>{E!==T&&(t.lineTo(h,T),t.lineTo(h,E),t.lineTo(h,v))};for(l&&(y=s[_(0)],t.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=s[_(m)],y.skip)continue;const N=y.x,R=y.y,M=N|0;M===x?(R<E?E=R:R>T&&(T=R),h=(f*h+N)/++f):(b(),t.lineTo(N,R),x=M,f=0,E=T=R),v=R}b()}function vm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?i3:s3}function o3(t){return t.stepped?v5:t.tension||t.cubicInterpolationMode==="monotone"?w5:Xs}function a3(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),p1(t,e.options),t.stroke(s)}function l3(t,e,n,r){const{segments:s,options:i}=e,o=vm(e);for(const a of s)p1(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const c3=typeof Path2D=="function";function u3(t,e,n,r){c3&&!e.options.segment?a3(t,e,n,r):l3(t,e,n,r)}class ja extends Rs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;h5(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=C5(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=I5(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=o3(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:f,end:m}=o[c],y=i[f],x=i[m];if(y===x){a.push(y);continue}const E=Math.abs((s-y[n])/(x[n]-y[n])),T=l(y,x,E,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return vm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=vm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),u3(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}de(ja,"id","line"),de(ja,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),de(ja,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),de(ja,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Nx(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Ru extends Rs{constructor(n){super();de(this,"parsed");de(this,"skip");de(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Nx(this,n,"x",r)}inYRange(n,r){return Nx(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!zl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,mm(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}de(Ru,"id","point"),de(Ru,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),de(Ru,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Dx=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},h3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ox extends Rs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ze(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=en(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Dx(r,i);let c,h;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,y=-h;return this.legendItems.forEach((x,E)=>{const T=r+n/2+i.measureText(x.text).width;(E===0||c[c.length-1]+T+2*a>o)&&(f+=h,c[c.length-(E>0?0:1)]=0,y+=h,m++),l[E]={left:0,top:y,row:m,width:T,height:s},c[c.length-1]+=T+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let f=a,m=0,y=0,x=0,E=0;return this.legendItems.forEach((T,v)=>{const{itemWidth:_,itemHeight:b}=d3(r,n,i,T,s);v>0&&y+b+2*a>h&&(f+=m+a,c.push({width:m,height:y}),x+=m+a,E++,m=y=0),l[v]={left:x,top:y,col:E,width:_,height:b},m=Math.max(m,_),y+=b+a}),f+=m,c.push({width:m,height:y}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=po(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=hn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=hn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=hn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=hn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;jy(e,this),this._draw(),Vy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=ot.color,l=po(e.rtl,this.left,this.width),c=en(o.font),{padding:h}=o,f=c.size,m=f/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:T}=Dx(o,f),v=function(M,k,w){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;s.save();const S=be(w.lineWidth,1);if(s.fillStyle=be(w.fillStyle,a),s.lineCap=be(w.lineCap,"butt"),s.lineDashOffset=be(w.lineDashOffset,0),s.lineJoin=be(w.lineJoin,"miter"),s.lineWidth=S,s.strokeStyle=be(w.strokeStyle,a),s.setLineDash(be(w.lineDash,[])),o.usePointStyle){const I={radius:E*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:S},P=l.xPlus(M,x/2),D=k+m;KS(s,I,P,D,o.pointStyleWidth&&x)}else{const I=k+Math.max((f-E)/2,0),P=l.leftForLtr(M,x),D=ol(w.borderRadius);s.beginPath(),Object.values(D).some(A=>A!==0)?gm(s,{x:P,y:I,w:x,h:E,radius:D}):s.rect(P,I,x,E),s.fill(),S!==0&&s.stroke()}s.restore()},_=function(M,k,w){Ah(s,w.text,M,k+T/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},b=this.isHorizontal(),N=this._computeTitleHeight();b?y={x:hn(i,this.left+h,this.right-r[0]),y:this.top+h+N,line:0}:y={x:this.left+h,y:hn(i,this.top+N+h,this.bottom-n[0].height),line:0},e1(this.ctx,e.textDirection);const R=T+h;this.legendItems.forEach((M,k)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const w=s.measureText(M.text).width,S=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),I=x+m+w;let P=y.x,D=y.y;l.setWidth(this.width),b?k>0&&P+I+h>this.right&&(D=y.y+=R,y.line++,P=y.x=hn(i,this.left+h,this.right-r[y.line])):k>0&&D+R>this.bottom&&(P=y.x=P+n[y.line].width+h,y.line++,D=y.y=hn(i,this.top+N+h,this.bottom-n[y.line].height));const A=l.x(P);if(v(A,D,M),P=kU(S,P+x+m,b?P+I:this.right,e.rtl),_(l.x(P),D,M),b)y.x+=I+h;else if(typeof M.text!="string"){const oe=c.lineHeight;y.y+=g1(M,oe)+h}else y.y+=R}),t1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=en(n.font),s=Jn(n.padding);if(!n.display)return;const i=po(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let h,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+c,f=hn(e.align,f,this.right-m);else{const x=this.columnSizes.reduce((E,T)=>Math.max(E,T.height),0);h=c+hn(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const y=hn(a,f,f+m);o.textAlign=i.textAlign(WS(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ah(o,n.text,y,h,r)}_computeTitleHeight(){const e=this.options.title,n=en(e.font),r=Jn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Ma(e,this.left,this.right)&&Ma(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Ma(e,s.left,s.left+s.width)&&Ma(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!m3(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=h3(s,r);s&&!i&&ze(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&ze(n.onHover,[e,r,this],this)}else r&&ze(n.onClick,[e,r,this],this)}}function d3(t,e,n,r,s){const i=f3(r,t,e,n),o=p3(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function f3(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function p3(t,e,n){let r=t;return typeof e.text!="string"&&(r=g1(e,n)),r}function g1(t,e){const n=t.text?t.text.length:0;return e*n}function m3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var g3={id:"legend",_element:Ox,start(t,e,n){const r=t.legend=new Ox({ctx:t.ctx,options:n,chart:t});us.configure(t,r,n),us.addBox(t,r)},stop(t){us.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;us.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Jn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Va={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=fm(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function nr(t,e){return e&&(kt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function _r(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function y3(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Mx(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=en(e.bodyFont),c=en(e.titleFont),h=en(e.footerFont),f=i.length,m=s.length,y=r.length,x=Jn(e.padding);let E=x.height,T=0,v=r.reduce((N,R)=>N+R.before.length+R.lines.length+R.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(E+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const N=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=y*N+(v-y)*l.lineHeight+(v-1)*e.bodySpacing}m&&(E+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let _=0;const b=function(N){T=Math.max(T,n.measureText(N).width+_)};return n.save(),n.font=c.string,Re(t.title,b),n.font=l.string,Re(t.beforeBody.concat(t.afterBody),b),_=e.displayColors?o+2+e.boxPadding:0,Re(r,N=>{Re(N.before,b),Re(N.lines,b),Re(N.after,b)}),_=0,n.font=h.string,Re(t.footer,b),n.restore(),T+=x.width,{width:T,height:E}}function _3(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function v3(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function w3(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),v3(c,t,e,n)&&(c="center"),c}function Lx(t,e,n){const r=n.yAlign||e.yAlign||_3(t,n);return{xAlign:n.xAlign||e.xAlign||w3(t,e,n,r),yAlign:r}}function x3(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function b3(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function jx(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:y}=ol(o);let x=x3(e,a);const E=b3(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(h,m)+s:a==="right"&&(x+=Math.max(f,y)+s),{x:Cn(x,0,r.width-e.width),y:Cn(E,0,r.height-e.height)}}function su(t,e,n){const r=Jn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Vx(t){return nr([],_r(t))}function E3(t,e,n){return Oi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Fx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const y1={beforeTitle:gr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:gr,beforeBody:gr,beforeLabel:gr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ve(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:gr,afterBody:gr,beforeFooter:gr,footer:gr,afterFooter:gr};function Yt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?y1[e].call(n,r):s}class wm extends Rs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new r1(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=E3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Yt(r,"beforeTitle",this,e),i=Yt(r,"title",this,e),o=Yt(r,"afterTitle",this,e);let a=[];return a=nr(a,_r(s)),a=nr(a,_r(i)),a=nr(a,_r(o)),a}getBeforeBody(e,n){return Vx(Yt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Re(e,i=>{const o={before:[],lines:[],after:[]},a=Fx(r,i);nr(o.before,_r(Yt(a,"beforeLabel",this,i))),nr(o.lines,Yt(a,"label",this,i)),nr(o.after,_r(Yt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Vx(Yt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Yt(r,"beforeFooter",this,e),i=Yt(r,"footer",this,e),o=Yt(r,"afterFooter",this,e);let a=[];return a=nr(a,_r(s)),a=nr(a,_r(i)),a=nr(a,_r(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(y3(this.chart,n[l]));return e.filter&&(a=a.filter((h,f,m)=>e.filter(h,f,m,r))),e.itemSort&&(a=a.sort((h,f)=>e.itemSort(h,f,r))),Re(a,h=>{const f=Fx(e.callbacks,h);s.push(Yt(f,"labelColor",this,h)),i.push(Yt(f,"labelPointStyle",this,h)),o.push(Yt(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Va[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Mx(this,r),c=Object.assign({},a,l),h=Lx(this.chart,r,c),f=jx(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:f}=ol(a),{x:m,y}=e,{width:x,height:E}=n;let T,v,_,b,N,R;return i==="center"?(N=y+E/2,s==="left"?(T=m,v=T-o,b=N+o,R=N-o):(T=m+x,v=T+o,b=N-o,R=N+o),_=T):(s==="left"?v=m+Math.max(l,h)+o:s==="right"?v=m+x-Math.max(c,f)-o:v=this.caretX,i==="top"?(b=y,N=b-o,T=v-o,_=v+o):(b=y+E,N=b+o,T=v+o,_=v-o),R=b),{x1:T,x2:v,x3:_,y1:b,y2:N,y3:R}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=po(r.rtl,this.x,this.width);for(e.x=su(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=en(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,h=en(i.bodyFont),f=su(this,"left",i),m=s.x(f),y=l<h.lineHeight?(h.lineHeight-l)/2:0,x=n.y+y;if(i.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=s.leftForLtr(m,c)+c/2,v=x+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,mm(e,E,T,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,mm(e,E,T,v)}else{e.lineWidth=Pe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=s.leftForLtr(m,c),T=s.leftForLtr(s.xPlus(m,1),c-2),v=ol(o.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,gm(e,{x:E,y:x,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),gm(e,{x:T,y:x+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,f=en(r.bodyFont);let m=f.lineHeight,y=0;const x=po(r.rtl,this.x,this.width),E=function(w){n.fillText(w,x.x(e.x+y),e.y+m/2),e.y+=m+i},T=x.textAlign(o);let v,_,b,N,R,M,k;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=su(this,T,r),n.fillStyle=r.bodyColor,Re(this.beforeBody,E),y=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,N=0,M=s.length;N<M;++N){for(v=s[N],_=this.labelTextColors[N],n.fillStyle=_,Re(v.before,E),b=v.lines,a&&b.length&&(this._drawColorBox(n,e,N,x,r),m=Math.max(f.lineHeight,l)),R=0,k=b.length;R<k;++R)E(b[R]),m=f.lineHeight;Re(v.after,E)}y=0,m=f.lineHeight,Re(this.afterBody,E),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=po(r.rtl,this.x,this.width);for(e.x=su(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=en(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:f,topRight:m,bottomLeft:y,bottomRight:x}=ol(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+h-x),n.quadraticCurveTo(a+c,l+h,a+c-x,l+h),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+y,l+h),n.quadraticCurveTo(a,l+h,a,l+h-y),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Va[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Mx(this,e),l=Object.assign({},o,this._size),c=Lx(n,e,l),h=jx(e,l,c,n);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Jn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),e1(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),t1(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Th(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Th(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Va[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}de(wm,"positioners",Va);var T3={id:"tooltip",_element:wm,positioners:Va,afterInit(t,e,n){n&&(t.tooltip=new wm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:y1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const I3=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function k3(t,e,n,r){const s=t.indexOf(e);if(s===-1)return I3(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const S3=(t,e)=>t===null?null:Cn(Math.round(t),0,e);function Ux(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class xm extends Ko{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ve(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:k3(r,e,be(n,e),this._addedLabels),S3(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Ux.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}de(xm,"id","category"),de(xm,"defaults",{ticks:{callback:Ux}});function C3(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:f,includeBounds:m}=t,y=i||1,x=h-1,{min:E,max:T}=e,v=!Ve(o),_=!Ve(a),b=!Ve(c),N=(T-E)/(f+1);let R=Hw((T-E)/x/y)*y,M,k,w,S;if(R<1e-14&&!v&&!_)return[{value:E},{value:T}];S=Math.ceil(T/R)-Math.floor(E/R),S>x&&(R=Hw(S*R/x/y)*y),Ve(l)||(M=Math.pow(10,l),R=Math.ceil(R*M)/M),s==="ticks"?(k=Math.floor(E/R)*R,w=Math.ceil(T/R)*R):(k=E,w=T),v&&_&&i&&mU((a-o)/i,R/1e3)?(S=Math.round(Math.min((a-o)/R,h)),R=(a-o)/S,k=o,w=a):b?(k=v?o:k,w=_?a:w,S=c-1,R=(w-k)/S):(S=(w-k)/R,rl(S,Math.round(S),R/1e3)?S=Math.round(S):S=Math.ceil(S));const I=Math.max(qw(R),qw(k));M=Math.pow(10,Ve(l)?I:l),k=Math.round(k*M)/M,w=Math.round(w*M)/M;let P=0;for(v&&(m&&k!==o?(n.push({value:o}),k<o&&P++,rl(Math.round((k+P*R)*M)/M,o,zx(o,N,t))&&P++):k<o&&P++);P<S;++P){const D=Math.round((k+P*R)*M)/M;if(_&&D>a)break;n.push({value:D})}return _&&m&&w!==a?n.length&&rl(n[n.length-1].value,a,zx(a,N,t))?n[n.length-1].value=a:n.push({value:a}):(!_||w===a)&&n.push({value:w}),n}function zx(t,e,{horizontal:n,minRotation:r}){const s=si(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class A3 extends Ko{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=No(s),c=No(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=C3(s,i);return e.bounds==="ticks"&&gU(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return HS(e,this.chart.options.locale,this.options.ticks.format)}}class bm extends A3{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=On(e)?e:0,this.max=On(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=si(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}de(bm,"id","linear"),de(bm,"defaults",{ticks:{callback:qS.formatters.numeric}});const Td={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jt=Object.keys(Td);function Bx(t,e){return t-e}function $x(t,e){if(Ve(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),On(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Ul(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Wx(t,e,n,r){const s=Jt.length;for(let i=Jt.indexOf(t);i<s-1;++i){const o=Td[Jt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Jt[i]}return Jt[s-1]}function P3(t,e,n,r,s){for(let i=Jt.length-1;i>=Jt.indexOf(n);i--){const o=Jt[i];if(Td[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Jt[n?Jt.indexOf(n):0]}function R3(t){for(let e=Jt.indexOf(t)+1,n=Jt.length;e<n;++e)if(Td[Jt[e]].common)return Jt[e]}function Hx(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=My(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function N3(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function qx(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:N3(t,r,s,n)}class Nh extends Ko{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new K5._date(e.adapters.date);s.init(n),nl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:$x(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=On(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=On(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=bU(s,i,o);return this._unit=n.unit||(r.autoSkip?Wx(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):P3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:R3(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),qx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Cn(n,0,o),r=Cn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Wx(i.minUnit,n,r,this._getLabelCapacity(n)),a=be(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Ul(l)||l===!0,h={};let f=n,m,y;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,y=0;m<r;m=+e.add(m,a,o),y++)Hx(h,m,x);return(m===r||s.bounds==="ticks"||y===1)&&Hx(h,m,x),Object.keys(h).sort(Bx).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return ze(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],f=c&&a[c],m=r[n],y=c&&f&&m&&m.major;return this._adapter.format(e,s||(y?f:h))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=si(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,qx(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push($x(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return TU(e.sort(Bx))}}de(Nh,"id","time"),de(Nh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function iu(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=ii(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=ii(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class Kx extends Nh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=iu(n,this.min),this._tableRange=iu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(iu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return iu(this._table,r*this._tableRange+this._minPos,!0)}}de(Kx,"id","timeseries"),de(Kx,"defaults",Nh.defaults);const _1="label";function Gx(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function D3(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function v1(t,e){t.labels=e}function w1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_1;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function O3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_1;const n={labels:[],datasets:[]};return v1(n,t.labels),w1(n,t.datasets,e),n}function M3(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:f,...m}=t,y=O.useRef(null),x=O.useRef(null),E=()=>{y.current&&(x.current=new Ed(y.current,{type:o,data:O3(a,i),options:l&&{...l},plugins:c}),Gx(e,x.current))},T=()=>{Gx(e,null),x.current&&(x.current.destroy(),x.current=null)};return O.useEffect(()=>{!s&&x.current&&l&&D3(x.current,l)},[s,l]),O.useEffect(()=>{!s&&x.current&&v1(x.current.config.data,a.labels)},[s,a.labels]),O.useEffect(()=>{!s&&x.current&&a.datasets&&w1(x.current.config.data,a.datasets,i)},[s,a.datasets]),O.useEffect(()=>{x.current&&(s?(T(),setTimeout(E)):x.current.update(f))},[s,l,a.labels,a.datasets,f]),O.useEffect(()=>{x.current&&(T(),setTimeout(E))},[o]),O.useEffect(()=>(E(),()=>T()),[]),oi.createElement("canvas",{ref:y,role:"img",height:n,width:r,...m},h)}const L3=O.forwardRef(M3);function j3(t,e){return Ed.register(e),O.forwardRef((n,r)=>oi.createElement(L3,{...n,ref:r,type:t}))}const V3=j3("line",Cu);Ed.register(xm,bm,Ru,ja,T3,g3);function x1({points:t=[],labels:e,yRange:n={min:0,max:1},title:r}){const i={labels:Array.isArray(e)&&e.length===t.length?e:t.map((a,l)=>`T${l+1}`),datasets:[{label:r||"Risk",data:t,borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.2)"}]},o={responsive:!0,plugins:{legend:{display:!1}},scales:{y:{min:(n==null?void 0:n.min)??0,max:(n==null?void 0:n.max)??1}}};return d.jsx(V3,{data:i,options:o})}function F3({alerts:t=[]}){return t.length?d.jsxs("div",{className:"rounded border border-red-300 bg-red-50 p-4",children:[d.jsx("h3",{className:"text-red-800 font-medium mb-2",children:"Urgent Alerts"}),d.jsx("ul",{className:"list-disc pl-6 text-red-900",children:t.map((e,n)=>d.jsx("li",{children:e.condition},n))})]}):null}const Ur="",Go={"x-user-id":"demo"};async function b1(){try{const t=xt.currentUser;if(t)return{Authorization:`Bearer ${await t.getIdToken()}`}}catch{}return{...Go}}async function U3(t){return(await fetch(`${Ur}/api/analyze`,{method:"POST",headers:{"Content-Type":"application/json",...Go},body:JSON.stringify(t)})).json()}async function Em(){return(await fetch(`${Ur}/api/ai/health`)).json()}async function z3(t,{useOcr:e,lang:n}={}){const r=await fetch(`${Ur}/api/pdf-extract`,{method:"POST",headers:{"Content-Type":"application/json",...Go},body:JSON.stringify({url:t,useOcr:e,lang:n})}),s=await r.text();let i={};try{i=s?JSON.parse(s):{}}catch{i={}}if(!r.ok){const o=(i==null?void 0:i.error)||(i==null?void 0:i.message)||`HTTP ${r.status}`,a=new Error(o);throw a.status=r.status,a.body=i,a}return i}function B3(t,{onProgress:e,signal:n}={}){return new Promise((r,s)=>{try{const i=new XMLHttpRequest,o=new FormData;if(o.append("file",t),i.open("POST",`${Ur}/functions/processReport`,!0),i.setRequestHeader("x-user-id",Go["x-user-id"]),i.upload&&typeof e=="function"&&(i.upload.onprogress=a=>{if(!a.lengthComputable)return;const l=Math.min(99,Math.round(a.loaded/a.total*100));e(l)}),i.onreadystatechange=()=>{if(i.readyState===4)if(i.status>=200&&i.status<300)try{const a=JSON.parse(i.responseText||"{}");r(a)}catch{r({ok:!0})}else{let a="Upload failed";try{const c=JSON.parse(i.responseText||"{}");a=(c==null?void 0:c.error)||(c==null?void 0:c.message)||a;const h=new Error(a);return h.status=i.status,h.body=c,s(h)}catch{}const l=new Error(a);l.status=i.status,s(l)}},i.onerror=()=>s(new Error("Network error during upload")),i.onabort=()=>s(new Error("Upload canceled")),n)if(n.aborted)i.abort();else{const a=()=>i.abort();n.addEventListener("abort",a,{once:!0})}i.send(o)}catch(i){s(i)}})}async function $3(t){return(await fetch(`${Ur}/functions/analyzeCheckin`,{method:"POST",headers:{"Content-Type":"application/json",...Go},body:JSON.stringify(t)})).json()}async function W3(t,e,n){const r=new URL(`${Ur}/functions/findNearbyAmbulance`);return r.searchParams.set("lat",String(t)),r.searchParams.set("lng",String(e)),Number.isFinite(n)&&r.searchParams.set("radiusMeters",String(n)),(await fetch(r.toString())).json()}async function H3(t,e="demo"){return(await fetch(`${Ur}/functions/submitFeedback`,{method:"POST",headers:{"Content-Type":"application/json",...Go},body:JSON.stringify({userId:e,feedback:t})})).json()}async function q3(t,{signal:e}={}){const n=await fetch(`${Ur}/functions/chat`,{method:"POST",headers:{"Content-Type":"application/json",...await b1()},body:JSON.stringify(t),signal:e}),r=await n.text();let s=null;try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function K3(t){const e=new URL(`${Ur}/functions/riskSeries`);t&&e.searchParams.set("userId",String(t));const n=await fetch(e.toString(),{headers:{...await b1()}}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}const Hy=oi.forwardRef(function({className:e="",rows:n=4,...r},s){return d.jsx("textarea",{ref:s,rows:n,className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-brand-600 focus:ring-2 focus:ring-brand-600 focus:ring-offset-0 outline-none ${e}`.trim(),...r})});function G3({onSubmit:t}){const[e,n]=O.useState("");return d.jsxs("form",{onSubmit:r=>{r.preventDefault(),t==null||t(e),n("")},className:"space-y-2",children:[d.jsx(Hy,{value:e,onChange:r=>n(r.target.value),placeholder:"Share corrections or context for clinicians"}),d.jsx(ve,{type:"submit",children:"Submit Feedback"})]})}function Je({className:t="",children:e}){return d.jsx("div",{className:`bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm ${t}`.trim(),children:e})}function bt({className:t="",children:e}){return d.jsx("div",{className:`px-5 py-4 border-b border-slate-200 dark:border-slate-800 ${t}`.trim(),children:e})}function Et({className:t="",children:e}){return d.jsx("h2",{className:`text-base font-semibold tracking-tight text-slate-900 dark:text-slate-100 ${t}`.trim(),children:e})}function Ze({className:t="",children:e}){return d.jsx("div",{className:`p-5 text-slate-800 dark:text-slate-200 ${t}`.trim(),children:e})}function ki({size:t=16,className:e=""}){const n={width:t,height:t};return d.jsxs("svg",{className:`animate-spin text-blue-600 ${e}`,style:n,viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}const E1=O.createContext({notify:()=>{}});function Q3({children:t}){const[e,n]=O.useState([]),r=O.useCallback((i,o="info",a=3e3)=>{const l=Math.random().toString(36).slice(2);n(c=>c.concat({id:l,message:i,type:o})),setTimeout(()=>n(c=>c.filter(h=>h.id!==l)),a)},[]),s=O.useMemo(()=>({notify:r}),[r]);return d.jsxs(E1.Provider,{value:s,children:[t,d.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map(i=>d.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-900"}`,children:i.message},i.id))})]})}function Id(){return O.useContext(E1)}function Qx({className:t=""}){return d.jsx("div",{className:`animate-pulse rounded bg-slate-200 dark:bg-slate-800 ${t}`.trim()})}function Y3({title:t,subtitle:e,cta:n}){return d.jsxs("section",{className:"mb-6 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6",children:[d.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-100",children:t}),e&&d.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:e}),n&&d.jsx("div",{className:"mt-4",children:n})]})}function mo({label:t,value:e,hint:n,accent:r="blue"}){const s={blue:"bg-blue-50 text-blue-700 dark:bg-slate-800 dark:text-blue-300",emerald:"bg-emerald-50 text-emerald-700 dark:bg-slate-800 dark:text-emerald-300",amber:"bg-amber-50 text-amber-700 dark:bg-slate-800 dark:text-amber-300",red:"bg-red-50 text-red-700 dark:bg-slate-800 dark:text-red-300"};return d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[d.jsx("div",{className:`inline-block rounded px-2 py-0.5 text-xs ${s[r]}`,children:t}),d.jsx("div",{className:"mt-2 text-2xl font-semibold text-slate-900 dark:text-slate-100",children:e}),n&&d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:n})]})}function X3({onAnalyze:t,onLocate:e}){return d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Quick actions"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx(ve,{onClick:t,children:"Run Analysis"}),d.jsx(ve,{variant:"secondary",onClick:e,children:"Find Ambulance"})]})]})}function J3({items:t=[]}){const e=t.length?t:[{type:"info",text:"Welcome! Start by running an analysis."},{type:"tip",text:"Upload a report to extract structured insights."}];return d.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Recent activity"}),d.jsx("ul",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300",children:e.map((n,r)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:`mt-1 w-2 h-2 rounded-full ${n.type==="tip"?"bg-emerald-500":"bg-slate-400"}`}),d.jsx("span",{children:n.text})]},r))})]})}function Z3(){var D,A,oe,ne,ae,se,B,K,H,fe,le,he,Ee,Oe,Ce,j,te,me,_t;const{notify:t}=Id(),[e,n]=O.useState(null),[r,s]=O.useState(!1),[i,o]=O.useState(null),[a,l]=O.useState(null),[c,h]=O.useState(!1),[f,m]=O.useState(null),[y,x]=O.useState(3),[E,T]=O.useState("auto"),[v,_]=O.useState(!0),[b,N]=O.useState(!1),[R,M]=O.useState(null),[k,w]=O.useState(!1);oi.useEffect(()=>{try{const q=JSON.parse(localStorage.getItem("analysisPrefs")||"{}");q&&typeof q=="object"&&(q.topK&&x(q.topK),q.explainMethod&&T(q.explainMethod),typeof q.useScipyWinsorize=="boolean"&&_(q.useScipyWinsorize),typeof q.forceLocal=="boolean"&&N(q.forceLocal))}catch{}},[]);async function S(){try{w(!0);const q=await Em();M(q)}catch{M({ok:!0,python:{available:!1}})}finally{w(!1)}}oi.useEffect(()=>{let q=!0;return(async()=>{try{w(!0);const ge=await Em();q&&M(ge)}catch{q&&M({ok:!0,python:{available:!1}})}finally{q&&w(!1)}})(),()=>{q=!1}},[]),oi.useEffect(()=>{try{localStorage.setItem("analysisPrefs",JSON.stringify({topK:y,explainMethod:E,useScipyWinsorize:v,forceLocal:b}))}catch{}},[y,E,v,b]);async function I(){try{s(!0),o(null);const q=await U3({notes:"fever and headache",vitals:{temperature:38.5},topK:Number(y),explainMethod:E,useScipyWinsorize:v,forceLocal:b});n(q),b&&R&&R.python&&R.python.available===!1&&t("Python AI unavailable. Used local analysis.","info")}catch(q){o(String((q==null?void 0:q.message)||q))}finally{s(!1)}}async function P(){try{if(m(null),h(!0),!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");t("Finding nearby ambulance services...","info"),await new Promise((q,ge)=>{navigator.geolocation.getCurrentPosition(async $=>{try{const{latitude:ee,longitude:J}=$.coords,re=await W3(ee,J);if(!re||re.ok===!1){const _e=re&&re.error?re.error:"Failed to fetch nearby services";throw new Error(_e)}l(re);const Me=Array.isArray(re.data)?re.data.length:0;t(`Found ${Me} ambulance service${Me===1?"":"s"}`,"success"),q()}catch(ee){ge(ee)}},$=>{const ee=$&&$.message?$.message:"Unable to retrieve location.";ge(new Error(ee))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}catch(q){const ge=(q==null?void 0:q.message)||"Failed to find nearby ambulances";m(ge),t(ge,"error")}finally{h(!1)}}return d.jsxs("div",{children:[d.jsx(Y3,{title:"AI Diagnostic & Triage Dashboard",subtitle:"Run a quick analysis, review trends, and act on red flags.",cta:d.jsxs("div",{className:"flex gap-3 items-center",children:[d.jsx(ve,{onClick:I,children:"Run Analysis"}),d.jsx(ve,{variant:"secondary",onClick:P,children:"Find Ambulance"})]})}),d.jsx("div",{className:"mb-3",children:d.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 inline-flex items-center gap-3",children:k?d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400 animate-pulse"})," Checking AI service…"]}):d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx("span",{className:`w-2 h-2 rounded-full ${(D=R==null?void 0:R.python)!=null&&D.available?"bg-emerald-500":"bg-slate-400"}`}),"Python AI: ",(A=R==null?void 0:R.python)!=null&&A.available?"Available":"Unavailable"]}),((oe=R==null?void 0:R.python)==null?void 0:oe.available)&&d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"text-xs",children:["Torch: ",String(!!((ne=R==null?void 0:R.python)!=null&&ne.torchAvailable))]}),d.jsxs("span",{className:"text-xs",children:["CUDA: ",String(!!((ae=R==null?void 0:R.python)!=null&&ae.cudaAvailable))]})]}),d.jsx(ve,{size:"sm",variant:"secondary",onClick:S,children:"Retry"})]})})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Analysis Settings"})}),d.jsx(Ze,{children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Top K"}),d.jsx("input",{type:"number",min:1,max:3,value:y,onChange:q=>x(q.target.value),className:"border rounded px-2 py-1 w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Explainability"}),d.jsxs("select",{value:E,onChange:q=>T(q.target.value),className:"border rounded px-2 py-1 w-full",children:[d.jsx("option",{value:"auto",children:"Auto"}),d.jsx("option",{value:"captum",disabled:!((se=R==null?void 0:R.python)!=null&&se.captumAvailable),children:"Captum"}),d.jsx("option",{value:"shap",disabled:!((B=R==null?void 0:R.python)!=null&&B.shapAvailable),children:"SHAP"}),d.jsx("option",{value:"none",children:"None"})]})]}),d.jsxs("div",{className:"flex items-center gap-2 mt-6 md:mt-0",children:[d.jsx("input",{id:"winsorize",type:"checkbox",checked:v,onChange:q=>_(q.target.checked),className:"h-4 w-4"}),d.jsx("label",{htmlFor:"winsorize",className:"text-sm text-slate-700",children:"Use SciPy winsorization"})]}),d.jsxs("div",{className:"flex items-center gap-2 mt-6 md:mt-0",children:[d.jsx("input",{id:"forceLocal",type:"checkbox",checked:b,onChange:q=>N(q.target.checked),className:"h-4 w-4"}),d.jsx("label",{htmlFor:"forceLocal",className:"text-sm text-slate-700",children:"Force local analysis"})]})]})})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsx(mo,{label:"Patients analyzed",value:e!=null&&e.data?((K=e.data.diagnoses)==null?void 0:K.length)||1:0,hint:"From last session",accent:"blue"}),d.jsx(mo,{label:"Active alerts",value:((fe=(H=e==null?void 0:e.data)==null?void 0:H.redFlags)==null?void 0:fe.length)||0,hint:"Requires attention",accent:"red"}),d.jsx(mo,{label:"Avg. risk",value:e!=null&&e.data?`${Math.round(52)}%`:"—",hint:"Across current sample",accent:"amber"})]}),r&&d.jsxs("div",{className:"mb-4 text-slate-600 inline-flex items-center gap-2",children:[d.jsx(ki,{})," Analyzing..."]}),i&&d.jsx("div",{className:"mb-4 text-red-600",children:i}),!(e!=null&&e.data)&&!r&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Diagnoses"})}),d.jsxs(Ze,{children:[d.jsx("div",{className:"text-sm text-slate-500",children:'No analysis yet. Click "Run Analysis" to get started.'}),d.jsx("div",{className:"mt-3",children:d.jsx(Qx,{className:"h-24"})})]})]}),d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Risk Trend"})}),d.jsxs(Ze,{children:[d.jsx("div",{className:"text-sm text-slate-500",children:"Risk visualization will appear after your first analysis."}),d.jsx("div",{className:"mt-3",children:d.jsx(Qx,{className:"h-40"})})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx(X3,{onAnalyze:I,onLocate:P}),d.jsx(J3,{})]})]}),(e==null?void 0:e.data)&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Diagnoses"})}),d.jsx(Ze,{children:d.jsx(M4,{items:e.data.diagnoses})})]}),d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Risk Trend"})}),d.jsx(Ze,{children:d.jsx(x1,{points:[.2,.35,.5,.42,.6]})})]}),d.jsx(Je,{className:"md:col-span-2",children:d.jsx(Ze,{children:d.jsx(F3,{alerts:e.data.redFlags})})}),((he=(le=e==null?void 0:e.data)==null?void 0:le.explainability)==null?void 0:he.available)&&d.jsxs(Je,{className:"md:col-span-2",children:[d.jsx(bt,{children:d.jsx(Et,{children:"Explainability"})}),d.jsxs(Ze,{children:[d.jsxs("div",{className:"text-sm text-slate-600 mb-3",children:["Method: ",e.data.explainability.method,((Oe=(Ee=e==null?void 0:e.data)==null?void 0:Ee.explainability)==null?void 0:Oe.method)==="captum"&&d.jsx("span",{className:"ml-2 inline-block text-xs px-2 py-0.5 rounded bg-emerald-100 text-emerald-700",children:"Captum"}),((j=(Ce=e==null?void 0:e.data)==null?void 0:Ce.explainability)==null?void 0:j.method)==="shap"&&d.jsx("span",{className:"ml-2 inline-block text-xs px-2 py-0.5 rounded bg-indigo-100 text-indigo-700",children:"SHAP"}),((me=(te=e==null?void 0:e.data)==null?void 0:te.explainability)==null?void 0:me.method)==="auto"&&d.jsx("span",{className:"ml-2 inline-block text-xs px-2 py-0.5 rounded bg-slate-100 text-slate-700",children:"Auto"})]}),d.jsx("div",{className:"overflow-auto",children:d.jsxs("table",{className:"min-w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-left text-slate-500",children:[d.jsx("th",{className:"py-1 pr-4",children:"Feature"}),d.jsx("th",{className:"py-1",children:"Attribution"})]})}),d.jsx("tbody",{children:(e.data.explainability.features||[]).map((q,ge)=>{const $=Array.isArray(e.data.explainability.attributions)?Number(e.data.explainability.attributions[ge]||0):0,ee=Math.min(1,Math.abs($)),J=`${Math.round(ee*100)}%`,re=$>=0?"bg-emerald-500":"bg-rose-500";return d.jsxs("tr",{className:"border-t",children:[d.jsx("td",{className:"py-1 pr-4",children:q}),d.jsx("td",{className:"py-1",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-40 h-2 bg-slate-200 rounded",children:d.jsx("div",{className:`${re} h-2 rounded`,style:{width:J}})}),d.jsx("span",{className:"tabular-nums",children:$.toFixed(4)})]})})]},ge)})})]})}),Number.isFinite((_t=e==null?void 0:e.data)==null?void 0:_t.latencyMs)&&d.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:["Python analysis latency: ",e.data.latencyMs," ms"]})]})]}),d.jsxs(Je,{className:"md:col-span-2",children:[d.jsx(bt,{children:d.jsx(Et,{children:"Clinician Feedback"})}),d.jsx(Ze,{children:d.jsx(G3,{onSubmit:async q=>{var $;const ge=await H3({text:q,advisory:e.data});t(`Feedback submitted: ${(($=ge==null?void 0:ge.data)==null?void 0:$.id)||"ok"}`,"success")}})})]}),a&&d.jsxs(Je,{className:"md:col-span-2",children:[d.jsx(bt,{children:d.jsx(Et,{children:"Nearby Ambulance Services"})}),d.jsx(Ze,{children:d.jsx("ul",{className:"list-disc pl-6",children:(a.data||[]).map((q,ge)=>d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:q.name})," — ",q.address," (rating: ",q.rating||"N/A",")"]},ge))})})]})]}),(c||f||a&&Array.isArray(a.data))&&d.jsx("div",{className:"mt-6",children:d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Nearby Ambulance Services"})}),d.jsxs(Ze,{children:[c&&d.jsxs("div",{className:"text-slate-600 inline-flex items-center gap-2",children:[d.jsx(ki,{})," Locating services..."]}),f&&d.jsx("div",{className:"text-red-600",children:f}),!c&&!f&&d.jsxs("ul",{className:"list-disc pl-6",children:[((a==null?void 0:a.data)||[]).map((q,ge)=>d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:q.name})," — ",q.address||"Address N/A",typeof q.distance_meters=="number"?` • ${q.distance_meters} m`:"",q.rating?` • rating: ${q.rating}`:""]},ge)),((a==null?void 0:a.data)||[]).length===0&&d.jsx("li",{children:"No ambulance services found nearby."})]})]})]})})]})}function $n({className:t="",...e}){return d.jsx("input",{className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:ring-offset-0 outline-none ${t}`.trim(),...e})}function ez(){var I,P;const{user:t,login:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Di(),[i,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(""),[f,m]=O.useState(""),[y,x]=O.useState("enter"),[E,T]=O.useState(!1),[v,_]=O.useState(""),b=Xh(),R=((P=(I=Ls().state)==null?void 0:I.from)==null?void 0:P.pathname)||"/";O.useEffect(()=>{t&&b(R,{replace:!0})},[t,R,b]);async function M(D){D.preventDefault(),_(""),T(!0);try{await e({email:i,password:a}),b(R,{replace:!0})}catch(A){_((A==null?void 0:A.message)||"Login failed")}finally{T(!1)}}async function k(){_(""),T(!0);try{await n()&&b(R,{replace:!0})}catch(D){_((D==null?void 0:D.message)||"Google sign-in failed")}finally{T(!1)}}async function w(D){D.preventDefault(),_(""),T(!0);try{await r(c),x("verify")}catch(A){_((A==null?void 0:A.message)||"Failed to send OTP")}finally{T(!1)}}async function S(D){D.preventDefault(),_(""),T(!0);try{await s(f),b(R,{replace:!0})}catch(A){_((A==null?void 0:A.message)||"Invalid OTP")}finally{T(!1)}}return t?null:d.jsx("div",{className:"grid place-items-center",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Welcome back"}),d.jsx(Je,{children:d.jsxs(Ze,{children:[d.jsxs("form",{className:"space-y-4",onSubmit:M,children:[d.jsx($n,{type:"email",placeholder:"Email",value:i,onChange:D=>o(D.target.value),disabled:E}),d.jsx($n,{type:"password",placeholder:"Password",value:a,onChange:D=>l(D.target.value),disabled:E}),v&&d.jsx("p",{className:"text-red-600 text-sm",children:v}),d.jsx(ve,{type:"submit",className:"w-full",disabled:E,children:E?"Signing in…":"Sign in"})]}),d.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),d.jsx("span",{children:"or"}),d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),d.jsx(ve,{variant:"secondary",onClick:k,disabled:E,children:"Continue with Google"}),d.jsx("div",{id:"recaptcha-container",className:"mt-3"}),y==="enter"&&d.jsxs("form",{className:"space-y-2 mt-2",onSubmit:w,children:[d.jsx($n,{type:"tel",placeholder:"Indian mobile (10 digits)",value:c,onChange:D=>h(D.target.value),disabled:E}),d.jsx(ve,{type:"submit",variant:"secondary",disabled:E||!c,children:"Send OTP"})]}),y==="verify"&&d.jsxs("form",{className:"space-y-2 mt-2",onSubmit:S,children:[d.jsx($n,{type:"text",placeholder:"Enter OTP",value:f,onChange:D=>m(D.target.value),disabled:E}),d.jsx(ve,{type:"submit",variant:"secondary",disabled:E||!f,children:"Verify OTP"})]}),d.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:["No account? ",d.jsx(xg,{className:"text-blue-600",to:"/signup",children:"Sign up"})]})]})})]})})}function tz(){const{user:t,signup:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Di(),[i,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(""),[f,m]=O.useState(""),[y,x]=O.useState(""),[E,T]=O.useState("enter"),[v,_]=O.useState(""),[b,N]=O.useState(!1),R=Xh();O.useEffect(()=>{t&&R("/")},[t,R]);async function M(S){S.preventDefault(),_(""),N(!0);try{const I=await e({email:i,password:a,name:c});f?(await r(f),T("verify")):R("/")}catch(I){_((I==null?void 0:I.message)||"Signup failed")}finally{N(!1)}}async function k(S){S.preventDefault(),_(""),N(!0);try{await s(y),R("/")}catch(I){_((I==null?void 0:I.message)||"Invalid OTP")}finally{N(!1)}}async function w(){_(""),N(!0);try{await n()&&R("/")}catch(S){_((S==null?void 0:S.message)||"Google sign-in failed")}finally{N(!1)}}return t?null:d.jsx("div",{className:"grid place-items-center",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Create your account"}),d.jsx(Je,{children:d.jsxs(Ze,{children:[E==="enter"?d.jsxs("form",{className:"space-y-4",onSubmit:M,children:[d.jsx($n,{type:"text",placeholder:"Name",value:c,onChange:S=>h(S.target.value),disabled:b}),d.jsx($n,{type:"email",placeholder:"Email",value:i,onChange:S=>o(S.target.value),disabled:b}),d.jsx($n,{type:"password",placeholder:"Password",value:a,onChange:S=>l(S.target.value),disabled:b}),d.jsx($n,{type:"tel",placeholder:"Indian phone (optional)",value:f,onChange:S=>m(S.target.value),disabled:b}),v&&d.jsx("p",{className:"text-red-600 text-sm",children:v}),d.jsx(ve,{type:"submit",className:"w-full",disabled:b,children:b?"Creating…":"Create Account"})]}):d.jsxs("form",{className:"space-y-2",onSubmit:k,children:[d.jsx($n,{type:"text",placeholder:"Enter OTP",value:y,onChange:S=>x(S.target.value),disabled:b}),v&&d.jsx("p",{className:"text-red-600 text-sm",children:v}),d.jsx(ve,{type:"submit",className:"w-full",disabled:b||!y,children:"Verify OTP"})]}),d.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),d.jsx("span",{children:"or"}),d.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),d.jsx(ve,{variant:"secondary",onClick:w,disabled:b,children:"Continue with Google"}),d.jsx("div",{id:"recaptcha-container"})]})})]})})}function nz(){var le,he,Ee,Oe,Ce;const{notify:t}=Id(),{user:e,loading:n}=Di(),[r,s]=O.useState({q1:"",q2:"",q2_specify:"",q3:"",q3_severity:"",q4:"",q4_specify:"",q5:"",q6_activity:"",q6_hydration:"",q6_diet:""}),[i,o]=O.useState(!1),[a,l]=O.useState(!1),[c,h]=O.useState(null),[f,m]=O.useState([]),[y,x]=O.useState([]),[E,T]=O.useState(""),[v,_]=O.useState([]),[b,N]=O.useState(""),[R,M]=O.useState(null),[k,w]=O.useState(!1),[S,I]=O.useState(3),[P,D]=O.useState("auto"),[A,oe]=O.useState(!0),[ne,ae]=O.useState(!1);O.useEffect(()=>{try{const j=JSON.parse(localStorage.getItem("analysisPrefs")||"{}");j&&typeof j=="object"&&(j.topK&&I(j.topK),j.explainMethod&&D(j.explainMethod),typeof j.useScipyWinsorize=="boolean"&&oe(j.useScipyWinsorize),typeof j.forceLocal=="boolean"&&ae(j.forceLocal))}catch{}},[]),O.useEffect(()=>{try{localStorage.setItem("analysisPrefs",JSON.stringify({topK:S,explainMethod:P,useScipyWinsorize:A,forceLocal:ne}))}catch{}},[S,P,A,ne]);const se=O.useMemo(()=>{const j=["ns_q1","ns_q2","ns_q3","ns_q4","ns_q5","ns_q6","ns_q7","ns_q8","ns_q9","ns_q10","ns_q11","ns_q12"];for(const te of j)if(!r[te])return!1;return!0},[r]);function B(){const j=new Date,te=new Date(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0,0),me=new Date(j.getFullYear(),j.getMonth(),j.getDate()+1,0,0,0,0);return{start:tt.fromDate(te),end:tt.fromDate(me)}}O.useEffect(()=>{async function j(){if(!fn||!e)return;const{start:te,end:me}=B(),_t=Nf(fn,"users",e.uid,"dailyCheckins"),q=Sw(_t,Cw("date",">=",te),Cw("date","<",me));try{const ge=await Rw(q);ge.empty?(l(!1),h(null)):(l(!0),h(ge.docs[0].data()))}catch(ge){console.error("[DailyCheckin] checkToday error:",ge)}}j()},[e]);function K(j){if(!j)return .5;const te=q=>({None:1,Normal:1,Mild:.7,"Slight irregularity – mild constipation/diarrhea":.7,"Slight – minor discomfort or frequency change":.7,Moderate:.4,"Moderate – noticeable, affects tasks":.4,"Moderate – interfered with tasks":.4,"Moderate – affected meals":.4,"Moderate – frequent or loose stools":.4,"Moderate – frequent or painful urination":.4,Severe:.2,"Severe – persistent pain":.2,"Severe – unable to perform daily activities":.2,"Severe – persistent vomiting":.2,"Severe – could barely perform activities":.2,"Severe – high fever (>102°F / 38.8°C)":.2,"Severe – persistent cough or severe breathing issues":.2,"Severe – persistent diarrhea/constipation":.2,"Severe – inability to urinate normally or severe discomfort":.2,"Severe – bleeding, large lesions, or non-healing wounds":.2,"Severe – fainting or inability to stand":.2})[q]??.5,me=[te(j.ns_q1),te(j.ns_q2),te(j.ns_q3),te(j.ns_q4),te(j.ns_q5),te(j.ns_q6),te(j.ns_q7),te(j.ns_q8),te(j.ns_q9),te(j.ns_q10),te(j.ns_q11),te(j.ns_q12)],_t=me.reduce((q,ge)=>q+ge,0)/me.length;return Math.max(0,Math.min(1,Number(_t.toFixed(3))))}O.useEffect(()=>{async function j(){var te;if(!(!fn||!e))try{const me=Nf(fn,"users",e.uid,"dailyCheckins"),_t=Sw(me,lF("date","desc"),cF(30)),ge=(await Rw(_t)).docs.map(_e=>({id:_e.id,..._e.data()})),$=ge.slice().reverse();let ee=$.map(_e=>K(_e.answers)),J=$.map(_e=>{var Ie;return(Ie=_e==null?void 0:_e.date)!=null&&Ie.toDate?_e.date.toDate().toLocaleDateString():""});try{if((te=R==null?void 0:R.python)!=null&&te.available){const _e=await K3(e.uid);_e&&_e.ok&&Array.isArray(_e.points)&&_e.points.length===$.length&&(ee=_e.points,Array.isArray(_e.labels)&&_e.labels.length===$.length&&(J=_e.labels.map(Ie=>{try{return new Date(Ie).toLocaleDateString()}catch{return Ie}})))}}catch{}const re=ee.length;let Me="";if(re>=6){const _e=ee.slice(re-6,re-3).reduce((pt,Ae)=>pt+Ae,0)/3,ft=ee.slice(re-3).reduce((pt,Ae)=>pt+Ae,0)/3-_e;ft>.06?Me="Improving":ft<-.06?Me="Worsening":Me="Stable"}m(ge),x(ee),_(J),T(Me)}catch(me){console.error("[DailyCheckin] loadHistory error:",me)}}j()},[e,a]),O.useEffect(()=>{let j=!0;return(async()=>{try{w(!0);const te=await Em();j&&M(te)}catch{j&&M({ok:!0,python:{available:!1}})}finally{j&&w(!1)}})(),()=>{j=!1}},[]);function H(j,te){s(me=>({...me,[j]:te}))}async function fe(j){if(j.preventDefault(),!e){t("Please log in first!","error");return}if(!fn){t("App is not connected to Firestore. Check Firebase config.","error");return}if(a){t("You've already completed today's check-in.","info");return}if(!se){t("Please answer all required questions.","error");return}o(!0);try{const te=Nf(fn,"users",e.uid,"dailyCheckins"),me={date:tt.now(),dateServer:bh(),answers:{ns_q1:r.ns_q1,ns_q2:r.ns_q2,ns_q3:r.ns_q3,ns_q4:r.ns_q4,ns_q5:r.ns_q5,ns_q6:r.ns_q6,ns_q7:r.ns_q7,ns_q8:r.ns_q8,ns_q9:r.ns_q9,ns_q10:r.ns_q10,ns_q11:r.ns_q11,ns_q12:r.ns_q12},analyzed:!1,notes:b||null,topK:Number(S),explainMethod:P,useScipyWinsorize:A,forceLocal:ne};console.log("[DailyCheckin] Submitting payload:",me),await fF(te,me),t("Daily check-in saved!","success"),l(!0);try{$3({userId:e.uid,payload:me})}catch{}}catch(te){console.error("[DailyCheckin] Firestore addDoc error:",te);const me=(te==null?void 0:te.message)||"Error saving check-in. Please try again.";t(me,"error")}finally{o(!1)}}return d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Daily Check-in"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"AI Service"})}),d.jsxs(Ze,{children:[k?d.jsxs("div",{className:"text-slate-600 inline-flex items-center gap-2",children:[d.jsx(ki,{size:16})," Checking service..."]}):d.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Python service: ",(le=R==null?void 0:R.python)!=null&&le.available?d.jsx("span",{className:"text-emerald-600 font-medium",children:"Available"}):d.jsx("span",{className:"text-slate-500",children:"Unavailable"}),((he=R==null?void 0:R.python)==null?void 0:he.available)&&d.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["Torch: ",String(!!((Ee=R==null?void 0:R.python)!=null&&Ee.torchAvailable))," • CUDA: ",String(!!((Oe=R==null?void 0:R.python)!=null&&Oe.cudaAvailable))]})]}),d.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Top K"}),d.jsx("input",{type:"number",min:1,max:3,value:S,onChange:j=>I(j.target.value),className:"border rounded px-2 py-1 w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Explainability"}),d.jsxs("select",{value:P,onChange:j=>D(j.target.value),className:"border rounded px-2 py-1 w-full",children:[d.jsx("option",{value:"auto",children:"Auto"}),d.jsx("option",{value:"captum",children:"Captum"}),d.jsx("option",{value:"shap",children:"SHAP"}),d.jsx("option",{value:"none",children:"None"})]})]}),d.jsxs("label",{className:"flex items-center gap-2 mt-6 md:mt-0",children:[d.jsx("input",{type:"checkbox",checked:A,onChange:j=>oe(j.target.checked),className:"h-4 w-4"}),d.jsx("span",{className:"text-sm text-slate-700",children:"Use SciPy winsorization"})]})]})]})]}),d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Today's Check-in"})}),d.jsx(Ze,{children:a?d.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[d.jsx("p",{className:"font-medium",children:"You've already submitted today's check-in. Come back tomorrow."}),c&&c.answers&&d.jsxs("div",{className:"mt-2",children:[d.jsx("p",{className:"text-xs text-slate-500",children:"Your last responses:"}),d.jsxs("ul",{className:"list-disc ml-5 mt-1 space-y-1",children:[d.jsxs("li",{children:["Sleep & Energy: ",c.answers.q1]}),d.jsxs("li",{children:["Pain/Discomfort: ",c.answers.q2,c.answers.q2_specify?` (${c.answers.q2_specify})`:""]}),d.jsxs("li",{children:["Heart/Respiratory: ",c.answers.q3,c.answers.q3==="Yes"&&c.answers.q3_severity?` (${c.answers.q3_severity})`:""]}),d.jsxs("li",{children:["Digestive/Temperature: ",c.answers.q4,c.answers.q4_specify?` (${c.answers.q4_specify})`:""]}),d.jsxs("li",{children:["Mental & Emotional: ",c.answers.q5]}),d.jsxs("li",{children:["Activity: ",c.answers.q6_activity,", Hydration: ",c.answers.q6_hydration,", Diet: ",c.answers.q6_diet]})]})]})]}):d.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[d.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Daily Symptom Tracking MCQs"}),[{key:"ns_q1",title:"Stomach / Abdominal Pain Today",opts:["None","Mild – occasional discomfort","Moderate – noticeable, affects tasks","Severe – persistent pain"]},{key:"ns_q2",title:"Headache or Migraine Today",opts:["None","Mild – didn’t interfere with work","Moderate – interfered with tasks","Severe – unable to perform daily activities"]},{key:"ns_q3",title:"Nausea or Vomiting Today",opts:["None","Mild – occasional queasiness","Moderate – affected meals","Severe – persistent vomiting"]},{key:"ns_q4",title:"Fatigue or Weakness Today",opts:["None – felt energetic","Mild – slightly tired","Moderate – noticeable fatigue","Severe – could barely perform activities"]},{key:"ns_q5",title:"Fever or Chills Today",opts:["None","Mild – slight temperature fluctuation","Moderate – measurable fever (100–102°F / 37.7–38.8°C)","Severe – high fever (>102°F / 38.8°C)"]},{key:"ns_q6",title:"Cough or Shortness of Breath Today",opts:["None","Mild – occasional cough or shortness of breath","Moderate – daily cough or breathing difficulty","Severe – persistent cough or severe breathing issues"]},{key:"ns_q7",title:"Changes in Bowel Movements Today",opts:["Normal","Slight irregularity – mild constipation/diarrhea","Moderate – frequent or loose stools","Severe – persistent diarrhea/constipation"]},{key:"ns_q8",title:"Changes in Urination Today",opts:["Normal","Slight – minor discomfort or frequency change","Moderate – frequent or painful urination","Severe – inability to urinate normally or severe discomfort"]},{key:"ns_q9",title:"Skin Changes / Wounds Today",opts:["None","Minor – small rashes, bruises, or pimples","Noticeable – persistent rash, sores, or swelling","Severe – bleeding, large lesions, or non-healing wounds"]},{key:"ns_q10",title:"Dizziness or Fainting Today",opts:["None","Mild – occasional lightheadedness","Moderate – dizziness affecting tasks","Severe – fainting or inability to stand"]},{key:"ns_q11",title:"Sleep / Insomnia Today",opts:["Slept well – no trouble falling or staying asleep","Mild difficulty – took longer than usual to fall asleep","Moderate difficulty – frequent waking or poor sleep quality","Severe – hardly slept or very restless night"]},{key:"ns_q12",title:"Hot Flashes / Sudden Warmth Today",opts:["None – no unusual warmth","Mild – occasional warmth or flushing","Moderate – noticeable episodes affecting comfort","Severe – frequent or intense hot flashes"]}].map((j,te)=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:te+1}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:j.title})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-2",children:j.opts.map(me=>d.jsx("button",{type:"button",onClick:()=>H(j.key,me),className:`px-3 py-2 rounded-md border text-sm text-left transition ${r[j.key]===me?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:me},me))})]},j.key)),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Add notes for today (optional)"}),d.jsx(Hy,{value:b,onChange:j=>N(j.target.value),placeholder:"Type anything noteworthy about your health today..."})]}),d.jsxs("div",{className:"hidden",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"1"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sleep & Energy"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How well did you sleep last night, and how energetic do you feel today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Moderate","High","Very high"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q1",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q1===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"2"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pain or Discomfort"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you experience any unusual pain, discomfort, or bodily symptoms today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q2",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q2===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q2==="Mild"||r.q2==="Moderate"||r.q2==="Severe")&&d.jsx("input",{type:"text",placeholder:"Specify location (optional)",value:r.q2_specify,onChange:j=>H("q2_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"3"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Heart & Respiratory Health"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Chest pain, palpitations, shortness of breath, or rapid heartbeat today?"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:["No","Yes"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q3",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),r.q3==="Yes"&&d.jsx("div",{className:"mt-2 grid grid-cols-3 md:grid-cols-6 gap-2",children:["Mild","Moderate","Severe"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q3_severity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3_severity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"4"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Digestive & Temperature Symptoms"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Digestive issues (nausea, vomiting, diarrhea, constipation, heartburn) or fever/chills today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q4",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q4===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q4==="Mild"||r.q4==="Moderate"||r.q4==="Severe")&&d.jsx("input",{type:"text",placeholder:"Specify (optional)",value:r.q4_specify,onChange:j=>H("q4_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"5"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Mental & Emotional Well-being"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How would you rate your mood and stress levels today?"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Neutral","Good","Very good"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q5",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q5===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"6"}),d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Physical Activity & Lifestyle"})]}),d.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you maintain physical activity, hydration, and balanced meals today?"}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Activity"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Light","Moderate","Intense"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q6_activity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_activity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Hydration"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q6_hydration",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_hydration===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Diet"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>d.jsx("button",{type:"button",onClick:()=>H("q6_diet",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_diet===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d.jsx("div",{className:"text-xs text-slate-500",children:"Complete all sections to enable saving."}),d.jsx(ve,{type:"submit",disabled:i||!se||n,children:i?d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx(ki,{size:16})," Saving..."]}):"Save today's check-in"})]})]})})]}),d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Your recent check-ins"})}),d.jsx(Ze,{children:y.length>0?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Overall trend: ",d.jsx("span",{className:`font-medium ${E==="Worsening"?"text-red-600":E==="Improving"?"text-emerald-600":"text-slate-700 dark:text-slate-200"}`,children:E||"Not enough data"})]}),d.jsx("div",{className:"bg-white dark:bg-slate-950 rounded-md p-3 border border-slate-200 dark:border-slate-800",children:d.jsx(x1,{points:y,labels:v,title:(Ce=R==null?void 0:R.python)!=null&&Ce.available?"AI risk":"Risk",yRange:{min:0,max:1}})}),d.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 text-sm",children:f.slice(0,10).map((j,te)=>{var me;return d.jsxs("li",{className:"py-2 flex items-center justify-between",children:[d.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:(me=j==null?void 0:j.date)!=null&&me.toDate?j.date.toDate().toLocaleDateString():""}),d.jsx("span",{className:"font-medium",children:K(j.answers)})]},j.id||te)})})]}):d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No history yet. Your check-ins will appear here."})})]}),d.jsxs(Je,{children:[d.jsx(bt,{children:d.jsx(Et,{children:"Why this matters"})}),d.jsx(Ze,{children:d.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 space-y-2",children:[d.jsx("p",{children:"Your daily responses help track trends in sleep, mood, pain, and lifestyle. If you report concerning symptoms, your clinician or AI assistant can prioritize guidance."}),d.jsx("p",{children:"We limit to one check-in per day to keep insights consistent. You can update tomorrow if anything changes."})]})})]})]})]})}function rz(){var j,te,me,_t,q,ge;const{notify:t}=Id(),[e,n]=O.useState(null),[r,s]=O.useState(null),[i,o]=O.useState(null),[a,l]=O.useState(!1),[c,h]=O.useState(!1),[f,m]=O.useState(0),y=O.useRef(null),[x,E]=O.useState(""),[T,v]=O.useState(!0),[_,b]=O.useState("Idle"),N=O.useRef(null),[R,M]=O.useState(""),[k,w]=O.useState(null),[S,I]=O.useState(""),[P,D]=O.useState(!1),[A,oe]=O.useState("eng"),[ne,ae]=O.useState(!1);function se($){try{const ee=Array.isArray($==null?void 0:$.labs)?$.labs:[],J=($==null?void 0:$.meta)||{},re=pt=>ee.find(Ae=>(Ae.name||"").toLowerCase()===pt.toLowerCase()),Me=re("hemoglobin"),_e=re("glucose"),Ie=re("creatinine"),ft=[];if(J!=null&&J.date&&ft.push(`Report date: ${J.date}.`),Me&&typeof Me.value=="number"){const pt=Me.value,Ae=Me.unit||"g/dL";ft.push(`Hemoglobin is ${pt} ${Ae}, which reflects your blood's oxygen-carrying protein.`)}if(_e&&typeof _e.value=="number"){const pt=_e.value,Ae=_e.unit||"mg/dL";ft.push(`Glucose is ${pt} ${Ae}, a snapshot of blood sugar at the time of test.`)}if(Ie&&typeof Ie.value=="number"){const pt=Ie.value,Ae=Ie.unit||"mg/dL";ft.push(`Creatinine is ${pt} ${Ae}, which helps indicate kidney function.`)}return ft.length?ft.join(" "):"We parsed the report and extracted key details. Values will appear here once identified."}catch{return"We parsed the report and extracted key details."}}const B=O.useMemo(()=>["application/pdf","image/jpeg","image/png","image/heic","image/heif"],[]),K=10*1024*1024,H=O.useCallback($=>$?B.includes($.type)?$.size>K?"File is too large. Max 10MB.":null:"Unsupported file type. Use PDF, JPG, or PNG.":"No file selected",[B]),fe=O.useCallback($=>{var re;$.preventDefault(),$.stopPropagation(),l(!1);const ee=(re=$.dataTransfer.files)==null?void 0:re[0],J=H(ee);if(J){t(J,"error");return}n(ee||null)},[t,H]),le=O.useCallback($=>{var re;const ee=(re=$.target.files)==null?void 0:re[0],J=H(ee);if(J){t(J,"error"),$.target.value="";return}n(ee||null)},[t,H]);O.useEffect(()=>{if(e&&e.type.startsWith("image/")){const $=URL.createObjectURL(e);return E($),()=>URL.revokeObjectURL($)}E("")},[e]),O.useEffect(()=>{const $=async ee=>{var J;try{const re=Array.from(((J=ee.clipboardData)==null?void 0:J.items)||[]).find(Ie=>Ie.type.startsWith("image/"));if(!re)return;const Me=re.getAsFile();if(!Me)return;const _e=H(Me);if(_e){t(_e,"error");return}n(new File([Me],Me.name||"pasted-image.png",{type:Me.type})),t("Image pasted from clipboard","success")}catch{}};return window.addEventListener("paste",$),()=>window.removeEventListener("paste",$)},[t,H]);async function he($){if($.preventDefault(),!e){t("Please select a file to process.","error");return}h(!0),m(0),M(""),b("Uploading…");try{const ee=new AbortController;N.current=ee;const J=await B3(e,{onProgress:re=>m(re),signal:ee.signal});m(100),s((J==null?void 0:J.ocr)||J),o((J==null?void 0:J.extracted)||null),b("Completed"),t("Report processed successfully.","success")}catch(ee){const J=(ee==null?void 0:ee.message)||"Failed to process the report.";M(J),w(ee&&ee.body?ee.body:null),b(J.toLowerCase().includes("canceled")?"Canceled":"Failed"),t(J,"error")}finally{N.current=null,setTimeout(()=>h(!1),200)}}async function Ee($){$.preventDefault();const ee=(S||"").trim();if(!ee){t("Enter a PDF URL to process.","error");return}h(!0),m(0),M(""),w(null),b("Processing URL…");try{const J=await z3(ee,{useOcr:P?!0:null,lang:A});s((J==null?void 0:J.ocr)||J),o((J==null?void 0:J.extracted)||null),b("Completed"),t("PDF URL processed successfully.","success")}catch(J){const re=(J==null?void 0:J.message)||"Failed to process the PDF URL.";M(re),w(J&&J.body?J.body:null),b("Failed"),t(re,"error")}finally{setTimeout(()=>h(!1),200)}}const Oe=O.useCallback(()=>{N.current&&N.current.abort()},[]),Ce=O.useCallback(()=>{if(!e)return;s(null),m(0),b("Retrying…"),he({preventDefault:()=>{}})},[e]);return d.jsxs("div",{children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-1 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-indigo-600 to-fuchsia-600",children:"Upload Report"}),d.jsx("p",{className:"text-sm text-slate-600",children:"Upload a medical report to extract key details with OCR. We support PDF and image formats."})]}),d.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[d.jsxs(Je,{children:[d.jsx(bt,{className:"bg-sky-50 border-b border-sky-200",children:d.jsx(Et,{className:"text-sky-900",children:"Select file"})}),d.jsxs(Ze,{children:[d.jsxs("form",{onSubmit:he,className:"space-y-4",children:[d.jsxs("div",{className:`relative flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed px-6 py-10 text-center transition-colors bg-gradient-to-r ${a?"from-blue-50 via-sky-50 to-indigo-50 border-blue-600":"from-sky-50 via-indigo-50 to-fuchsia-50 border-slate-300 hover:border-blue-400"}`,onDragOver:$=>{$.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:fe,role:"button",tabIndex:0,"aria-label":"Drag and drop a report file here or choose a file",onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),y.current&&y.current.click())},children:[a&&d.jsx("div",{className:"absolute inset-0 bg-blue-600/10 border-2 border-blue-600 rounded pointer-events-none"}),d.jsxs("div",{className:"flex items-center gap-3",children:[c?d.jsx(ki,{size:20}):d.jsxs("svg",{className:"h-5 w-5 text-blue-600",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("path",{d:"M12 16V4m0 12l-4-4m4 4l4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("rect",{x:"3",y:"16",width:"18",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]}),d.jsxs("div",{className:"text-slate-800",children:[d.jsx("div",{className:"font-medium",children:"Drag and drop your report"}),d.jsx("div",{className:"text-xs text-slate-600",children:"PDF, JPG, or PNG up to 10MB. Paste an image with Ctrl/Cmd+V."})]})]}),d.jsx("div",{className:"text-xs text-slate-500",children:"or"}),d.jsx("input",{ref:y,type:"file",accept:B.join(","),onChange:le,className:"hidden"}),d.jsx(ve,{type:"button",variant:"secondary",onClick:()=>y.current&&y.current.click(),disabled:c,className:"hover:bg-indigo-100",children:"Choose file"}),e&&d.jsx("div",{className:"mt-3 w-full max-w-md",children:x?d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:x,alt:"preview",className:"h-20 w-20 object-cover rounded border border-emerald-200"}),d.jsxs("div",{className:"text-left",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-sm font-medium text-slate-800 truncate",children:e.name}),d.jsx("span",{className:"rounded-full bg-emerald-100 text-emerald-700 text-[10px] px-2 py-0.5 border border-emerald-200",children:"IMAGE"})]}),d.jsxs("div",{className:"text-xs text-slate-600",children:[Math.ceil(e.size/1024)," KB"]})]})]}):d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-10 w-10 rounded bg-rose-100 text-rose-700 flex items-center justify-center font-semibold border border-rose-200",children:"PDF"}),d.jsxs("div",{className:"text-left",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-sm font-medium text-slate-800 truncate",children:e.name}),d.jsx("span",{className:"rounded-full bg-rose-100 text-rose-700 text-[10px] px-2 py-0.5 border border-rose-200",children:"PDF"})]}),d.jsxs("div",{className:"text-xs text-slate-600",children:[Math.ceil(e.size/1024)," KB"]})]})]})}),c&&d.jsx("div",{className:"absolute inset-x-0 bottom-0",children:d.jsx("div",{className:"h-1 w-full bg-indigo-100",children:d.jsx("div",{className:"h-1 bg-indigo-600 transition-all",style:{width:`${f}%`}})})})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx(ve,{type:"button",variant:"secondary",onClick:()=>{n(null),s(null),o(null),b("Idle"),y.current&&(y.current.value="")},disabled:c,children:"Remove"}),d.jsx(ve,{type:"button",variant:"ghost",onClick:()=>y.current&&y.current.click(),disabled:c,children:"Replace"}),d.jsx("div",{className:"ml-auto"}),c?d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ve,{type:"button",variant:"danger",onClick:Oe,children:"Cancel"}),d.jsx(ve,{type:"button",variant:"primary",disabled:!0,className:"bg-indigo-600",children:d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx(ki,{size:16})," Uploading…"]})})]}):d.jsx(ve,{type:"submit",disabled:!e,className:"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-600",children:"Process report"})]})]}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsx("div",{className:"text-xs text-slate-600",children:"Or process a PDF by URL"}),d.jsxs("form",{onSubmit:Ee,className:"flex items-stretch gap-2",children:[d.jsx("input",{type:"url",placeholder:"https://example.com/report.pdf",className:"flex-1 rounded border px-3 py-2 text-sm border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-200",value:S,onChange:$=>I($.target.value),disabled:c}),d.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-700",children:[d.jsx("input",{type:"checkbox",checked:P,onChange:$=>D($.target.checked),disabled:c}),"Force OCR"]}),d.jsxs("select",{className:"rounded border px-2 py-2 text-xs border-slate-300 bg-white",value:A,onChange:$=>oe($.target.value),disabled:c,title:"OCR language",children:[d.jsx("option",{value:"eng",children:"English (eng)"}),d.jsx("option",{value:"hin",children:"Hindi (hin)"}),d.jsx("option",{value:"eng+hin",children:"English+Hindi (eng+hin)"})]}),d.jsx(ve,{type:"submit",variant:"secondary",disabled:c||!S.trim(),className:"hover:bg-indigo-100",children:"Process URL"})]})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 border ${_==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-200":_==="Failed"||_==="Canceled"?"bg-rose-50 text-rose-700 border-rose-200":"bg-sky-50 text-sky-700 border-sky-200"}`,children:[d.jsx("span",{className:`h-2 w-2 rounded-full ${_==="Completed"?"bg-emerald-600":_==="Failed"||_==="Canceled"?"bg-rose-600":"bg-sky-600"}`}),_]}),!!R&&!c&&d.jsx("button",{className:"text-rose-700 underline",onClick:Ce,children:"Retry"})]}),!!R&&k&&d.jsxs("div",{className:"mt-2 text-xs text-rose-700",children:[(k==null?void 0:k.acceptedTypes)&&d.jsxs("div",{children:["Supported types: ",(k.acceptedTypes||[]).join(", ")]}),(k==null?void 0:k.maxSizeMb)&&d.jsxs("div",{children:["Max file size: ",k.maxSizeMb," MB"]})]})]})]})]}),d.jsxs(Je,{children:[d.jsx(bt,{className:"bg-white border-b border-slate-200",children:d.jsx(Et,{className:"text-slate-900",children:"Summary"})}),d.jsx(Ze,{className:"bg-white",children:i?d.jsx("div",{className:"space-y-4",children:(()=>{const $=Array.isArray(i==null?void 0:i.labs)?i.labs:[],ee=Ae=>$.find(jn=>(jn.name||"").toLowerCase()===Ae.toLowerCase()),J=ee("hemoglobin"),re=ee("glucose"),Me=ee("creatinine"),_e=$.length,Ie={hemoglobin:{min:12,max:16,unit:"g/dL"},glucose:{min:70,max:140,unit:"mg/dL"},creatinine:{min:.6,max:1.3,unit:"mg/dL"}};function ft(Ae,{min:jn,max:zr}){return typeof Ae!="number"?{text:"—",cls:"bg-slate-100 text-slate-700"}:Ae<jn?{text:"Low",cls:"bg-amber-100 text-amber-800"}:Ae>zr?{text:"High",cls:"bg-rose-100 text-rose-800"}:{text:"Normal",cls:"bg-emerald-100 text-emerald-800"}}function pt(Ae,{min:jn,max:zr}){return typeof Ae!="number"?.5:(Math.max(jn,Math.min(zr,Ae))-jn)/(zr-jn)}return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[d.jsx(mo,{label:"Labs detected",value:String(_e),hint:"Parsed from OCR",accent:"blue"}),d.jsx(mo,{label:"Hemoglobin",value:J?`${J.value??"—"} ${J.unit||""}`:"—",hint:"g/dL",accent:"emerald"}),d.jsx(mo,{label:"Glucose",value:re?`${re.value??"—"} ${re.unit||""}`:"—",hint:"mg/dL",accent:"amber"})]}),d.jsx("div",{className:"text-[13px] leading-6 text-slate-800 bg-slate-50 border border-slate-200 rounded p-3",children:se(i)}),d.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[d.jsxs("div",{className:"rounded border border-slate-200 p-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("div",{className:"font-medium text-slate-900",children:"Hemoglobin"}),(()=>{const Ae=ft(J==null?void 0:J.value,Ie.hemoglobin);return d.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ae.cls}`,children:Ae.text})})()]}),d.jsx("div",{className:"mt-2 h-2 bg-slate-100 rounded",children:d.jsx("div",{className:"h-2 bg-emerald-500 rounded",style:{width:`${Math.round(pt(J==null?void 0:J.value,Ie.hemoglobin)*100)}%`}})}),d.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Range ",Ie.hemoglobin.min,"-",Ie.hemoglobin.max," ",Ie.hemoglobin.unit]})]}),d.jsxs("div",{className:"rounded border border-slate-200 p-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("div",{className:"font-medium text-slate-900",children:"Glucose"}),(()=>{const Ae=ft(re==null?void 0:re.value,Ie.glucose);return d.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ae.cls}`,children:Ae.text})})()]}),d.jsx("div",{className:"mt-2 h-2 bg-slate-100 rounded",children:d.jsx("div",{className:"h-2 bg-blue-500 rounded",style:{width:`${Math.round(pt(re==null?void 0:re.value,Ie.glucose)*100)}%`}})}),d.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Range ",Ie.glucose.min,"-",Ie.glucose.max," ",Ie.glucose.unit]})]}),d.jsxs("div",{className:"rounded border border-slate-200 p-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("div",{className:"font-medium text-slate-900",children:"Creatinine"}),(()=>{const Ae=ft(Me==null?void 0:Me.value,Ie.creatinine);return d.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ae.cls}`,children:Ae.text})})()]}),d.jsx("div",{className:"mt-2 h-2 bg-slate-100 rounded",children:d.jsx("div",{className:"h-2 bg-indigo-500 rounded",style:{width:`${Math.round(pt(Me==null?void 0:Me.value,Ie.creatinine)*100)}%`}})}),d.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Range ",Ie.creatinine.min,"-",Ie.creatinine.max," ",Ie.creatinine.unit]})]})]})]})})()}):d.jsx("div",{className:"text-sm text-slate-600",children:"Upload or process a report to see a quick summary."})})]}),d.jsxs(Je,{children:[d.jsx(bt,{className:"bg-white border-b border-slate-200",children:d.jsx(Et,{className:"text-slate-900",children:"Extracted Fields"})}),d.jsx(Ze,{className:"bg-white",children:i?d.jsxs("div",{className:"space-y-4 text-base text-slate-900",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 mb-2",children:"Meta"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-600",children:"Patient:"})," ",d.jsx("span",{className:"font-medium",children:((j=i==null?void 0:i.meta)==null?void 0:j.patientName)||"—"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-600",children:"Patient ID:"})," ",d.jsx("span",{className:"font-medium",children:((te=i==null?void 0:i.meta)==null?void 0:te.patientId)||"—"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-600",children:"Date:"})," ",d.jsx("span",{className:"font-medium",children:((me=i==null?void 0:i.meta)==null?void 0:me.date)||"—"})]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 mb-2",children:"Labs"}),(_t=i==null?void 0:i.labs)!=null&&_t.length?d.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded",children:d.jsxs("table",{className:"min-w-full text-left",children:[d.jsx("thead",{className:"bg-slate-50 text-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3 py-2 border-b border-slate-200",children:"Name"}),d.jsx("th",{className:"px-3 py-2 border-b border-slate-200",children:"Value"}),d.jsx("th",{className:"px-3 py-2 border-b border-slate-200",children:"Unit"}),d.jsx("th",{className:"px-3 py-2 border-b border-slate-200",children:"Confidence"})]})}),d.jsx("tbody",{children:i.labs.map(($,ee)=>d.jsxs("tr",{className:ee%2===0?"bg-white":"bg-slate-50",children:[d.jsx("td",{className:"px-3 py-2 capitalize text-slate-900",children:$.name}),d.jsx("td",{className:"px-3 py-2 text-slate-900",children:$.value??"—"}),d.jsx("td",{className:"px-3 py-2 text-slate-900",children:$.unit||"—"}),d.jsx("td",{className:"px-3 py-2 text-slate-900",children:typeof $.confidence=="number"?`${Math.round($.confidence*100)}%`:"—"})]},ee))})]})}):d.jsx("div",{className:"text-slate-700",children:"No labs found"})]}),(q=i==null?void 0:i.diagnoses)!=null&&q.length||(ge=i==null?void 0:i.medications)!=null&&ge.length?d.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 mb-2",children:"Diagnoses"}),d.jsx("ul",{className:"list-disc pl-5",children:(i.diagnoses||[]).map(($,ee)=>d.jsx("li",{children:$},ee))})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 mb-2",children:"Medications"}),d.jsx("ul",{className:"list-disc pl-5",children:(i.medications||[]).map(($,ee)=>d.jsx("li",{children:$},ee))})]})]}):null,d.jsx("div",{className:"flex items-center gap-3",children:d.jsx(ve,{type:"button",variant:"primary",className:"bg-emerald-600 hover:bg-emerald-700",disabled:!i,onClick:()=>{try{const $=JSON.stringify(i,null,2);navigator.clipboard.writeText($),t("Extracted fields copied","success")}catch{t("Copy failed","error")}},children:"Copy extracted JSON"})})]}):d.jsx("div",{className:"text-base text-slate-700",children:"No structured fields extracted yet."})})]}),d.jsxs(Je,{children:[d.jsxs(bt,{className:"flex items-center justify-between bg-fuchsia-50 border-b border-fuchsia-200",children:[d.jsx(Et,{className:"text-fuchsia-900",children:"OCR Result"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ve,{type:"button",variant:"ghost",onClick:async()=>{if(r)try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),t("Copied to clipboard","success")}catch{t("Copy failed","error")}},disabled:!r,children:"Copy"}),d.jsx(ve,{type:"button",variant:"ghost",className:"hover:bg-fuchsia-100",onClick:()=>v($=>!$),children:T?"Collapse":"Expand"})]})]}),d.jsx(Ze,{children:r?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-xs text-slate-700",children:["Preview ",r!=null&&r.method?`(method: ${r.method}${typeof r.pageCount=="number"?`, pages: ${r.pageCount}`:""}${r!=null&&r.lang?`, lang: ${r.lang}`:""})`:""]}),d.jsx("div",{className:"bg-white border rounded p-3 border-slate-300 text-base leading-6 text-slate-900 whitespace-pre-wrap max-h-96 overflow-auto select-text",children:(()=>{const $=r&&(r.text||r.ocr&&r.ocr.text)||"";return($?$.trim().slice(0,600):"")||"No text extracted"})()}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ve,{type:"button",variant:"ghost",onClick:async()=>{if(r)try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),t("Copied to clipboard","success")}catch{t("Copy failed","error")}},disabled:!r,children:"Copy JSON"}),d.jsx(ve,{type:"button",variant:"ghost",className:"hover:bg-fuchsia-100",onClick:()=>ae(!0),disabled:!r,children:"Fullscreen"}),d.jsx(ve,{type:"button",variant:"ghost",className:"hover:bg-fuchsia-100",onClick:()=>v($=>!$),children:T?"Hide full JSON":"Show full JSON"})]}),T&&d.jsx("pre",{className:"bg-slate-50 dark:bg-slate-950 border rounded p-3 overflow-auto max-h-[520px] border-fuchsia-200",children:JSON.stringify(r,null,2)})]}):d.jsx("div",{className:"text-sm text-slate-600",children:"No result yet. Upload a report to see extracted data."})})]})]}),d.jsx(sz,{open:ne,onClose:()=>ae(!1),ocr:r})]})}function sz({open:t,onClose:e,ocr:n}){if(!t)return null;const r=n&&(n.text||n.ocr&&n.ocr.text)||"";return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:d.jsxs("div",{className:"bg-white rounded shadow-xl w-[90vw] h-[80vh] flex flex-col",children:[d.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[d.jsx("div",{className:"text-sm text-slate-700",children:"OCR Fullscreen Viewer"}),d.jsx("button",{className:"text-slate-700 text-sm hover:underline",onClick:e,children:"Close"})]}),d.jsx("div",{className:"p-4 overflow-auto whitespace-pre-wrap text-slate-900 text-base leading-6 select-text",children:r||"No text extracted"})]})})}function iz(){return d.jsx("footer",{className:"mt-10 border-t border-slate-200 dark:border-slate-800 py-8 text-center text-sm text-slate-500 dark:text-slate-400 bg-white/60 dark:bg-slate-900/60 backdrop-blur",children:d.jsxs("div",{className:"mx-auto max-w-7xl px-4",children:["© ",new Date().getFullYear()," AgenticSprit"]})})}function oz(){return d.jsxs("div",{className:"text-center py-16",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Page not found"}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"The page you are looking for doesn’t exist."}),d.jsx(xg,{className:"text-blue-600 hover:underline",to:"/",children:"Go back home"})]})}function ou({children:t}){const{user:e,loading:n}=Di(),r=Ls();return n?d.jsx("div",{className:"flex items-center justify-center py-16",children:d.jsx(ki,{size:24})}):e?t:d.jsx(pR,{to:"/login",replace:!0,state:{from:r}})}function Tm(t){return new Date(t).toLocaleString()}function az({compact:t=!1}){const{user:e}=Di(),{notify:n}=Id(),r=O.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:messages`,[e==null?void 0:e.uid]),s=O.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useCheckins`,[e==null?void 0:e.uid]),[i,o]=O.useState([]),[a,l]=O.useState(""),[c,h]=O.useState(!1),[f,m]=O.useState(null),[y,x]=O.useState({}),E=O.useRef(null),T=O.useRef(null),v=O.useMemo(()=>["Summarize my last diagnosis","What red flags should I watch?","Explain this lab result in simple terms","What are next steps for follow-up?"],[]),[_,b]=O.useState(!0);O.useEffect(()=>{try{const I=localStorage.getItem(r);if(I){const D=JSON.parse(I);Array.isArray(D)?o(D):o([])}else o([]);const P=localStorage.getItem(s);b(P==="true"||P==="false"?P==="true":!0)}catch{o([])}x({})},[r,s]),O.useEffect(()=>{var I;(I=E.current)==null||I.scrollTo({top:E.current.scrollHeight});try{localStorage.setItem(r,JSON.stringify(i))}catch{}},[i,r]),O.useEffect(()=>{try{localStorage.setItem(s,String(_))}catch{}},[_,s]);const N=O.useMemo(()=>a.trim().length>0&&!c,[a,c]),R=O.useMemo(()=>{const I=[...i].reverse().find(P=>P.role==="assistant");return!!(I&&typeof I.content=="string"&&I.content.toLowerCase().includes("gemini api key missing"))},[i]);async function M(){var P,D;if(!N)return;const I=[...i,{role:"user",content:a,createdAt:Date.now()}];o(I),l(""),h(!0);try{const A={messages:I,options:{maxOutputTokens:512,useCheckins:_,checkinLimit:7}},oe=new AbortController;m(oe);const ne=await q3(A,{signal:oe.signal}),ae=((P=ne==null?void 0:ne.data)==null?void 0:P.error)||((D=ne==null?void 0:ne.data)==null?void 0:D.reply)||"...";o(se=>se.concat({role:"assistant",content:ae,createdAt:Date.now()}))}catch(A){const oe=(A==null?void 0:A.message)||"Network error";n(oe,"error")}finally{h(!1),m(null)}}function k(){o([])}function w(I){var P;try{(P=navigator.clipboard)==null||P.writeText(I)}catch{}}O.useEffect(()=>{const I=T.current;I&&(I.style.height="auto",I.style.height=Math.min(I.scrollHeight,120)+"px")},[a]);function S(I){if(typeof I!="string"||I.length===0)return null;const P=I.split(/\r?\n/);function D(ae,se){const B=[];let K=ae,H=0;const fe=/\*\*([^*]+)\*\*/,le=/(^|[^*])\*([^*]+)\*(?!\*)/;for(;K.length>0;){const he=fe.exec(K),Ee=le.exec(K);let Oe=K.length,Ce=null,j=null;if(he&&(!Ee||he.index<=Ee.index)?(Oe=he.index,Ce="bold",j=he):Ee&&(Oe=Ee.index+(Ee[1]?Ee[1].length:0),Ce="italic",j=Ee),!Ce){B.push(d.jsx("span",{children:K},`${se}-t-${H++}`));break}if(Oe>0&&B.push(d.jsx("span",{children:K.slice(0,Oe)},`${se}-t-${H++}`)),Ce==="bold")B.push(d.jsx("strong",{children:j[1]},`${se}-b-${H++}`)),K=K.slice(j.index+j[0].length);else if(Ce==="italic"){const te=j[1]||"";te&&B.push(d.jsx("span",{children:te},`${se}-l-${H++}`)),B.push(d.jsx("em",{children:j[2]},`${se}-i-${H++}`));const me=j.index+te.length+j[0].length-(te?0:1);K=K.slice(me)}}return B}const A=[];let oe=[];const ne=()=>{oe.length>0&&(A.push(d.jsx("ul",{className:"list-disc pl-5 my-2 space-y-1",children:oe.map((ae,se)=>d.jsx("li",{children:D(ae.replace(/^\s*[*-]\s+/,""),`li-${se}`)},`li-${se}`))},`ul-${A.length}`)),oe=[])};for(let ae=0;ae<P.length;ae++){const se=P[ae];if(/^\s*[*-]\s+/.test(se)){oe.push(se);continue}ne(),se.trim()===""?A.push(d.jsx("div",{className:"h-2"},`br-${ae}`)):A.push(d.jsx("p",{children:D(se,`p-${ae}`)},`p-${ae}`))}return ne(),d.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:A})}return d.jsxs("div",{className:`${t?"flex h-full flex-col gap-0":"flex flex-col gap-3"}`,children:[R&&d.jsxs("div",{className:"rounded-md border border-amber-300 bg-amber-50 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200 px-3 py-2 text-xs",children:["Gemini API key is not configured on the backend. Set ",d.jsx("code",{children:"GEMINI_API_KEY"})," and restart the server."]}),!t&&d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),"Gemini · Online"]})}),d.jsxs("div",{className:"flex items-center gap-2",children:[c?d.jsx(ve,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>f==null?void 0:f.abort(),children:"Stop"}):null,d.jsx(ve,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:k,disabled:i.length===0&&!c,children:"Clear"})]})]}),d.jsxs("div",{ref:E,className:`${t?"flex-1 min-h-0 overflow-auto p-3":"max-h-[70vh] min-h-[55vh] overflow-auto p-4"} rounded-lg border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-950/70 backdrop-blur`,children:[i.length===0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-500 mb-3",children:"Start the conversation by asking a question, or try one of these:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.map((I,P)=>d.jsx("button",{onClick:()=>l(I),className:"px-3 py-1.5 rounded-full text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-100 border border-slate-200 dark:border-slate-700",children:I},P))})]}),i.map((I,P)=>d.jsx("div",{className:`mb-3 flex ${I.role==="user"?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`flex items-end gap-2 ${I.role==="user"?"flex-row-reverse":"flex-row"}`,children:[d.jsx("div",{className:`hidden lg:flex h-8 w-8 shrink-0 rounded-full items-center justify-center text-xs font-semibold ${I.role==="user"?"bg-brand-600 text-white":"bg-slate-200 text-slate-700 dark:bg-slate-800 dark:text-slate-100"}`,children:I.role==="user"?"You":"AI"}),d.jsxs("div",{children:[(()=>{const D=`${I.createdAt||P}-${P}`;I.role==="assistant"&&typeof I.content=="string"&&I.content.length>500;const A=!!y[D];return d.jsxs("div",{className:`group relative max-w-[95%] sm:max-w-[92%] md:max-w-[90%] lg:max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-subtle break-words whitespace-pre-wrap leading-normal ${I.role==="user"?"bg-brand-600 text-white rounded-br-md":"bg-slate-100/90 dark:bg-slate-900/80 text-slate-900 dark:text-slate-100 rounded-bl-md"}`,children:[d.jsx("div",{className:"max-h-60 overflow-y-auto pr-1",children:I.role==="assistant"?d.jsx("div",{className:`chat-content select-text ${A?"":"line-clamp-10"}`,children:S(I.content)}):d.jsx("div",{className:"break-words whitespace-pre-wrap",children:I.content})}),d.jsx("button",{onClick:()=>w(I.content),title:"Copy",className:`absolute -top-2 ${I.role==="user"?"-left-2":"-right-2"} hidden group-hover:inline-flex items-center justify-center h-6 w-6 rounded-full bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600`,children:"⧉"})]})})(),d.jsxs("div",{className:`mt-1 flex items-center gap-2 ${I.role==="user"?"justify-end":"justify-start"}`,children:[d.jsx("div",{className:`text-[10px] ${I.role==="user"?"text-slate-300":"text-slate-500 dark:text-slate-400"}`,children:I.createdAt?Tm(I.createdAt):""}),I.role==="assistant"&&typeof I.content=="string"&&I.content.length>500&&(()=>{const D=`${I.createdAt||P}-${P}`,A=!!y[D];return d.jsx("button",{className:"text-[10px] px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>x(oe=>({...oe,[D]:!oe[D]})),children:A?"Collapse":"Expand"})})()]})]})]})},P)),c&&d.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-500 text-sm",children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-600"})]}),"Thinking…"]})]}),d.jsxs("div",{className:`${t?"sticky bottom-0 z-10 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur pt-3":""}`,children:[d.jsxs("div",{className:"flex gap-2 items-end",children:[d.jsx(Hy,{ref:T,value:a,onChange:I=>l(I.target.value.slice(0,1e3)),onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),M())},placeholder:"Type your message",rows:t?2:3}),d.jsxs("div",{className:"flex flex-col items-end gap-1",children:[d.jsx(ve,{onClick:M,disabled:!N,children:"Send"}),d.jsxs("div",{className:"text-[10px] text-slate-500",children:[a.length,"/1000"]})]})]}),d.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[d.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[d.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:_,onChange:I=>b(I.target.checked)}),"Use my daily check-ins for answers"]}),t?d.jsxs("div",{className:"flex items-center gap-2",children:[c?d.jsx(ve,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>f==null?void 0:f.abort(),children:"Stop"}):null,d.jsx(ve,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:k,disabled:i.length===0&&!c,children:"Clear"})]}):null]})]})]})}function lz(){const[t,e]=O.useState(!1),[n,r]=O.useState(!1);O.useEffect(()=>{try{const o=localStorage.getItem("chat:widgetOpen");o!=null&&e(o==="true");const a=localStorage.getItem("chat:messages");if(a){const l=JSON.parse(a);r(Array.isArray(l)&&l.length>0)}}catch{}},[]),O.useEffect(()=>{try{localStorage.setItem("chat:widgetOpen",String(t))}catch{}},[t]);const s=O.useCallback(()=>e(o=>!o),[]),i=O.useCallback(()=>e(!1),[]);return O.useEffect(()=>{const o=a=>{a.key==="Escape"&&i(),(a.altKey||a.metaKey)&&a.key==="/"&&s()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,i]),d.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!t&&d.jsx(ve,{onClick:s,className:`h-14 w-14 rounded-full shadow-lg p-0 ring-2 ring-brand-600 bg-brand-600 text-white hover:bg-brand-700 focus:outline-none focus:ring-4 focus:ring-brand-300 transition ${n?"":"animate-pulse"}`,"aria-label":"Open chat",title:"Open chat (Alt+/)",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-7 w-7 m-auto",children:[d.jsx("path",{d:"M7.5 8.25h9a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1 0-1.5Zm0 4.5h5.25a.75.75 0 0 1 0 1.5H7.5a.75.75 0 0 1 0-1.5Z"}),d.jsx("path",{fillRule:"evenodd",d:"M4.5 3.75A2.25 2.25 0 0 0 2.25 6v8.25A2.25 2.25 0 0 0 4.5 16.5H6v3.19a.75.75 0 0 0 1.28.53l3.72-3.72h6.5A2.25 2.25 0 0 0 20.25 14.25V6A2.25 2.25 0 0 0 18 3.75h-13.5Z",clipRule:"evenodd"})]})}),t&&d.jsxs("div",{className:"relative w-[500px] max-w-[96vw] h-[60vh] sm:h-[65vh] md:h-[72vh] lg:h-[75vh] rounded-xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),d.jsx("span",{className:"font-medium",children:"Assistive Chat"})]}),d.jsx("button",{onClick:i,"aria-label":"Close chat",className:"h-7 w-7 rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 flex items-center justify-center text-xs",title:"Close",children:"✕"})]}),d.jsx("div",{className:"h-full flex flex-col",children:d.jsx("div",{className:"flex-1 p-4 overflow-auto",children:d.jsx(az,{compact:!0})})})]})]})}function cz(){const{user:t}=Di(),[e,n]=O.useState(""),[r,s]=O.useState(""),[i,o]=O.useState(!1),[a,l]=O.useState(""),[c,h]=O.useState(null),[f,m]=O.useState(!1),[y,x]=O.useState(""),[E,T]=O.useState(""),[v,_]=O.useState(null);function b(R){try{if(!R)return null;if(typeof R.toDate=="function")return R.toDate();if(typeof R.seconds=="number")return new Date(R.seconds*1e3);const M=new Date(R);return Number.isNaN(M.getTime())?null:M}catch{return null}}O.useEffect(()=>{let R=!0;async function M(){if(!(!t||!fn))try{const k=wh(fn,"users",t.uid),w=await dS(k),S=w.exists()?w.data():{};if(!R)return;n(t.displayName||S.displayName||""),s(t.photoURL||S.photoURL||""),_({uid:t.uid,email:t.email||S.email||null,phoneNumber:t.phoneNumber||S.phoneNumber||null,providerIds:(t.providerData||[]).map(I=>I.providerId),role:S.role||"user",createdAt:b(S.createdAt)||null,updatedAt:b(S.updatedAt)||null})}catch{}}return M(),()=>{R=!1}},[t]);async function N(R){if(R.preventDefault(),!!t){o(!0),l("");try{let M=r||null;if(c&&Eh){m(!0);try{const w=c.name&&c.name.includes(".")?c.name.split(".").pop():"jpg",S=`avatars/${t.uid}/${Date.now()}.${w}`,I=T4(Eh,S);await b4(I,c,{contentType:c.type||"image/jpeg"}),M=await E4(I)}catch(w){throw console.error("[Profile] Upload failed:",w),w}finally{m(!1)}}await aI(xt.currentUser,{displayName:e||null,photoURL:M});const k=wh(fn,"users",t.uid);await um(k,{displayName:e||null,photoURL:M,updatedAt:bh()},{merge:!0}),l("Profile updated")}catch(M){l((M==null?void 0:M.message)||"Failed to update"),console.error("[Profile] Save failed:",M)}finally{o(!1)}}}return d.jsx("div",{className:"grid place-items-center",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Your profile"}),d.jsx(Je,{children:d.jsx(Ze,{children:d.jsxs("form",{className:"space-y-4",onSubmit:N,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[r?d.jsx("img",{src:r,alt:"avatar",className:"w-12 h-12 rounded-full border border-slate-200 dark:border-slate-700"}):d.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-600 text-white grid place-items-center text-lg",children:(e||(t==null?void 0:t.email)||"?").slice(0,1).toUpperCase()}),d.jsx("div",{className:"text-sm text-slate-500",children:"Update your display info"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Display name"}),d.jsx($n,{type:"text",value:e,onChange:R=>n(R.target.value),disabled:i})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Upload photo"}),d.jsx("input",{type:"file",accept:"image/*",onChange:R=>{x("");const M=R.target.files&&R.target.files[0]?R.target.files[0]:null;if(!M){h(null),T("");return}const k=["image/jpeg","image/png","image/webp"],w=5*1024*1024;if(!k.includes(M.type)){x("Only JPG, PNG or WebP images are allowed."),h(null),T("");return}if(M.size>w){x("File too large. Max size is 5MB."),h(null),T("");return}h(M);const S=new FileReader;S.onload=()=>T(String(S.result||"")),S.readAsDataURL(M)},disabled:i,className:"block w-full text-sm text-slate-700 dark:text-slate-200"}),d.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPEG/PNG up to ~5MB."}),E?d.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[d.jsx("img",{src:E,alt:"preview",className:"w-16 h-16 rounded-full border border-slate-200 dark:border-slate-700 object-cover"}),d.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>{h(null),T(""),x("")},children:"Remove"})]}):null,y?d.jsx("p",{className:"text-sm text-red-600 mt-1",children:y}):null]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Or photo URL"}),d.jsx($n,{type:"url",value:r,onChange:R=>s(R.target.value),disabled:i})]}),f?d.jsx("p",{className:"text-sm text-slate-500",children:"Uploading photo…"}):null,a?d.jsx("p",{className:`text-sm ${a==="Profile updated"?"text-green-600":"text-red-600"}`,children:a}):null,d.jsx(ve,{type:"submit",className:"w-full",disabled:i||f,children:i?"Saving…":"Save changes"})]})})}),v?d.jsx(Je,{className:"mt-4",children:d.jsx(Ze,{children:d.jsxs("div",{className:"space-y-2 text-sm text-slate-700 dark:text-slate-300",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Email"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.email||"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"User ID"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.uid})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Phone"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.phoneNumber||"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Providers"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:(v.providerIds||[]).length?v.providerIds.join(", "):"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Role"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.role})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Created"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.createdAt?Tm(v.createdAt):"—"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Updated"}),d.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.updatedAt?Tm(v.updatedAt):"—"})]})]})})}):null]})})}function uz(){return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[d.jsx(O4,{}),d.jsx("main",{className:"mx-auto max-w-7xl px-4 py-6",children:d.jsxs(gR,{children:[d.jsx(Gr,{path:"/",element:d.jsx(ou,{children:d.jsx(Z3,{})})}),d.jsx(Gr,{path:"/daily-checkin",element:d.jsx(ou,{children:d.jsx(nz,{})})}),d.jsx(Gr,{path:"/upload-report",element:d.jsx(ou,{children:d.jsx(rz,{})})}),d.jsx(Gr,{path:"/profile",element:d.jsx(ou,{children:d.jsx(cz,{})})}),d.jsx(Gr,{path:"/login",element:d.jsx(ez,{})}),d.jsx(Gr,{path:"/signup",element:d.jsx(tz,{})}),d.jsx(Gr,{path:"*",element:d.jsx(oz,{})})]})}),d.jsx(iz,{}),d.jsx(lz,{})]})}lT(document.getElementById("root")).render(d.jsx(PR,{children:d.jsx(Q3,{children:d.jsx(D4,{children:d.jsx(TR,{children:d.jsx(uz,{})})})})}));
